var HC=Object.defineProperty;var zC=(n,t,e)=>t in n?HC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ii=(n,t,e)=>(zC(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var Ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function VC(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),e}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Fy;(function(n){(function(t){var e=typeof Ss=="object"?Ss:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),r=i(n);typeof e.Reflect>"u"?e.Reflect=n:r=i(e.Reflect,r),t(r);function i(o,a){return function(s,l){typeof o[s]!="function"&&Object.defineProperty(o,s,{configurable:!0,writable:!0,value:l}),a&&a(s,l)}}})(function(t){var e=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",i=r&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=r&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",s={__proto__:[]}instanceof Array,l=!a&&!s,u={create:a?function(){return tt(Object.create(null))}:s?function(){return tt({__proto__:null})}:function(){return tt({})},has:l?function(P,F){return e.call(P,F)}:function(P,F){return F in P},get:l?function(P,F){return e.call(P,F)?P[F]:void 0}:function(P,F){return P[F]}},c=Object.getPrototypeOf(Function),h=typeof process=="object"&&process["env"]&&process["env"].REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!h&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:w(),d=!h&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:G(),m=!h&&typeof WeakMap=="function"?WeakMap:j(),g=new m;function p(P,F,H,Z){if(k(H)){if(!mt(P))throw new TypeError;if(!X(F))throw new TypeError;return A(P,F)}else{if(!mt(P))throw new TypeError;if(!it(F))throw new TypeError;if(!it(Z)&&!k(Z)&&!pt(Z))throw new TypeError;return pt(Z)&&(Z=void 0),H=at(H),N(P,F,H,Z)}}t("decorate",p);function v(P,F){function H(Z,dt){if(!it(Z))throw new TypeError;if(!k(dt)&&!R(dt))throw new TypeError;q(P,F,Z,dt)}return H}t("metadata",v);function y(P,F,H,Z){if(!it(H))throw new TypeError;return k(Z)||(Z=at(Z)),q(P,F,H,Z)}t("defineMetadata",y);function _(P,F,H){if(!it(F))throw new TypeError;return k(H)||(H=at(H)),et(P,F,H)}t("hasMetadata",_);function T(P,F,H){if(!it(F))throw new TypeError;return k(H)||(H=at(H)),L(P,F,H)}t("hasOwnMetadata",T);function E(P,F,H){if(!it(F))throw new TypeError;return k(H)||(H=at(H)),D(P,F,H)}t("getMetadata",E);function S(P,F,H){if(!it(F))throw new TypeError;return k(H)||(H=at(H)),B(P,F,H)}t("getOwnMetadata",S);function x(P,F){if(!it(P))throw new TypeError;return k(F)||(F=at(F)),Q(P,F)}t("getMetadataKeys",x);function O(P,F){if(!it(P))throw new TypeError;return k(F)||(F=at(F)),rt(P,F)}t("getOwnMetadataKeys",O);function b(P,F,H){if(!it(F))throw new TypeError;k(H)||(H=at(H));var Z=U(F,H,!1);if(k(Z)||!Z.delete(P))return!1;if(Z.size>0)return!0;var dt=g.get(F);return dt.delete(H),dt.size>0||g.delete(F),!0}t("deleteMetadata",b);function A(P,F){for(var H=P.length-1;H>=0;--H){var Z=P[H],dt=Z(F);if(!k(dt)&&!pt(dt)){if(!X(dt))throw new TypeError;F=dt}}return F}function N(P,F,H,Z){for(var dt=P.length-1;dt>=0;--dt){var Tt=P[dt],ot=Tt(F,H,Z);if(!k(ot)&&!pt(ot)){if(!it(ot))throw new TypeError;Z=ot}}return Z}function U(P,F,H){var Z=g.get(P);if(k(Z)){if(!H)return;Z=new f,g.set(P,Z)}var dt=Z.get(F);if(k(dt)){if(!H)return;dt=new f,Z.set(F,dt)}return dt}function et(P,F,H){var Z=L(P,F,H);if(Z)return!0;var dt=M(F);return pt(dt)?!1:et(P,dt,H)}function L(P,F,H){var Z=U(F,H,!1);return k(Z)?!1:W(Z.has(P))}function D(P,F,H){var Z=L(P,F,H);if(Z)return B(P,F,H);var dt=M(F);if(!pt(dt))return D(P,dt,H)}function B(P,F,H){var Z=U(F,H,!1);if(!k(Z))return Z.get(P)}function q(P,F,H,Z){var dt=U(H,Z,!0);dt.set(P,F)}function Q(P,F){var H=rt(P,F),Z=M(P);if(Z===null)return H;var dt=Q(Z,F);if(dt.length<=0)return H;if(H.length<=0)return dt;for(var Tt=new d,ot=[],wt=0,yt=H;wt<yt.length;wt++){var At=yt[wt],bt=Tt.has(At);bt||(Tt.add(At),ot.push(At))}for(var Rt=0,Nt=dt;Rt<Nt.length;Rt++){var At=Nt[Rt],bt=Tt.has(At);bt||(Tt.add(At),ot.push(At))}return ot}function rt(P,F){var H=[],Z=U(P,F,!1);if(k(Z))return H;for(var dt=Z.keys(),Tt=z(dt),ot=0;;){var wt=K(Tt);if(!wt)return H.length=ot,H;var yt=Y(wt);try{H[ot]=yt}catch(At){try{ct(Tt)}finally{throw At}}ot++}}function $(P){if(P===null)return 1;switch(typeof P){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return P===null?1:6;default:return 6}}function k(P){return P===void 0}function pt(P){return P===null}function J(P){return typeof P=="symbol"}function it(P){return typeof P=="object"?P!==null:typeof P=="function"}function vt(P,F){switch($(P)){case 0:return P;case 1:return P;case 2:return P;case 3:return P;case 4:return P;case 5:return P}var H=F===3?"string":F===5?"number":"default",Z=C(P,i);if(Z!==void 0){var dt=Z.call(P,H);if(it(dt))throw new TypeError;return dt}return gt(P,H==="default"?"number":H)}function gt(P,F){if(F==="string"){var H=P.toString;if(_t(H)){var Z=H.call(P);if(!it(Z))return Z}var dt=P.valueOf;if(_t(dt)){var Z=dt.call(P);if(!it(Z))return Z}}else{var dt=P.valueOf;if(_t(dt)){var Z=dt.call(P);if(!it(Z))return Z}var Tt=P.toString;if(_t(Tt)){var Z=Tt.call(P);if(!it(Z))return Z}}throw new TypeError}function W(P){return!!P}function ft(P){return""+P}function at(P){var F=vt(P,3);return J(F)?F:ft(F)}function mt(P){return Array.isArray?Array.isArray(P):P instanceof Object?P instanceof Array:Object.prototype.toString.call(P)==="[object Array]"}function _t(P){return typeof P=="function"}function X(P){return typeof P=="function"}function R(P){switch($(P)){case 3:return!0;case 4:return!0;default:return!1}}function C(P,F){var H=P[F];if(H!=null){if(!_t(H))throw new TypeError;return H}}function z(P){var F=C(P,o);if(!_t(F))throw new TypeError;var H=F.call(P);if(!it(H))throw new TypeError;return H}function Y(P){return P.value}function K(P){var F=P.next();return F.done?!1:F}function ct(P){var F=P.return;F&&F.call(P)}function M(P){var F=Object.getPrototypeOf(P);if(typeof P!="function"||P===c||F!==c)return F;var H=P.prototype,Z=H&&Object.getPrototypeOf(H);if(Z==null||Z===Object.prototype)return F;var dt=Z.constructor;return typeof dt!="function"||dt===P?F:dt}function w(){var P={},F=[],H=function(){function ot(wt,yt,At){this._index=0,this._keys=wt,this._values=yt,this._selector=At}return ot.prototype["@@iterator"]=function(){return this},ot.prototype[o]=function(){return this},ot.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var yt=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=F,this._values=F):this._index++,{value:yt,done:!1}}return{value:void 0,done:!0}},ot.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=F,this._values=F),wt},ot.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=F,this._values=F),{value:wt,done:!0}},ot}();return function(){function ot(){this._keys=[],this._values=[],this._cacheKey=P,this._cacheIndex=-2}return Object.defineProperty(ot.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ot.prototype.has=function(wt){return this._find(wt,!1)>=0},ot.prototype.get=function(wt){var yt=this._find(wt,!1);return yt>=0?this._values[yt]:void 0},ot.prototype.set=function(wt,yt){var At=this._find(wt,!0);return this._values[At]=yt,this},ot.prototype.delete=function(wt){var yt=this._find(wt,!1);if(yt>=0){for(var At=this._keys.length,bt=yt+1;bt<At;bt++)this._keys[bt-1]=this._keys[bt],this._values[bt-1]=this._values[bt];return this._keys.length--,this._values.length--,wt===this._cacheKey&&(this._cacheKey=P,this._cacheIndex=-2),!0}return!1},ot.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=P,this._cacheIndex=-2},ot.prototype.keys=function(){return new H(this._keys,this._values,Z)},ot.prototype.values=function(){return new H(this._keys,this._values,dt)},ot.prototype.entries=function(){return new H(this._keys,this._values,Tt)},ot.prototype["@@iterator"]=function(){return this.entries()},ot.prototype[o]=function(){return this.entries()},ot.prototype._find=function(wt,yt){return this._cacheKey!==wt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=wt)),this._cacheIndex<0&&yt&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},ot}();function Z(ot,wt){return ot}function dt(ot,wt){return wt}function Tt(ot,wt){return[ot,wt]}}function G(){return function(){function P(){this._map=new f}return Object.defineProperty(P.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),P.prototype.has=function(F){return this._map.has(F)},P.prototype.add=function(F){return this._map.set(F,F),this},P.prototype.delete=function(F){return this._map.delete(F)},P.prototype.clear=function(){this._map.clear()},P.prototype.keys=function(){return this._map.keys()},P.prototype.values=function(){return this._map.values()},P.prototype.entries=function(){return this._map.entries()},P.prototype["@@iterator"]=function(){return this.keys()},P.prototype[o]=function(){return this.keys()},P}()}function j(){var P=16,F=u.create(),H=Z();return function(){function yt(){this._key=Z()}return yt.prototype.has=function(At){var bt=dt(At,!1);return bt!==void 0?u.has(bt,this._key):!1},yt.prototype.get=function(At){var bt=dt(At,!1);return bt!==void 0?u.get(bt,this._key):void 0},yt.prototype.set=function(At,bt){var Rt=dt(At,!0);return Rt[this._key]=bt,this},yt.prototype.delete=function(At){var bt=dt(At,!1);return bt!==void 0?delete bt[this._key]:!1},yt.prototype.clear=function(){this._key=Z()},yt}();function Z(){var yt;do yt="@@WeakMap@@"+wt();while(u.has(F,yt));return F[yt]=!0,yt}function dt(yt,At){if(!e.call(yt,H)){if(!At)return;Object.defineProperty(yt,H,{value:u.create()})}return yt[H]}function Tt(yt,At){for(var bt=0;bt<At;++bt)yt[bt]=Math.random()*255|0;return yt}function ot(yt){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(yt)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(yt)):Tt(new Uint8Array(yt),yt):Tt(new Array(yt),yt)}function wt(){var yt=ot(P);yt[6]=yt[6]&79|64,yt[8]=yt[8]&191|128;for(var At="",bt=0;bt<P;++bt){var Rt=yt[bt];(bt===4||bt===6||bt===8)&&(At+="-"),Rt<16&&(At+="0"),At+=Rt.toString(16).toLowerCase()}return At}}function tt(P){return P.__=void 0,delete P.__,P}})})(Fy||(Fy={}));/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function l_(n,t){const e=new Set(n.split(","));return t?r=>e.has(r.toLowerCase()):r=>e.has(r)}const Ee={},Vl=[],Xn=()=>{},WC=()=>!1,md=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),u_=n=>n.startsWith("onUpdate:"),We=Object.assign,c_=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},XC=Object.prototype.hasOwnProperty,se=(n,t)=>XC.call(n,t),Wt=Array.isArray,Wl=n=>gd(n)==="[object Map]",$C=n=>gd(n)==="[object Set]",qt=n=>typeof n=="function",en=n=>typeof n=="string",vd=n=>typeof n=="symbol",Ne=n=>n!==null&&typeof n=="object",vT=n=>(Ne(n)||qt(n))&&qt(n.then)&&qt(n.catch),jC=Object.prototype.toString,gd=n=>jC.call(n),YC=n=>gd(n).slice(8,-1),qC=n=>gd(n)==="[object Object]",h_=n=>en(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Th=l_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_d=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},KC=/-(\w)/g,Jr=_d(n=>n.replace(KC,(t,e)=>e?e.toUpperCase():"")),ZC=/\B([A-Z])/g,Zs=_d(n=>n.replace(ZC,"-$1").toLowerCase()),yd=_d(n=>n.charAt(0).toUpperCase()+n.slice(1)),ip=_d(n=>n?`on${yd(n)}`:""),go=(n,t)=>!Object.is(n,t),wh=(n,t)=>{for(let e=0;e<n.length;e++)n[e](t)},tf=(n,t,e)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:e})},ev=n=>{const t=parseFloat(n);return isNaN(t)?n:t},JC=n=>{const t=en(n)?Number(n):NaN;return isNaN(t)?n:t};let Uy;const gT=()=>Uy||(Uy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function f_(n){if(Wt(n)){const t={};for(let e=0;e<n.length;e++){const r=n[e],i=en(r)?nR(r):f_(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(en(n)||Ne(n))return n}const QC=/;(?![^(]*\))/g,tR=/:([^]+)/,eR=/\/\*[^]*?\*\//g;function nR(n){const t={};return n.replace(eR,"").split(QC).forEach(e=>{if(e){const r=e.split(tR);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function d_(n){let t="";if(en(n))t=n;else if(Wt(n))for(let e=0;e<n.length;e++){const r=d_(n[e]);r&&(t+=r+" ")}else if(Ne(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const rR="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iR=l_(rR);function _T(n){return!!n||n===""}/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vn;class oR{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Vn,!t&&Vn&&(this.index=(Vn.scopes||(Vn.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Vn;try{return Vn=this,t()}finally{Vn=e}}}on(){Vn=this}off(){Vn=this.parent}stop(t){if(this._active){let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function aR(n,t=Vn){t&&t.active&&t.effects.push(n)}function yT(){return Vn}function sR(n){Vn&&Vn.cleanups.push(n)}let aa;class p_{constructor(t,e,r,i){this.fn=t,this.trigger=e,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,aR(this,i)}get dirty(){if(this._dirtyLevel===1){Pa();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(lR(e.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),Ia()}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=co,e=aa;try{return co=!0,aa=this,this._runnings++,By(this),this.fn()}finally{Gy(this),this._runnings--,aa=e,co=t}}stop(){var t;this.active&&(By(this),Gy(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function lR(n){return n.value}function By(n){n._trackId++,n._depsLength=0}function Gy(n){if(n.deps&&n.deps.length>n._depsLength){for(let t=n._depsLength;t<n.deps.length;t++)xT(n.deps[t],n);n.deps.length=n._depsLength}}function xT(n,t){const e=n.get(t);e!==void 0&&t._trackId!==e&&(n.delete(t),n.size===0&&n.cleanup())}let co=!0,nv=0;const bT=[];function Pa(){bT.push(co),co=!1}function Ia(){const n=bT.pop();co=n===void 0?!0:n}function m_(){nv++}function v_(){for(nv--;!nv&&rv.length;)rv.shift()()}function ST(n,t,e){if(t.get(n)!==n._trackId){t.set(n,n._trackId);const r=n.deps[n._depsLength];r!==t?(r&&xT(r,n),n.deps[n._depsLength++]=t):n._depsLength++}}const rv=[];function ET(n,t,e){m_();for(const r of n.keys())if(r._dirtyLevel<t&&n.get(r)===r._trackId){const i=r._dirtyLevel;r._dirtyLevel=t,i===0&&(r._shouldSchedule=!0,r.trigger())}TT(n),v_()}function TT(n){for(const t of n.keys())t.scheduler&&t._shouldSchedule&&(!t._runnings||t.allowRecurse)&&n.get(t)===t._trackId&&(t._shouldSchedule=!1,rv.push(t.scheduler))}const wT=(n,t)=>{const e=new Map;return e.cleanup=n,e.computed=t,e},iv=new WeakMap,sa=Symbol(""),ov=Symbol("");function Ln(n,t,e){if(co&&aa){let r=iv.get(n);r||iv.set(n,r=new Map);let i=r.get(e);i||r.set(e,i=wT(()=>r.delete(e))),ST(aa,i)}}function Ci(n,t,e,r,i,o){const a=iv.get(n);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(e==="length"&&Wt(n)){const l=Number(r);a.forEach((u,c)=>{(c==="length"||!vd(c)&&c>=l)&&s.push(u)})}else switch(e!==void 0&&s.push(a.get(e)),t){case"add":Wt(n)?h_(e)&&s.push(a.get("length")):(s.push(a.get(sa)),Wl(n)&&s.push(a.get(ov)));break;case"delete":Wt(n)||(s.push(a.get(sa)),Wl(n)&&s.push(a.get(ov)));break;case"set":Wl(n)&&s.push(a.get(sa));break}m_();for(const l of s)l&&ET(l,2);v_()}const uR=l_("__proto__,__v_isRef,__isVue"),AT=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(vd)),ky=cR();function cR(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const r=le(this);for(let o=0,a=this.length;o<a;o++)Ln(r,"get",o+"");const i=r[t](...e);return i===-1||i===!1?r[t](...e.map(le)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){Pa(),m_();const r=le(this)[t].apply(this,e);return v_(),Ia(),r}}),n}function hR(n){const t=le(this);return Ln(t,"has",n),t.hasOwnProperty(n)}class MT{constructor(t=!1,e=!1){this._isReadonly=t,this._shallow=e}get(t,e,r){const i=this._isReadonly,o=this._shallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return o;if(e==="__v_raw")return r===(i?o?TR:IT:o?PT:RT).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=Wt(t);if(!i){if(a&&se(ky,e))return Reflect.get(ky,e,r);if(e==="hasOwnProperty")return hR}const s=Reflect.get(t,e,r);return(vd(e)?AT.has(e):uR(e))||(i||Ln(t,"get",e),o)?s:Nn(s)?a&&h_(e)?s:s.value:Ne(s)?i?DT(s):Oa(s):s}}class CT extends MT{constructor(t=!1){super(!1,t)}set(t,e,r,i){let o=t[e];if(!this._shallow){const l=Ns(o);if(!ef(r)&&!Ns(r)&&(o=le(o),r=le(r)),!Wt(t)&&Nn(o)&&!Nn(r))return l?!1:(o.value=r,!0)}const a=Wt(t)&&h_(e)?Number(e)<t.length:se(t,e),s=Reflect.set(t,e,r,i);return t===le(i)&&(a?go(r,o)&&Ci(t,"set",e,r):Ci(t,"add",e,r)),s}deleteProperty(t,e){const r=se(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&r&&Ci(t,"delete",e,void 0),i}has(t,e){const r=Reflect.has(t,e);return(!vd(e)||!AT.has(e))&&Ln(t,"has",e),r}ownKeys(t){return Ln(t,"iterate",Wt(t)?"length":sa),Reflect.ownKeys(t)}}class fR extends MT{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const dR=new CT,pR=new fR,mR=new CT(!0),g_=n=>n,xd=n=>Reflect.getPrototypeOf(n);function lc(n,t,e=!1,r=!1){n=n.__v_raw;const i=le(n),o=le(t);e||(go(t,o)&&Ln(i,"get",t),Ln(i,"get",o));const{has:a}=xd(i),s=r?g_:e?x_:lu;if(a.call(i,t))return s(n.get(t));if(a.call(i,o))return s(n.get(o));n!==i&&n.get(t)}function uc(n,t=!1){const e=this.__v_raw,r=le(e),i=le(n);return t||(go(n,i)&&Ln(r,"has",n),Ln(r,"has",i)),n===i?e.has(n):e.has(n)||e.has(i)}function cc(n,t=!1){return n=n.__v_raw,!t&&Ln(le(n),"iterate",sa),Reflect.get(n,"size",n)}function Hy(n){n=le(n);const t=le(this);return xd(t).has.call(t,n)||(t.add(n),Ci(t,"add",n,n)),this}function zy(n,t){t=le(t);const e=le(this),{has:r,get:i}=xd(e);let o=r.call(e,n);o||(n=le(n),o=r.call(e,n));const a=i.call(e,n);return e.set(n,t),o?go(t,a)&&Ci(e,"set",n,t):Ci(e,"add",n,t),this}function Vy(n){const t=le(this),{has:e,get:r}=xd(t);let i=e.call(t,n);i||(n=le(n),i=e.call(t,n)),r&&r.call(t,n);const o=t.delete(n);return i&&Ci(t,"delete",n,void 0),o}function Wy(){const n=le(this),t=n.size!==0,e=n.clear();return t&&Ci(n,"clear",void 0,void 0),e}function hc(n,t){return function(r,i){const o=this,a=o.__v_raw,s=le(a),l=t?g_:n?x_:lu;return!n&&Ln(s,"iterate",sa),a.forEach((u,c)=>r.call(i,l(u),l(c),o))}}function fc(n,t,e){return function(...r){const i=this.__v_raw,o=le(i),a=Wl(o),s=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,u=i[n](...r),c=e?g_:t?x_:lu;return!t&&Ln(o,"iterate",l?ov:sa),{next(){const{value:h,done:f}=u.next();return f?{value:h,done:f}:{value:s?[c(h[0]),c(h[1])]:c(h),done:f}},[Symbol.iterator](){return this}}}}function ki(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function vR(){const n={get(o){return lc(this,o)},get size(){return cc(this)},has:uc,add:Hy,set:zy,delete:Vy,clear:Wy,forEach:hc(!1,!1)},t={get(o){return lc(this,o,!1,!0)},get size(){return cc(this)},has:uc,add:Hy,set:zy,delete:Vy,clear:Wy,forEach:hc(!1,!0)},e={get(o){return lc(this,o,!0)},get size(){return cc(this,!0)},has(o){return uc.call(this,o,!0)},add:ki("add"),set:ki("set"),delete:ki("delete"),clear:ki("clear"),forEach:hc(!0,!1)},r={get(o){return lc(this,o,!0,!0)},get size(){return cc(this,!0)},has(o){return uc.call(this,o,!0)},add:ki("add"),set:ki("set"),delete:ki("delete"),clear:ki("clear"),forEach:hc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=fc(o,!1,!1),e[o]=fc(o,!0,!1),t[o]=fc(o,!1,!0),r[o]=fc(o,!0,!0)}),[n,e,t,r]}const[gR,_R,yR,xR]=vR();function __(n,t){const e=t?n?xR:yR:n?_R:gR;return(r,i,o)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(se(e,i)&&i in r?e:r,i,o)}const bR={get:__(!1,!1)},SR={get:__(!1,!0)},ER={get:__(!0,!1)},RT=new WeakMap,PT=new WeakMap,IT=new WeakMap,TR=new WeakMap;function wR(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function AR(n){return n.__v_skip||!Object.isExtensible(n)?0:wR(YC(n))}function Oa(n){return Ns(n)?n:y_(n,!1,dR,bR,RT)}function OT(n){return y_(n,!1,mR,SR,PT)}function DT(n){return y_(n,!0,pR,ER,IT)}function y_(n,t,e,r,i){if(!Ne(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const o=i.get(n);if(o)return o;const a=AR(n);if(a===0)return n;const s=new Proxy(n,a===2?r:e);return i.set(n,s),s}function Es(n){return Ns(n)?Es(n.__v_raw):!!(n&&n.__v_isReactive)}function Ns(n){return!!(n&&n.__v_isReadonly)}function ef(n){return!!(n&&n.__v_isShallow)}function LT(n){return Es(n)||Ns(n)}function le(n){const t=n&&n.__v_raw;return t?le(t):n}function NT(n){return tf(n,"__v_skip",!0),n}const lu=n=>Ne(n)?Oa(n):n,x_=n=>Ne(n)?DT(n):n;class FT{constructor(t,e,r,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new p_(()=>t(this._value),()=>Ah(this,1),()=>this.dep&&TT(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=le(this);return(!t._cacheable||t.effect.dirty)&&go(t._value,t._value=t.effect.run())&&Ah(t,2),UT(t),t.effect._dirtyLevel>=1&&Ah(t,1),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function MR(n,t,e=!1){let r,i;const o=qt(n);return o?(r=n,i=Xn):(r=n.get,i=n.set),new FT(r,i,o||!i,e)}function UT(n){co&&aa&&(n=le(n),ST(aa,n.dep||(n.dep=wT(()=>n.dep=void 0,n instanceof FT?n:void 0))))}function Ah(n,t=2,e){n=le(n);const r=n.dep;r&&ET(r,t)}function Nn(n){return!!(n&&n.__v_isRef===!0)}function Be(n){return BT(n,!1)}function wr(n){return BT(n,!0)}function BT(n,t){return Nn(n)?n:new CR(n,t)}class CR{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:le(t),this._value=e?t:lu(t)}get value(){return UT(this),this._value}set value(t){const e=this.__v_isShallow||ef(t)||Ns(t);t=e?t:le(t),go(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:lu(t),Ah(this,2))}}function Ri(n){return Nn(n)?n.value:n}const RR={get:(n,t,e)=>Ri(Reflect.get(n,t,e)),set:(n,t,e,r)=>{const i=n[t];return Nn(i)&&!Nn(e)?(i.value=e,!0):Reflect.set(n,t,e,r)}};function GT(n){return Es(n)?n:new Proxy(n,RR)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ho(n,t,e,r){let i;try{i=r?n(...r):n()}catch(o){bd(o,t,e)}return i}function sr(n,t,e,r){if(qt(n)){const o=ho(n,t,e,r);return o&&vT(o)&&o.catch(a=>{bd(a,t,e)}),o}const i=[];for(let o=0;o<n.length;o++)i.push(sr(n[o],t,e,r));return i}function bd(n,t,e,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=`https://vuejs.org/error-reference/#runtime-${e}`;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](n,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){ho(l,null,10,[n,a,s]);return}}PR(n,e,i,r)}function PR(n,t,e,r=!0){console.error(n)}let uu=!1,av=!1;const yn=[];let Vr=0;const Ts=[];let Qi=null,jo=0;const kT=Promise.resolve();let b_=null;function ku(n){const t=b_||kT;return n?t.then(this?n.bind(this):n):t}function IR(n){let t=Vr+1,e=yn.length;for(;t<e;){const r=t+e>>>1,i=yn[r],o=cu(i);o<n||o===n&&i.pre?t=r+1:e=r}return t}function S_(n){(!yn.length||!yn.includes(n,uu&&n.allowRecurse?Vr+1:Vr))&&(n.id==null?yn.push(n):yn.splice(IR(n.id),0,n),HT())}function HT(){!uu&&!av&&(av=!0,b_=kT.then(VT))}function OR(n){const t=yn.indexOf(n);t>Vr&&yn.splice(t,1)}function DR(n){Wt(n)?Ts.push(...n):(!Qi||!Qi.includes(n,n.allowRecurse?jo+1:jo))&&Ts.push(n),HT()}function Xy(n,t,e=uu?Vr+1:0){for(;e<yn.length;e++){const r=yn[e];if(r&&r.pre){if(n&&r.id!==n.uid)continue;yn.splice(e,1),e--,r()}}}function zT(n){if(Ts.length){const t=[...new Set(Ts)].sort((e,r)=>cu(e)-cu(r));if(Ts.length=0,Qi){Qi.push(...t);return}for(Qi=t,jo=0;jo<Qi.length;jo++)Qi[jo]();Qi=null,jo=0}}const cu=n=>n.id==null?1/0:n.id,LR=(n,t)=>{const e=cu(n)-cu(t);if(e===0){if(n.pre&&!t.pre)return-1;if(t.pre&&!n.pre)return 1}return e};function VT(n){av=!1,uu=!0,yn.sort(LR);const t=Xn;try{for(Vr=0;Vr<yn.length;Vr++){const e=yn[Vr];e&&e.active!==!1&&ho(e,null,14)}}finally{Vr=0,yn.length=0,zT(),uu=!1,b_=null,(yn.length||Ts.length)&&VT()}}function NR(n,t,...e){if(n.isUnmounted)return;const r=n.vnode.props||Ee;let i=e;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in r){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:h,trim:f}=r[c]||Ee;f&&(i=e.map(d=>en(d)?d.trim():d)),h&&(i=e.map(ev))}let s,l=r[s=ip(t)]||r[s=ip(Jr(t))];!l&&o&&(l=r[s=ip(Zs(t))]),l&&sr(l,n,6,i);const u=r[s+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[s])return;n.emitted[s]=!0,sr(u,n,6,i)}}function WT(n,t,e=!1){const r=t.emitsCache,i=r.get(n);if(i!==void 0)return i;const o=n.emits;let a={},s=!1;if(!qt(n)){const l=u=>{const c=WT(u,t,!0);c&&(s=!0,We(a,c))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!o&&!s?(Ne(n)&&r.set(n,null),null):(Wt(o)?o.forEach(l=>a[l]=null):We(a,o),Ne(n)&&r.set(n,a),a)}function Sd(n,t){return!n||!md(t)?!1:(t=t.slice(2).replace(/Once$/,""),se(n,t[0].toLowerCase()+t.slice(1))||se(n,Zs(t))||se(n,t))}let Mn=null,XT=null;function nf(n){const t=Mn;return Mn=n,XT=n&&n.type.__scopeId||null,t}function FR(n,t=Mn,e){if(!t||n._n)return n;const r=(...i)=>{r._d&&r0(-1);const o=nf(t);let a;try{a=n(...i)}finally{nf(o),r._d&&r0(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function op(n){const{type:t,vnode:e,proxy:r,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:h,data:f,setupState:d,ctx:m,inheritAttrs:g}=n;let p,v;const y=nf(n);try{if(e.shapeFlag&4){const T=i||r,E=T;p=kr(c.call(E,T,h,o,d,f,m)),v=l}else{const T=t;p=kr(T.length>1?T(o,{attrs:l,slots:s,emit:u}):T(o,null)),v=t.props?l:UR(l)}}catch(T){bd(T,n,1),p=Et(Yr)}let _=p;if(v&&g!==!1){const T=Object.keys(v),{shapeFlag:E}=_;T.length&&E&7&&(a&&T.some(u_)&&(v=BR(v,a)),_=_o(_,v))}return e.dirs&&(_=_o(_),_.dirs=_.dirs?_.dirs.concat(e.dirs):e.dirs),e.transition&&(_.transition=e.transition),p=_,nf(y),p}const UR=n=>{let t;for(const e in n)(e==="class"||e==="style"||md(e))&&((t||(t={}))[e]=n[e]);return t},BR=(n,t)=>{const e={};for(const r in n)(!u_(r)||!(r.slice(9)in t))&&(e[r]=n[r]);return e};function GR(n,t,e){const{props:r,children:i,component:o}=n,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return r?$y(r,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const f=c[h];if(a[f]!==r[f]&&!Sd(u,f))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===a?!1:r?a?$y(r,a,u):!0:!!a;return!1}function $y(n,t,e){const r=Object.keys(t);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==n[o]&&!Sd(e,o))return!0}return!1}function kR({vnode:n,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=t.vnode).el=e,t=t.parent;else break}}const $T="components";function HR(n,t){return VR($T,n,!0,t)||n}const zR=Symbol.for("v-ndc");function VR(n,t,e=!0,r=!1){const i=Mn||un;if(i){const o=i.type;if(n===$T){const s=FP(o,!1);if(s&&(s===t||s===Jr(t)||s===yd(Jr(t))))return o}const a=jy(i[n]||o[n],t)||jy(i.appContext[n],t);return!a&&r?o:a}}function jy(n,t){return n&&(n[t]||n[Jr(t)]||n[yd(Jr(t))])}const WR=n=>n.__isSuspense;function XR(n,t){t&&t.pendingBranch?Wt(n)?t.effects.push(...n):t.effects.push(n):DR(n)}const $R=Symbol.for("v-scx"),jR=()=>tn($R);function E_(n,t){return T_(n,null,t)}const dc={};function Pi(n,t,e){return T_(n,t,e)}function T_(n,t,{immediate:e,deep:r,flush:i,once:o,onTrack:a,onTrigger:s}=Ee){if(t&&o){const S=t;t=(...x)=>{S(...x),E()}}const l=un,u=S=>r===!0?S:ea(S,r===!1?1:void 0);let c,h=!1,f=!1;if(Nn(n)?(c=()=>n.value,h=ef(n)):Es(n)?(c=()=>u(n),h=!0):Wt(n)?(f=!0,h=n.some(S=>Es(S)||ef(S)),c=()=>n.map(S=>{if(Nn(S))return S.value;if(Es(S))return u(S);if(qt(S))return ho(S,l,2)})):qt(n)?t?c=()=>ho(n,l,2):c=()=>(d&&d(),sr(n,l,3,[m])):c=Xn,t&&r){const S=c;c=()=>ea(S())}let d,m=S=>{d=_.onStop=()=>{ho(S,l,4),d=_.onStop=void 0}},g;if(Md)if(m=Xn,t?e&&sr(t,l,3,[c(),f?[]:void 0,m]):c(),i==="sync"){const S=jR();g=S.__watcherHandles||(S.__watcherHandles=[])}else return Xn;let p=f?new Array(n.length).fill(dc):dc;const v=()=>{if(!(!_.active||!_.dirty))if(t){const S=_.run();(r||h||(f?S.some((x,O)=>go(x,p[O])):go(S,p)))&&(d&&d(),sr(t,l,3,[S,p===dc?void 0:f&&p[0]===dc?[]:p,m]),p=S)}else _.run()};v.allowRecurse=!!t;let y;i==="sync"?y=v:i==="post"?y=()=>Rn(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),y=()=>S_(v));const _=new p_(c,Xn,y),T=yT(),E=()=>{_.stop(),T&&c_(T.effects,_)};return t?e?v():p=_.run():i==="post"?Rn(_.run.bind(_),l&&l.suspense):_.run(),g&&g.push(E),E}function YR(n,t,e){const r=this.proxy,i=en(n)?n.includes(".")?jT(r,n):()=>r[n]:n.bind(r,r);let o;qt(t)?o=t:(o=t.handler,e=t);const a=Hu(this),s=T_(i,o.bind(r),e);return a(),s}function jT(n,t){const e=t.split(".");return()=>{let r=n;for(let i=0;i<e.length&&r;i++)r=r[e[i]];return r}}function ea(n,t,e=0,r){if(!Ne(n)||n.__v_skip)return n;if(t&&t>0){if(e>=t)return n;e++}if(r=r||new Set,r.has(n))return n;if(r.add(n),Nn(n))ea(n.value,t,e,r);else if(Wt(n))for(let i=0;i<n.length;i++)ea(n[i],t,e,r);else if($C(n)||Wl(n))n.forEach(i=>{ea(i,t,e,r)});else if(qC(n))for(const i in n)ea(n[i],t,e,r);return n}function qR(n,t){if(Mn===null)return n;const e=Cd(Mn)||Mn.proxy,r=n.dirs||(n.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,s,l=Ee]=t[i];o&&(qt(o)&&(o={mounted:o,updated:o}),o.deep&&ea(a),r.push({dir:o,instance:e,value:a,oldValue:void 0,arg:s,modifiers:l}))}return n}function Ao(n,t,e,r){const i=n.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(Pa(),sr(l,e,8,[n.el,s,n,t]),Ia())}}const to=Symbol("_leaveCb"),pc=Symbol("_enterCb");function KR(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ui(()=>{n.isMounted=!0}),Da(()=>{n.isUnmounting=!0}),n}const Jn=[Function,Array],YT={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Jn,onEnter:Jn,onAfterEnter:Jn,onEnterCancelled:Jn,onBeforeLeave:Jn,onLeave:Jn,onAfterLeave:Jn,onLeaveCancelled:Jn,onBeforeAppear:Jn,onAppear:Jn,onAfterAppear:Jn,onAppearCancelled:Jn},ZR={name:"BaseTransition",props:YT,setup(n,{slots:t}){const e=Ad(),r=KR();let i;return()=>{const o=t.default&&KT(t.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){for(const g of o)if(g.type!==Yr){a=g;break}}const s=le(n),{mode:l}=s;if(r.isLeaving)return ap(a);const u=Yy(a);if(!u)return ap(a);const c=sv(u,s,r,e);lv(u,c);const h=e.subTree,f=h&&Yy(h);let d=!1;const{getTransitionKey:m}=u.type;if(m){const g=m();i===void 0?i=g:g!==i&&(i=g,d=!0)}if(f&&f.type!==Yr&&(!Yo(u,f)||d)){const g=sv(f,s,r,e);if(lv(f,g),l==="out-in")return r.isLeaving=!0,g.afterLeave=()=>{r.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},ap(a);l==="in-out"&&u.type!==Yr&&(g.delayLeave=(p,v,y)=>{const _=qT(r,f);_[String(f.key)]=f,p[to]=()=>{v(),p[to]=void 0,delete c.delayedLeave},c.delayedLeave=y})}return a}}},JR=ZR;function qT(n,t){const{leavingVNodes:e}=n;let r=e.get(t.type);return r||(r=Object.create(null),e.set(t.type,r)),r}function sv(n,t,e,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:h,onLeave:f,onAfterLeave:d,onLeaveCancelled:m,onBeforeAppear:g,onAppear:p,onAfterAppear:v,onAppearCancelled:y}=t,_=String(n.key),T=qT(e,n),E=(O,b)=>{O&&sr(O,r,9,b)},S=(O,b)=>{const A=b[1];E(O,b),Wt(O)?O.every(N=>N.length<=1)&&A():O.length<=1&&A()},x={mode:o,persisted:a,beforeEnter(O){let b=s;if(!e.isMounted)if(i)b=g||s;else return;O[to]&&O[to](!0);const A=T[_];A&&Yo(n,A)&&A.el[to]&&A.el[to](),E(b,[O])},enter(O){let b=l,A=u,N=c;if(!e.isMounted)if(i)b=p||l,A=v||u,N=y||c;else return;let U=!1;const et=O[pc]=L=>{U||(U=!0,L?E(N,[O]):E(A,[O]),x.delayedLeave&&x.delayedLeave(),O[pc]=void 0)};b?S(b,[O,et]):et()},leave(O,b){const A=String(n.key);if(O[pc]&&O[pc](!0),e.isUnmounting)return b();E(h,[O]);let N=!1;const U=O[to]=et=>{N||(N=!0,b(),et?E(m,[O]):E(d,[O]),O[to]=void 0,T[A]===n&&delete T[A])};T[A]=n,f?S(f,[O,U]):U()},clone(O){return sv(O,t,e,r)}};return x}function ap(n){if(Ed(n))return n=_o(n),n.children=null,n}function Yy(n){return Ed(n)?n.children?n.children[0]:void 0:n}function lv(n,t){n.shapeFlag&6&&n.component?lv(n.component.subTree,t):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function KT(n,t=!1,e){let r=[],i=0;for(let o=0;o<n.length;o++){let a=n[o];const s=e==null?a.key:String(e)+String(a.key!=null?a.key:o);a.type===Wn?(a.patchFlag&128&&i++,r=r.concat(KT(a.children,t,s))):(t||a.type!==Yr)&&r.push(s!=null?_o(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ae(n,t){return qt(n)?(()=>We({name:n.name},t,{setup:n}))():n}const Mh=n=>!!n.type.__asyncLoader,Ed=n=>n.type.__isKeepAlive;function QR(n,t){ZT(n,"a",t)}function tP(n,t){ZT(n,"da",t)}function ZT(n,t,e=un){const r=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Td(t,r,e),e){let i=e.parent;for(;i&&i.parent;)Ed(i.parent.vnode)&&eP(r,t,e,i),i=i.parent}}function eP(n,t,e,r){const i=Td(t,n,r,!0);QT(()=>{c_(r[t],i)},e)}function Td(n,t,e=un,r=!1){if(e){const i=e[n]||(e[n]=[]),o=t.__weh||(t.__weh=(...a)=>{if(e.isUnmounted)return;Pa();const s=Hu(e),l=sr(t,e,n,a);return s(),Ia(),l});return r?i.unshift(o):i.push(o),o}}const Fi=n=>(t,e=un)=>(!Md||n==="sp")&&Td(n,(...r)=>t(...r),e),nP=Fi("bm"),Ui=Fi("m"),rP=Fi("bu"),JT=Fi("u"),Da=Fi("bum"),QT=Fi("um"),iP=Fi("sp"),oP=Fi("rtg"),aP=Fi("rtc");function sP(n,t=un){Td("ec",n,t)}const uv=n=>n?cw(n)?Cd(n)||n.proxy:uv(n.parent):null,Xl=We(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>uv(n.parent),$root:n=>uv(n.root),$emit:n=>n.emit,$options:n=>w_(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,S_(n.update)}),$nextTick:n=>n.n||(n.n=ku.bind(n.proxy)),$watch:n=>YR.bind(n)}),sp=(n,t)=>n!==Ee&&!n.__isScriptSetup&&se(n,t),lP={get({_:n},t){const{ctx:e,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=n;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return i[t];case 4:return e[t];case 3:return o[t]}else{if(sp(r,t))return a[t]=1,r[t];if(i!==Ee&&se(i,t))return a[t]=2,i[t];if((u=n.propsOptions[0])&&se(u,t))return a[t]=3,o[t];if(e!==Ee&&se(e,t))return a[t]=4,e[t];cv&&(a[t]=0)}}const c=Xl[t];let h,f;if(c)return t==="$attrs"&&Ln(n,"get",t),c(n);if((h=s.__cssModules)&&(h=h[t]))return h;if(e!==Ee&&se(e,t))return a[t]=4,e[t];if(f=l.config.globalProperties,se(f,t))return f[t]},set({_:n},t,e){const{data:r,setupState:i,ctx:o}=n;return sp(i,t)?(i[t]=e,!0):r!==Ee&&se(r,t)?(r[t]=e,!0):se(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(o[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:r,appContext:i,propsOptions:o}},a){let s;return!!e[a]||n!==Ee&&se(n,a)||sp(t,a)||(s=o[0])&&se(s,a)||se(r,a)||se(Xl,a)||se(i.config.globalProperties,a)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:se(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function qy(n){return Wt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let cv=!0;function uP(n){const t=w_(n),e=n.proxy,r=n.ctx;cv=!1,t.beforeCreate&&Ky(t.beforeCreate,n,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:h,mounted:f,beforeUpdate:d,updated:m,activated:g,deactivated:p,beforeDestroy:v,beforeUnmount:y,destroyed:_,unmounted:T,render:E,renderTracked:S,renderTriggered:x,errorCaptured:O,serverPrefetch:b,expose:A,inheritAttrs:N,components:U,directives:et,filters:L}=t;if(u&&cP(u,r,null),a)for(const q in a){const Q=a[q];qt(Q)&&(r[q]=Q.bind(e))}if(i){const q=i.call(e,e);Ne(q)&&(n.data=Oa(q))}if(cv=!0,o)for(const q in o){const Q=o[q],rt=qt(Q)?Q.bind(e,e):qt(Q.get)?Q.get.bind(e,e):Xn,$=!qt(Q)&&qt(Q.set)?Q.set.bind(e):Xn,k=Lt({get:rt,set:$});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>k.value,set:pt=>k.value=pt})}if(s)for(const q in s)tw(s[q],r,e,q);if(l){const q=qt(l)?l.call(e):l;Reflect.ownKeys(q).forEach(Q=>{ws(Q,q[Q])})}c&&Ky(c,n,"c");function B(q,Q){Wt(Q)?Q.forEach(rt=>q(rt.bind(e))):Q&&q(Q.bind(e))}if(B(nP,h),B(Ui,f),B(rP,d),B(JT,m),B(QR,g),B(tP,p),B(sP,O),B(aP,S),B(oP,x),B(Da,y),B(QT,T),B(iP,b),Wt(A))if(A.length){const q=n.exposed||(n.exposed={});A.forEach(Q=>{Object.defineProperty(q,Q,{get:()=>e[Q],set:rt=>e[Q]=rt})})}else n.exposed||(n.exposed={});E&&n.render===Xn&&(n.render=E),N!=null&&(n.inheritAttrs=N),U&&(n.components=U),et&&(n.directives=et)}function cP(n,t,e=Xn){Wt(n)&&(n=hv(n));for(const r in n){const i=n[r];let o;Ne(i)?"default"in i?o=tn(i.from||r,i.default,!0):o=tn(i.from||r):o=tn(i),Nn(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[r]=o}}function Ky(n,t,e){sr(Wt(n)?n.map(r=>r.bind(t.proxy)):n.bind(t.proxy),t,e)}function tw(n,t,e,r){const i=r.includes(".")?jT(e,r):()=>e[r];if(en(n)){const o=t[n];qt(o)&&Pi(i,o)}else if(qt(n))Pi(i,n.bind(e));else if(Ne(n))if(Wt(n))n.forEach(o=>tw(o,t,e,r));else{const o=qt(n.handler)?n.handler.bind(e):t[n.handler];qt(o)&&Pi(i,o,n)}}function w_(n){const t=n.type,{mixins:e,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=n.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!e&&!r?l=t:(l={},i.length&&i.forEach(u=>rf(l,u,a,!0)),rf(l,t,a)),Ne(t)&&o.set(t,l),l}function rf(n,t,e,r=!1){const{mixins:i,extends:o}=t;o&&rf(n,o,e,!0),i&&i.forEach(a=>rf(n,a,e,!0));for(const a in t)if(!(r&&a==="expose")){const s=hP[a]||e&&e[a];n[a]=s?s(n[a],t[a]):t[a]}return n}const hP={data:Zy,props:Jy,emits:Jy,methods:Pl,computed:Pl,beforeCreate:En,created:En,beforeMount:En,mounted:En,beforeUpdate:En,updated:En,beforeDestroy:En,beforeUnmount:En,destroyed:En,unmounted:En,activated:En,deactivated:En,errorCaptured:En,serverPrefetch:En,components:Pl,directives:Pl,watch:dP,provide:Zy,inject:fP};function Zy(n,t){return t?n?function(){return We(qt(n)?n.call(this,this):n,qt(t)?t.call(this,this):t)}:t:n}function fP(n,t){return Pl(hv(n),hv(t))}function hv(n){if(Wt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function En(n,t){return n?[...new Set([].concat(n,t))]:t}function Pl(n,t){return n?We(Object.create(null),n,t):t}function Jy(n,t){return n?Wt(n)&&Wt(t)?[...new Set([...n,...t])]:We(Object.create(null),qy(n),qy(t??{})):t}function dP(n,t){if(!n)return t;if(!t)return n;const e=We(Object.create(null),n);for(const r in t)e[r]=En(n[r],t[r]);return e}function ew(){return{app:null,config:{isNativeTag:WC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pP=0;function mP(n,t){return function(r,i=null){qt(r)||(r=We({},r)),i!=null&&!Ne(i)&&(i=null);const o=ew(),a=new WeakSet;let s=!1;const l=o.app={_uid:pP++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:BP,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&qt(u.install)?(a.add(u),u.install(l,...c)):qt(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,h){if(!s){const f=Et(r,i);return f.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),c&&t?t(f,u):n(f,u,h),s=!0,l._container=u,u.__vue_app__=l,Cd(f.component)||f.component.proxy}},unmount(){s&&(n(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l},runWithContext(u){of=l;try{return u()}finally{of=null}}};return l}}let of=null;function ws(n,t){if(un){let e=un.provides;const r=un.parent&&un.parent.provides;r===e&&(e=un.provides=Object.create(r)),e[n]=t}}function tn(n,t,e=!1){const r=un||Mn;if(r||of){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:of._context.provides;if(i&&n in i)return i[n];if(arguments.length>1)return e&&qt(t)?t.call(r&&r.proxy):t}}function vP(n,t,e,r=!1){const i={},o={};tf(o,wd,1),n.propsDefaults=Object.create(null),nw(n,t,i,o);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);e?n.props=r?i:OT(i):n.type.props?n.props=i:n.props=o,n.attrs=o}function gP(n,t,e,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=n,s=le(i),[l]=n.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=n.vnode.dynamicProps;for(let h=0;h<c.length;h++){let f=c[h];if(Sd(n.emitsOptions,f))continue;const d=t[f];if(l)if(se(o,f))d!==o[f]&&(o[f]=d,u=!0);else{const m=Jr(f);i[m]=fv(l,s,m,d,n,!1)}else d!==o[f]&&(o[f]=d,u=!0)}}}else{nw(n,t,i,o)&&(u=!0);let c;for(const h in s)(!t||!se(t,h)&&((c=Zs(h))===h||!se(t,c)))&&(l?e&&(e[h]!==void 0||e[c]!==void 0)&&(i[h]=fv(l,s,h,void 0,n,!0)):delete i[h]);if(o!==s)for(const h in o)(!t||!se(t,h))&&(delete o[h],u=!0)}u&&Ci(n,"set","$attrs")}function nw(n,t,e,r){const[i,o]=n.propsOptions;let a=!1,s;if(t)for(let l in t){if(Th(l))continue;const u=t[l];let c;i&&se(i,c=Jr(l))?!o||!o.includes(c)?e[c]=u:(s||(s={}))[c]=u:Sd(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(o){const l=le(e),u=s||Ee;for(let c=0;c<o.length;c++){const h=o[c];e[h]=fv(i,l,h,u[h],n,!se(u,h))}}return a}function fv(n,t,e,r,i,o){const a=n[e];if(a!=null){const s=se(a,"default");if(s&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&qt(l)){const{propsDefaults:u}=i;if(e in u)r=u[e];else{const c=Hu(i);r=u[e]=l.call(null,t),c()}}else r=l}a[0]&&(o&&!s?r=!1:a[1]&&(r===""||r===Zs(e))&&(r=!0))}return r}function rw(n,t,e=!1){const r=t.propsCache,i=r.get(n);if(i)return i;const o=n.props,a={},s=[];let l=!1;if(!qt(n)){const c=h=>{l=!0;const[f,d]=rw(h,t,!0);We(a,f),d&&s.push(...d)};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!o&&!l)return Ne(n)&&r.set(n,Vl),Vl;if(Wt(o))for(let c=0;c<o.length;c++){const h=Jr(o[c]);Qy(h)&&(a[h]=Ee)}else if(o)for(const c in o){const h=Jr(c);if(Qy(h)){const f=o[c],d=a[h]=Wt(f)||qt(f)?{type:f}:We({},f);if(d){const m=n0(Boolean,d.type),g=n0(String,d.type);d[0]=m>-1,d[1]=g<0||m<g,(m>-1||se(d,"default"))&&s.push(h)}}}const u=[a,s];return Ne(n)&&r.set(n,u),u}function Qy(n){return n[0]!=="$"}function t0(n){const t=n&&n.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:n===null?"null":""}function e0(n,t){return t0(n)===t0(t)}function n0(n,t){return Wt(t)?t.findIndex(e=>e0(e,n)):qt(t)&&e0(t,n)?0:-1}const iw=n=>n[0]==="_"||n==="$stable",A_=n=>Wt(n)?n.map(kr):[kr(n)],_P=(n,t,e)=>{if(t._n)return t;const r=FR((...i)=>A_(t(...i)),e);return r._c=!1,r},ow=(n,t,e)=>{const r=n._ctx;for(const i in n){if(iw(i))continue;const o=n[i];if(qt(o))t[i]=_P(i,o,r);else if(o!=null){const a=A_(o);t[i]=()=>a}}},aw=(n,t)=>{const e=A_(t);n.slots.default=()=>e},yP=(n,t)=>{if(n.vnode.shapeFlag&32){const e=t._;e?(n.slots=le(t),tf(t,"_",e)):ow(t,n.slots={})}else n.slots={},t&&aw(n,t);tf(n.slots,wd,1)},xP=(n,t,e)=>{const{vnode:r,slots:i}=n;let o=!0,a=Ee;if(r.shapeFlag&32){const s=t._;s?e&&s===1?o=!1:(We(i,t),!e&&s===1&&delete i._):(o=!t.$stable,ow(t,i)),a=t}else t&&(aw(n,t),a={default:1});if(o)for(const s in i)!iw(s)&&a[s]==null&&delete i[s]};function dv(n,t,e,r,i=!1){if(Wt(n)){n.forEach((f,d)=>dv(f,t&&(Wt(t)?t[d]:t),e,r,i));return}if(Mh(r)&&!i)return;const o=r.shapeFlag&4?Cd(r.component)||r.component.proxy:r.el,a=i?null:o,{i:s,r:l}=n,u=t&&t.r,c=s.refs===Ee?s.refs={}:s.refs,h=s.setupState;if(u!=null&&u!==l&&(en(u)?(c[u]=null,se(h,u)&&(h[u]=null)):Nn(u)&&(u.value=null)),qt(l))ho(l,s,12,[a,c]);else{const f=en(l),d=Nn(l),m=n.f;if(f||d){const g=()=>{if(m){const p=f?se(h,l)?h[l]:c[l]:l.value;i?Wt(p)&&c_(p,o):Wt(p)?p.includes(o)||p.push(o):f?(c[l]=[o],se(h,l)&&(h[l]=c[l])):(l.value=[o],n.k&&(c[n.k]=l.value))}else f?(c[l]=a,se(h,l)&&(h[l]=a)):d&&(l.value=a,n.k&&(c[n.k]=a))};i||m?g():(g.id=-1,Rn(g,e))}}}const Rn=XR;function bP(n){return SP(n)}function SP(n,t){const e=gT();e.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:f,setScopeId:d=Xn,insertStaticContent:m}=n,g=(R,C,z,Y=null,K=null,ct=null,M=void 0,w=null,G=!!C.dynamicChildren)=>{if(R===C)return;R&&!Yo(R,C)&&(Y=W(R),pt(R,K,ct,!0),R=null),C.patchFlag===-2&&(G=!1,C.dynamicChildren=null);const{type:j,ref:tt,shapeFlag:P}=C;switch(j){case Js:p(R,C,z,Y);break;case Yr:v(R,C,z,Y);break;case up:R==null&&y(C,z,Y,M);break;case Wn:U(R,C,z,Y,K,ct,M,w,G);break;default:P&1?E(R,C,z,Y,K,ct,M,w,G):P&6?et(R,C,z,Y,K,ct,M,w,G):(P&64||P&128)&&j.process(R,C,z,Y,K,ct,M,w,G,mt)}tt!=null&&K&&dv(tt,R&&R.ref,ct,C||R,!C)},p=(R,C,z,Y)=>{if(R==null)r(C.el=s(C.children),z,Y);else{const K=C.el=R.el;C.children!==R.children&&u(K,C.children)}},v=(R,C,z,Y)=>{R==null?r(C.el=l(C.children||""),z,Y):C.el=R.el},y=(R,C,z,Y)=>{[R.el,R.anchor]=m(R.children,C,z,Y,R.el,R.anchor)},_=({el:R,anchor:C},z,Y)=>{let K;for(;R&&R!==C;)K=f(R),r(R,z,Y),R=K;r(C,z,Y)},T=({el:R,anchor:C})=>{let z;for(;R&&R!==C;)z=f(R),i(R),R=z;i(C)},E=(R,C,z,Y,K,ct,M,w,G)=>{C.type==="svg"?M="svg":C.type==="math"&&(M="mathml"),R==null?S(C,z,Y,K,ct,M,w,G):b(R,C,K,ct,M,w,G)},S=(R,C,z,Y,K,ct,M,w)=>{let G,j;const{props:tt,shapeFlag:P,transition:F,dirs:H}=R;if(G=R.el=a(R.type,ct,tt&&tt.is,tt),P&8?c(G,R.children):P&16&&O(R.children,G,null,Y,K,lp(R,ct),M,w),H&&Ao(R,null,Y,"created"),x(G,R,R.scopeId,M,Y),tt){for(const dt in tt)dt!=="value"&&!Th(dt)&&o(G,dt,null,tt[dt],ct,R.children,Y,K,gt);"value"in tt&&o(G,"value",null,tt.value,ct),(j=tt.onVnodeBeforeMount)&&Nr(j,Y,R)}H&&Ao(R,null,Y,"beforeMount");const Z=EP(K,F);Z&&F.beforeEnter(G),r(G,C,z),((j=tt&&tt.onVnodeMounted)||Z||H)&&Rn(()=>{j&&Nr(j,Y,R),Z&&F.enter(G),H&&Ao(R,null,Y,"mounted")},K)},x=(R,C,z,Y,K)=>{if(z&&d(R,z),Y)for(let ct=0;ct<Y.length;ct++)d(R,Y[ct]);if(K){let ct=K.subTree;if(C===ct){const M=K.vnode;x(R,M,M.scopeId,M.slotScopeIds,K.parent)}}},O=(R,C,z,Y,K,ct,M,w,G=0)=>{for(let j=G;j<R.length;j++){const tt=R[j]=w?eo(R[j]):kr(R[j]);g(null,tt,C,z,Y,K,ct,M,w)}},b=(R,C,z,Y,K,ct,M)=>{const w=C.el=R.el;let{patchFlag:G,dynamicChildren:j,dirs:tt}=C;G|=R.patchFlag&16;const P=R.props||Ee,F=C.props||Ee;let H;if(z&&Mo(z,!1),(H=F.onVnodeBeforeUpdate)&&Nr(H,z,C,R),tt&&Ao(C,R,z,"beforeUpdate"),z&&Mo(z,!0),j?A(R.dynamicChildren,j,w,z,Y,lp(C,K),ct):M||Q(R,C,w,null,z,Y,lp(C,K),ct,!1),G>0){if(G&16)N(w,C,P,F,z,Y,K);else if(G&2&&P.class!==F.class&&o(w,"class",null,F.class,K),G&4&&o(w,"style",P.style,F.style,K),G&8){const Z=C.dynamicProps;for(let dt=0;dt<Z.length;dt++){const Tt=Z[dt],ot=P[Tt],wt=F[Tt];(wt!==ot||Tt==="value")&&o(w,Tt,ot,wt,K,R.children,z,Y,gt)}}G&1&&R.children!==C.children&&c(w,C.children)}else!M&&j==null&&N(w,C,P,F,z,Y,K);((H=F.onVnodeUpdated)||tt)&&Rn(()=>{H&&Nr(H,z,C,R),tt&&Ao(C,R,z,"updated")},Y)},A=(R,C,z,Y,K,ct,M)=>{for(let w=0;w<C.length;w++){const G=R[w],j=C[w],tt=G.el&&(G.type===Wn||!Yo(G,j)||G.shapeFlag&70)?h(G.el):z;g(G,j,tt,null,Y,K,ct,M,!0)}},N=(R,C,z,Y,K,ct,M)=>{if(z!==Y){if(z!==Ee)for(const w in z)!Th(w)&&!(w in Y)&&o(R,w,z[w],null,M,C.children,K,ct,gt);for(const w in Y){if(Th(w))continue;const G=Y[w],j=z[w];G!==j&&w!=="value"&&o(R,w,j,G,M,C.children,K,ct,gt)}"value"in Y&&o(R,"value",z.value,Y.value,M)}},U=(R,C,z,Y,K,ct,M,w,G)=>{const j=C.el=R?R.el:s(""),tt=C.anchor=R?R.anchor:s("");let{patchFlag:P,dynamicChildren:F,slotScopeIds:H}=C;H&&(w=w?w.concat(H):H),R==null?(r(j,z,Y),r(tt,z,Y),O(C.children||[],z,tt,K,ct,M,w,G)):P>0&&P&64&&F&&R.dynamicChildren?(A(R.dynamicChildren,F,z,K,ct,M,w),(C.key!=null||K&&C===K.subTree)&&sw(R,C,!0)):Q(R,C,z,tt,K,ct,M,w,G)},et=(R,C,z,Y,K,ct,M,w,G)=>{C.slotScopeIds=w,R==null?C.shapeFlag&512?K.ctx.activate(C,z,Y,M,G):L(C,z,Y,K,ct,M,G):D(R,C,G)},L=(R,C,z,Y,K,ct,M)=>{const w=R.component=IP(R,Y,K);if(Ed(R)&&(w.ctx.renderer=mt),OP(w),w.asyncDep){if(K&&K.registerDep(w,B),!R.el){const G=w.subTree=Et(Yr);v(null,G,C,z)}}else B(w,R,C,z,K,ct,M)},D=(R,C,z)=>{const Y=C.component=R.component;if(GR(R,C,z))if(Y.asyncDep&&!Y.asyncResolved){q(Y,C,z);return}else Y.next=C,OR(Y.update),Y.effect.dirty=!0,Y.update();else C.el=R.el,Y.vnode=C},B=(R,C,z,Y,K,ct,M)=>{const w=()=>{if(R.isMounted){let{next:tt,bu:P,u:F,parent:H,vnode:Z}=R;{const yt=lw(R);if(yt){tt&&(tt.el=Z.el,q(R,tt,M)),yt.asyncDep.then(()=>{R.isUnmounted||w()});return}}let dt=tt,Tt;Mo(R,!1),tt?(tt.el=Z.el,q(R,tt,M)):tt=Z,P&&wh(P),(Tt=tt.props&&tt.props.onVnodeBeforeUpdate)&&Nr(Tt,H,tt,Z),Mo(R,!0);const ot=op(R),wt=R.subTree;R.subTree=ot,g(wt,ot,h(wt.el),W(wt),R,K,ct),tt.el=ot.el,dt===null&&kR(R,ot.el),F&&Rn(F,K),(Tt=tt.props&&tt.props.onVnodeUpdated)&&Rn(()=>Nr(Tt,H,tt,Z),K)}else{let tt;const{el:P,props:F}=C,{bm:H,m:Z,parent:dt}=R,Tt=Mh(C);if(Mo(R,!1),H&&wh(H),!Tt&&(tt=F&&F.onVnodeBeforeMount)&&Nr(tt,dt,C),Mo(R,!0),P&&X){const ot=()=>{R.subTree=op(R),X(P,R.subTree,R,K,null)};Tt?C.type.__asyncLoader().then(()=>!R.isUnmounted&&ot()):ot()}else{const ot=R.subTree=op(R);g(null,ot,z,Y,R,K,ct),C.el=ot.el}if(Z&&Rn(Z,K),!Tt&&(tt=F&&F.onVnodeMounted)){const ot=C;Rn(()=>Nr(tt,dt,ot),K)}(C.shapeFlag&256||dt&&Mh(dt.vnode)&&dt.vnode.shapeFlag&256)&&R.a&&Rn(R.a,K),R.isMounted=!0,C=z=Y=null}},G=R.effect=new p_(w,Xn,()=>S_(j),R.scope),j=R.update=()=>{G.dirty&&G.run()};j.id=R.uid,Mo(R,!0),j()},q=(R,C,z)=>{C.component=R;const Y=R.vnode.props;R.vnode=C,R.next=null,gP(R,C.props,Y,z),xP(R,C.children,z),Pa(),Xy(R),Ia()},Q=(R,C,z,Y,K,ct,M,w,G=!1)=>{const j=R&&R.children,tt=R?R.shapeFlag:0,P=C.children,{patchFlag:F,shapeFlag:H}=C;if(F>0){if(F&128){$(j,P,z,Y,K,ct,M,w,G);return}else if(F&256){rt(j,P,z,Y,K,ct,M,w,G);return}}H&8?(tt&16&&gt(j,K,ct),P!==j&&c(z,P)):tt&16?H&16?$(j,P,z,Y,K,ct,M,w,G):gt(j,K,ct,!0):(tt&8&&c(z,""),H&16&&O(P,z,Y,K,ct,M,w,G))},rt=(R,C,z,Y,K,ct,M,w,G)=>{R=R||Vl,C=C||Vl;const j=R.length,tt=C.length,P=Math.min(j,tt);let F;for(F=0;F<P;F++){const H=C[F]=G?eo(C[F]):kr(C[F]);g(R[F],H,z,null,K,ct,M,w,G)}j>tt?gt(R,K,ct,!0,!1,P):O(C,z,Y,K,ct,M,w,G,P)},$=(R,C,z,Y,K,ct,M,w,G)=>{let j=0;const tt=C.length;let P=R.length-1,F=tt-1;for(;j<=P&&j<=F;){const H=R[j],Z=C[j]=G?eo(C[j]):kr(C[j]);if(Yo(H,Z))g(H,Z,z,null,K,ct,M,w,G);else break;j++}for(;j<=P&&j<=F;){const H=R[P],Z=C[F]=G?eo(C[F]):kr(C[F]);if(Yo(H,Z))g(H,Z,z,null,K,ct,M,w,G);else break;P--,F--}if(j>P){if(j<=F){const H=F+1,Z=H<tt?C[H].el:Y;for(;j<=F;)g(null,C[j]=G?eo(C[j]):kr(C[j]),z,Z,K,ct,M,w,G),j++}}else if(j>F)for(;j<=P;)pt(R[j],K,ct,!0),j++;else{const H=j,Z=j,dt=new Map;for(j=Z;j<=F;j++){const Nt=C[j]=G?eo(C[j]):kr(C[j]);Nt.key!=null&&dt.set(Nt.key,j)}let Tt,ot=0;const wt=F-Z+1;let yt=!1,At=0;const bt=new Array(wt);for(j=0;j<wt;j++)bt[j]=0;for(j=H;j<=P;j++){const Nt=R[j];if(ot>=wt){pt(Nt,K,ct,!0);continue}let Kt;if(Nt.key!=null)Kt=dt.get(Nt.key);else for(Tt=Z;Tt<=F;Tt++)if(bt[Tt-Z]===0&&Yo(Nt,C[Tt])){Kt=Tt;break}Kt===void 0?pt(Nt,K,ct,!0):(bt[Kt-Z]=j+1,Kt>=At?At=Kt:yt=!0,g(Nt,C[Kt],z,null,K,ct,M,w,G),ot++)}const Rt=yt?TP(bt):Vl;for(Tt=Rt.length-1,j=wt-1;j>=0;j--){const Nt=Z+j,Kt=C[Nt],ye=Nt+1<tt?C[Nt+1].el:Y;bt[j]===0?g(null,Kt,z,ye,K,ct,M,w,G):yt&&(Tt<0||j!==Rt[Tt]?k(Kt,z,ye,2):Tt--)}}},k=(R,C,z,Y,K=null)=>{const{el:ct,type:M,transition:w,children:G,shapeFlag:j}=R;if(j&6){k(R.component.subTree,C,z,Y);return}if(j&128){R.suspense.move(C,z,Y);return}if(j&64){M.move(R,C,z,mt);return}if(M===Wn){r(ct,C,z);for(let P=0;P<G.length;P++)k(G[P],C,z,Y);r(R.anchor,C,z);return}if(M===up){_(R,C,z);return}if(Y!==2&&j&1&&w)if(Y===0)w.beforeEnter(ct),r(ct,C,z),Rn(()=>w.enter(ct),K);else{const{leave:P,delayLeave:F,afterLeave:H}=w,Z=()=>r(ct,C,z),dt=()=>{P(ct,()=>{Z(),H&&H()})};F?F(ct,Z,dt):dt()}else r(ct,C,z)},pt=(R,C,z,Y=!1,K=!1)=>{const{type:ct,props:M,ref:w,children:G,dynamicChildren:j,shapeFlag:tt,patchFlag:P,dirs:F}=R;if(w!=null&&dv(w,null,z,R,!0),tt&256){C.ctx.deactivate(R);return}const H=tt&1&&F,Z=!Mh(R);let dt;if(Z&&(dt=M&&M.onVnodeBeforeUnmount)&&Nr(dt,C,R),tt&6)vt(R.component,z,Y);else{if(tt&128){R.suspense.unmount(z,Y);return}H&&Ao(R,null,C,"beforeUnmount"),tt&64?R.type.remove(R,C,z,K,mt,Y):j&&(ct!==Wn||P>0&&P&64)?gt(j,C,z,!1,!0):(ct===Wn&&P&384||!K&&tt&16)&&gt(G,C,z),Y&&J(R)}(Z&&(dt=M&&M.onVnodeUnmounted)||H)&&Rn(()=>{dt&&Nr(dt,C,R),H&&Ao(R,null,C,"unmounted")},z)},J=R=>{const{type:C,el:z,anchor:Y,transition:K}=R;if(C===Wn){it(z,Y);return}if(C===up){T(R);return}const ct=()=>{i(z),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(R.shapeFlag&1&&K&&!K.persisted){const{leave:M,delayLeave:w}=K,G=()=>M(z,ct);w?w(R.el,ct,G):G()}else ct()},it=(R,C)=>{let z;for(;R!==C;)z=f(R),i(R),R=z;i(C)},vt=(R,C,z)=>{const{bum:Y,scope:K,update:ct,subTree:M,um:w}=R;Y&&wh(Y),K.stop(),ct&&(ct.active=!1,pt(M,R,C,z)),w&&Rn(w,C),Rn(()=>{R.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},gt=(R,C,z,Y=!1,K=!1,ct=0)=>{for(let M=ct;M<R.length;M++)pt(R[M],C,z,Y,K)},W=R=>R.shapeFlag&6?W(R.component.subTree):R.shapeFlag&128?R.suspense.next():f(R.anchor||R.el);let ft=!1;const at=(R,C,z)=>{R==null?C._vnode&&pt(C._vnode,null,null,!0):g(C._vnode||null,R,C,null,null,null,z),ft||(ft=!0,Xy(),zT(),ft=!1),C._vnode=R},mt={p:g,um:pt,m:k,r:J,mt:L,mc:O,pc:Q,pbc:A,n:W,o:n};let _t,X;return t&&([_t,X]=t(mt)),{render:at,hydrate:_t,createApp:mP(at,_t)}}function lp({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Mo({effect:n,update:t},e){n.allowRecurse=t.allowRecurse=e}function EP(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function sw(n,t,e=!1){const r=n.children,i=t.children;if(Wt(r)&&Wt(i))for(let o=0;o<r.length;o++){const a=r[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=eo(i[o]),s.el=a.el),e||sw(a,s)),s.type===Js&&(s.el=a.el)}}function TP(n){const t=n.slice(),e=[0];let r,i,o,a,s;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(i=e[e.length-1],n[i]<u){t[r]=i,e.push(r);continue}for(o=0,a=e.length-1;o<a;)s=o+a>>1,n[e[s]]<u?o=s+1:a=s;u<n[e[o]]&&(o>0&&(t[r]=e[o-1]),e[o]=r)}}for(o=e.length,a=e[o-1];o-- >0;)e[o]=a,a=t[a];return e}function lw(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:lw(t)}const wP=n=>n.__isTeleport,Wn=Symbol.for("v-fgt"),Js=Symbol.for("v-txt"),Yr=Symbol.for("v-cmt"),up=Symbol.for("v-stc");let ds=null,M_=1;function r0(n){M_+=n}function af(n){return n?n.__v_isVNode===!0:!1}function Yo(n,t){return n.type===t.type&&n.key===t.key}const wd="__vInternal",uw=({key:n})=>n??null,Ch=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?en(n)||Nn(n)||qt(n)?{i:Mn,r:n,k:t,f:!!e}:n:null);function AP(n,t=null,e=null,r=0,i=null,o=n===Wn?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&uw(t),ref:t&&Ch(t),scopeId:XT,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Mn};return s?(C_(l,e),o&128&&n.normalize(l)):e&&(l.shapeFlag|=en(e)?8:16),M_>0&&!a&&ds&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&ds.push(l),l}const Et=MP;function MP(n,t=null,e=null,r=0,i=null,o=!1){if((!n||n===zR)&&(n=Yr),af(n)){const s=_o(n,t,!0);return e&&C_(s,e),M_>0&&!o&&ds&&(s.shapeFlag&6?ds[ds.indexOf(n)]=s:ds.push(s)),s.patchFlag|=-2,s}if(UP(n)&&(n=n.__vccOpts),t){t=CP(t);let{class:s,style:l}=t;s&&!en(s)&&(t.class=d_(s)),Ne(l)&&(LT(l)&&!Wt(l)&&(l=We({},l)),t.style=f_(l))}const a=en(n)?1:WR(n)?128:wP(n)?64:Ne(n)?4:qt(n)?2:0;return AP(n,t,e,r,i,a,o,!0)}function CP(n){return n?LT(n)||wd in n?We({},n):n:null}function _o(n,t,e=!1){const{props:r,ref:i,patchFlag:o,children:a}=n,s=t?pv(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:s,key:s&&uw(s),ref:t&&t.ref?e&&i?Wt(i)?i.concat(Ch(t)):[i,Ch(t)]:Ch(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Wn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&_o(n.ssContent),ssFallback:n.ssFallback&&_o(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function $l(n=" ",t=0){return Et(Js,null,n,t)}function kr(n){return n==null||typeof n=="boolean"?Et(Yr):Wt(n)?Et(Wn,null,n.slice()):typeof n=="object"?eo(n):Et(Js,null,String(n))}function eo(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:_o(n)}function C_(n,t){let e=0;const{shapeFlag:r}=n;if(t==null)t=null;else if(Wt(t))e=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),C_(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!(wd in t)?t._ctx=Mn:i===3&&Mn&&(Mn.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else qt(t)?(t={default:t,_ctx:Mn},e=32):(t=String(t),r&64?(e=16,t=[$l(t)]):e=8);n.children=t,n.shapeFlag|=e}function pv(...n){const t={};for(let e=0;e<n.length;e++){const r=n[e];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=d_([t.class,r.class]));else if(i==="style")t.style=f_([t.style,r.style]);else if(md(i)){const o=t[i],a=r[i];a&&o!==a&&!(Wt(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=r[i])}return t}function Nr(n,t,e,r=null){sr(n,t,7,[e,r])}const RP=ew();let PP=0;function IP(n,t,e){const r=n.type,i=(t?t.appContext:n.appContext)||RP,o={uid:PP++,vnode:n,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new oR(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rw(r,i),emitsOptions:WT(r,i),emit:null,emitted:null,propsDefaults:Ee,inheritAttrs:r.inheritAttrs,ctx:Ee,data:Ee,props:Ee,attrs:Ee,slots:Ee,refs:Ee,setupState:Ee,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=NR.bind(null,o),n.ce&&n.ce(o),o}let un=null;const Ad=()=>un||Mn;let sf,mv;{const n=gT(),t=(e,r)=>{let i;return(i=n[e])||(i=n[e]=[]),i.push(r),o=>{i.length>1?i.forEach(a=>a(o)):i[0](o)}};sf=t("__VUE_INSTANCE_SETTERS__",e=>un=e),mv=t("__VUE_SSR_SETTERS__",e=>Md=e)}const Hu=n=>{const t=un;return sf(n),n.scope.on(),()=>{n.scope.off(),sf(t)}},i0=()=>{un&&un.scope.off(),sf(null)};function cw(n){return n.vnode.shapeFlag&4}let Md=!1;function OP(n,t=!1){t&&mv(t);const{props:e,children:r}=n.vnode,i=cw(n);vP(n,e,i,t),yP(n,r);const o=i?DP(n,t):void 0;return t&&mv(!1),o}function DP(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=NT(new Proxy(n.ctx,lP));const{setup:r}=e;if(r){const i=n.setupContext=r.length>1?NP(n):null,o=Hu(n);Pa();const a=ho(r,n,0,[n.props,i]);if(Ia(),o(),vT(a)){if(a.then(i0,i0),t)return a.then(s=>{o0(n,s,t)}).catch(s=>{bd(s,n,0)});n.asyncDep=a}else o0(n,a,t)}else hw(n,t)}function o0(n,t,e){qt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Ne(t)&&(n.setupState=GT(t)),hw(n,e)}let a0;function hw(n,t,e){const r=n.type;if(!n.render){if(!t&&a0&&!r.render){const i=r.template||w_(n).template;if(i){const{isCustomElement:o,compilerOptions:a}=n.appContext.config,{delimiters:s,compilerOptions:l}=r,u=We(We({isCustomElement:o,delimiters:s},a),l);r.render=a0(i,u)}}n.render=r.render||Xn}{const i=Hu(n);Pa();try{uP(n)}finally{Ia(),i()}}}function LP(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(t,e){return Ln(n,"get","$attrs"),t[e]}}))}function NP(n){const t=e=>{n.exposed=e||{}};return{get attrs(){return LP(n)},slots:n.slots,emit:n.emit,expose:t}}function Cd(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(GT(NT(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Xl)return Xl[e](n)},has(t,e){return e in t||e in Xl}}))}function FP(n,t=!0){return qt(n)?n.displayName||n.name:n.name||t&&n.__name}function UP(n){return qt(n)&&"__vccOpts"in n}const Lt=(n,t)=>MR(n,t,Md);function xa(n,t,e){const r=arguments.length;return r===2?Ne(t)&&!Wt(t)?af(t)?Et(n,null,[t]):Et(n,t):Et(n,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&af(e)&&(e=[e]),Et(n,t,e))}const BP="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const GP="http://www.w3.org/2000/svg",kP="http://www.w3.org/1998/Math/MathML",no=typeof document<"u"?document:null,s0=no&&no.createElement("template"),HP={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,r)=>{const i=t==="svg"?no.createElementNS(GP,n):t==="mathml"?no.createElementNS(kP,n):no.createElement(n,e?{is:e}:void 0);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>no.createTextNode(n),createComment:n=>no.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>no.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,r,i,o){const a=e?e.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===o||!(i=i.nextSibling)););else{s0.innerHTML=r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n;const s=s0.content;if(r==="svg"||r==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,e)}return[a?a.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Hi="transition",hl="animation",hu=Symbol("_vtc"),Rd=(n,{slots:t})=>xa(JR,zP(n),t);Rd.displayName="Transition";const fw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Rd.props=We({},YT,fw);const Co=(n,t=[])=>{Wt(n)?n.forEach(e=>e(...t)):n&&n(...t)},l0=n=>n?Wt(n)?n.some(t=>t.length>1):n.length>1:!1;function zP(n){const t={};for(const U in n)U in fw||(t[U]=n[U]);if(n.css===!1)return t;const{name:e="v",type:r,duration:i,enterFromClass:o=`${e}-enter-from`,enterActiveClass:a=`${e}-enter-active`,enterToClass:s=`${e}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:c=s,leaveFromClass:h=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:d=`${e}-leave-to`}=n,m=VP(i),g=m&&m[0],p=m&&m[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:_,onLeave:T,onLeaveCancelled:E,onBeforeAppear:S=v,onAppear:x=y,onAppearCancelled:O=_}=t,b=(U,et,L)=>{Ro(U,et?c:s),Ro(U,et?u:a),L&&L()},A=(U,et)=>{U._isLeaving=!1,Ro(U,h),Ro(U,d),Ro(U,f),et&&et()},N=U=>(et,L)=>{const D=U?x:y,B=()=>b(et,U,L);Co(D,[et,B]),u0(()=>{Ro(et,U?l:o),zi(et,U?c:s),l0(D)||c0(et,r,g,B)})};return We(t,{onBeforeEnter(U){Co(v,[U]),zi(U,o),zi(U,a)},onBeforeAppear(U){Co(S,[U]),zi(U,l),zi(U,u)},onEnter:N(!1),onAppear:N(!0),onLeave(U,et){U._isLeaving=!0;const L=()=>A(U,et);zi(U,h),$P(),zi(U,f),u0(()=>{U._isLeaving&&(Ro(U,h),zi(U,d),l0(T)||c0(U,r,p,L))}),Co(T,[U,L])},onEnterCancelled(U){b(U,!1),Co(_,[U])},onAppearCancelled(U){b(U,!0),Co(O,[U])},onLeaveCancelled(U){A(U),Co(E,[U])}})}function VP(n){if(n==null)return null;if(Ne(n))return[cp(n.enter),cp(n.leave)];{const t=cp(n);return[t,t]}}function cp(n){return JC(n)}function zi(n,t){t.split(/\s+/).forEach(e=>e&&n.classList.add(e)),(n[hu]||(n[hu]=new Set)).add(t)}function Ro(n,t){t.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const e=n[hu];e&&(e.delete(t),e.size||(n[hu]=void 0))}function u0(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let WP=0;function c0(n,t,e,r){const i=n._endId=++WP,o=()=>{i===n._endId&&r()};if(e)return setTimeout(o,e);const{type:a,timeout:s,propCount:l}=XP(n,t);if(!a)return r();const u=a+"end";let c=0;const h=()=>{n.removeEventListener(u,f),o()},f=d=>{d.target===n&&++c>=l&&h()};setTimeout(()=>{c<l&&h()},s+1),n.addEventListener(u,f)}function XP(n,t){const e=window.getComputedStyle(n),r=m=>(e[m]||"").split(", "),i=r(`${Hi}Delay`),o=r(`${Hi}Duration`),a=h0(i,o),s=r(`${hl}Delay`),l=r(`${hl}Duration`),u=h0(s,l);let c=null,h=0,f=0;t===Hi?a>0&&(c=Hi,h=a,f=o.length):t===hl?u>0&&(c=hl,h=u,f=l.length):(h=Math.max(a,u),c=h>0?a>u?Hi:hl:null,f=c?c===Hi?o.length:l.length:0);const d=c===Hi&&/\b(transform|all)(,|$)/.test(r(`${Hi}Property`).toString());return{type:c,timeout:h,propCount:f,hasTransform:d}}function h0(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((e,r)=>f0(e)+f0(n[r])))}function f0(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function $P(){return document.body.offsetHeight}function jP(n,t,e){const r=n[hu];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const YP=Symbol("_vod"),qP=Symbol("");function KP(n,t,e){const r=n.style,i=r.display,o=en(e);if(e&&!o){if(t&&!en(t))for(const a in t)e[a]==null&&vv(r,a,"");for(const a in e)vv(r,a,e[a])}else if(o){if(t!==e){const a=r[qP];a&&(e+=";"+a),r.cssText=e}}else t&&n.removeAttribute("style");YP in n&&(r.display=i)}const d0=/\s*!important$/;function vv(n,t,e){if(Wt(e))e.forEach(r=>vv(n,t,r));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const r=ZP(n,t);d0.test(e)?n.setProperty(Zs(r),e.replace(d0,""),"important"):n[r]=e}}const p0=["Webkit","Moz","ms"],hp={};function ZP(n,t){const e=hp[t];if(e)return e;let r=Jr(t);if(r!=="filter"&&r in n)return hp[t]=r;r=yd(r);for(let i=0;i<p0.length;i++){const o=p0[i]+r;if(o in n)return hp[t]=o}return t}const m0="http://www.w3.org/1999/xlink";function JP(n,t,e,r,i){if(r&&t.startsWith("xlink:"))e==null?n.removeAttributeNS(m0,t.slice(6,t.length)):n.setAttributeNS(m0,t,e);else{const o=iR(t);e==null||o&&!_T(e)?n.removeAttribute(t):n.setAttribute(t,o?"":e)}}function QP(n,t,e,r,i,o,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,o),n[t]=e??"";return}const s=n.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){n._value=e;const u=s==="OPTION"?n.getAttribute("value"):n.value,c=e??"";u!==c&&(n.value=c),e==null&&n.removeAttribute(t);return}let l=!1;if(e===""||e==null){const u=typeof n[t];u==="boolean"?e=_T(e):e==null&&u==="string"?(e="",l=!0):u==="number"&&(e=0,l=!0)}try{n[t]=e}catch{}l&&n.removeAttribute(t)}function as(n,t,e,r){n.addEventListener(t,e,r)}function tI(n,t,e,r){n.removeEventListener(t,e,r)}const v0=Symbol("_vei");function eI(n,t,e,r,i=null){const o=n[v0]||(n[v0]={}),a=o[t];if(r&&a)a.value=r;else{const[s,l]=nI(t);if(r){const u=o[t]=oI(r,i);as(n,s,u,l)}else a&&(tI(n,s,a,l),o[t]=void 0)}}const g0=/(?:Once|Passive|Capture)$/;function nI(n){let t;if(g0.test(n)){t={};let r;for(;r=n.match(g0);)n=n.slice(0,n.length-r[0].length),t[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Zs(n.slice(2)),t]}let fp=0;const rI=Promise.resolve(),iI=()=>fp||(rI.then(()=>fp=0),fp=Date.now());function oI(n,t){const e=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=e.attached)return;sr(aI(r,e.value),t,5,[r])};return e.value=n,e.attached=iI(),e}function aI(n,t){if(Wt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const _0=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,sI=(n,t,e,r,i,o,a,s,l)=>{const u=i==="svg";t==="class"?jP(n,r,u):t==="style"?KP(n,e,r):md(t)?u_(t)||eI(n,t,e,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lI(n,t,r,u))?QP(n,t,r,o,a,s,l):(t==="true-value"?n._trueValue=r:t==="false-value"&&(n._falseValue=r),JP(n,t,r,u))};function lI(n,t,e,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in n&&_0(t)&&qt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return _0(t)&&en(e)?!1:t in n}const y0=n=>{const t=n.props["onUpdate:modelValue"]||!1;return Wt(t)?e=>wh(t,e):t};function uI(n){n.target.composing=!0}function x0(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const dp=Symbol("_assign"),cI={created(n,{modifiers:{lazy:t,trim:e,number:r}},i){n[dp]=y0(i);const o=r||i.props&&i.props.type==="number";as(n,t?"change":"input",a=>{if(a.target.composing)return;let s=n.value;e&&(s=s.trim()),o&&(s=ev(s)),n[dp](s)}),e&&as(n,"change",()=>{n.value=n.value.trim()}),t||(as(n,"compositionstart",uI),as(n,"compositionend",x0),as(n,"change",x0))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,modifiers:{lazy:e,trim:r,number:i}},o){if(n[dp]=y0(o),n.composing)return;const a=i||n.type==="number"?ev(n.value):n.value,s=t??"";a!==s&&(document.activeElement===n&&n.type!=="range"&&(e||r&&n.value.trim()===s)||(n.value=s))}},hI=We({patchProp:sI},HP);let b0;function dw(){return b0||(b0=bP(hI))}const pw=(...n)=>{dw().render(...n)},mw=(...n)=>{const t=dw().createApp(...n),{mount:e}=t;return t.mount=r=>{const i=dI(r);if(!i)return;const o=t._component;!qt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=e(i,!1,fI(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function fI(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function dI(n){return en(n)?document.querySelector(n):n}const pI="modulepreload",mI=function(n,t){return new URL(n,t).href},S0={},vI=function(t,e,r){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(o=>{if(o=mI(o,r),o in S0)return;S0[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===o&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":pI,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ss=typeof window<"u";function gI(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const ce=Object.assign;function pp(n,t){const e={};for(const r in t){const i=t[r];e[r]=Ir(i)?i.map(n):n(i)}return e}const jl=()=>{},Ir=Array.isArray,_I=/\/$/,yI=n=>n.replace(_I,"");function mp(n,t,e="/"){let r,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=n(o)),s>-1&&(r=r||t.slice(0,s),a=t.slice(s,t.length)),r=EI(r??t,e),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function xI(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function E0(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function bI(n,t,e){const r=t.matched.length-1,i=e.matched.length-1;return r>-1&&r===i&&Fs(t.matched[r],e.matched[i])&&vw(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function Fs(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function vw(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!SI(n[e],t[e]))return!1;return!0}function SI(n,t){return Ir(n)?T0(n,t):Ir(t)?T0(t,n):n===t}function T0(n,t){return Ir(t)?n.length===t.length&&n.every((e,r)=>e===t[r]):n.length===1&&n[0]===t}function EI(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=e.length-1,a,s;for(a=0;a<r.length;a++)if(s=r[a],s!==".")if(s==="..")o>1&&o--;else break;return e.slice(0,o).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var fu;(function(n){n.pop="pop",n.push="push"})(fu||(fu={}));var Yl;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Yl||(Yl={}));function TI(n){if(!n)if(ss){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),yI(n)}const wI=/^[^#]+#/;function AI(n,t){return n.replace(wI,"#")+t}function MI(n,t){const e=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:t.behavior,left:r.left-e.left-(t.left||0),top:r.top-e.top-(t.top||0)}}const Pd=()=>({left:window.pageXOffset,top:window.pageYOffset});function CI(n){let t;if("el"in n){const e=n.el,r=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?r?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=MI(i,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function w0(n,t){return(history.state?history.state.position-t:-1)+n}const gv=new Map;function RI(n,t){gv.set(n,t)}function PI(n){const t=gv.get(n);return gv.delete(n),t}let II=()=>location.protocol+"//"+location.host;function gw(n,t){const{pathname:e,search:r,hash:i}=t,o=n.indexOf("#");if(o>-1){let s=i.includes(n.slice(o))?n.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),E0(l,"")}return E0(e,n)+r+i}function OI(n,t,e,r){let i=[],o=[],a=null;const s=({state:f})=>{const d=gw(n,location),m=e.value,g=t.value;let p=0;if(f){if(e.value=d,t.value=f,a&&a===m){a=null;return}p=g?f.position-g.position:0}else r(d);i.forEach(v=>{v(e.value,m,{delta:p,type:fu.pop,direction:p?p>0?Yl.forward:Yl.back:Yl.unknown})})};function l(){a=e.value}function u(f){i.push(f);const d=()=>{const m=i.indexOf(f);m>-1&&i.splice(m,1)};return o.push(d),d}function c(){const{history:f}=window;f.state&&f.replaceState(ce({},f.state,{scroll:Pd()}),"")}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:h}}function A0(n,t,e,r=!1,i=!1){return{back:n,current:t,forward:e,replaced:r,position:window.history.length,scroll:i?Pd():null}}function DI(n){const{history:t,location:e}=window,r={value:gw(n,e)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const h=n.indexOf("#"),f=h>-1?(e.host&&document.querySelector("base")?n:n.slice(h))+l:II()+n+l;try{t[c?"replaceState":"pushState"](u,"",f),i.value=u}catch(d){console.error(d),e[c?"replace":"assign"](f)}}function a(l,u){const c=ce({},t.state,A0(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),r.value=l}function s(l,u){const c=ce({},i.value,t.state,{forward:l,scroll:Pd()});o(c.current,c,!0);const h=ce({},A0(r.value,l,null),{position:c.position+1},u);o(l,h,!1),r.value=l}return{location:r,state:i,push:s,replace:a}}function LI(n){n=TI(n);const t=DI(n),e=OI(n,t.state,t.location,t.replace);function r(o,a=!0){a||e.pauseListeners(),history.go(o)}const i=ce({location:"",base:n,go:r,createHref:AI.bind(null,n)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function NI(n){return typeof n=="string"||n&&typeof n=="object"}function _w(n){return typeof n=="string"||typeof n=="symbol"}const Vi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},yw=Symbol("");var M0;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(M0||(M0={}));function Us(n,t){return ce(new Error,{type:n,[yw]:!0},t)}function oi(n,t){return n instanceof Error&&yw in n&&(t==null||!!(n.type&t))}const C0="[^/]+?",FI={sensitive:!1,strict:!1,start:!0,end:!0},UI=/[.+*?^${}()[\]/\\]/g;function BI(n,t){const e=ce({},FI,t),r=[];let i=e.start?"^":"";const o=[];for(const u of n){const c=u.length?[]:[90];e.strict&&!u.length&&(i+="/");for(let h=0;h<u.length;h++){const f=u[h];let d=40+(e.sensitive?.25:0);if(f.type===0)h||(i+="/"),i+=f.value.replace(UI,"\\$&"),d+=40;else if(f.type===1){const{value:m,repeatable:g,optional:p,regexp:v}=f;o.push({name:m,repeatable:g,optional:p});const y=v||C0;if(y!==C0){d+=10;try{new RegExp(`(${y})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${m}" (${y}): `+T.message)}}let _=g?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;h||(_=p&&u.length<2?`(?:/${_})`:"/"+_),p&&(_+="?"),i+=_,d+=20,p&&(d+=-8),g&&(d+=-20),y===".*"&&(d+=-50)}c.push(d)}r.push(c)}if(e.strict&&e.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&(i+="(?:/|$)");const a=new RegExp(i,e.sensitive?"":"i");function s(u){const c=u.match(a),h={};if(!c)return null;for(let f=1;f<c.length;f++){const d=c[f]||"",m=o[f-1];h[m.name]=d&&m.repeatable?d.split("/"):d}return h}function l(u){let c="",h=!1;for(const f of n){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const d of f)if(d.type===0)c+=d.value;else if(d.type===1){const{value:m,repeatable:g,optional:p}=d,v=m in u?u[m]:"";if(Ir(v)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const y=Ir(v)?v.join("/"):v;if(!y)if(p)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);c+=y}}return c||"/"}return{re:a,score:r,keys:o,parse:s,stringify:l}}function GI(n,t){let e=0;for(;e<n.length&&e<t.length;){const r=t[e]-n[e];if(r)return r;e++}return n.length<t.length?n.length===1&&n[0]===40+40?-1:1:n.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function kI(n,t){let e=0;const r=n.score,i=t.score;for(;e<r.length&&e<i.length;){const o=GI(r[e],i[e]);if(o)return o;e++}if(Math.abs(i.length-r.length)===1){if(R0(r))return 1;if(R0(i))return-1}return i.length-r.length}function R0(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const HI={type:0,value:""},zI=/[a-zA-Z0-9_]/;function VI(n){if(!n)return[[]];if(n==="/")return[[HI]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(d){throw new Error(`ERR (${e})/"${u}": ${d}`)}let e=0,r=e;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function h(){u&&(e===0?o.push({type:0,value:u}):e===1||e===2||e===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;s<n.length;){if(l=n[s++],l==="\\"&&e!==2){r=e,e=4;continue}switch(e){case 0:l==="/"?(u&&h(),a()):l===":"?(h(),e=1):f();break;case 4:f(),e=r;break;case 1:l==="("?e=2:zI.test(l)?f():(h(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:e=3:c+=l;break;case 3:h(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),h(),a(),i}function WI(n,t,e){const r=BI(VI(n.path),e),i=ce(r,{record:n,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function XI(n,t){const e=[],r=new Map;t=O0({strict:!1,end:!0,sensitive:!1},t);function i(c){return r.get(c)}function o(c,h,f){const d=!f,m=$I(c);m.aliasOf=f&&f.record;const g=O0(t,c),p=[m];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const T of _)p.push(ce({},m,{components:f?f.record.components:m.components,path:T,aliasOf:f?f.record:m}))}let v,y;for(const _ of p){const{path:T}=_;if(h&&T[0]!=="/"){const E=h.record.path,S=E[E.length-1]==="/"?"":"/";_.path=h.record.path+(T&&S+T)}if(v=WI(_,h,g),f?f.alias.push(v):(y=y||v,y!==v&&y.alias.push(v),d&&c.name&&!I0(v)&&a(c.name)),m.children){const E=m.children;for(let S=0;S<E.length;S++)o(E[S],v,f&&f.children[S])}f=f||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return y?()=>{a(y)}:jl}function a(c){if(_w(c)){const h=r.get(c);h&&(r.delete(c),e.splice(e.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=e.indexOf(c);h>-1&&(e.splice(h,1),c.record.name&&r.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return e}function l(c){let h=0;for(;h<e.length&&kI(c,e[h])>=0&&(c.record.path!==e[h].record.path||!xw(c,e[h]));)h++;e.splice(h,0,c),c.record.name&&!I0(c)&&r.set(c.record.name,c)}function u(c,h){let f,d={},m,g;if("name"in c&&c.name){if(f=r.get(c.name),!f)throw Us(1,{location:c});g=f.record.name,d=ce(P0(h.params,f.keys.filter(y=>!y.optional).map(y=>y.name)),c.params&&P0(c.params,f.keys.map(y=>y.name))),m=f.stringify(d)}else if("path"in c)m=c.path,f=e.find(y=>y.re.test(m)),f&&(d=f.parse(m),g=f.record.name);else{if(f=h.name?r.get(h.name):e.find(y=>y.re.test(h.path)),!f)throw Us(1,{location:c,currentLocation:h});g=f.record.name,d=ce({},h.params,c.params),m=f.stringify(d)}const p=[];let v=f;for(;v;)p.unshift(v.record),v=v.parent;return{name:g,path:m,params:d,matched:p,meta:YI(p)}}return n.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function P0(n,t){const e={};for(const r of t)r in n&&(e[r]=n[r]);return e}function $I(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:jI(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function jI(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const r in n.components)t[r]=typeof e=="object"?e[r]:e;return t}function I0(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function YI(n){return n.reduce((t,e)=>ce(t,e.meta),{})}function O0(n,t){const e={};for(const r in n)e[r]=r in t?t[r]:n[r];return e}function xw(n,t){return t.children.some(e=>e===n||xw(n,e))}const bw=/#/g,qI=/&/g,KI=/\//g,ZI=/=/g,JI=/\?/g,Sw=/\+/g,QI=/%5B/g,t2=/%5D/g,Ew=/%5E/g,e2=/%60/g,Tw=/%7B/g,n2=/%7C/g,ww=/%7D/g,r2=/%20/g;function R_(n){return encodeURI(""+n).replace(n2,"|").replace(QI,"[").replace(t2,"]")}function i2(n){return R_(n).replace(Tw,"{").replace(ww,"}").replace(Ew,"^")}function _v(n){return R_(n).replace(Sw,"%2B").replace(r2,"+").replace(bw,"%23").replace(qI,"%26").replace(e2,"`").replace(Tw,"{").replace(ww,"}").replace(Ew,"^")}function o2(n){return _v(n).replace(ZI,"%3D")}function a2(n){return R_(n).replace(bw,"%23").replace(JI,"%3F")}function s2(n){return n==null?"":a2(n).replace(KI,"%2F")}function lf(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function l2(n){const t={};if(n===""||n==="?")return t;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(Sw," "),a=o.indexOf("="),s=lf(a<0?o:o.slice(0,a)),l=a<0?null:lf(o.slice(a+1));if(s in t){let u=t[s];Ir(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function D0(n){let t="";for(let e in n){const r=n[e];if(e=o2(e),r==null){r!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ir(r)?r.map(o=>o&&_v(o)):[r&&_v(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+e,o!=null&&(t+="="+o))})}return t}function u2(n){const t={};for(const e in n){const r=n[e];r!==void 0&&(t[e]=Ir(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const c2=Symbol(""),L0=Symbol(""),P_=Symbol(""),Aw=Symbol(""),yv=Symbol("");function fl(){let n=[];function t(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function ro(n,t,e,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=h=>{h===!1?s(Us(4,{from:e,to:t})):h instanceof Error?s(h):NI(h)?s(Us(2,{from:t,to:h})):(o&&r.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),a())},u=n.call(r&&r.instances[i],t,e,l);let c=Promise.resolve(u);n.length<3&&(c=c.then(l)),c.catch(h=>s(h))})}function vp(n,t,e,r){const i=[];for(const o of n)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(h2(s)){const u=(s.__vccOpts||s)[t];u&&i.push(ro(u,e,r,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=gI(u)?u.default:u;o.components[a]=c;const f=(c.__vccOpts||c)[t];return f&&ro(f,e,r,o,a)()}))}}return i}function h2(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function N0(n){const t=tn(P_),e=tn(Aw),r=Lt(()=>t.resolve(Ri(n.to))),i=Lt(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],h=e.matched;if(!c||!h.length)return-1;const f=h.findIndex(Fs.bind(null,c));if(f>-1)return f;const d=F0(l[u-2]);return u>1&&F0(c)===d&&h[h.length-1].path!==d?h.findIndex(Fs.bind(null,l[u-2])):f}),o=Lt(()=>i.value>-1&&m2(e.params,r.value.params)),a=Lt(()=>i.value>-1&&i.value===e.matched.length-1&&vw(e.params,r.value.params));function s(l={}){return p2(l)?t[Ri(n.replace)?"replace":"push"](Ri(n.to)).catch(jl):Promise.resolve()}return{route:r,href:Lt(()=>r.value.href),isActive:o,isExactActive:a,navigate:s}}const f2=Ae({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:N0,setup(n,{slots:t}){const e=Oa(N0(n)),{options:r}=tn(P_),i=Lt(()=>({[U0(n.activeClass,r.linkActiveClass,"router-link-active")]:e.isActive,[U0(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const o=t.default&&t.default(e);return n.custom?o:xa("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},o)}}}),d2=f2;function p2(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function m2(n,t){for(const e in t){const r=t[e],i=n[e];if(typeof r=="string"){if(r!==i)return!1}else if(!Ir(i)||i.length!==r.length||r.some((o,a)=>o!==i[a]))return!1}return!0}function F0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const U0=(n,t,e)=>n??t??e,v2=Ae({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const r=tn(yv),i=Lt(()=>n.route||r.value),o=tn(L0,0),a=Lt(()=>{let u=Ri(o);const{matched:c}=i.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),s=Lt(()=>i.value.matched[a.value]);ws(L0,Lt(()=>a.value+1)),ws(c2,s),ws(yv,i);const l=Be();return Pi(()=>[l.value,s.value,n.name],([u,c,h],[f,d,m])=>{c&&(c.instances[h]=u,d&&d!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!Fs(c,d)||!f)&&(c.enterCallbacks[h]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=i.value,c=n.name,h=s.value,f=h&&h.components[c];if(!f)return B0(e.default,{Component:f,route:u});const d=h.props[c],m=d?d===!0?u.params:typeof d=="function"?d(u):d:null,p=xa(f,ce({},m,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return B0(e.default,{Component:p,route:u})||p}}});function B0(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const g2=v2;function _2(n){const t=XI(n.routes,n),e=n.parseQuery||l2,r=n.stringifyQuery||D0,i=n.history,o=fl(),a=fl(),s=fl(),l=wr(Vi);let u=Vi;ss&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=pp.bind(null,W=>""+W),h=pp.bind(null,s2),f=pp.bind(null,lf);function d(W,ft){let at,mt;return _w(W)?(at=t.getRecordMatcher(W),mt=ft):mt=W,t.addRoute(mt,at)}function m(W){const ft=t.getRecordMatcher(W);ft&&t.removeRoute(ft)}function g(){return t.getRoutes().map(W=>W.record)}function p(W){return!!t.getRecordMatcher(W)}function v(W,ft){if(ft=ce({},ft||l.value),typeof W=="string"){const C=mp(e,W,ft.path),z=t.resolve({path:C.path},ft),Y=i.createHref(C.fullPath);return ce(C,z,{params:f(z.params),hash:lf(C.hash),redirectedFrom:void 0,href:Y})}let at;if("path"in W)at=ce({},W,{path:mp(e,W.path,ft.path).path});else{const C=ce({},W.params);for(const z in C)C[z]==null&&delete C[z];at=ce({},W,{params:h(C)}),ft.params=h(ft.params)}const mt=t.resolve(at,ft),_t=W.hash||"";mt.params=c(f(mt.params));const X=xI(r,ce({},W,{hash:i2(_t),path:mt.path})),R=i.createHref(X);return ce({fullPath:X,hash:_t,query:r===D0?u2(W.query):W.query||{}},mt,{redirectedFrom:void 0,href:R})}function y(W){return typeof W=="string"?mp(e,W,l.value.path):ce({},W)}function _(W,ft){if(u!==W)return Us(8,{from:ft,to:W})}function T(W){return x(W)}function E(W){return T(ce(y(W),{replace:!0}))}function S(W){const ft=W.matched[W.matched.length-1];if(ft&&ft.redirect){const{redirect:at}=ft;let mt=typeof at=="function"?at(W):at;return typeof mt=="string"&&(mt=mt.includes("?")||mt.includes("#")?mt=y(mt):{path:mt},mt.params={}),ce({query:W.query,hash:W.hash,params:"path"in mt?{}:W.params},mt)}}function x(W,ft){const at=u=v(W),mt=l.value,_t=W.state,X=W.force,R=W.replace===!0,C=S(at);if(C)return x(ce(y(C),{state:typeof C=="object"?ce({},_t,C.state):_t,force:X,replace:R}),ft||at);const z=at;z.redirectedFrom=ft;let Y;return!X&&bI(r,mt,at)&&(Y=Us(16,{to:z,from:mt}),k(mt,mt,!0,!1)),(Y?Promise.resolve(Y):A(z,mt)).catch(K=>oi(K)?oi(K,2)?K:$(K):Q(K,z,mt)).then(K=>{if(K){if(oi(K,2))return x(ce({replace:R},y(K.to),{state:typeof K.to=="object"?ce({},_t,K.to.state):_t,force:X}),ft||z)}else K=U(z,mt,!0,R,_t);return N(z,mt,K),K})}function O(W,ft){const at=_(W,ft);return at?Promise.reject(at):Promise.resolve()}function b(W){const ft=it.values().next().value;return ft&&typeof ft.runWithContext=="function"?ft.runWithContext(W):W()}function A(W,ft){let at;const[mt,_t,X]=y2(W,ft);at=vp(mt.reverse(),"beforeRouteLeave",W,ft);for(const C of mt)C.leaveGuards.forEach(z=>{at.push(ro(z,W,ft))});const R=O.bind(null,W,ft);return at.push(R),gt(at).then(()=>{at=[];for(const C of o.list())at.push(ro(C,W,ft));return at.push(R),gt(at)}).then(()=>{at=vp(_t,"beforeRouteUpdate",W,ft);for(const C of _t)C.updateGuards.forEach(z=>{at.push(ro(z,W,ft))});return at.push(R),gt(at)}).then(()=>{at=[];for(const C of X)if(C.beforeEnter)if(Ir(C.beforeEnter))for(const z of C.beforeEnter)at.push(ro(z,W,ft));else at.push(ro(C.beforeEnter,W,ft));return at.push(R),gt(at)}).then(()=>(W.matched.forEach(C=>C.enterCallbacks={}),at=vp(X,"beforeRouteEnter",W,ft),at.push(R),gt(at))).then(()=>{at=[];for(const C of a.list())at.push(ro(C,W,ft));return at.push(R),gt(at)}).catch(C=>oi(C,8)?C:Promise.reject(C))}function N(W,ft,at){s.list().forEach(mt=>b(()=>mt(W,ft,at)))}function U(W,ft,at,mt,_t){const X=_(W,ft);if(X)return X;const R=ft===Vi,C=ss?history.state:{};at&&(mt||R?i.replace(W.fullPath,ce({scroll:R&&C&&C.scroll},_t)):i.push(W.fullPath,_t)),l.value=W,k(W,ft,at,R),$()}let et;function L(){et||(et=i.listen((W,ft,at)=>{if(!vt.listening)return;const mt=v(W),_t=S(mt);if(_t){x(ce(_t,{replace:!0}),mt).catch(jl);return}u=mt;const X=l.value;ss&&RI(w0(X.fullPath,at.delta),Pd()),A(mt,X).catch(R=>oi(R,12)?R:oi(R,2)?(x(R.to,mt).then(C=>{oi(C,20)&&!at.delta&&at.type===fu.pop&&i.go(-1,!1)}).catch(jl),Promise.reject()):(at.delta&&i.go(-at.delta,!1),Q(R,mt,X))).then(R=>{R=R||U(mt,X,!1),R&&(at.delta&&!oi(R,8)?i.go(-at.delta,!1):at.type===fu.pop&&oi(R,20)&&i.go(-1,!1)),N(mt,X,R)}).catch(jl)}))}let D=fl(),B=fl(),q;function Q(W,ft,at){$(W);const mt=B.list();return mt.length?mt.forEach(_t=>_t(W,ft,at)):console.error(W),Promise.reject(W)}function rt(){return q&&l.value!==Vi?Promise.resolve():new Promise((W,ft)=>{D.add([W,ft])})}function $(W){return q||(q=!W,L(),D.list().forEach(([ft,at])=>W?at(W):ft()),D.reset()),W}function k(W,ft,at,mt){const{scrollBehavior:_t}=n;if(!ss||!_t)return Promise.resolve();const X=!at&&PI(w0(W.fullPath,0))||(mt||!at)&&history.state&&history.state.scroll||null;return ku().then(()=>_t(W,ft,X)).then(R=>R&&CI(R)).catch(R=>Q(R,W,ft))}const pt=W=>i.go(W);let J;const it=new Set,vt={currentRoute:l,listening:!0,addRoute:d,removeRoute:m,hasRoute:p,getRoutes:g,resolve:v,options:n,push:T,replace:E,go:pt,back:()=>pt(-1),forward:()=>pt(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:B.add,isReady:rt,install(W){const ft=this;W.component("RouterLink",d2),W.component("RouterView",g2),W.config.globalProperties.$router=ft,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>Ri(l)}),ss&&!J&&l.value===Vi&&(J=!0,T(i.location).catch(_t=>{}));const at={};for(const _t in Vi)Object.defineProperty(at,_t,{get:()=>l.value[_t],enumerable:!0});W.provide(P_,ft),W.provide(Aw,OT(at)),W.provide(yv,l);const mt=W.unmount;it.add(W),W.unmount=function(){it.delete(W),it.size<1&&(u=Vi,et&&et(),et=null,l.value=Vi,J=!1,q=!1),mt()}}};function gt(W){return W.reduce((ft,at)=>ft.then(()=>b(at)),Promise.resolve())}return vt}function y2(n,t){const e=[],r=[],i=[],o=Math.max(t.matched.length,n.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(n.matched.find(u=>Fs(u,s))?r.push(s):e.push(s));const l=n.matched[a];l&&(t.matched.find(u=>Fs(u,l))||i.push(l))}return[e,r,i]}const ls="4.32.1";let G0=!1,ql,Mw,Cw,xv,Rw,Pw,Iw,Ow,Dw;function x2(n,t={auto:!1}){if(G0)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(ql)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${ql}'\``);G0=t.auto,ql=n.kind,Mw=n.fetch,n.Request,n.Response,n.Headers,Cw=n.FormData,n.Blob,xv=n.File,Rw=n.ReadableStream,Pw=n.getMultipartRequestOptions,Iw=n.getDefaultAgent,Ow=n.fileFromPath,Dw=n.isFsReadStream}class b2{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function S2({manuallyImported:n}={}){const t=n?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let e,r,i,o;try{e=fetch,r=Request,i=Response,o=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:e,Request:r,Response:i,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(a,s)=>({...s,body:new b2(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}ql||x2(S2(),{auto:!0});class oe extends Error{}class dn extends oe{constructor(t,e,r,i){super(`${dn.makeMessage(t,e,r)}`),this.status=t,this.headers=i;const o=e;this.error=o,this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(t,e,r){const i=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,e,r,i){if(!t)return new Id({cause:Sv(e)});const o=e==null?void 0:e.error;return t===400?new Lw(t,o,r,i):t===401?new Nw(t,o,r,i):t===403?new Fw(t,o,r,i):t===404?new Uw(t,o,r,i):t===409?new Bw(t,o,r,i):t===422?new Gw(t,o,r,i):t===429?new kw(t,o,r,i):t>=500?new Hw(t,o,r,i):new dn(t,o,r,i)}}class $n extends dn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class Id extends dn{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,e&&(this.cause=e)}}class I_ extends Id{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Lw extends dn{constructor(){super(...arguments),this.status=400}}class Nw extends dn{constructor(){super(...arguments),this.status=401}}class Fw extends dn{constructor(){super(...arguments),this.status=403}}class Uw extends dn{constructor(){super(...arguments),this.status=404}}class Bw extends dn{constructor(){super(...arguments),this.status=409}}class Gw extends dn{constructor(){super(...arguments),this.status=422}}class kw extends dn{constructor(){super(...arguments),this.status=429}}class Hw extends dn{}class Wr{constructor(t,e){this.iterator=t,this.controller=e}static fromSSEResponse(t,e){let r=!1;const i=new E2;async function*o(){if(!t.body)throw e.abort(),new oe("Attempted to iterate over a response with no body");const s=new ba,l=k0(t.body);for await(const u of l)for(const c of s.decode(u)){const h=i.decode(c);h&&(yield h)}for(const u of s.flush()){const c=i.decode(u);c&&(yield c)}}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const l of o())if(!s){if(l.data.startsWith("[DONE]")){s=!0;continue}if(l.event===null){let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(u&&u.error)throw new dn(void 0,u.error,void 0,void 0);yield u}else{let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(l.event=="error")throw new dn(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}s=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{s||e.abort()}}return new Wr(a,e)}static fromReadableStream(t,e){let r=!1;async function*i(){const a=new ba,s=k0(t);for await(const l of s)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const s of i())a||s&&(yield JSON.parse(s));a=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{a||e.abort()}}return new Wr(o,e)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const a=r.next();t.push(a),e.push(a)}return o.shift()}});return[new Wr(()=>i(t),this.controller),new Wr(()=>i(e),this.controller)]}toReadableStream(){const t=this;let e;const r=new TextEncoder;return new Rw({async start(){e=t[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await e.next();if(a)return i.close();const s=r.encode(JSON.stringify(o)+`
`);i.enqueue(s)}catch(o){i.error(o)}},async cancel(){var i;await((i=e.return)==null?void 0:i.call(e))}})}}class E2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,r,i]=T2(t,":");return i.startsWith(" ")&&(i=i.substring(1)),e==="event"?this.event=i:e==="data"&&this.data.push(i),null}}class ba{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let e=this.decodeText(t);if(this.trailingCR&&(e="\r"+e,this.trailingCR=!1),e.endsWith("\r")&&(this.trailingCR=!0,e=e.slice(0,-1)),!e)return[];const r=ba.NEWLINE_CHARS.has(e[e.length-1]||"");let i=e.split(ba.NEWLINE_REGEXP);return r&&i.pop(),i.length===1&&!r?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),r||(this.buffer=[i.pop()||""]),i)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new oe(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new oe(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new oe("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}ba.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);ba.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function T2(n,t){const e=n.indexOf(t);return e!==-1?[n.substring(0,e),t,n.substring(e+t.length)]:[n,"",""]}function k0(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const zw=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",Vw=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Ww(n),Ww=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",w2=n=>Vw(n)||zw(n)||Dw(n);async function Xw(n,t,e){var i;if(n=await n,e??(e=Vw(n)?{lastModified:n.lastModified,type:n.type}:{}),zw(n)){const o=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new xv([o],t,e)}const r=await A2(n);if(t||(t=C2(n)??"unknown_file"),!e.type){const o=(i=r[0])==null?void 0:i.type;typeof o=="string"&&(e={...e,type:o})}return new xv(r,t,e)}async function A2(n){var e;let t=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)t.push(n);else if(Ww(n))t.push(await n.arrayBuffer());else if(R2(n))for await(const r of n)t.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(e=n==null?void 0:n.constructor)==null?void 0:e.name}; props: ${M2(n)}`);return t}function M2(n){return`[${Object.getOwnPropertyNames(n).map(e=>`"${e}"`).join(", ")}]`}function C2(n){var t;return gp(n.name)||gp(n.filename)||((t=gp(n.path))==null?void 0:t.split(/[\\/]/).pop())}const gp=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},R2=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",H0=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",du=async n=>{const t=await P2(n.body);return Pw(t,n)},P2=async n=>{const t=new Cw;return await Promise.all(Object.entries(n||{}).map(([e,r])=>bv(t,e,r))),t},bv=async(n,t,e)=>{if(e!==void 0){if(e==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")n.append(t,String(e));else if(w2(e)){const r=await Xw(e);n.append(t,r)}else if(Array.isArray(e))await Promise.all(e.map(r=>bv(n,t+"[]",r)));else if(typeof e=="object")await Promise.all(Object.entries(e).map(([r,i])=>bv(n,`${t}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${e} instead`)}};var I2=globalThis&&globalThis.__classPrivateFieldSet||function(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e},O2=globalThis&&globalThis.__classPrivateFieldGet||function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},mc;async function $w(n){const{response:t}=n;if(n.options.stream)return As("response",t.status,t.url,t.headers,t.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(t,n.controller):Wr.fromSSEResponse(t,n.controller);if(t.status===204)return null;if(n.options.__binaryResponse)return t;const e=t.headers.get("content-type");if((e==null?void 0:e.includes("application/json"))||(e==null?void 0:e.includes("application/vnd.api+json"))){const o=await t.json();return As("response",t.status,t.url,t.headers,o),o}const i=await t.text();return As("response",t.status,t.url,t.headers,i),i}class Od extends Promise{constructor(t,e=$w){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=e}_thenUnwrap(t){return new Od(this.responsePromise,async e=>t(await this.parseResponse(e)))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class D2{constructor({baseURL:t,maxRetries:e=2,timeout:r=6e5,httpAgent:i,fetch:o}){this.baseURL=t,this.maxRetries=_p("maxRetries",e),this.timeout=_p("timeout",r),this.httpAgent=i,this.fetch=o??Mw}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...G2(),...this.authHeaders(t)}}validateHeaders(t,e){}defaultIdempotencyKey(){return`stainless-node-retry-${V2()}`}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,r){return this.request(Promise.resolve(r).then(i=>({method:t,path:e,...i})))}getAPIList(t,e,r){return this.requestAPIList(e,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}return null}buildRequest(t){var m;const{method:e,path:r,query:i,headers:o={}}=t,a=H0(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,s=this.calculateContentLength(a),l=this.buildURL(r,i);"timeout"in t&&_p("timeout",t.timeout);const u=t.timeout??this.timeout,c=t.httpAgent??this.httpAgent??Iw(l),h=u+1e3;typeof((m=c==null?void 0:c.options)==null?void 0:m.timeout)=="number"&&h>(c.options.timeout??0)&&(c.options.timeout=h),this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const f=this.buildHeaders({options:t,headers:o,contentLength:s});return{req:{method:e,...a&&{body:a},headers:f,...c&&{agent:c},signal:t.signal??null},url:l,timeout:u}}buildHeaders({options:t,headers:e,contentLength:r}){const i={};r&&(i["content-length"]=r);const o=this.defaultHeaders(t);return X0(i,o),X0(i,e),H0(t.body)&&ql!=="node"&&delete i["content-type"],this.validateHeaders(i,e),i}async prepareOptions(t){}async prepareRequest(t,{url:e,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(e=>[...e])):{...t}:{}}makeStatusError(t,e,r,i){return dn.generate(t,e,r,i)}request(t,e=null){return new Od(this.makeRequest(t,e))}async makeRequest(t,e){var c,h;const r=await t;e==null&&(e=r.maxRetries??this.maxRetries),await this.prepareOptions(r);const{req:i,url:o,timeout:a}=this.buildRequest(r);if(await this.prepareRequest(i,{url:o,options:r}),As("request",o,r,i.headers),(c=r.signal)!=null&&c.aborted)throw new $n;const s=new AbortController,l=await this.fetchWithTimeout(o,i,a,s).catch(Sv);if(l instanceof Error){if((h=r.signal)!=null&&h.aborted)throw new $n;if(e)return this.retryRequest(r,e);throw l.name==="AbortError"?new I_:new Id({cause:l})}const u=N2(l.headers);if(!l.ok){if(e&&this.shouldRetry(l)){const v=`retrying, ${e} attempts remaining`;return As(`response (error; ${v})`,l.status,o,u),this.retryRequest(r,e,u)}const f=await l.text().catch(v=>Sv(v).message),d=k2(f),m=d?void 0:f;throw As(`response (error; ${e?"(error; no more retries left)":"(error; not retryable)"})`,l.status,o,u,m),this.makeStatusError(l.status,d,m,u)}return{response:l,options:r,controller:s}}requestAPIList(t,e){const r=this.makeRequest(e,null);return new L2(this,r,t)}buildURL(t,e){const r=z2(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return Yw(i)||(e={...i,...e}),typeof e=="object"&&e&&!Array.isArray(e)&&(r.search=this.stringifyQuery(e)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([e,r])=>typeof r<"u").map(([e,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(e)}=`;throw new oe(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,e,r,i){const{signal:o,...a}=e||{};o&&o.addEventListener("abort",()=>i.abort());const s=setTimeout(()=>i.abort(),r);return this.getRequestClient().fetch.call(void 0,t,{signal:i.signal,...a}).finally(()=>{clearTimeout(s)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,r){let i;const o=r==null?void 0:r["retry-after-ms"];if(o){const s=parseFloat(o);Number.isNaN(s)||(i=s)}const a=r==null?void 0:r["retry-after"];if(a&&!i){const s=parseFloat(a);Number.isNaN(s)?i=Date.parse(a)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){const s=t.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(e,s)}return await O_(i),this.makeRequest(t,e-1)}calculateDefaultRetryTimeoutMillis(t,e){const o=e-t,a=Math.min(.5*Math.pow(2,o),8),s=1-Math.random()*.25;return a*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ls}`}}class jw{constructor(t,e,r,i){mc.set(this,void 0),I2(this,mc,t,"f"),this.options=i,this.response=e,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const e={...this.options};if("params"in t&&typeof e.query=="object")e.query={...e.query,...t.params};else if("url"in t){const r=[...Object.entries(e.query||{}),...t.url.searchParams.entries()];for(const[i,o]of r)t.url.searchParams.set(i,o);e.query=void 0,e.path=t.url.toString()}return await O2(this,mc,"f").requestAPIList(this.constructor,e)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(mc=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const e of t.getPaginatedItems())yield e}}class L2 extends Od{constructor(t,e,r){super(e,async i=>new r(t,i.response,await $w(i),i.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const e of t)yield e}}const N2=n=>new Proxy(Object.fromEntries(n.entries()),{get(t,e){const r=e.toString();return t[r.toLowerCase()]||t[r]}}),F2={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},Qr=n=>typeof n=="object"&&n!==null&&!Yw(n)&&Object.keys(n).every(t=>qw(F2,t)),U2=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ls,"X-Stainless-OS":V0(Deno.build.os),"X-Stainless-Arch":z0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ls,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ls,"X-Stainless-OS":V0(process.platform),"X-Stainless-Arch":z0(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=B2();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ls,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ls,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function B2(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of n){const r=e.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,a=r[3]||0;return{browser:t,version:`${i}.${o}.${a}`}}}return null}const z0=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",V0=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let W0;const G2=()=>W0??(W0=U2()),k2=n=>{try{return JSON.parse(n)}catch{return}},H2=new RegExp("^(?:[a-z]+:)?//","i"),z2=n=>H2.test(n),O_=n=>new Promise(t=>setTimeout(t,n)),_p=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new oe(`${n} must be an integer`);if(t<0)throw new oe(`${n} must be a positive integer`);return t},Sv=n=>n instanceof Error?n:new Error(n),yp=n=>{var t,e,r,i,o;if(typeof process<"u")return((e=(t=process.env)==null?void 0:t[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(o=(i=(r=Deno.env)==null?void 0:r.get)==null?void 0:i.call(r,n))==null?void 0:o.trim()};function Yw(n){if(!n)return!0;for(const t in n)return!1;return!0}function qw(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function X0(n,t){for(const e in t){if(!qw(t,e))continue;const r=e.toLowerCase();if(!r)continue;const i=t[e];i===null?delete n[r]:i!==void 0&&(n[r]=i)}}function As(n,...t){var e;typeof process<"u"&&((e=process==null?void 0:process.env)==null?void 0:e.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${n}`,...t)}const V2=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)}),W2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function $0(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class D_ extends jw{constructor(t,e,r,i){super(t,e,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Bi extends jw{constructor(t,e,r,i){super(t,e,r,i),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const e=Object.fromEntries(t.url.searchParams);return Object.keys(e).length?e:null}nextPageInfo(){var r;const t=this.getPaginatedItems();if(!t.length)return null;const e=(r=t[t.length-1])==null?void 0:r.id;return e?{params:{after:e}}:null}}class Me{constructor(t){this._client=t}}let uf=class extends Me{create(t,e){return this._client.post("/chat/completions",{body:t,...e,stream:t.stream??!1})}};uf||(uf={});let cf=class extends Me{constructor(){super(...arguments),this.completions=new uf(this._client)}};(function(n){n.Completions=uf})(cf||(cf={}));class hf extends Me{create(t,e){return this._client.post("/audio/speech",{body:t,...e,__binaryResponse:!0})}}hf||(hf={});class ff extends Me{create(t,e){return this._client.post("/audio/transcriptions",du({body:t,...e}))}}ff||(ff={});class df extends Me{create(t,e){return this._client.post("/audio/translations",du({body:t,...e}))}}df||(df={});let pf=class extends Me{constructor(){super(...arguments),this.transcriptions=new ff(this._client),this.translations=new df(this._client),this.speech=new hf(this._client)}};(function(n){n.Transcriptions=ff,n.Translations=df,n.Speech=hf})(pf||(pf={}));let mf=class extends Me{create(t,e,r){return this._client.post(`/assistants/${t}/files`,{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(t,e,r){return this._client.get(`/assistants/${t}/files/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(t,e={},r){return Qr(e)?this.list(t,{},e):this._client.getAPIList(`/assistants/${t}/files`,L_,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(t,e,r){return this._client.delete(`/assistants/${t}/files/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}};class L_ extends Bi{}(function(n){n.AssistantFilesPage=L_})(mf||(mf={}));class vf extends Me{constructor(){super(...arguments),this.files=new mf(this._client)}create(t,e){return this._client.post("/assistants",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}retrieve(t,e){return this._client.get(`/assistants/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}update(t,e,r){return this._client.post(`/assistants/${t}`,{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(t={},e){return Qr(t)?this.list({},t):this._client.getAPIList("/assistants",N_,{query:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}del(t,e){return this._client.delete(`/assistants/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}}class N_ extends Bi{}(function(n){n.AssistantsPage=N_,n.Files=mf,n.AssistantFilesPage=L_})(vf||(vf={}));function j0(n){return typeof n.parse=="function"}const Ms=n=>(n==null?void 0:n.role)==="assistant",Kw=n=>(n==null?void 0:n.role)==="function",Zw=n=>(n==null?void 0:n.role)==="tool";var cr=globalThis&&globalThis.__classPrivateFieldSet||function(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e},ne=globalThis&&globalThis.__classPrivateFieldGet||function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},gn,Rh,Ph,Il,Ol,Ih,Dl,mi,Ll,Oh,Dh,us,Ev,gf,Tv,wv,Av,Mv,Jw,Cv;const Y0=10;class Qw{constructor(){gn.add(this),this.controller=new AbortController,Rh.set(this,void 0),Ph.set(this,()=>{}),Il.set(this,()=>{}),Ol.set(this,void 0),Ih.set(this,()=>{}),Dl.set(this,()=>{}),mi.set(this,{}),this._chatCompletions=[],this.messages=[],Ll.set(this,!1),Oh.set(this,!1),Dh.set(this,!1),us.set(this,!1),Mv.set(this,t=>{if(cr(this,Oh,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new $n),t instanceof $n)return cr(this,Dh,!0,"f"),this._emit("abort",t);if(t instanceof oe)return this._emit("error",t);if(t instanceof Error){const e=new oe(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new oe(String(t)))}),cr(this,Rh,new Promise((t,e)=>{cr(this,Ph,t,"f"),cr(this,Il,e,"f")}),"f"),cr(this,Ol,new Promise((t,e)=>{cr(this,Ih,t,"f"),cr(this,Dl,e,"f")}),"f"),ne(this,Rh,"f").catch(()=>{}),ne(this,Ol,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},ne(this,Mv,"f"))},0)}_addChatCompletion(t){var r;this._chatCompletions.push(t),this._emit("chatCompletion",t);const e=(r=t.choices[0])==null?void 0:r.message;return e&&this._addMessage(e),t}_addMessage(t,e=!0){if("content"in t||(t.content=null),this.messages.push(t),e){if(this._emit("message",t),(Kw(t)||Zw(t))&&t.content)this._emit("functionCallResult",t.content);else if(Ms(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(Ms(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}_connected(){this.ended||(ne(this,Ph,"f").call(this),this._emit("connect"))}get ended(){return ne(this,Ll,"f")}get errored(){return ne(this,Oh,"f")}get aborted(){return ne(this,Dh,"f")}abort(){this.controller.abort()}on(t,e){return(ne(this,mi,"f")[t]||(ne(this,mi,"f")[t]=[])).push({listener:e}),this}off(t,e){const r=ne(this,mi,"f")[t];if(!r)return this;const i=r.findIndex(o=>o.listener===e);return i>=0&&r.splice(i,1),this}once(t,e){return(ne(this,mi,"f")[t]||(ne(this,mi,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise((e,r)=>{cr(this,us,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,e)})}async done(){cr(this,us,!0,"f"),await ne(this,Ol,"f")}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new oe("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),ne(this,gn,"m",Ev).call(this)}async finalMessage(){return await this.done(),ne(this,gn,"m",gf).call(this)}async finalFunctionCall(){return await this.done(),ne(this,gn,"m",Tv).call(this)}async finalFunctionCallResult(){return await this.done(),ne(this,gn,"m",wv).call(this)}async totalUsage(){return await this.done(),ne(this,gn,"m",Av).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(t,...e){if(ne(this,Ll,"f"))return;t==="end"&&(cr(this,Ll,!0,"f"),ne(this,Ih,"f").call(this));const r=ne(this,mi,"f")[t];if(r&&(ne(this,mi,"f")[t]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...e))),t==="abort"){const i=e[0];!ne(this,us,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ne(this,Il,"f").call(this,i),ne(this,Dl,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=e[0];!ne(this,us,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ne(this,Il,"f").call(this,i),ne(this,Dl,"f").call(this,i),this._emit("end")}}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const e=ne(this,gn,"m",gf).call(this);e&&this._emit("finalMessage",e);const r=ne(this,gn,"m",Ev).call(this);r&&this._emit("finalContent",r);const i=ne(this,gn,"m",Tv).call(this);i&&this._emit("finalFunctionCall",i);const o=ne(this,gn,"m",wv).call(this);o!=null&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",ne(this,gn,"m",Av).call(this))}async _createChatCompletion(t,e,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ne(this,gn,"m",Jw).call(this,e);const o=await t.create({...e,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(o)}async _runChatCompletion(t,e,r){for(const i of e.messages)this._addMessage(i,!1);return await this._createChatCompletion(t,e,r)}async _runFunctions(t,e,r){var f;const i="function",{function_call:o="auto",stream:a,...s}=e,l=typeof o!="string"&&(o==null?void 0:o.name),{maxChatCompletions:u=Y0}=r||{},c={};for(const d of e.functions)c[d.name||d.function.name]=d;const h=e.functions.map(d=>({name:d.name||d.function.name,parameters:d.parameters,description:d.description}));for(const d of e.messages)this._addMessage(d,!1);for(let d=0;d<u;++d){const g=(f=(await this._createChatCompletion(t,{...s,function_call:o,functions:h,messages:[...this.messages]},r)).choices[0])==null?void 0:f.message;if(!g)throw new oe("missing message in ChatCompletion response");if(!g.function_call)return;const{name:p,arguments:v}=g.function_call,y=c[p];if(y){if(l&&l!==p){const S=`Invalid function_call: ${JSON.stringify(p)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:p,content:S});continue}}else{const S=`Invalid function_call: ${JSON.stringify(p)}. Available options are: ${h.map(x=>JSON.stringify(x.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:p,content:S});continue}let _;try{_=j0(y)?await y.parse(v):v}catch(S){this._addMessage({role:i,name:p,content:S instanceof Error?S.message:String(S)});continue}const T=await y.function(_,this),E=ne(this,gn,"m",Cv).call(this,T);if(this._addMessage({role:i,name:p,content:E}),l)return}}async _runTools(t,e,r){var f,d;const i="tool",{tool_choice:o="auto",stream:a,...s}=e,l=typeof o!="string"&&((f=o==null?void 0:o.function)==null?void 0:f.name),{maxChatCompletions:u=Y0}=r||{},c={};for(const m of e.tools)m.type==="function"&&(c[m.function.name||m.function.function.name]=m.function);const h="tools"in e?e.tools.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description}}:m):void 0;for(const m of e.messages)this._addMessage(m,!1);for(let m=0;m<u;++m){const p=(d=(await this._createChatCompletion(t,{...s,tool_choice:o,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:d.message;if(!p)throw new oe("missing message in ChatCompletion response");if(!p.tool_calls)return;for(const v of p.tool_calls){if(v.type!=="function")continue;const y=v.id,{name:_,arguments:T}=v.function,E=c[_];if(E){if(l&&l!==_){const b=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:y,content:b});continue}}else{const b=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${h.map(A=>JSON.stringify(A.function.name)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:y,content:b});continue}let S;try{S=j0(E)?await E.parse(T):T}catch(b){const A=b instanceof Error?b.message:String(b);this._addMessage({role:i,tool_call_id:y,content:A});continue}const x=await E.function(S,this),O=ne(this,gn,"m",Cv).call(this,x);if(this._addMessage({role:i,tool_call_id:y,content:O}),l)return}}}}Rh=new WeakMap,Ph=new WeakMap,Il=new WeakMap,Ol=new WeakMap,Ih=new WeakMap,Dl=new WeakMap,mi=new WeakMap,Ll=new WeakMap,Oh=new WeakMap,Dh=new WeakMap,us=new WeakMap,Mv=new WeakMap,gn=new WeakSet,Ev=function(){return ne(this,gn,"m",gf).call(this).content??null},gf=function(){let t=this.messages.length;for(;t-- >0;){const e=this.messages[t];if(Ms(e))return{...e,content:e.content??null}}throw new oe("stream ended without producing a ChatCompletionMessage with role=assistant")},Tv=function(){var t,e;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(Ms(i)&&(i!=null&&i.function_call))return i.function_call;if(Ms(i)&&((t=i==null?void 0:i.tool_calls)!=null&&t.length))return(e=i.tool_calls.at(-1))==null?void 0:e.function}},wv=function(){for(let t=this.messages.length-1;t>=0;t--){const e=this.messages[t];if(Kw(e)&&e.content!=null||Zw(e)&&e.content!=null&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(o=>o.type==="function"&&o.id===e.tool_call_id))}))return e.content}},Av=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:e}of this._chatCompletions)e&&(t.completion_tokens+=e.completion_tokens,t.prompt_tokens+=e.prompt_tokens,t.total_tokens+=e.total_tokens);return t},Jw=function(t){if(t.n!=null&&t.n>1)throw new oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Cv=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class pu extends Qw{static runFunctions(t,e,r){const i=new pu,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,e,o)),i}static runTools(t,e,r){const i=new pu,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,e,o)),i}_addMessage(t){super._addMessage(t),Ms(t)&&t.content&&this._emit("content",t.content)}}var hr=globalThis&&globalThis.__classPrivateFieldGet||function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},xp=globalThis&&globalThis.__classPrivateFieldSet||function(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e},Fr,Wi,bp,Sp,vc,q0;class mu extends Qw{constructor(){super(...arguments),Fr.add(this),Wi.set(this,void 0)}get currentChatCompletionSnapshot(){return hr(this,Wi,"f")}static fromReadableStream(t){const e=new mu;return e._run(()=>e._fromReadableStream(t)),e}static createChatCompletion(t,e,r){const i=new mu;return i._run(()=>i._runChatCompletion(t,{...e,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(t,e,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),hr(this,Fr,"m",bp).call(this);const o=await t.create({...e,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const s of o)hr(this,Fr,"m",Sp).call(this,s);if((a=o.controller.signal)!=null&&a.aborted)throw new $n;return this._addChatCompletion(hr(this,Fr,"m",vc).call(this))}async _fromReadableStream(t,e){var a;const r=e==null?void 0:e.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),hr(this,Fr,"m",bp).call(this),this._connected();const i=Wr.fromReadableStream(t,this.controller);let o;for await(const s of i)o&&o!==s.id&&this._addChatCompletion(hr(this,Fr,"m",vc).call(this)),hr(this,Fr,"m",Sp).call(this,s),o=s.id;if((a=i.controller.signal)!=null&&a.aborted)throw new $n;return this._addChatCompletion(hr(this,Fr,"m",vc).call(this))}[(Wi=new WeakMap,Fr=new WeakSet,bp=function(){this.ended||xp(this,Wi,void 0,"f")},Sp=function(e){var a,s,l;if(this.ended)return;const r=hr(this,Fr,"m",q0).call(this,e);this._emit("chunk",e,r);const i=(s=(a=e.choices[0])==null?void 0:a.delta)==null?void 0:s.content,o=(l=r.choices[0])==null?void 0:l.message;i!=null&&(o==null?void 0:o.role)==="assistant"&&(o!=null&&o.content)&&this._emit("content",i,o.content)},vc=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const e=hr(this,Wi,"f");if(!e)throw new oe("request ended without sending any chunks");return xp(this,Wi,void 0,"f"),X2(e)},q0=function(e){var r,i,o;let a=hr(this,Wi,"f");const{choices:s,...l}=e;a?Object.assign(a,l):a=xp(this,Wi,{...l,choices:[]},"f");for(const{delta:u,finish_reason:c,index:h,logprobs:f=null,...d}of e.choices){let m=a.choices[h];if(m||(m=a.choices[h]={finish_reason:c,index:h,message:{},logprobs:f,...d}),f)if(!m.logprobs)m.logprobs=Object.assign({},f);else{const{content:T,...E}=f;Object.assign(m.logprobs,E),T&&((r=m.logprobs).content??(r.content=[]),m.logprobs.content.push(...T))}if(c&&(m.finish_reason=c),Object.assign(m,d),!u)continue;const{content:g,function_call:p,role:v,tool_calls:y,..._}=u;if(Object.assign(m.message,_),g&&(m.message.content=(m.message.content||"")+g),v&&(m.message.role=v),p&&(m.message.function_call?(p.name&&(m.message.function_call.name=p.name),p.arguments&&((i=m.message.function_call).arguments??(i.arguments=""),m.message.function_call.arguments+=p.arguments)):m.message.function_call=p),y){m.message.tool_calls||(m.message.tool_calls=[]);for(const{index:T,id:E,type:S,function:x,...O}of y){const b=(o=m.message.tool_calls)[T]??(o[T]={});Object.assign(b,O),E&&(b.id=E),S&&(b.type=S),x&&(b.function??(b.function={arguments:""})),x!=null&&x.name&&(b.function.name=x.name),x!=null&&x.arguments&&(b.function.arguments+=x.arguments)}}}return a},Symbol.asyncIterator)](){const t=[],e=[];let r=!1;return this.on("chunk",i=>{const o=e.shift();o?o.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of e)i.resolve(void 0);e.length=0}),this.on("abort",i=>{r=!0;for(const o of e)o.reject(i);e.length=0}),this.on("error",i=>{r=!0;for(const o of e)o.reject(i);e.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,a)=>e.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Wr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function X2(n){const{id:t,choices:e,created:r,model:i,system_fingerprint:o,...a}=n;return{...a,id:t,choices:e.map(({message:s,finish_reason:l,index:u,logprobs:c,...h})=>{if(!l)throw new oe(`missing finish_reason for choice ${u}`);const{content:f=null,function_call:d,tool_calls:m,...g}=s,p=s.role;if(!p)throw new oe(`missing role for choice ${u}`);if(d){const{arguments:v,name:y}=d;if(v==null)throw new oe(`missing function_call.arguments for choice ${u}`);if(!y)throw new oe(`missing function_call.name for choice ${u}`);return{...h,message:{content:f,function_call:{arguments:v,name:y},role:p},finish_reason:l,index:u,logprobs:c}}return m?{...h,index:u,finish_reason:l,logprobs:c,message:{...g,role:p,content:f,tool_calls:m.map((v,y)=>{const{function:_,type:T,id:E,...S}=v,{arguments:x,name:O,...b}=_||{};if(E==null)throw new oe(`missing choices[${u}].tool_calls[${y}].id
${gc(n)}`);if(T==null)throw new oe(`missing choices[${u}].tool_calls[${y}].type
${gc(n)}`);if(O==null)throw new oe(`missing choices[${u}].tool_calls[${y}].function.name
${gc(n)}`);if(x==null)throw new oe(`missing choices[${u}].tool_calls[${y}].function.arguments
${gc(n)}`);return{...S,id:E,type:T,function:{...b,name:O,arguments:x}}})}}:{...h,message:{...g,content:f,role:p},finish_reason:l,index:u,logprobs:c}}),created:r,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}}}function gc(n){return JSON.stringify(n)}class Cs extends mu{static fromReadableStream(t){const e=new Cs;return e._run(()=>e._fromReadableStream(t)),e}static runFunctions(t,e,r){const i=new Cs,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,e,o)),i}static runTools(t,e,r){const i=new Cs,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,e,o)),i}}let tA=class extends Me{runFunctions(t,e){return t.stream?Cs.runFunctions(this._client.chat.completions,t,e):pu.runFunctions(this._client.chat.completions,t,e)}runTools(t,e){return t.stream?Cs.runTools(this._client.chat.completions,t,e):pu.runTools(this._client.chat.completions,t,e)}stream(t,e){return mu.createChatCompletion(this._client.chat.completions,t,e)}};class _f extends Me{constructor(){super(...arguments),this.completions=new tA(this._client)}}(function(n){n.Completions=tA})(_f||(_f={}));var fr=globalThis&&globalThis.__classPrivateFieldSet||function(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e},Re=globalThis&&globalThis.__classPrivateFieldGet||function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},Lh,Nh,Nl,Fl,Fh,Ul,vi,Bl,Uh,Bh,cs,Rv;class $2{constructor(){this.controller=new AbortController,Lh.set(this,void 0),Nh.set(this,()=>{}),Nl.set(this,()=>{}),Fl.set(this,void 0),Fh.set(this,()=>{}),Ul.set(this,()=>{}),vi.set(this,{}),Bl.set(this,!1),Uh.set(this,!1),Bh.set(this,!1),cs.set(this,!1),Rv.set(this,t=>{if(fr(this,Uh,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new $n),t instanceof $n)return fr(this,Bh,!0,"f"),this._emit("abort",t);if(t instanceof oe)return this._emit("error",t);if(t instanceof Error){const e=new oe(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new oe(String(t)))}),fr(this,Lh,new Promise((t,e)=>{fr(this,Nh,t,"f"),fr(this,Nl,e,"f")}),"f"),fr(this,Fl,new Promise((t,e)=>{fr(this,Fh,t,"f"),fr(this,Ul,e,"f")}),"f"),Re(this,Lh,"f").catch(()=>{}),Re(this,Fl,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emit("end")},Re(this,Rv,"f"))},0)}_addRun(t){return t}_connected(){this.ended||(Re(this,Nh,"f").call(this),this._emit("connect"))}get ended(){return Re(this,Bl,"f")}get errored(){return Re(this,Uh,"f")}get aborted(){return Re(this,Bh,"f")}abort(){this.controller.abort()}on(t,e){return(Re(this,vi,"f")[t]||(Re(this,vi,"f")[t]=[])).push({listener:e}),this}off(t,e){const r=Re(this,vi,"f")[t];if(!r)return this;const i=r.findIndex(o=>o.listener===e);return i>=0&&r.splice(i,1),this}once(t,e){return(Re(this,vi,"f")[t]||(Re(this,vi,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise((e,r)=>{fr(this,cs,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,e)})}async done(){fr(this,cs,!0,"f"),await Re(this,Fl,"f")}_emit(t,...e){if(Re(this,Bl,"f"))return;t==="end"&&(fr(this,Bl,!0,"f"),Re(this,Fh,"f").call(this));const r=Re(this,vi,"f")[t];if(r&&(Re(this,vi,"f")[t]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...e))),t==="abort"){const i=e[0];!Re(this,cs,"f")&&!(r!=null&&r.length)&&Promise.reject(i),Re(this,Nl,"f").call(this,i),Re(this,Ul,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=e[0];!Re(this,cs,"f")&&!(r!=null&&r.length)&&Promise.reject(i),Re(this,Nl,"f").call(this,i),Re(this,Ul,"f").call(this,i),this._emit("end")}}async _threadAssistantStream(t,e,r){return await this._createThreadAssistantStream(e,t,r)}async _runAssistantStream(t,e,r,i){return await this._createAssistantStream(e,t,r,i)}async _runToolAssistantStream(t,e,r,i,o){return await this._createToolAssistantStream(r,t,e,i,o)}async _createThreadAssistantStream(t,e,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o=await t.createAndRun({...e,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addRun(o)}async _createToolAssistantStream(t,e,r,i,o){const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const s=await t.submitToolOutputs(e,r,{...i,stream:!1},{...o,signal:this.controller.signal});return this._connected(),this._addRun(s)}async _createAssistantStream(t,e,r,i){const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a=await t.create(e,{...r,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addRun(a)}}Lh=new WeakMap,Nh=new WeakMap,Nl=new WeakMap,Fl=new WeakMap,Fh=new WeakMap,Ul=new WeakMap,vi=new WeakMap,Bl=new WeakMap,Uh=new WeakMap,Bh=new WeakMap,cs=new WeakMap,Rv=new WeakMap;var Ft=globalThis&&globalThis.__classPrivateFieldGet||function(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)},Un=globalThis&&globalThis.__classPrivateFieldSet||function(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e},on,Pv,Gr,Gh,xr,na,ps,qo,yf,zn,kh,Hh,Kl,Gl,kl,K0,Z0,J0,Q0,tx,ex,nx;class Ar extends $2{constructor(){super(...arguments),on.add(this),Pv.set(this,[]),Gr.set(this,{}),Gh.set(this,{}),xr.set(this,void 0),na.set(this,void 0),ps.set(this,void 0),qo.set(this,void 0),yf.set(this,void 0),zn.set(this,void 0),kh.set(this,void 0),Hh.set(this,void 0),Kl.set(this,void 0)}[(Pv=new WeakMap,Gr=new WeakMap,Gh=new WeakMap,xr=new WeakMap,na=new WeakMap,ps=new WeakMap,qo=new WeakMap,yf=new WeakMap,zn=new WeakMap,kh=new WeakMap,Hh=new WeakMap,Kl=new WeakMap,on=new WeakSet,Symbol.asyncIterator)](){const t=[],e=[];let r=!1;return this.on("event",i=>{const o=e.shift();o?o.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of e)i.resolve(void 0);e.length=0}),this.on("abort",i=>{r=!0;for(const o of e)o.reject(i);e.length=0}),this.on("error",i=>{r=!0;for(const o of e)o.reject(i);e.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,a)=>e.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const e=new Ar;return e._run(()=>e._fromReadableStream(t)),e}async _fromReadableStream(t,e){var o;const r=e==null?void 0:e.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Wr.fromReadableStream(t,this.controller);for await(const a of i)Ft(this,on,"m",Gl).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new $n;return this._addRun(Ft(this,on,"m",kl).call(this))}toReadableStream(){return new Wr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,e,r,i,o){const a=new Ar;return a._run(()=>a._runToolAssistantStream(t,e,r,i,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(t,e,r,i,o){var u;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const s={...i,stream:!0},l=await t.submitToolOutputs(e,r,s,{...o,signal:this.controller.signal});this._connected();for await(const c of l)Ft(this,on,"m",Gl).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new $n;return this._addRun(Ft(this,on,"m",kl).call(this))}static createThreadAssistantStream(t,e,r){const i=new Ar;return i._run(()=>i._threadAssistantStream(t,e,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(t,e,r,i){const o=new Ar;return o._run(()=>o._runAssistantStream(t,e,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return Ft(this,kh,"f")}currentRun(){return Ft(this,Hh,"f")}currentMessageSnapshot(){return Ft(this,xr,"f")}currentRunStepSnapshot(){return Ft(this,Kl,"f")}async finalRunSteps(){return await this.done(),Object.values(Ft(this,Gr,"f"))}async finalMessages(){return await this.done(),Object.values(Ft(this,Gh,"f"))}async finalRun(){if(await this.done(),!Ft(this,na,"f"))throw Error("Final run was not received.");return Ft(this,na,"f")}async _createThreadAssistantStream(t,e,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...e,stream:!0},a=await t.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const l of a)Ft(this,on,"m",Gl).call(this,l);if((s=a.controller.signal)!=null&&s.aborted)throw new $n;return this._addRun(Ft(this,on,"m",kl).call(this))}async _createAssistantStream(t,e,r,i){var l;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},s=await t.create(e,a,{...i,signal:this.controller.signal});this._connected();for await(const u of s)Ft(this,on,"m",Gl).call(this,u);if((l=s.controller.signal)!=null&&l.aborted)throw new $n;return this._addRun(Ft(this,on,"m",kl).call(this))}static accumulateDelta(t,e){for(const[r,i]of Object.entries(e)){if(!t.hasOwnProperty(r)){t[r]=i;continue}let o=t[r];if(o==null){t[r]=i;continue}if(r==="index"||r==="type"){t[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if($0(o)&&$0(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(a=>typeof a=="string"||typeof a=="number")){o.push(...i);continue}}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);t[r]=o}return t}}Gl=function(t){if(!this.ended)switch(Un(this,kh,t,"f"),Ft(this,on,"m",J0).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Ft(this,on,"m",nx).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ft(this,on,"m",Z0).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Ft(this,on,"m",K0).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},kl=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");if(!Ft(this,na,"f"))throw Error("Final run has not been received");return Ft(this,na,"f")},K0=function(t){const[e,r]=Ft(this,on,"m",tx).call(this,t,Ft(this,xr,"f"));Un(this,xr,e,"f"),Ft(this,Gh,"f")[e.id]=e;for(const i of r){const o=e.content[i.index];(o==null?void 0:o.type)=="text"&&this._emit("textCreated",o.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,e),t.data.delta.content)for(const i of t.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,a=e.content[i.index];if(a&&a.type=="text")this._emit("textDelta",o,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Ft(this,ps,"f")){if(Ft(this,qo,"f"))switch(Ft(this,qo,"f").type){case"text":this._emit("textDone",Ft(this,qo,"f").text,Ft(this,xr,"f"));break;case"image_file":this._emit("imageFileDone",Ft(this,qo,"f").image_file,Ft(this,xr,"f"));break}Un(this,ps,i.index,"f")}Un(this,qo,e.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Ft(this,ps,"f")!==void 0){const i=t.data.content[Ft(this,ps,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Ft(this,xr,"f"));break;case"text":this._emit("textDone",i.text,Ft(this,xr,"f"));break}}Ft(this,xr,"f")&&this._emit("messageDone",t.data),Un(this,xr,void 0,"f")}},Z0=function(t){const e=Ft(this,on,"m",Q0).call(this,t);switch(Un(this,Kl,e,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&e.step_details.type=="tool_calls")for(const o of r.step_details.tool_calls)o.index==Ft(this,yf,"f")?this._emit("toolCallDelta",o,e.step_details.tool_calls[o.index]):(Ft(this,zn,"f")&&this._emit("toolCallDone",Ft(this,zn,"f")),Un(this,yf,o.index,"f"),Un(this,zn,e.step_details.tool_calls[o.index],"f"),Ft(this,zn,"f")&&this._emit("toolCallCreated",Ft(this,zn,"f")));this._emit("runStepDelta",t.data.delta,e);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Un(this,Kl,void 0,"f"),t.data.step_details.type=="tool_calls"&&Ft(this,zn,"f")&&(this._emit("toolCallDone",Ft(this,zn,"f")),Un(this,zn,void 0,"f")),this._emit("runStepDone",t.data,e);break}},J0=function(t){Ft(this,Pv,"f").push(t),this._emit("event",t)},Q0=function(t){switch(t.event){case"thread.run.step.created":return Ft(this,Gr,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let e=Ft(this,Gr,"f")[t.data.id];if(!e)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const i=Ar.accumulateDelta(e,r.delta);Ft(this,Gr,"f")[t.data.id]=i}return Ft(this,Gr,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Ft(this,Gr,"f")[t.data.id]=t.data;break}if(Ft(this,Gr,"f")[t.data.id])return Ft(this,Gr,"f")[t.data.id];throw new Error("No snapshot available")},tx=function(t,e){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!e)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=t.data;if(i.delta.content)for(const o of i.delta.content)if(o.index in e.content){let a=e.content[o.index];e.content[o.index]=Ft(this,on,"m",ex).call(this,o,a)}else e.content[o.index]=o,r.push(o);return[e,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(e)return[e,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ex=function(t,e){return Ar.accumulateDelta(e,t)},nx=function(t){switch(Un(this,Hh,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Un(this,na,t.data,"f"),Ft(this,zn,"f")&&(this._emit("toolCallDone",Ft(this,zn,"f")),Un(this,zn,void 0,"f"));break}};let xf=class extends Me{retrieve(t,e,r,i){return this._client.get(`/threads/${t}/messages/${e}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,e,r={},i){return Qr(r)?this.list(t,e,{},r):this._client.getAPIList(`/threads/${t}/messages/${e}/files`,F_,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class F_ extends Bi{}(function(n){n.MessageFilesPage=F_})(xf||(xf={}));class bf extends Me{constructor(){super(...arguments),this.files=new xf(this._client)}create(t,e,r){return this._client.post(`/threads/${t}/messages`,{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(t,e,r){return this._client.get(`/threads/${t}/messages/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(t,e,r,i){return this._client.post(`/threads/${t}/messages/${e}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,e={},r){return Qr(e)?this.list(t,{},e):this._client.getAPIList(`/threads/${t}/messages`,U_,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class U_ extends Bi{}(function(n){n.MessagesPage=U_,n.Files=xf,n.MessageFilesPage=F_})(bf||(bf={}));class Sf extends Me{retrieve(t,e,r,i){return this._client.get(`/threads/${t}/runs/${e}/steps/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,e,r={},i){return Qr(r)?this.list(t,e,{},r):this._client.getAPIList(`/threads/${t}/runs/${e}/steps`,B_,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class B_ extends Bi{}(function(n){n.RunStepsPage=B_})(Sf||(Sf={}));class Ef extends Me{constructor(){super(...arguments),this.steps=new Sf(this._client)}create(t,e,r){return this._client.post(`/threads/${t}/runs`,{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers},stream:e.stream??!1})}retrieve(t,e,r){return this._client.get(`/threads/${t}/runs/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(t,e,r,i){return this._client.post(`/threads/${t}/runs/${e}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,e={},r){return Qr(e)?this.list(t,{},e):this._client.getAPIList(`/threads/${t}/runs`,G_,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}cancel(t,e,r){return this._client.post(`/threads/${t}/runs/${e}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}async createAndPoll(t,e,r){const i=await this.create(t,e,r);return await this.poll(t,i.id,r)}createAndStream(t,e,r){return Ar.createAssistantStream(t,this._client.beta.threads.runs,e,r)}async poll(t,e,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:a}=await this.retrieve(t,e,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(s=u)}}await O_(s);break;case"requires_action":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(t,e,r){return Ar.createAssistantStream(t,this._client.beta.threads.runs,e,r)}submitToolOutputs(t,e,r,i){return this._client.post(`/threads/${t}/runs/${e}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,e,r,i){const o=await this.submitToolOutputs(t,e,r,i);return await this.poll(t,o.id,i)}submitToolOutputsStream(t,e,r,i){return Ar.createToolAssistantStream(t,e,this._client.beta.threads.runs,r,i)}}class G_ extends Bi{}(function(n){n.RunsPage=G_,n.Steps=Sf,n.RunStepsPage=B_})(Ef||(Ef={}));class Tf extends Me{constructor(){super(...arguments),this.runs=new Ef(this._client),this.messages=new bf(this._client)}create(t={},e){return Qr(t)?this.create({},t):this._client.post("/threads",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}retrieve(t,e){return this._client.get(`/threads/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}update(t,e,r){return this._client.post(`/threads/${t}`,{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(t,e){return this._client.delete(`/threads/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers}})}createAndRun(t,e){return this._client.post("/threads/runs",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e==null?void 0:e.headers},stream:t.stream??!1})}async createAndRunPoll(t,e){const r=await this.createAndRun(t,e);return await this.runs.poll(r.thread_id,r.id,e)}createAndRunStream(t,e){return Ar.createThreadAssistantStream(t,this._client.beta.threads,e)}}(function(n){n.Runs=Ef,n.RunsPage=G_,n.Messages=bf,n.MessagesPage=U_})(Tf||(Tf={}));class wf extends Me{constructor(){super(...arguments),this.chat=new _f(this._client),this.assistants=new vf(this._client),this.threads=new Tf(this._client)}}(function(n){n.Chat=_f,n.Assistants=vf,n.AssistantsPage=N_,n.Threads=Tf})(wf||(wf={}));class Af extends Me{create(t,e){return this._client.post("/completions",{body:t,...e,stream:t.stream??!1})}}Af||(Af={});class Mf extends Me{create(t,e){return this._client.post("/embeddings",{body:t,...e})}}Mf||(Mf={});class Cf extends Me{create(t,e){return this._client.post("/files",du({body:t,...e}))}retrieve(t,e){return this._client.get(`/files/${t}`,e)}list(t={},e){return Qr(t)?this.list({},t):this._client.getAPIList("/files",k_,{query:t,...e})}del(t,e){return this._client.delete(`/files/${t}`,e)}content(t,e){return this._client.get(`/files/${t}/content`,{...e,__binaryResponse:!0})}retrieveContent(t,e){return this._client.get(`/files/${t}/content`,{...e,headers:{Accept:"application/json",...e==null?void 0:e.headers}})}async waitForProcessing(t,{pollInterval:e=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),o=Date.now();let a=await this.retrieve(t);for(;!a.status||!i.has(a.status);)if(await O_(e),a=await this.retrieve(t),Date.now()-o>r)throw new I_({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return a}}class k_ extends D_{}(function(n){n.FileObjectsPage=k_})(Cf||(Cf={}));class Rf extends Me{create(t,e){return this._client.post("/fine_tuning/jobs",{body:t,...e})}retrieve(t,e){return this._client.get(`/fine_tuning/jobs/${t}`,e)}list(t={},e){return Qr(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",H_,{query:t,...e})}cancel(t,e){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,e)}listEvents(t,e={},r){return Qr(e)?this.listEvents(t,{},e):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,z_,{query:e,...r})}}class H_ extends Bi{}class z_ extends Bi{}(function(n){n.FineTuningJobsPage=H_,n.FineTuningJobEventsPage=z_})(Rf||(Rf={}));class Pf extends Me{constructor(){super(...arguments),this.jobs=new Rf(this._client)}}(function(n){n.Jobs=Rf,n.FineTuningJobsPage=H_,n.FineTuningJobEventsPage=z_})(Pf||(Pf={}));class If extends Me{createVariation(t,e){return this._client.post("/images/variations",du({body:t,...e}))}edit(t,e){return this._client.post("/images/edits",du({body:t,...e}))}generate(t,e){return this._client.post("/images/generations",{body:t,...e})}}If||(If={});class Of extends Me{retrieve(t,e){return this._client.get(`/models/${t}`,e)}list(t){return this._client.getAPIList("/models",V_,t)}del(t,e){return this._client.delete(`/models/${t}`,e)}}class V_ extends D_{}(function(n){n.ModelsPage=V_})(Of||(Of={}));class Df extends Me{create(t,e){return this._client.post("/moderations",{body:t,...e})}}Df||(Df={});var eA;class nn extends D2{constructor({baseURL:t=yp("OPENAI_BASE_URL"),apiKey:e=yp("OPENAI_API_KEY"),organization:r=yp("OPENAI_ORG_ID")??null,...i}={}){if(e===void 0)throw new oe("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:e,organization:r,...i,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&W2())throw new oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new Af(this),this.chat=new cf(this),this.embeddings=new Mf(this),this.files=new Cf(this),this.images=new If(this),this.audio=new pf(this),this.moderations=new Df(this),this.models=new Of(this),this.fineTuning=new Pf(this),this.beta=new wf(this),this._options=o,this.apiKey=e,this.organization=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}eA=nn;nn.OpenAI=eA;nn.OpenAIError=oe;nn.APIError=dn;nn.APIConnectionError=Id;nn.APIConnectionTimeoutError=I_;nn.APIUserAbortError=$n;nn.NotFoundError=Uw;nn.ConflictError=Bw;nn.RateLimitError=kw;nn.BadRequestError=Lw;nn.AuthenticationError=Nw;nn.InternalServerError=Hw;nn.PermissionDeniedError=Fw;nn.UnprocessableEntityError=Gw;(function(n){n.toFile=Xw,n.fileFromPath=Ow,n.Page=D_,n.CursorPage=Bi,n.Completions=Af,n.Chat=cf,n.Embeddings=Mf,n.Files=Cf,n.FileObjectsPage=k_,n.Images=If,n.Audio=pf,n.Moderations=Df,n.Models=Of,n.ModelsPage=V_,n.FineTuning=Pf,n.Beta=wf})(nn||(nn={}));const j2=new nn({apiKey:{}.VITE_OPENAI_API_KEY,dangerouslyAllowBrowser:!0}),Y2=Ae({name:"Talk",setup(){const n=Be(""),t=Be(""),e=Be([]),r=async()=>{var a,s;const o=await j2.chat.completions.create({messages:e.value,model:"gpt-3.5-turbo",stream:!0});for await(const l of o)n.value=n.value+((s=(a=l.choices[0])==null?void 0:a.delta)==null?void 0:s.content)};return{text:n,inputVal:t,history:e,handleSubmit:async()=>{const o={role:"user",content:t.value};e.value.push(o),r()}}},methods:{renderHistory(n){if(n.role==="assistant")return this.renderAssistant(n);if(n.role==="user")return this.renderUser(n)},renderAssistant(n){return n.content},renderUser(n){return n.content}},render(){return Et("div",{class:"w-full"},[Et("div",null,[this.text]),Et("div",null,[qR(Et("input",{"onUpdate:modelValue":n=>this.inputVal=n},null),[[cI,this.inputVal]]),Et("button",{onClick:this.handleSubmit},[$l("")])])])}});function q2(n){var t=this.constructor;return this.then(function(e){return t.resolve(n()).then(function(){return e})},function(e){return t.resolve(n()).then(function(){return t.reject(e)})})}function K2(n){var t=this;return new t(function(e,r){if(!(n&&typeof n.length<"u"))return r(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(n);if(i.length===0)return e([]);var o=i.length;function a(l,u){if(u&&(typeof u=="object"||typeof u=="function")){var c=u.then;if(typeof c=="function"){c.call(u,function(h){a(l,h)},function(h){i[l]={status:"rejected",reason:h},--o===0&&e(i)});return}}i[l]={status:"fulfilled",value:u},--o===0&&e(i)}for(var s=0;s<i.length;s++)a(s,i[s])})}function nA(n,t){this.name="AggregateError",this.errors=n,this.message=t||""}nA.prototype=Error.prototype;function Z2(n){var t=this;return new t(function(e,r){if(!(n&&typeof n.length<"u"))return r(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(n);if(i.length===0)return r();for(var o=[],a=0;a<i.length;a++)try{t.resolve(i[a]).then(e).catch(function(s){o.push(s),o.length===i.length&&r(new nA(o,"All promises were rejected"))})}catch(s){r(s)}})}var J2=setTimeout;function rA(n){return!!(n&&typeof n.length<"u")}function Q2(){}function tO(n,t){return function(){n.apply(t,arguments)}}function Oe(n){if(!(this instanceof Oe))throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],oA(n,this)}function iA(n,t){for(;n._state===3;)n=n._value;if(n._state===0){n._deferreds.push(t);return}n._handled=!0,Oe._immediateFn(function(){var e=n._state===1?t.onFulfilled:t.onRejected;if(e===null){(n._state===1?Iv:vu)(t.promise,n._value);return}var r;try{r=e(n._value)}catch(i){vu(t.promise,i);return}Iv(t.promise,r)})}function Iv(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var e=t.then;if(t instanceof Oe){n._state=3,n._value=t,Ov(n);return}else if(typeof e=="function"){oA(tO(e,t),n);return}}n._state=1,n._value=t,Ov(n)}catch(r){vu(n,r)}}function vu(n,t){n._state=2,n._value=t,Ov(n)}function Ov(n){n._state===2&&n._deferreds.length===0&&Oe._immediateFn(function(){n._handled||Oe._unhandledRejectionFn(n._value)});for(var t=0,e=n._deferreds.length;t<e;t++)iA(n,n._deferreds[t]);n._deferreds=null}function eO(n,t,e){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof t=="function"?t:null,this.promise=e}function oA(n,t){var e=!1;try{n(function(r){e||(e=!0,Iv(t,r))},function(r){e||(e=!0,vu(t,r))})}catch(r){if(e)return;e=!0,vu(t,r)}}Oe.prototype.catch=function(n){return this.then(null,n)};Oe.prototype.then=function(n,t){var e=new this.constructor(Q2);return iA(this,new eO(n,t,e)),e};Oe.prototype.finally=q2;Oe.all=function(n){return new Oe(function(t,e){if(!rA(n))return e(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(n);if(r.length===0)return t([]);var i=r.length;function o(s,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(c){o(s,c)},e);return}}r[s]=l,--i===0&&t(r)}catch(c){e(c)}}for(var a=0;a<r.length;a++)o(a,r[a])})};Oe.any=Z2;Oe.allSettled=K2;Oe.resolve=function(n){return n&&typeof n=="object"&&n.constructor===Oe?n:new Oe(function(t){t(n)})};Oe.reject=function(n){return new Oe(function(t,e){e(n)})};Oe.race=function(n){return new Oe(function(t,e){if(!rA(n))return e(new TypeError("Promise.race accepts an array"));for(var r=0,i=n.length;r<i;r++)Oe.resolve(n[r]).then(t,e)})};Oe._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){J2(n,0)};Oe._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var rx=Object.getOwnPropertySymbols,nO=Object.prototype.hasOwnProperty,rO=Object.prototype.propertyIsEnumerable;function iO(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function oO(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var aO=oO()?Object.assign:function(n,t){for(var e,r=iO(n),i,o=1;o<arguments.length;o++){e=Object(arguments[o]);for(var a in e)nO.call(e,a)&&(r[a]=e[a]);if(rx){i=rx(e);for(var s=0;s<i.length;s++)rO.call(e,i[s])&&(r[i[s]]=e[i[s]])}}return r};const sO=s_(aO);/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Oe);Object.assign||(Object.assign=sO);var lO=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var uO=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-uO}}var Ep=Date.now(),ix=["ms","moz","webkit","o"];for(var Tp=0;Tp<ix.length&&!globalThis.requestAnimationFrame;++Tp){var wp=ix[Tp];globalThis.requestAnimationFrame=globalThis[wp+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[wp+"CancelAnimationFrame"]||globalThis[wp+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(n){if(typeof n!="function")throw new TypeError(n+"is not a function");var t=Date.now(),e=lO+Ep-t;return e<0&&(e=0),Ep=t,globalThis.self.setTimeout(function(){Ep=Date.now(),n(performance.now())},e)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(n){return clearTimeout(n)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Oi;(function(n){n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2"})(Oi||(Oi={}));var gu;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS"})(gu||(gu={}));var Lf;(function(n){n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL"})(Lf||(Lf={}));var Gt;(function(n){n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR"})(Gt||(Gt={}));var Mr;(function(n){n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Mr||(Mr={}));var St;(function(n){n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(St||(St={}));var la;(function(n){n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(la||(la={}));var Bt;(function(n){n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT"})(Bt||(Bt={}));var Nf;(function(n){n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT"})(Nf||(Nf={}));var Xr;(function(n){n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR"})(Xr||(Xr={}));var qr;(function(n){n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(qr||(qr={}));var Or;(function(n){n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL"})(Or||(Or={}));var Dr;(function(n){n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Dr||(Dr={}));var br;(function(n){n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT"})(br||(br={}));var Ff;(function(n){n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL"})(Ff||(Ff={}));var jn;(function(n){n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp"})(jn||(jn={}));var He;(function(n){n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR"})(He||(He={}));var ox;(function(n){n[n.RED=1]="RED",n[n.GREEN=2]="GREEN",n[n.BLUE=4]="BLUE",n[n.ALPHA=8]="ALPHA"})(ox||(ox={}));var we;(function(n){n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH"})(we||(we={}));var Kr;(function(n){n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Kr||(Kr={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var cO={createCanvas:function(n,t){var e=document.createElement("canvas");return e.width=n,e.height=t,e},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var n;return(n=document.baseURI)!==null&&n!==void 0?n:window.location.href},fetch:function(n,t){return fetch(n,t)}},Ap=/iPhone/i,ax=/iPod/i,sx=/iPad/i,lx=/\biOS-universal(?:.+)Mac\b/i,Mp=/\bAndroid(?:.+)Mobile\b/i,ux=/Android/i,Ga=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,_c=/Silk/i,ai=/Windows Phone/i,cx=/\bWindows(?:.+)ARM\b/i,hx=/BlackBerry/i,fx=/BB10/i,dx=/Opera Mini/i,px=/\b(CriOS|Chrome)(?:.+)Mobile/i,mx=/Mobile(?:.+)Firefox\b/i,vx=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function hO(n){return function(t){return t.test(n)}}function fO(n){var t={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?t.userAgent=n:n&&n.userAgent&&(t={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var e=t.userAgent,r=e.split("[FBAN");typeof r[1]<"u"&&(e=r[0]),r=e.split("Twitter"),typeof r[1]<"u"&&(e=r[0]);var i=hO(e),o={apple:{phone:i(Ap)&&!i(ai),ipod:i(ax),tablet:!i(Ap)&&(i(sx)||vx(t))&&!i(ai),universal:i(lx),device:(i(Ap)||i(ax)||i(sx)||i(lx)||vx(t))&&!i(ai)},amazon:{phone:i(Ga),tablet:!i(Ga)&&i(_c),device:i(Ga)||i(_c)},android:{phone:!i(ai)&&i(Ga)||!i(ai)&&i(Mp),tablet:!i(ai)&&!i(Ga)&&!i(Mp)&&(i(_c)||i(ux)),device:!i(ai)&&(i(Ga)||i(_c)||i(Mp)||i(ux))||i(/\bokhttp\b/i)},windows:{phone:i(ai),tablet:i(cx),device:i(ai)||i(cx)},other:{blackberry:i(hx),blackberry10:i(fx),opera:i(dx),firefox:i(mx),chrome:i(px),device:i(hx)||i(fx)||i(dx)||i(mx)||i(px)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var $r=fO(globalThis.navigator);function dO(){return!$r.apple.device}function pO(n){var t=!0;if($r.tablet||$r.phone){if($r.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var r=parseInt(e[1],10);r<11&&(t=!1)}}if($r.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var r=parseInt(e[1],10);r<7&&(t=!1)}}}return t?n:4}var Ot={ADAPTER:cO,MIPMAP_TEXTURES:Or.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:we.NONE,SPRITE_MAX_TEXTURES:pO(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:Ff.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:qr.CLAMP,SCALE_MODE:Xr.LINEAR,PRECISION_VERTEX:jn.HIGH,PRECISION_FRAGMENT:$r.apple.device?jn.HIGH:jn.MEDIUM,CAN_UPLOAD_SAME_BUFFER:dO(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},aA={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function o(l,u,c,h,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,h||l,f),m=e?e+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],d]:l._events[m].push(d):(l._events[m]=d,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,h;if(this._eventsCount===0)return u;for(h in c=this._events)t.call(c,h)&&u.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=e?e+u:u,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,d=h.length,m=new Array(d);f<d;f++)m[f]=h[f].fn;return m},s.prototype.listenerCount=function(u){var c=e?e+u:u,h=this._events[c];return h?h.fn?1:h.length:0},s.prototype.emit=function(u,c,h,f,d,m){var g=e?e+u:u;if(!this._events[g])return!1;var p=this._events[g],v=arguments.length,y,_;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,h),!0;case 4:return p.fn.call(p.context,c,h,f),!0;case 5:return p.fn.call(p.context,c,h,f,d),!0;case 6:return p.fn.call(p.context,c,h,f,d,m),!0}for(_=1,y=new Array(v-1);_<v;_++)y[_-1]=arguments[_];p.fn.apply(p.context,y)}else{var T=p.length,E;for(_=0;_<T;_++)switch(p[_].once&&this.removeListener(u,p[_].fn,void 0,!0),v){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,c);break;case 3:p[_].fn.call(p[_].context,c,h);break;case 4:p[_].fn.call(p[_].context,c,h,f);break;default:if(!y)for(E=1,y=new Array(v-1);E<v;E++)y[E-1]=arguments[E];p[_].fn.apply(p[_].context,y)}}return!0},s.prototype.on=function(u,c,h){return o(this,u,c,h,!1)},s.prototype.once=function(u,c,h){return o(this,u,c,h,!0)},s.prototype.removeListener=function(u,c,h,f){var d=e?e+u:u;if(!this._events[d])return this;if(!c)return a(this,d),this;var m=this._events[d];if(m.fn)m.fn===c&&(!f||m.once)&&(!h||m.context===h)&&a(this,d);else{for(var g=0,p=[],v=m.length;g<v;g++)(m[g].fn!==c||f&&!m[g].once||h&&m[g].context!==h)&&p.push(m[g]);p.length?this._events[d]=p.length===1?p[0]:p:a(this,d)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=e?e+u:u,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,n.exports=s})(aA);var mO=aA.exports;const zu=s_(mO);var W_={exports:{}};W_.exports=Dd;W_.exports.default=Dd;function Dd(n,t,e){e=e||2;var r=t&&t.length,i=r?t[0]*e:n.length,o=sA(n,0,i,e,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,h,f,d;if(r&&(o=xO(n,t,o,e)),n.length>80*e){s=u=n[0],l=c=n[1];for(var m=e;m<i;m+=e)h=n[m],f=n[m+1],h<s&&(s=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return _u(o,a,e,s,l,d,0),a}function sA(n,t,e,r,i){var o,a;if(i===Nv(n,t,e,r)>0)for(o=t;o<e;o+=r)a=gx(o,n[o],n[o+1],a);else for(o=e-r;o>=t;o-=r)a=gx(o,n[o],n[o+1],a);return a&&Ld(a,a.next)&&(xu(a),a=a.next),a}function Sa(n,t){if(!n)return n;t||(t=n);var e=n,r;do if(r=!1,!e.steiner&&(Ld(e,e.next)||Ie(e.prev,e,e.next)===0)){if(xu(e),e=t=e.prev,e===e.next)break;r=!0}else e=e.next;while(r||e!==t);return t}function _u(n,t,e,r,i,o,a){if(n){!a&&o&&wO(n,r,i,o);for(var s=n,l,u;n.prev!==n.next;){if(l=n.prev,u=n.next,o?gO(n,r,i,o):vO(n)){t.push(l.i/e|0),t.push(n.i/e|0),t.push(u.i/e|0),xu(n),n=u.next,s=u.next;continue}if(n=u,n===s){a?a===1?(n=_O(Sa(n),t,e),_u(n,t,e,r,i,o,2)):a===2&&yO(n,t,e,r,i,o):_u(Sa(n),t,e,r,i,o,1);break}}}}function vO(n){var t=n.prev,e=n,r=n.next;if(Ie(t,e,r)>=0)return!1;for(var i=t.x,o=e.x,a=r.x,s=t.y,l=e.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<l?s<u?s:u:l<u?l:u,f=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,m=r.next;m!==t;){if(m.x>=c&&m.x<=f&&m.y>=h&&m.y<=d&&ms(i,s,o,l,a,u,m.x,m.y)&&Ie(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function gO(n,t,e,r){var i=n.prev,o=n,a=n.next;if(Ie(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,h=o.y,f=a.y,d=s<l?s<u?s:u:l<u?l:u,m=c<h?c<f?c:f:h<f?h:f,g=s>l?s>u?s:u:l>u?l:u,p=c>h?c>f?c:f:h>f?h:f,v=Dv(d,m,t,e,r),y=Dv(g,p,t,e,r),_=n.prevZ,T=n.nextZ;_&&_.z>=v&&T&&T.z<=y;){if(_.x>=d&&_.x<=g&&_.y>=m&&_.y<=p&&_!==i&&_!==a&&ms(s,c,l,h,u,f,_.x,_.y)&&Ie(_.prev,_,_.next)>=0||(_=_.prevZ,T.x>=d&&T.x<=g&&T.y>=m&&T.y<=p&&T!==i&&T!==a&&ms(s,c,l,h,u,f,T.x,T.y)&&Ie(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;_&&_.z>=v;){if(_.x>=d&&_.x<=g&&_.y>=m&&_.y<=p&&_!==i&&_!==a&&ms(s,c,l,h,u,f,_.x,_.y)&&Ie(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;T&&T.z<=y;){if(T.x>=d&&T.x<=g&&T.y>=m&&T.y<=p&&T!==i&&T!==a&&ms(s,c,l,h,u,f,T.x,T.y)&&Ie(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function _O(n,t,e){var r=n;do{var i=r.prev,o=r.next.next;!Ld(i,o)&&lA(i,r,r.next,o)&&yu(i,o)&&yu(o,i)&&(t.push(i.i/e|0),t.push(r.i/e|0),t.push(o.i/e|0),xu(r),xu(r.next),r=n=o),r=r.next}while(r!==n);return Sa(r)}function yO(n,t,e,r,i,o){var a=n;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&CO(a,s)){var l=uA(a,s);a=Sa(a,a.next),l=Sa(l,l.next),_u(a,t,e,r,i,o,0),_u(l,t,e,r,i,o,0);return}s=s.next}a=a.next}while(a!==n)}function xO(n,t,e,r){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*r,l=o<a-1?t[o+1]*r:n.length,u=sA(n,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push(MO(u));for(i.sort(bO),o=0;o<i.length;o++)e=SO(i[o],e);return e}function bO(n,t){return n.x-t.x}function SO(n,t){var e=EO(n,t);if(!e)return t;var r=uA(e,n);return Sa(r,r.next),Sa(e,e.next)}function EO(n,t){var e=t,r=n.x,i=n.y,o=-1/0,a;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){var s=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(s<=r&&s>o&&(o=s,a=e.x<e.next.x?e:e.next,s===r))return a}e=e.next}while(e!==t);if(!a)return null;var l=a,u=a.x,c=a.y,h=1/0,f;e=a;do r>=e.x&&e.x>=u&&r!==e.x&&ms(i<c?r:o,i,u,c,i<c?o:r,i,e.x,e.y)&&(f=Math.abs(i-e.y)/(r-e.x),yu(e,n)&&(f<h||f===h&&(e.x>a.x||e.x===a.x&&TO(a,e)))&&(a=e,h=f)),e=e.next;while(e!==l);return a}function TO(n,t){return Ie(n.prev,n,t.prev)<0&&Ie(t.next,n,n.next)<0}function wO(n,t,e,r){var i=n;do i.z===0&&(i.z=Dv(i.x,i.y,t,e,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,AO(i)}function AO(n){var t,e,r,i,o,a,s,l,u=1;do{for(e=n,n=null,o=null,a=0;e;){for(a++,r=e,s=0,t=0;t<u&&(s++,r=r.nextZ,!!r);t++);for(l=u;s>0||l>0&&r;)s!==0&&(l===0||!r||e.z<=r.z)?(i=e,e=e.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;e=r}o.nextZ=null,u*=2}while(a>1);return n}function Dv(n,t,e,r,i){return n=(n-e)*i|0,t=(t-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function MO(n){var t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function ms(n,t,e,r,i,o,a,s){return(i-a)*(t-s)>=(n-a)*(o-s)&&(n-a)*(r-s)>=(e-a)*(t-s)&&(e-a)*(o-s)>=(i-a)*(r-s)}function CO(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!RO(n,t)&&(yu(n,t)&&yu(t,n)&&PO(n,t)&&(Ie(n.prev,n,t.prev)||Ie(n,t.prev,t))||Ld(n,t)&&Ie(n.prev,n,n.next)>0&&Ie(t.prev,t,t.next)>0)}function Ie(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Ld(n,t){return n.x===t.x&&n.y===t.y}function lA(n,t,e,r){var i=xc(Ie(n,t,e)),o=xc(Ie(n,t,r)),a=xc(Ie(e,r,n)),s=xc(Ie(e,r,t));return!!(i!==o&&a!==s||i===0&&yc(n,e,t)||o===0&&yc(n,r,t)||a===0&&yc(e,n,r)||s===0&&yc(e,t,r))}function yc(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function xc(n){return n>0?1:n<0?-1:0}function RO(n,t){var e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&lA(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function yu(n,t){return Ie(n.prev,n,n.next)<0?Ie(n,t,n.next)>=0&&Ie(n,n.prev,t)>=0:Ie(n,t,n.prev)<0||Ie(n,n.next,t)<0}function PO(n,t){var e=n,r=!1,i=(n.x+t.x)/2,o=(n.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&i<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next;while(e!==n);return r}function uA(n,t){var e=new Lv(n.i,n.x,n.y),r=new Lv(t.i,t.x,t.y),i=n.next,o=t.prev;return n.next=t,t.prev=n,e.next=i,i.prev=e,r.next=e,e.prev=r,o.next=r,r.prev=o,r}function gx(n,t,e,r){var i=new Lv(n,t,e);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function xu(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Lv(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Dd.deviation=function(n,t,e,r){var i=t&&t.length,o=i?t[0]*e:n.length,a=Math.abs(Nv(n,0,o,e));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*e,c=s<l-1?t[s+1]*e:n.length;a-=Math.abs(Nv(n,u,c,e))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*e,d=r[s+1]*e,m=r[s+2]*e;h+=Math.abs((n[f]-n[m])*(n[d+1]-n[f+1])-(n[f]-n[d])*(n[m+1]-n[f+1]))}return a===0&&h===0?0:Math.abs((h-a)/a)};function Nv(n,t,e,r){for(var i=0,o=t,a=e-r;o<e;o+=r)i+=(n[a]-n[o])*(n[o+1]+n[a+1]),a=o;return i}Dd.flatten=function(n){for(var t=n[0][0].length,e={vertices:[],holes:[],dimensions:t},r=0,i=0;i<n.length;i++){for(var o=0;o<n[i].length;o++)for(var a=0;a<t;a++)e.vertices.push(n[i][o][a]);i>0&&(r+=n[i-1].length,e.holes.push(r))}return e};var IO=W_.exports;const cA=s_(IO);var Uf={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Uf.exports;(function(n,t){(function(e){var r=t&&!t.nodeType&&t,i=n&&!n.nodeType&&n,o=typeof Ss=="object"&&Ss;(o.global===o||o.window===o||o.self===o)&&(e=o);var a,s=2147483647,l=36,u=1,c=26,h=38,f=700,d=72,m=128,g="-",p=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=l-u,E=Math.floor,S=String.fromCharCode,x;function O($){throw new RangeError(_[$])}function b($,k){for(var pt=$.length,J=[];pt--;)J[pt]=k($[pt]);return J}function A($,k){var pt=$.split("@"),J="";pt.length>1&&(J=pt[0]+"@",$=pt[1]),$=$.replace(y,".");var it=$.split("."),vt=b(it,k).join(".");return J+vt}function N($){for(var k=[],pt=0,J=$.length,it,vt;pt<J;)it=$.charCodeAt(pt++),it>=55296&&it<=56319&&pt<J?(vt=$.charCodeAt(pt++),(vt&64512)==56320?k.push(((it&1023)<<10)+(vt&1023)+65536):(k.push(it),pt--)):k.push(it);return k}function U($){return b($,function(k){var pt="";return k>65535&&(k-=65536,pt+=S(k>>>10&1023|55296),k=56320|k&1023),pt+=S(k),pt}).join("")}function et($){return $-48<10?$-22:$-65<26?$-65:$-97<26?$-97:l}function L($,k){return $+22+75*($<26)-((k!=0)<<5)}function D($,k,pt){var J=0;for($=pt?E($/f):$>>1,$+=E($/k);$>T*c>>1;J+=l)$=E($/T);return E(J+(T+1)*$/($+h))}function B($){var k=[],pt=$.length,J,it=0,vt=m,gt=d,W,ft,at,mt,_t,X,R,C,z;for(W=$.lastIndexOf(g),W<0&&(W=0),ft=0;ft<W;++ft)$.charCodeAt(ft)>=128&&O("not-basic"),k.push($.charCodeAt(ft));for(at=W>0?W+1:0;at<pt;){for(mt=it,_t=1,X=l;at>=pt&&O("invalid-input"),R=et($.charCodeAt(at++)),(R>=l||R>E((s-it)/_t))&&O("overflow"),it+=R*_t,C=X<=gt?u:X>=gt+c?c:X-gt,!(R<C);X+=l)z=l-C,_t>E(s/z)&&O("overflow"),_t*=z;J=k.length+1,gt=D(it-mt,J,mt==0),E(it/J)>s-vt&&O("overflow"),vt+=E(it/J),it%=J,k.splice(it++,0,vt)}return U(k)}function q($){var k,pt,J,it,vt,gt,W,ft,at,mt,_t,X=[],R,C,z,Y;for($=N($),R=$.length,k=m,pt=0,vt=d,gt=0;gt<R;++gt)_t=$[gt],_t<128&&X.push(S(_t));for(J=it=X.length,it&&X.push(g);J<R;){for(W=s,gt=0;gt<R;++gt)_t=$[gt],_t>=k&&_t<W&&(W=_t);for(C=J+1,W-k>E((s-pt)/C)&&O("overflow"),pt+=(W-k)*C,k=W,gt=0;gt<R;++gt)if(_t=$[gt],_t<k&&++pt>s&&O("overflow"),_t==k){for(ft=pt,at=l;mt=at<=vt?u:at>=vt+c?c:at-vt,!(ft<mt);at+=l)Y=ft-mt,z=l-mt,X.push(S(L(mt+Y%z,0))),ft=E(Y/z);X.push(S(L(ft,0))),vt=D(pt,C,J==it),pt=0,++J}++pt,++k}return X.join("")}function Q($){return A($,function(k){return p.test(k)?B(k.slice(4).toLowerCase()):k})}function rt($){return A($,function(k){return v.test(k)?"xn--"+q(k):k})}if(a={version:"1.4.1",ucs2:{decode:N,encode:U},decode:B,encode:q,toASCII:rt,toUnicode:Q},r&&i)if(n.exports==r)i.exports=a;else for(x in a)a.hasOwnProperty(x)&&(r[x]=a[x]);else e.punycode=a})(Ss)})(Uf,Uf.exports);var OO=Uf.exports,DO=Error,LO=EvalError,NO=RangeError,FO=ReferenceError,hA=SyntaxError,Vu=TypeError,UO=URIError,BO=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[e]=i;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==i||a.enumerable!==!0)return!1}return!0},_x=typeof Symbol<"u"&&Symbol,GO=BO,kO=function(){return typeof _x!="function"||typeof Symbol!="function"||typeof _x("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:GO()},yx={foo:{}},HO=Object,zO=function(){return{__proto__:yx}.foo===yx.foo&&!({__proto__:null}instanceof HO)},VO="Function.prototype.bind called on incompatible ",WO=Object.prototype.toString,XO=Math.max,$O="[object Function]",xx=function(t,e){for(var r=[],i=0;i<t.length;i+=1)r[i]=t[i];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r},jO=function(t,e){for(var r=[],i=e||0,o=0;i<t.length;i+=1,o+=1)r[o]=t[i];return r},YO=function(n,t){for(var e="",r=0;r<n.length;r+=1)e+=n[r],r+1<n.length&&(e+=t);return e},qO=function(t){var e=this;if(typeof e!="function"||WO.apply(e)!==$O)throw new TypeError(VO+e);for(var r=jO(arguments,1),i,o=function(){if(this instanceof i){var c=e.apply(this,xx(r,arguments));return Object(c)===c?c:this}return e.apply(t,xx(r,arguments))},a=XO(0,e.length-r.length),s=[],l=0;l<a;l++)s[l]="$"+l;if(i=Function("binder","return function ("+YO(s,",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var u=function(){};u.prototype=e.prototype,i.prototype=new u,u.prototype=null}return i},KO=qO,X_=Function.prototype.bind||KO,ZO=Function.prototype.call,JO=Object.prototype.hasOwnProperty,QO=X_,tD=QO.call(ZO,JO),re,eD=DO,nD=LO,rD=NO,iD=FO,Bs=hA,Rs=Vu,oD=UO,fA=Function,Cp=function(n){try{return fA('"use strict"; return ('+n+").constructor;")()}catch{}},ua=Object.getOwnPropertyDescriptor;if(ua)try{ua({},"")}catch{ua=null}var Rp=function(){throw new Rs},aD=ua?function(){try{return arguments.callee,Rp}catch{try{return ua(arguments,"callee").get}catch{return Rp}}}():Rp,ka=kO(),sD=zO(),Je=Object.getPrototypeOf||(sD?function(n){return n.__proto__}:null),hs={},lD=typeof Uint8Array>"u"||!Je?re:Je(Uint8Array),ca={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?re:ArrayBuffer,"%ArrayIteratorPrototype%":ka&&Je?Je([][Symbol.iterator]()):re,"%AsyncFromSyncIteratorPrototype%":re,"%AsyncFunction%":hs,"%AsyncGenerator%":hs,"%AsyncGeneratorFunction%":hs,"%AsyncIteratorPrototype%":hs,"%Atomics%":typeof Atomics>"u"?re:Atomics,"%BigInt%":typeof BigInt>"u"?re:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?re:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?re:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":eD,"%eval%":eval,"%EvalError%":nD,"%Float32Array%":typeof Float32Array>"u"?re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?re:FinalizationRegistry,"%Function%":fA,"%GeneratorFunction%":hs,"%Int8Array%":typeof Int8Array>"u"?re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ka&&Je?Je(Je([][Symbol.iterator]())):re,"%JSON%":typeof JSON=="object"?JSON:re,"%Map%":typeof Map>"u"?re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ka||!Je?re:Je(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?re:Promise,"%Proxy%":typeof Proxy>"u"?re:Proxy,"%RangeError%":rD,"%ReferenceError%":iD,"%Reflect%":typeof Reflect>"u"?re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ka||!Je?re:Je(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ka&&Je?Je(""[Symbol.iterator]()):re,"%Symbol%":ka?Symbol:re,"%SyntaxError%":Bs,"%ThrowTypeError%":aD,"%TypedArray%":lD,"%TypeError%":Rs,"%Uint8Array%":typeof Uint8Array>"u"?re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?re:Uint32Array,"%URIError%":oD,"%WeakMap%":typeof WeakMap>"u"?re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?re:WeakSet};if(Je)try{null.error}catch(n){var uD=Je(Je(n));ca["%Error.prototype%"]=uD}var cD=function n(t){var e;if(t==="%AsyncFunction%")e=Cp("async function () {}");else if(t==="%GeneratorFunction%")e=Cp("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Cp("async function* () {}");else if(t==="%AsyncGenerator%"){var r=n("%AsyncGeneratorFunction%");r&&(e=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=n("%AsyncGenerator%");i&&Je&&(e=Je(i.prototype))}return ca[t]=e,e},bx={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Wu=X_,Bf=tD,hD=Wu.call(Function.call,Array.prototype.concat),fD=Wu.call(Function.apply,Array.prototype.splice),Sx=Wu.call(Function.call,String.prototype.replace),Gf=Wu.call(Function.call,String.prototype.slice),dD=Wu.call(Function.call,RegExp.prototype.exec),pD=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,mD=/\\(\\)?/g,vD=function(t){var e=Gf(t,0,1),r=Gf(t,-1);if(e==="%"&&r!=="%")throw new Bs("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&e!=="%")throw new Bs("invalid intrinsic syntax, expected opening `%`");var i=[];return Sx(t,pD,function(o,a,s,l){i[i.length]=s?Sx(l,mD,"$1"):a||o}),i},gD=function(t,e){var r=t,i;if(Bf(bx,r)&&(i=bx[r],r="%"+i[0]+"%"),Bf(ca,r)){var o=ca[r];if(o===hs&&(o=cD(r)),typeof o>"u"&&!e)throw new Rs("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new Bs("intrinsic "+t+" does not exist!")},La=function(t,e){if(typeof t!="string"||t.length===0)throw new Rs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Rs('"allowMissing" argument must be a boolean');if(dD(/^%?[^%]*%?$/,t)===null)throw new Bs("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=vD(t),i=r.length>0?r[0]:"",o=gD("%"+i+"%",e),a=o.name,s=o.value,l=!1,u=o.alias;u&&(i=u[0],fD(r,hD([0,1],u)));for(var c=1,h=!0;c<r.length;c+=1){var f=r[c],d=Gf(f,0,1),m=Gf(f,-1);if((d==='"'||d==="'"||d==="`"||m==='"'||m==="'"||m==="`")&&d!==m)throw new Bs("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(l=!0),i+="."+f,a="%"+i+"%",Bf(ca,a))s=ca[a];else if(s!=null){if(!(f in s)){if(!e)throw new Rs("base intrinsic for "+t+" exists, but the property is not available.");return}if(ua&&c+1>=r.length){var g=ua(s,f);h=!!g,h&&"get"in g&&!("originalValue"in g.get)?s=g.get:s=s[f]}else h=Bf(s,f),s=s[f];h&&!l&&(ca[a]=s)}}return s},dA={exports:{}},_D=La,Fv=_D("%Object.defineProperty%",!0),Uv=function(){if(Fv)try{return Fv({},"a",{value:1}),!0}catch{return!1}return!1};Uv.hasArrayLengthDefineBug=function(){if(!Uv())return null;try{return Fv([],"length",{value:1}).length!==1}catch{return!0}};var pA=Uv,yD=La,zh=yD("%Object.getOwnPropertyDescriptor%",!0);if(zh)try{zh([],"length")}catch{zh=null}var mA=zh,xD=pA(),bD=La,Zl=xD&&bD("%Object.defineProperty%",!0);if(Zl)try{Zl({},"a",{value:1})}catch{Zl=!1}var SD=hA,Ha=Vu,Ex=mA,ED=function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new Ha("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new Ha("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ha("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ha("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ha("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ha("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!Ex&&Ex(t,e);if(Zl)Zl(t,e,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:r,writable:o===null&&l?l.writable:!o});else if(s||!i&&!o&&!a)t[e]=r;else throw new SD("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},TD=La,Tx=ED,wD=pA(),wx=mA,Ax=Vu,AD=TD("%Math.floor%"),MD=function(t,e){if(typeof t!="function")throw new Ax("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||AD(e)!==e)throw new Ax("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&wx){var a=wx(t,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!r)&&(wD?Tx(t,"length",e,!0,!0):Tx(t,"length",e)),t};(function(n){var t=X_,e=La,r=MD,i=Vu,o=e("%Function.prototype.apply%"),a=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||t.call(a,o),l=e("%Object.defineProperty%",!0),u=e("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}n.exports=function(f){if(typeof f!="function")throw new i("a function is required");var d=s(t,a,arguments);return r(d,1+u(0,f.length-(arguments.length-1)),!0)};var c=function(){return s(t,o,arguments)};l?l(n.exports,"apply",{value:c}):n.exports.apply=c})(dA);var CD=dA.exports,vA=La,gA=CD,RD=gA(vA("String.prototype.indexOf")),PD=function(t,e){var r=vA(t,!!e);return typeof r=="function"&&RD(t,".prototype.")>-1?gA(r):r};const ID={},OD=Object.freeze(Object.defineProperty({__proto__:null,default:ID},Symbol.toStringTag,{value:"Module"})),DD=VC(OD);var $_=typeof Map=="function"&&Map.prototype,Pp=Object.getOwnPropertyDescriptor&&$_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,kf=$_&&Pp&&typeof Pp.get=="function"?Pp.get:null,Mx=$_&&Map.prototype.forEach,j_=typeof Set=="function"&&Set.prototype,Ip=Object.getOwnPropertyDescriptor&&j_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Hf=j_&&Ip&&typeof Ip.get=="function"?Ip.get:null,Cx=j_&&Set.prototype.forEach,LD=typeof WeakMap=="function"&&WeakMap.prototype,Jl=LD?WeakMap.prototype.has:null,ND=typeof WeakSet=="function"&&WeakSet.prototype,Ql=ND?WeakSet.prototype.has:null,FD=typeof WeakRef=="function"&&WeakRef.prototype,Rx=FD?WeakRef.prototype.deref:null,UD=Boolean.prototype.valueOf,BD=Object.prototype.toString,GD=Function.prototype.toString,kD=String.prototype.match,Y_=String.prototype.slice,oo=String.prototype.replace,HD=String.prototype.toUpperCase,Px=String.prototype.toLowerCase,_A=RegExp.prototype.test,Ix=Array.prototype.concat,Hr=Array.prototype.join,zD=Array.prototype.slice,Ox=Math.floor,Bv=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Op=Object.getOwnPropertySymbols,Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="object",xn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Gs||"symbol")?Symbol.toStringTag:null,yA=Object.prototype.propertyIsEnumerable,Dx=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function Lx(n,t){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||_A.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var r=n<0?-Ox(-n):Ox(n);if(r!==n){var i=String(r),o=Y_.call(t,i.length+1);return oo.call(i,e,"$&_")+"."+oo.call(oo.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return oo.call(t,e,"$&_")}var kv=DD,Nx=kv.custom,Fx=bA(Nx)?Nx:null,VD=function n(t,e,r,i){var o=e||{};if(io(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(io(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=io(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(io(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(io(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return EA(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return s?Lx(t,l):l}if(typeof t=="bigint"){var u=String(t)+"n";return s?Lx(t,u):u}var c=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=c&&c>0&&typeof t=="object")return Hv(t)?"[Array]":"[Object]";var h=sL(o,r);if(typeof i>"u")i=[];else if(SA(i,t)>=0)return"[Circular]";function f(et,L,D){if(L&&(i=zD.call(i),i.push(L)),D){var B={depth:o.depth};return io(o,"quoteStyle")&&(B.quoteStyle=o.quoteStyle),n(et,B,r+1,i)}return n(et,o,r+1,i)}if(typeof t=="function"&&!Ux(t)){var d=JD(t),m=bc(t,f);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(m.length>0?" { "+Hr.call(m,", ")+" }":"")}if(bA(t)){var g=Gs?oo.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Gv.call(t);return typeof t=="object"&&!Gs?dl(g):g}if(iL(t)){for(var p="<"+Px.call(String(t.nodeName)),v=t.attributes||[],y=0;y<v.length;y++)p+=" "+v[y].name+"="+xA(WD(v[y].value),"double",o);return p+=">",t.childNodes&&t.childNodes.length&&(p+="..."),p+="</"+Px.call(String(t.nodeName))+">",p}if(Hv(t)){if(t.length===0)return"[]";var _=bc(t,f);return h&&!aL(_)?"["+zv(_,h)+"]":"[ "+Hr.call(_,", ")+" ]"}if($D(t)){var T=bc(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!yA.call(t,"cause")?"{ ["+String(t)+"] "+Hr.call(Ix.call("[cause]: "+f(t.cause),T),", ")+" }":T.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Hr.call(T,", ")+" }"}if(typeof t=="object"&&a){if(Fx&&typeof t[Fx]=="function"&&kv)return kv(t,{depth:c-r});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(QD(t)){var E=[];return Mx&&Mx.call(t,function(et,L){E.push(f(L,t,!0)+" => "+f(et,t))}),Bx("Map",kf.call(t),E,h)}if(nL(t)){var S=[];return Cx&&Cx.call(t,function(et){S.push(f(et,t))}),Bx("Set",Hf.call(t),S,h)}if(tL(t))return Dp("WeakMap");if(rL(t))return Dp("WeakSet");if(eL(t))return Dp("WeakRef");if(YD(t))return dl(f(Number(t)));if(KD(t))return dl(f(Bv.call(t)));if(qD(t))return dl(UD.call(t));if(jD(t))return dl(f(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Ss)return"{ [object globalThis] }";if(!XD(t)&&!Ux(t)){var x=bc(t,f),O=Dx?Dx(t)===Object.prototype:t instanceof Object||t.constructor===Object,b=t instanceof Object?"":"null prototype",A=!O&&xn&&Object(t)===t&&xn in t?Y_.call(bo(t),8,-1):b?"Object":"",N=O||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",U=N+(A||b?"["+Hr.call(Ix.call([],A||[],b||[]),": ")+"] ":"");return x.length===0?U+"{}":h?U+"{"+zv(x,h)+"}":U+"{ "+Hr.call(x,", ")+" }"}return String(t)};function xA(n,t,e){var r=(e.quoteStyle||t)==="double"?'"':"'";return r+n+r}function WD(n){return oo.call(String(n),/"/g,"&quot;")}function Hv(n){return bo(n)==="[object Array]"&&(!xn||!(typeof n=="object"&&xn in n))}function XD(n){return bo(n)==="[object Date]"&&(!xn||!(typeof n=="object"&&xn in n))}function Ux(n){return bo(n)==="[object RegExp]"&&(!xn||!(typeof n=="object"&&xn in n))}function $D(n){return bo(n)==="[object Error]"&&(!xn||!(typeof n=="object"&&xn in n))}function jD(n){return bo(n)==="[object String]"&&(!xn||!(typeof n=="object"&&xn in n))}function YD(n){return bo(n)==="[object Number]"&&(!xn||!(typeof n=="object"&&xn in n))}function qD(n){return bo(n)==="[object Boolean]"&&(!xn||!(typeof n=="object"&&xn in n))}function bA(n){if(Gs)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!Gv)return!1;try{return Gv.call(n),!0}catch{}return!1}function KD(n){if(!n||typeof n!="object"||!Bv)return!1;try{return Bv.call(n),!0}catch{}return!1}var ZD=Object.prototype.hasOwnProperty||function(n){return n in this};function io(n,t){return ZD.call(n,t)}function bo(n){return BD.call(n)}function JD(n){if(n.name)return n.name;var t=kD.call(GD.call(n),/^function\s*([\w$]+)/);return t?t[1]:null}function SA(n,t){if(n.indexOf)return n.indexOf(t);for(var e=0,r=n.length;e<r;e++)if(n[e]===t)return e;return-1}function QD(n){if(!kf||!n||typeof n!="object")return!1;try{kf.call(n);try{Hf.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function tL(n){if(!Jl||!n||typeof n!="object")return!1;try{Jl.call(n,Jl);try{Ql.call(n,Ql)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function eL(n){if(!Rx||!n||typeof n!="object")return!1;try{return Rx.call(n),!0}catch{}return!1}function nL(n){if(!Hf||!n||typeof n!="object")return!1;try{Hf.call(n);try{kf.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function rL(n){if(!Ql||!n||typeof n!="object")return!1;try{Ql.call(n,Ql);try{Jl.call(n,Jl)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function iL(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function EA(n,t){if(n.length>t.maxStringLength){var e=n.length-t.maxStringLength,r="... "+e+" more character"+(e>1?"s":"");return EA(Y_.call(n,0,t.maxStringLength),t)+r}var i=oo.call(oo.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,oL);return xA(i,"single",t)}function oL(n){var t=n.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+HD.call(t.toString(16))}function dl(n){return"Object("+n+")"}function Dp(n){return n+" { ? }"}function Bx(n,t,e,r){var i=r?zv(e,r):Hr.call(e,", ");return n+" ("+t+") {"+i+"}"}function aL(n){for(var t=0;t<n.length;t++)if(SA(n[t],`
`)>=0)return!1;return!0}function sL(n,t){var e;if(n.indent==="	")e="	";else if(typeof n.indent=="number"&&n.indent>0)e=Hr.call(Array(n.indent+1)," ");else return null;return{base:e,prev:Hr.call(Array(t+1),e)}}function zv(n,t){if(n.length===0)return"";var e=`
`+t.prev+t.base;return e+Hr.call(n,","+e)+`
`+t.prev}function bc(n,t){var e=Hv(n),r=[];if(e){r.length=n.length;for(var i=0;i<n.length;i++)r[i]=io(n,i)?t(n[i],n):""}var o=typeof Op=="function"?Op(n):[],a;if(Gs){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var l in n)io(n,l)&&(e&&String(Number(l))===l&&l<n.length||Gs&&a["$"+l]instanceof Symbol||(_A.call(/[^\w$]/,l)?r.push(t(l,n)+": "+t(n[l],n)):r.push(l+": "+t(n[l],n))));if(typeof Op=="function")for(var u=0;u<o.length;u++)yA.call(n,o[u])&&r.push("["+t(o[u])+"]: "+t(n[o[u]],n));return r}var TA=La,Qs=PD,lL=VD,uL=Vu,Sc=TA("%WeakMap%",!0),Ec=TA("%Map%",!0),cL=Qs("WeakMap.prototype.get",!0),hL=Qs("WeakMap.prototype.set",!0),fL=Qs("WeakMap.prototype.has",!0),dL=Qs("Map.prototype.get",!0),pL=Qs("Map.prototype.set",!0),mL=Qs("Map.prototype.has",!0),q_=function(n,t){for(var e=n,r;(r=e.next)!==null;e=r)if(r.key===t)return e.next=r.next,r.next=n.next,n.next=r,r},vL=function(n,t){var e=q_(n,t);return e&&e.value},gL=function(n,t,e){var r=q_(n,t);r?r.value=e:n.next={key:t,next:n.next,value:e}},_L=function(n,t){return!!q_(n,t)},yL=function(){var t,e,r,i={assert:function(o){if(!i.has(o))throw new uL("Side channel does not contain "+lL(o))},get:function(o){if(Sc&&o&&(typeof o=="object"||typeof o=="function")){if(t)return cL(t,o)}else if(Ec){if(e)return dL(e,o)}else if(r)return vL(r,o)},has:function(o){if(Sc&&o&&(typeof o=="object"||typeof o=="function")){if(t)return fL(t,o)}else if(Ec){if(e)return mL(e,o)}else if(r)return _L(r,o);return!1},set:function(o,a){Sc&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new Sc),hL(t,o,a)):Ec?(e||(e=new Ec),pL(e,o,a)):(r||(r={key:{},next:null}),gL(r,o,a))}};return i},xL=String.prototype.replace,bL=/%20/g,Lp={RFC1738:"RFC1738",RFC3986:"RFC3986"},K_={default:Lp.RFC3986,formatters:{RFC1738:function(n){return xL.call(n,bL,"+")},RFC3986:function(n){return String(n)}},RFC1738:Lp.RFC1738,RFC3986:Lp.RFC3986},SL=K_,Np=Object.prototype.hasOwnProperty,Ko=Array.isArray,Ur=function(){for(var n=[],t=0;t<256;++t)n.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return n}(),EL=function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(Ko(r)){for(var i=[],o=0;o<r.length;++o)typeof r[o]<"u"&&i.push(r[o]);e.obj[e.prop]=i}}},wA=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(r[i]=t[i]);return r},TL=function n(t,e,r){if(!e)return t;if(typeof e!="object"){if(Ko(t))t.push(e);else if(t&&typeof t=="object")(r&&(r.plainObjects||r.allowPrototypes)||!Np.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var i=t;return Ko(t)&&!Ko(e)&&(i=wA(t,r)),Ko(t)&&Ko(e)?(e.forEach(function(o,a){if(Np.call(t,a)){var s=t[a];s&&typeof s=="object"&&o&&typeof o=="object"?t[a]=n(s,o,r):t.push(o)}else t[a]=o}),t):Object.keys(e).reduce(function(o,a){var s=e[a];return Np.call(o,a)?o[a]=n(o[a],s,r):o[a]=s,o},i)},wL=function(t,e){return Object.keys(e).reduce(function(r,i){return r[i]=e[i],r},t)},AL=function(n,t,e){var r=n.replace(/\+/g," ");if(e==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},ML=function(t,e,r,i,o){if(t.length===0)return t;var a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var s="",l=0;l<a.length;++l){var u=a.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===SL.RFC1738&&(u===40||u===41)){s+=a.charAt(l);continue}if(u<128){s=s+Ur[u];continue}if(u<2048){s=s+(Ur[192|u>>6]+Ur[128|u&63]);continue}if(u<55296||u>=57344){s=s+(Ur[224|u>>12]+Ur[128|u>>6&63]+Ur[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|a.charCodeAt(l)&1023),s+=Ur[240|u>>18]+Ur[128|u>>12&63]+Ur[128|u>>6&63]+Ur[128|u&63]}return s},CL=function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],i=0;i<e.length;++i)for(var o=e[i],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var u=s[l],c=a[u];typeof c=="object"&&c!==null&&r.indexOf(c)===-1&&(e.push({obj:a,prop:u}),r.push(c))}return EL(e),t},RL=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},PL=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},IL=function(t,e){return[].concat(t,e)},OL=function(t,e){if(Ko(t)){for(var r=[],i=0;i<t.length;i+=1)r.push(e(t[i]));return r}return e(t)},AA={arrayToObject:wA,assign:wL,combine:IL,compact:CL,decode:AL,encode:ML,isBuffer:PL,isRegExp:RL,maybeMap:OL,merge:TL},MA=yL,Vh=AA,tu=K_,DL=Object.prototype.hasOwnProperty,Gx={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},xi=Array.isArray,LL=Array.prototype.push,CA=function(n,t){LL.apply(n,xi(t)?t:[t])},NL=Date.prototype.toISOString,kx=tu.default,_n={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Vh.encode,encodeValuesOnly:!1,format:kx,formatter:tu.formatters[kx],indices:!1,serializeDate:function(t){return NL.call(t)},skipNulls:!1,strictNullHandling:!1},FL=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Fp={},UL=function n(t,e,r,i,o,a,s,l,u,c,h,f,d,m,g,p){for(var v=t,y=p,_=0,T=!1;(y=y.get(Fp))!==void 0&&!T;){var E=y.get(t);if(_+=1,typeof E<"u"){if(E===_)throw new RangeError("Cyclic object value");T=!0}typeof y.get(Fp)>"u"&&(_=0)}if(typeof l=="function"?v=l(e,v):v instanceof Date?v=h(v):r==="comma"&&xi(v)&&(v=Vh.maybeMap(v,function(B){return B instanceof Date?h(B):B})),v===null){if(o)return s&&!m?s(e,_n.encoder,g,"key",f):e;v=""}if(FL(v)||Vh.isBuffer(v)){if(s){var S=m?e:s(e,_n.encoder,g,"key",f);return[d(S)+"="+d(s(v,_n.encoder,g,"value",f))]}return[d(e)+"="+d(String(v))]}var x=[];if(typeof v>"u")return x;var O;if(r==="comma"&&xi(v))m&&s&&(v=Vh.maybeMap(v,s)),O=[{value:v.length>0?v.join(",")||null:void 0}];else if(xi(l))O=l;else{var b=Object.keys(v);O=u?b.sort(u):b}for(var A=i&&xi(v)&&v.length===1?e+"[]":e,N=0;N<O.length;++N){var U=O[N],et=typeof U=="object"&&typeof U.value<"u"?U.value:v[U];if(!(a&&et===null)){var L=xi(v)?typeof r=="function"?r(A,U):A:A+(c?"."+U:"["+U+"]");p.set(t,_);var D=MA();D.set(Fp,p),CA(x,n(et,L,r,i,o,a,r==="comma"&&m&&xi(v)?null:s,l,u,c,h,f,d,m,g,D))}}return x},BL=function(t){if(!t)return _n;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||_n.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=tu.default;if(typeof t.format<"u"){if(!DL.call(tu.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var i=tu.formatters[r],o=_n.filter;return(typeof t.filter=="function"||xi(t.filter))&&(o=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:_n.addQueryPrefix,allowDots:typeof t.allowDots>"u"?_n.allowDots:!!t.allowDots,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:_n.charsetSentinel,delimiter:typeof t.delimiter>"u"?_n.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:_n.encode,encoder:typeof t.encoder=="function"?t.encoder:_n.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:_n.encodeValuesOnly,filter:o,format:r,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:_n.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:_n.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:_n.strictNullHandling}},GL=function(n,t){var e=n,r=BL(t),i,o;typeof r.filter=="function"?(o=r.filter,e=o("",e)):xi(r.filter)&&(o=r.filter,i=o);var a=[];if(typeof e!="object"||e===null)return"";var s;t&&t.arrayFormat in Gx?s=t.arrayFormat:t&&"indices"in t?s=t.indices?"indices":"repeat":s="indices";var l=Gx[s];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=l==="comma"&&t&&t.commaRoundTrip;i||(i=Object.keys(e)),r.sort&&i.sort(r.sort);for(var c=MA(),h=0;h<i.length;++h){var f=i[h];r.skipNulls&&e[f]===null||CA(a,UL(e[f],f,l,u,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}var d=a.join(r.delimiter),m=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),d.length>0?m+d:""},ks=AA,Vv=Object.prototype.hasOwnProperty,kL=Array.isArray,Ze={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ks.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},HL=function(n){return n.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},RA=function(n,t){return n&&typeof n=="string"&&t.comma&&n.indexOf(",")>-1?n.split(","):n},zL="utf8=%26%2310003%3B",VL="utf8=%E2%9C%93",WL=function(t,e){var r={__proto__:null},i=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=e.parameterLimit===1/0?void 0:e.parameterLimit,a=i.split(e.delimiter,o),s=-1,l,u=e.charset;if(e.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===VL?u="utf-8":a[l]===zL&&(u="iso-8859-1"),s=l,l=a.length);for(l=0;l<a.length;++l)if(l!==s){var c=a[l],h=c.indexOf("]="),f=h===-1?c.indexOf("="):h+1,d,m;f===-1?(d=e.decoder(c,Ze.decoder,u,"key"),m=e.strictNullHandling?null:""):(d=e.decoder(c.slice(0,f),Ze.decoder,u,"key"),m=ks.maybeMap(RA(c.slice(f+1),e),function(g){return e.decoder(g,Ze.decoder,u,"value")})),m&&e.interpretNumericEntities&&u==="iso-8859-1"&&(m=HL(m)),c.indexOf("[]=")>-1&&(m=kL(m)?[m]:m),Vv.call(r,d)?r[d]=ks.combine(r[d],m):r[d]=m}return r},XL=function(n,t,e,r){for(var i=r?t:RA(t,e),o=n.length-1;o>=0;--o){var a,s=n[o];if(s==="[]"&&e.parseArrays)a=[].concat(i);else{a=e.plainObjects?Object.create(null):{};var l=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,u=parseInt(l,10);!e.parseArrays&&l===""?a={0:i}:!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&e.parseArrays&&u<=e.arrayLimit?(a=[],a[u]=i):l!=="__proto__"&&(a[l]=i)}i=a}return i},$L=function(t,e,r,i){if(t){var o=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=r.depth>0&&a.exec(o),u=l?o.slice(0,l.index):o,c=[];if(u){if(!r.plainObjects&&Vv.call(Object.prototype,u)&&!r.allowPrototypes)return;c.push(u)}for(var h=0;r.depth>0&&(l=s.exec(o))!==null&&h<r.depth;){if(h+=1,!r.plainObjects&&Vv.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(l[1])}return l&&c.push("["+o.slice(l.index)+"]"),XL(c,e,r,i)}},jL=function(t){if(!t)return Ze;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Ze.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?Ze.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ze.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ze.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ze.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ze.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ze.comma,decoder:typeof t.decoder=="function"?t.decoder:Ze.decoder,delimiter:typeof t.delimiter=="string"||ks.isRegExp(t.delimiter)?t.delimiter:Ze.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ze.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ze.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ze.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ze.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ze.strictNullHandling}},YL=function(n,t){var e=jL(t);if(n===""||n===null||typeof n>"u")return e.plainObjects?Object.create(null):{};for(var r=typeof n=="string"?WL(n,e):n,i=e.plainObjects?Object.create(null):{},o=Object.keys(r),a=0;a<o.length;++a){var s=o[a],l=$L(s,r[s],e,typeof n=="string");i=ks.merge(i,l,e)}return e.allowSparse===!0?i:ks.compact(i)},qL=GL,KL=YL,ZL=K_,JL={formats:ZL,parse:KL,stringify:qL},QL=OO;function Cr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var tN=/^([a-z0-9.+-]+:)/i,eN=/:[0-9]*$/,nN=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,rN=["<",">",'"',"`"," ","\r",`
`,"	"],iN=["{","}","|","\\","^","`"].concat(rN),Wv=["'"].concat(iN),Hx=["%","/","?",";","#"].concat(Wv),zx=["/","?","#"],oN=255,Vx=/^[+a-z0-9A-Z_-]{0,63}$/,aN=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,sN={javascript:!0,"javascript:":!0},Xv={javascript:!0,"javascript:":!0},Ps={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},$v=JL;function Nd(n,t,e){if(n&&typeof n=="object"&&n instanceof Cr)return n;var r=new Cr;return r.parse(n,t,e),r}Cr.prototype.parse=function(n,t,e){if(typeof n!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=r!==-1&&r<n.indexOf("#")?"?":"#",o=n.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),n=o.join(i);var s=n;if(s=s.trim(),!e&&n.split("#").length===1){var l=nN.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=$v.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=tN.exec(s);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,s=s.substr(u.length)}if(e||u||s.match(/^\/\/[^@/]+@[^@/]+/)){var h=s.substr(0,2)==="//";h&&!(u&&Xv[u])&&(s=s.substr(2),this.slashes=!0)}if(!Xv[u]&&(h||u&&!Ps[u])){for(var f=-1,d=0;d<zx.length;d++){var m=s.indexOf(zx[d]);m!==-1&&(f===-1||m<f)&&(f=m)}var g,p;f===-1?p=s.lastIndexOf("@"):p=s.lastIndexOf("@",f),p!==-1&&(g=s.slice(0,p),s=s.slice(p+1),this.auth=decodeURIComponent(g)),f=-1;for(var d=0;d<Hx.length;d++){var m=s.indexOf(Hx[d]);m!==-1&&(f===-1||m<f)&&(f=m)}f===-1&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var y=this.hostname.split(/\./),d=0,_=y.length;d<_;d++){var T=y[d];if(T&&!T.match(Vx)){for(var E="",S=0,x=T.length;S<x;S++)T.charCodeAt(S)>127?E+="x":E+=T[S];if(!E.match(Vx)){var O=y.slice(0,d),b=y.slice(d+1),A=T.match(aN);A&&(O.push(A[1]),b.unshift(A[2])),b.length&&(s="/"+b.join(".")+s),this.hostname=O.join(".");break}}}this.hostname.length>oN?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=QL.toASCII(this.hostname));var N=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+N,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!sN[c])for(var d=0,_=Wv.length;d<_;d++){var et=Wv[d];if(s.indexOf(et)!==-1){var L=encodeURIComponent(et);L===et&&(L=escape(et)),s=s.split(et).join(L)}}var D=s.indexOf("#");D!==-1&&(this.hash=s.substr(D),s=s.slice(0,D));var B=s.indexOf("?");if(B!==-1?(this.search=s.substr(B),this.query=s.substr(B+1),t&&(this.query=$v.parse(this.query)),s=s.slice(0,B)):t&&(this.search="",this.query={}),s&&(this.pathname=s),Ps[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var N=this.pathname||"",q=this.search||"";this.path=N+q}return this.href=this.format(),this};function lN(n){return typeof n=="string"&&(n=Nd(n)),n instanceof Cr?n.format():Cr.prototype.format.call(n)}Cr.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var t=this.protocol||"",e=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=n+this.host:this.hostname&&(i=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=$v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||o&&"?"+o||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Ps[t])&&i!==!1?(i="//"+(i||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),a&&a.charAt(0)!=="?"&&(a="?"+a),e=e.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),a=a.replace("#","%23"),t+i+e+a+r};function uN(n,t){return Nd(n,!1,!0).resolve(t)}Cr.prototype.resolve=function(n){return this.resolveObject(Nd(n,!1,!0)).format()};Cr.prototype.resolveObject=function(n){if(typeof n=="string"){var t=new Cr;t.parse(n,!1,!0),n=t}for(var e=new Cr,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];e[o]=this[o]}if(e.hash=n.hash,n.href==="")return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var a=Object.keys(n),s=0;s<a.length;s++){var l=a[s];l!=="protocol"&&(e[l]=n[l])}return Ps[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(n.protocol&&n.protocol!==e.protocol){if(!Ps[n.protocol]){for(var u=Object.keys(n),c=0;c<u.length;c++){var h=u[c];e[h]=n[h]}return e.href=e.format(),e}if(e.protocol=n.protocol,!n.host&&!Xv[n.protocol]){for(var _=(n.pathname||"").split("/");_.length&&!(n.host=_.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),e.pathname=_.join("/")}else e.pathname=n.pathname;if(e.search=n.search,e.query=n.query,e.host=n.host||"",e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,e.pathname||e.search){var f=e.pathname||"",d=e.search||"";e.path=f+d}return e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var m=e.pathname&&e.pathname.charAt(0)==="/",g=n.host||n.pathname&&n.pathname.charAt(0)==="/",p=g||m||e.host&&n.pathname,v=p,y=e.pathname&&e.pathname.split("/")||[],_=n.pathname&&n.pathname.split("/")||[],T=e.protocol&&!Ps[e.protocol];if(T&&(e.hostname="",e.port=null,e.host&&(y[0]===""?y[0]=e.host:y.unshift(e.host)),e.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(_[0]===""?_[0]=n.host:_.unshift(n.host)),n.host=null),p=p&&(_[0]===""||y[0]==="")),g)e.host=n.host||n.host===""?n.host:e.host,e.hostname=n.hostname||n.hostname===""?n.hostname:e.hostname,e.search=n.search,e.query=n.query,y=_;else if(_.length)y||(y=[]),y.pop(),y=y.concat(_),e.search=n.search,e.query=n.query;else if(n.search!=null){if(T){e.host=y.shift(),e.hostname=e.host;var E=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;E&&(e.auth=E.shift(),e.hostname=E.shift(),e.host=e.hostname)}return e.search=n.search,e.query=n.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!y.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var S=y.slice(-1)[0],x=(e.host||n.host||y.length>1)&&(S==="."||S==="..")||S==="",O=0,b=y.length;b>=0;b--)S=y[b],S==="."?y.splice(b,1):S===".."?(y.splice(b,1),O++):O&&(y.splice(b,1),O--);if(!p&&!v)for(;O--;O)y.unshift("..");p&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),x&&y.join("/").substr(-1)!=="/"&&y.push("");var A=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(T){e.hostname=A?"":y.length?y.shift():"",e.host=e.hostname;var E=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;E&&(e.auth=E.shift(),e.hostname=E.shift(),e.host=e.hostname)}return p=p||e.host&&y.length,p&&!A&&y.unshift(""),y.length>0?e.pathname=y.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e};Cr.prototype.parseHost=function(){var n=this.host,t=eN.exec(n);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),n=n.substr(0,n.length-t.length)),n&&(this.hostname=n)};var cN=Nd,hN=uN,fN=lN;/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var vs={parse:cN,format:fN,resolve:hN};Ot.RETINA_PREFIX=/@([0-9\.]+)x/;Ot.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Wx=!1,Xx="6.5.10";function dN(n){var t;if(!Wx){if(Ot.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+Xx+" -  "+n+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,e)}else globalThis.console&&globalThis.console.log("PixiJS "+Xx+" - "+n+" - http://www.pixijs.com/");Wx=!0}}var Up;function pN(){return typeof Up>"u"&&(Up=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:Ot.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Ot.ADAPTER.getWebGLRenderingContext())return!1;var e=Ot.ADAPTER.createCanvas(),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!!(r&&r.getContextAttributes().stencil);if(r){var o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,i}catch{return!1}}()),Up}var mN="#f0f8ff",vN="#faebd7",gN="#00ffff",_N="#7fffd4",yN="#f0ffff",xN="#f5f5dc",bN="#ffe4c4",SN="#000000",EN="#ffebcd",TN="#0000ff",wN="#8a2be2",AN="#a52a2a",MN="#deb887",CN="#5f9ea0",RN="#7fff00",PN="#d2691e",IN="#ff7f50",ON="#6495ed",DN="#fff8dc",LN="#dc143c",NN="#00ffff",FN="#00008b",UN="#008b8b",BN="#b8860b",GN="#a9a9a9",kN="#006400",HN="#a9a9a9",zN="#bdb76b",VN="#8b008b",WN="#556b2f",XN="#ff8c00",$N="#9932cc",jN="#8b0000",YN="#e9967a",qN="#8fbc8f",KN="#483d8b",ZN="#2f4f4f",JN="#2f4f4f",QN="#00ced1",tF="#9400d3",eF="#ff1493",nF="#00bfff",rF="#696969",iF="#696969",oF="#1e90ff",aF="#b22222",sF="#fffaf0",lF="#228b22",uF="#ff00ff",cF="#dcdcdc",hF="#f8f8ff",fF="#daa520",dF="#ffd700",pF="#808080",mF="#008000",vF="#adff2f",gF="#808080",_F="#f0fff0",yF="#ff69b4",xF="#cd5c5c",bF="#4b0082",SF="#fffff0",EF="#f0e68c",TF="#fff0f5",wF="#e6e6fa",AF="#7cfc00",MF="#fffacd",CF="#add8e6",RF="#f08080",PF="#e0ffff",IF="#fafad2",OF="#d3d3d3",DF="#90ee90",LF="#d3d3d3",NF="#ffb6c1",FF="#ffa07a",UF="#20b2aa",BF="#87cefa",GF="#778899",kF="#778899",HF="#b0c4de",zF="#ffffe0",VF="#00ff00",WF="#32cd32",XF="#faf0e6",$F="#ff00ff",jF="#800000",YF="#66cdaa",qF="#0000cd",KF="#ba55d3",ZF="#9370db",JF="#3cb371",QF="#7b68ee",t3="#00fa9a",e3="#48d1cc",n3="#c71585",r3="#191970",i3="#f5fffa",o3="#ffe4e1",a3="#ffe4b5",s3="#ffdead",l3="#000080",u3="#fdf5e6",c3="#808000",h3="#6b8e23",f3="#ffa500",d3="#ff4500",p3="#da70d6",m3="#eee8aa",v3="#98fb98",g3="#afeeee",_3="#db7093",y3="#ffefd5",x3="#ffdab9",b3="#cd853f",S3="#ffc0cb",E3="#dda0dd",T3="#b0e0e6",w3="#800080",A3="#663399",M3="#ff0000",C3="#bc8f8f",R3="#4169e1",P3="#8b4513",I3="#fa8072",O3="#f4a460",D3="#2e8b57",L3="#fff5ee",N3="#a0522d",F3="#c0c0c0",U3="#87ceeb",B3="#6a5acd",G3="#708090",k3="#708090",H3="#fffafa",z3="#00ff7f",V3="#4682b4",W3="#d2b48c",X3="#008080",$3="#d8bfd8",j3="#ff6347",Y3="#40e0d0",q3="#ee82ee",K3="#f5deb3",Z3="#ffffff",J3="#f5f5f5",Q3="#ffff00",tU="#9acd32",eU={aliceblue:mN,antiquewhite:vN,aqua:gN,aquamarine:_N,azure:yN,beige:xN,bisque:bN,black:SN,blanchedalmond:EN,blue:TN,blueviolet:wN,brown:AN,burlywood:MN,cadetblue:CN,chartreuse:RN,chocolate:PN,coral:IN,cornflowerblue:ON,cornsilk:DN,crimson:LN,cyan:NN,darkblue:FN,darkcyan:UN,darkgoldenrod:BN,darkgray:GN,darkgreen:kN,darkgrey:HN,darkkhaki:zN,darkmagenta:VN,darkolivegreen:WN,darkorange:XN,darkorchid:$N,darkred:jN,darksalmon:YN,darkseagreen:qN,darkslateblue:KN,darkslategray:ZN,darkslategrey:JN,darkturquoise:QN,darkviolet:tF,deeppink:eF,deepskyblue:nF,dimgray:rF,dimgrey:iF,dodgerblue:oF,firebrick:aF,floralwhite:sF,forestgreen:lF,fuchsia:uF,gainsboro:cF,ghostwhite:hF,goldenrod:fF,gold:dF,gray:pF,green:mF,greenyellow:vF,grey:gF,honeydew:_F,hotpink:yF,indianred:xF,indigo:bF,ivory:SF,khaki:EF,lavenderblush:TF,lavender:wF,lawngreen:AF,lemonchiffon:MF,lightblue:CF,lightcoral:RF,lightcyan:PF,lightgoldenrodyellow:IF,lightgray:OF,lightgreen:DF,lightgrey:LF,lightpink:NF,lightsalmon:FF,lightseagreen:UF,lightskyblue:BF,lightslategray:GF,lightslategrey:kF,lightsteelblue:HF,lightyellow:zF,lime:VF,limegreen:WF,linen:XF,magenta:$F,maroon:jF,mediumaquamarine:YF,mediumblue:qF,mediumorchid:KF,mediumpurple:ZF,mediumseagreen:JF,mediumslateblue:QF,mediumspringgreen:t3,mediumturquoise:e3,mediumvioletred:n3,midnightblue:r3,mintcream:i3,mistyrose:o3,moccasin:a3,navajowhite:s3,navy:l3,oldlace:u3,olive:c3,olivedrab:h3,orange:f3,orangered:d3,orchid:p3,palegoldenrod:m3,palegreen:v3,paleturquoise:g3,palevioletred:_3,papayawhip:y3,peachpuff:x3,peru:b3,pink:S3,plum:E3,powderblue:T3,purple:w3,rebeccapurple:A3,red:M3,rosybrown:C3,royalblue:R3,saddlebrown:P3,salmon:I3,sandybrown:O3,seagreen:D3,seashell:L3,sienna:N3,silver:F3,skyblue:U3,slateblue:B3,slategray:G3,slategrey:k3,snow:H3,springgreen:z3,steelblue:V3,tan:W3,teal:X3,thistle:$3,tomato:j3,turquoise:Y3,violet:q3,wheat:K3,white:Z3,whitesmoke:J3,yellow:Q3,yellowgreen:tU};function Hs(n,t){return t===void 0&&(t=[]),t[0]=(n>>16&255)/255,t[1]=(n>>8&255)/255,t[2]=(n&255)/255,t}function PA(n){var t=n.toString(16);return t="000000".substring(0,6-t.length)+t,"#"+t}function IA(n){return typeof n=="string"&&(n=eU[n.toLowerCase()]||n,n[0]==="#"&&(n=n.slice(1))),parseInt(n,16)}function nU(){for(var n=[],t=[],e=0;e<32;e++)n[e]=e,t[e]=e;n[Gt.NORMAL_NPM]=Gt.NORMAL,n[Gt.ADD_NPM]=Gt.ADD,n[Gt.SCREEN_NPM]=Gt.SCREEN,t[Gt.NORMAL]=Gt.NORMAL_NPM,t[Gt.ADD]=Gt.ADD_NPM,t[Gt.SCREEN]=Gt.SCREEN_NPM;var r=[];return r.push(t),r.push(n),r}var OA=nU();function DA(n,t){return OA[t?1:0][n]}function rU(n,t,e,r){return e=e||new Float32Array(4),r||r===void 0?(e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t):(e[0]=n[0],e[1]=n[1],e[2]=n[2]),e[3]=t,e}function Z_(n,t){if(t===1)return(t*255<<24)+n;if(t===0)return 0;var e=n>>16&255,r=n>>8&255,i=n&255;return e=e*t+.5|0,r=r*t+.5|0,i=i*t+.5|0,(t*255<<24)+(e<<16)+(r<<8)+i}function LA(n,t,e,r){return e=e||new Float32Array(4),e[0]=(n>>16&255)/255,e[1]=(n>>8&255)/255,e[2]=(n&255)/255,(r||r===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function iU(n,t){t===void 0&&(t=null);var e=n*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+e);for(var r=0,i=0;r<e;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}function NA(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function zf(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function $x(n){return!(n&n-1)&&!!n}function jx(n){var t=(n>65535?1:0)<<4;n>>>=t;var e=(n>255?1:0)<<3;return n>>>=e,t|=e,e=(n>15?1:0)<<2,n>>>=e,t|=e,e=(n>3?1:0)<<1,n>>>=e,t|=e,t|n>>1}function Is(n,t,e){var r=n.length,i;if(!(t>=r||e===0)){e=t+e>r?r-t:e;var o=r-e;for(i=t;i<o;++i)n[i]=n[i+e];n.length=o}}function gs(n){return n===0?0:n<0?-1:1}var oU=0;function Ea(){return++oU}var Yx={};function Rr(n,t,e){if(e===void 0&&(e=3),!Yx[t]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+n):(r=r.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+n),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+n),console.warn(r))),Yx[t]=!0}}var qx={},gi=Object.create(null),Po=Object.create(null),Kx=function(){function n(t,e,r){this.canvas=Ot.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||Ot.RESOLUTION,this.resize(t,e)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},n.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(n.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),n}();function aU(n){var t=n.width,e=n.height,r=n.getContext("2d",{willReadFrequently:!0}),i=r.getImageData(0,0,t,e),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},l=null,u,c,h;for(u=0;u<a;u+=4)o[u+3]!==0&&(c=u/4%t,h=~~(u/4/t),s.top===null&&(s.top=h),(s.left===null||c<s.left)&&(s.left=c),(s.right===null||s.right<c)&&(s.right=c+1),(s.bottom===null||s.bottom<h)&&(s.bottom=h));return s.top!==null&&(t=s.right-s.left,e=s.bottom-s.top+1,l=r.getImageData(s.left,s.top,t,e)),{height:e,width:t,data:l}}var Tc;function sU(n,t){if(t===void 0&&(t=globalThis.location),n.indexOf("data:")===0)return"";t=t||globalThis.location,Tc||(Tc=document.createElement("a")),Tc.href=n;var e=vs.parse(Tc.href),r=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!r||e.protocol!==t.protocol?"anonymous":""}function Vf(n,t){var e=Ot.RETINA_PREFIX.exec(n);return e?parseFloat(e[1]):t!==void 0?t:1}/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wf=Math.PI*2,lU=180/Math.PI,uU=Math.PI/180,Qe;(function(n){n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC"})(Qe||(Qe={}));var Te=function(){function n(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},n.prototype.copyTo=function(t){return t.set(this.x,this.y),t},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},n.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},n}(),wc=[new Te,new Te,new Te,new Te],ae=function(){function n(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=Qe.RECT}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n,"EMPTY",{get:function(){return new n(0,0,0,0)},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},n.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},n.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},n.prototype.intersects=function(t,e){if(!e){var r=this.x<t.x?t.x:this.x,i=this.right>t.right?t.right:this.right;if(i<=r)return!1;var o=this.y<t.y?t.y:this.y,a=this.bottom>t.bottom?t.bottom:this.bottom;return a>o}var s=this.left,l=this.right,u=this.top,c=this.bottom;if(l<=s||c<=u)return!1;var h=wc[0].set(t.left,t.top),f=wc[1].set(t.left,t.bottom),d=wc[2].set(t.right,t.top),m=wc[3].set(t.right,t.bottom);if(d.x<=h.x||f.y<=h.y)return!1;var g=Math.sign(e.a*e.d-e.b*e.c);if(g===0||(e.apply(h,h),e.apply(f,f),e.apply(d,d),e.apply(m,m),Math.max(h.x,f.x,d.x,m.x)<=s||Math.min(h.x,f.x,d.x,m.x)>=l||Math.max(h.y,f.y,d.y,m.y)<=u||Math.min(h.y,f.y,d.y,m.y)>=c))return!1;var p=g*(f.y-h.y),v=g*(h.x-f.x),y=p*s+v*u,_=p*l+v*u,T=p*s+v*c,E=p*l+v*c;if(Math.max(y,_,T,E)<=p*h.x+v*h.y||Math.min(y,_,T,E)>=p*m.x+v*m.y)return!1;var S=g*(h.y-d.y),x=g*(d.x-h.x),O=S*s+x*u,b=S*l+x*u,A=S*s+x*c,N=S*l+x*c;return!(Math.max(O,b,A,N)<=S*h.x+x*h.y||Math.min(O,b,A,N)>=S*m.x+x*m.y)},n.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},n.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(o-i,0),this},n.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},n.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=o-i,this},n.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),cU=function(){function n(t,e,r){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=Qe.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-t,o=this.y-e;return i*=i,o*=o,i+o<=r},n.prototype.getBounds=function(){return new ae(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},n.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},n}(),hU=function(){function n(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=t,this.y=e,this.width=r,this.height=i,this.type=Qe.ELIP}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(e-this.y)/this.height;return r*=r,i*=i,r+i<=1},n.prototype.getBounds=function(){return new ae(this.x-this.width,this.y-this.height,this.width,this.height)},n.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),Wh=function(){function n(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if(typeof i[0]!="number"){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=Qe.POLY,this.closeStroke=!0}return n.prototype.clone=function(){var t=this.points.slice(),e=new n(t);return e.closeStroke=this.closeStroke,e},n.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,o=0,a=i-1;o<i;a=o++){var s=this.points[o*2],l=this.points[o*2+1],u=this.points[a*2],c=this.points[a*2+1],h=l>e!=c>e&&t<(u-s)*((e-l)/(c-l))+s;h&&(r=!r)}return r},n.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]")},n}(),fU=function(){function n(t,e,r,i,o){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=20),this.x=t,this.y=e,this.width=r,this.height=i,this.radius=o,this.type=Qe.RREC}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;var i=t-(this.x+r),o=e-(this.y+r),a=r*r;if(i*i+o*o<=a||(i=t-(this.x+this.width-r),i*i+o*o<=a)||(o=e-(this.y+this.height-r),i*i+o*o<=a)||(i=t-(this.x+r),i*i+o*o<=a))return!0}return!1},n.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},n}(),_s=function(){function n(t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=0),this._x=r,this._y=i,this.cb=t,this.scope=e}return n.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new n(t,e,this._x,this._y)},n.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},n.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},n.prototype.copyTo=function(t){return t.set(this._x,this._y),t},n.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},n.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),n}(),Xe=function(){function n(t,e,r,i,o,a){t===void 0&&(t=1),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=1),o===void 0&&(o=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=o,this.ty=a}return n.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.prototype.set=function(t,e,r,i,o,a){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=o,this.ty=a,this},n.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},n.prototype.apply=function(t,e){e=e||new Te;var r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e},n.prototype.applyInverse=function(t,e){e=e||new Te;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,o=t.y;return e.x=this.d*r*i+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*o+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},n.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,o=this.c,a=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=o*e-this.d*r,this.d=o*r+this.d*e,this.tx=a*e-this.ty*r,this.ty=a*r+this.ty*e,this},n.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,o=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*o,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*o,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*o+this.ty,this},n.prototype.setTransform=function(t,e,r,i,o,a,s,l,u){return this.a=Math.cos(s+u)*o,this.b=Math.sin(s+u)*o,this.c=-Math.sin(s-l)*a,this.d=Math.cos(s-l)*a,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},n.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},n.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,o=this.d,a=t.pivot,s=-Math.atan2(-i,o),l=Math.atan2(r,e),u=Math.abs(s+l);return u<1e-5||Math.abs(Wf-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=l),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+o*o),t.position.x=this.tx+(a.x*e+a.y*i),t.position.y=this.ty+(a.x*r+a.y*o),t},n.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,o=this.tx,a=t*i-e*r;return this.a=i/a,this.b=-e/a,this.c=-r/a,this.d=t/a,this.tx=(r*this.ty-i*o)/a,this.ty=-(t*this.ty-e*o)/a,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},n.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(n,"IDENTITY",{get:function(){return new n},enumerable:!1,configurable:!0}),Object.defineProperty(n,"TEMP_MATRIX",{get:function(){return new n},enumerable:!1,configurable:!0}),n}(),ko=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ho=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zo=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vo=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],jv=[],FA=[],Ac=Math.sign;function dU(){for(var n=0;n<16;n++){var t=[];jv.push(t);for(var e=0;e<16;e++)for(var r=Ac(ko[n]*ko[e]+zo[n]*Ho[e]),i=Ac(Ho[n]*ko[e]+Vo[n]*Ho[e]),o=Ac(ko[n]*zo[e]+zo[n]*Vo[e]),a=Ac(Ho[n]*zo[e]+Vo[n]*Vo[e]),s=0;s<16;s++)if(ko[s]===r&&Ho[s]===i&&zo[s]===o&&Vo[s]===a){t.push(s);break}}for(var n=0;n<16;n++){var l=new Xe;l.set(ko[n],Ho[n],zo[n],Vo[n],0,0),FA.push(l)}}dU();var Pe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(n){return ko[n]},uY:function(n){return Ho[n]},vX:function(n){return zo[n]},vY:function(n){return Vo[n]},inv:function(n){return n&8?n&15:-n&7},add:function(n,t){return jv[n][t]},sub:function(n,t){return jv[n][Pe.inv(t)]},rotate180:function(n){return n^4},isVertical:function(n){return(n&3)===2},byDirection:function(n,t){return Math.abs(n)*2<=Math.abs(t)?t>=0?Pe.S:Pe.N:Math.abs(t)*2<=Math.abs(n)?n>0?Pe.E:Pe.W:t>0?n>0?Pe.SE:Pe.SW:n>0?Pe.NE:Pe.NW},matrixAppendRotationInv:function(n,t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var i=FA[Pe.inv(t)];i.tx=e,i.ty=r,n.append(i)}},UA=function(){function n(){this.worldTransform=new Xe,this.localTransform=new Xe,this.position=new _s(this.onChange,this,0,0),this.scale=new _s(this.onChange,this,1,1),this.pivot=new _s(this.onChange,this,0,0),this.skew=new _s(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return n.prototype.onChange=function(){this._localID++},n.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},n.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},n.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},n.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},n.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),n.IDENTITY=new n,n}();/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ot.SORTABLE_CHILDREN=!1;var Xf=function(){function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?ae.EMPTY:(t=t||new ae(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},n.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},n.prototype.addPointMatrix=function(t,e){var r=t.a,i=t.b,o=t.c,a=t.d,s=t.tx,l=t.ty,u=r*e.x+o*e.y+s,c=i*e.x+a*e.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},n.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,o=this.maxY,a=t[0],s=t[1];e=a<e?a:e,r=s<r?s:r,i=a>i?a:i,o=s>o?s:o,a=t[2],s=t[3],e=a<e?a:e,r=s<r?s:r,i=a>i?a:i,o=s>o?s:o,a=t[4],s=t[5],e=a<e?a:e,r=s<r?s:r,i=a>i?a:i,o=s>o?s:o,a=t[6],s=t[7],e=a<e?a:e,r=s<r?s:r,i=a>i?a:i,o=s>o?s:o,this.minX=e,this.minY=r,this.maxX=i,this.maxY=o},n.prototype.addFrame=function(t,e,r,i,o){this.addFrameMatrix(t.worldTransform,e,r,i,o)},n.prototype.addFrameMatrix=function(t,e,r,i,o){var a=t.a,s=t.b,l=t.c,u=t.d,c=t.tx,h=t.ty,f=this.minX,d=this.minY,m=this.maxX,g=this.maxY,p=a*e+l*r+c,v=s*e+u*r+h;f=p<f?p:f,d=v<d?v:d,m=p>m?p:m,g=v>g?v:g,p=a*i+l*r+c,v=s*i+u*r+h,f=p<f?p:f,d=v<d?v:d,m=p>m?p:m,g=v>g?v:g,p=a*e+l*o+c,v=s*e+u*o+h,f=p<f?p:f,d=v<d?v:d,m=p>m?p:m,g=v>g?v:g,p=a*i+l*o+c,v=s*i+u*o+h,f=p<f?p:f,d=v<d?v:d,m=p>m?p:m,g=v>g?v:g,this.minX=f,this.minY=d,this.maxX=m,this.maxY=g},n.prototype.addVertexData=function(t,e,r){for(var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY,l=e;l<r;l+=2){var u=t[l],c=t[l+1];i=u<i?u:i,o=c<o?c:o,a=u>a?u:a,s=c>s?c:s}this.minX=i,this.minY=o,this.maxX=a,this.maxY=s},n.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},n.prototype.addVerticesMatrix=function(t,e,r,i,o,a){o===void 0&&(o=0),a===void 0&&(a=o);for(var s=t.a,l=t.b,u=t.c,c=t.d,h=t.tx,f=t.ty,d=this.minX,m=this.minY,g=this.maxX,p=this.maxY,v=r;v<i;v+=2){var y=e[v],_=e[v+1],T=s*y+u*_+h,E=c*_+l*y+f;d=Math.min(d,T-o),g=Math.max(g,T+o),m=Math.min(m,E-a),p=Math.max(p,E+a)}this.minX=d,this.minY=m,this.maxX=g,this.maxY=p},n.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,o=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>o?t.maxY:o},n.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,o=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=o&&i<=a){var s=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=r<s?r:s,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=a>c?a:c}},n.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},n.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=o&&i<=a){var s=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=r<s?r:s,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=a>c?a:c}},n.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},n.prototype.addFramePad=function(t,e,r,i,o,a){t-=o,e-=a,r+=o,i+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yv=function(n,t){return Yv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},Yv(n,t)};function J_(n,t){Yv(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ge=function(n){J_(t,n);function t(){var e=n.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new UA,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Xf,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var r=Object.keys(e),i=0;i<r.length;++i){var o=r[i];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(e,o))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new ae),r=this._boundsRect),this._bounds.getRectangle(r)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new ae),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Xf);var r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,e);return this.parent=i,this.transform=r,this._bounds=o,this._bounds.updateID+=this._boundsID-a,s},t.prototype.toGlobal=function(e,r,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)},t.prototype.toLocal=function(e,r,i,o){return r&&(e=r.toGlobal(e,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,r,i,o,a,s,l,u,c){return e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=1),o===void 0&&(o=1),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),u===void 0&&(u=0),c===void 0&&(c=0),this.position.x=e,this.position.y=r,this.scale.x=i||1,this.scale.y=o||1,this.rotation=a,this.skew.x=s,this.skew.y=l,this.pivot.x=u,this.pivot.y=c,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new BA),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*lU},set:function(e){this.transform.rotation=e*uU},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask!==e){if(this._mask){var r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){var r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}},enumerable:!1,configurable:!0}),t}(zu),BA=function(n){J_(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(Ge);Ge.prototype.displayObjectUpdateTransform=Ge.prototype.updateTransform;function pU(n,t){return n.zIndex===t.zIndex?n._lastSortedIndex-t._lastSortedIndex:n.zIndex-t.zIndex}var ti=function(n){J_(t,n);function t(){var e=n.call(this)||this;return e.children=[],e.sortableChildren=Ot.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];if(r.length>1)for(var o=0;o<r.length;o++)this.addChild(r[o]);else{var a=r[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return r[0]},t.prototype.addChildAt=function(e,r){if(r<0||r>this.children.length)throw new Error(e+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e},t.prototype.swapChildren=function(e,r){if(e!==r){var i=this.getChildIndex(e),o=this.getChildIndex(r);this.children[i]=r,this.children[o]=e,this.onChildrenChange(i<o?i:o)}},t.prototype.getChildIndex=function(e){var r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r},t.prototype.setChildIndex=function(e,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(e);Is(this.children,i,1),this.children.splice(r,0,e),this.onChildrenChange(r)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];if(r.length>1)for(var o=0;o<r.length;o++)this.removeChild(r[o]);else{var a=r[0],s=this.children.indexOf(a);if(s===-1)return null;a.parent=null,a.transform._parentID=-1,Is(this.children,s,1),this._boundsID++,this.onChildrenChange(s),a.emit("removed",this),this.emit("childRemoved",a,this,s)}return r[0]},t.prototype.removeChildAt=function(e){var r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,Is(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r},t.prototype.removeChildren=function(e,r){e===void 0&&(e=0),r===void 0&&(r=this.children.length);var i=e,o=r,a=o-i,s;if(a>0&&a<=o){s=this.children.splice(i,a);for(var l=0;l<s.length;++l)s[l].parent=null,s[l].transform&&(s[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var l=0;l<s.length;++l)s[l].emit("removed",this),this.emit("childRemoved",s[l],this,l);return s}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,r=0,i=this.children.length;r<i;++r){var o=this.children[r];o._lastSortedIndex=r,!e&&o.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(pU),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,r=this.children.length;e<r;++e){var i=this.children[e];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){var i=r._mask.isMaskData?r._mask.maskObject:r._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(r._bounds,i._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,r){r===void 0&&(r=!1);var i=n.prototype.getLocalBounds.call(this,e);if(!r)for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o];s.visible&&s.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(e){var r=e.renderTexture.sourceFrame;if(r.width>0&&r.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&r.intersects(i,o))this._render(e);else if(this.cullArea)return;for(var a=0,s=this.children.length;a<s;++a){var l=this.children[a],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var r=0,i=this.children.length;r<i;++r)this.children[r].render(e)}},t.prototype.renderAdvanced=function(e){var r=this.filters,i=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<r.length;o++)r[o].enabled&&this._enabledFilters.push(r[o])}var a=r&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==He.NONE));if(a&&e.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(var o=0,s=this.children.length;o<s;++o)this.children[o].render(e)}a&&e.batch.flush(),i&&e.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){n.prototype.destroy.call(this),this.sortDirty=!1;var r=typeof e=="boolean"?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(r)for(var o=0;o<i.length;++o)i[o].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(Ge);ti.prototype.containerUpdateTransform=ti.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eu=function(){return eu=Object.assign||function(t){for(var e=arguments,r,i=1,o=arguments.length;i<o;i++){r=e[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},eu.apply(this,arguments)},pe;(function(n){n.Application="application",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Loader="loader",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser"})(pe||(pe={}));var Zx=function(n){if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");var t=typeof n.extension!="object"?{type:n.extension}:n.extension;n=eu(eu({},t),{ref:n})}if(typeof n=="object")n=eu({},n);else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Gi={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var n=arguments,t=this,e=[],r=0;r<arguments.length;r++)e[r]=n[r];return e.map(Zx).forEach(function(i){i.type.forEach(function(o){var a,s;return(s=(a=t._removeHandlers)[o])===null||s===void 0?void 0:s.call(a,i)})}),this},add:function(){for(var n=arguments,t=this,e=[],r=0;r<arguments.length;r++)e[r]=n[r];return e.map(Zx).forEach(function(i){i.type.forEach(function(o){var a=t._addHandlers,s=t._queue;a[o]?a[o](i):(s[o]=s[o]||[],s[o].push(i))})}),this},handle:function(n,t,e){var r=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(r[n]||i[n])throw new Error("Extension type "+n+" already has a handler");r[n]=t,i[n]=e;var o=this._queue;return o[n]&&(o[n].forEach(function(a){return t(a)}),delete o[n]),this},handleByMap:function(n,t){return this.handle(n,function(e){t[e.name]=e.ref},function(e){delete t[e.name]})},handleByList:function(n,t){return this.handle(n,function(e){var r,i;t.includes(e.ref)||(t.push(e.ref),n===pe.Loader&&((i=(r=e.ref).add)===null||i===void 0||i.call(r)))},function(e){var r=t.indexOf(e.ref);r!==-1&&t.splice(r,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var an=function(){function n(t){this.items=[],this._name=t,this._aliasCount=0}return n.prototype.emit=function(t,e,r,i,o,a,s,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,h=u.items;this._aliasCount++;for(var f=0,d=h.length;f<d;f++)h[f][c](t,e,r,i,o,a,s,l);return h===this.items&&this._aliasCount--,this},n.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},n.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},n.prototype.remove=function(t){var e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},n.prototype.contains=function(t){return this.items.indexOf(t)!==-1},n.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},n.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(n.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n}();Object.defineProperties(an.prototype,{dispatch:{value:an.prototype.emit},run:{value:an.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ot.TARGET_FPMS=.06;var Di;(function(n){n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY"})(Di||(Di={}));var Bp=function(){function n(t,e,r,i){e===void 0&&(e=null),r===void 0&&(r=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}return n.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},n.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},n.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},n.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},n}(),ln=function(){function n(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Bp(null,null,1/0),this.deltaMS=1/Ot.TARGET_FPMS,this.elapsedMS=1/Ot.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return n.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(t,e,r){return r===void 0&&(r=Di.NORMAL),this._addListener(new Bp(t,e,r))},n.prototype.addOnce=function(t,e,r){return r===void 0&&(r=Di.NORMAL),this._addListener(new Bp(t,e,r,!0))},n.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this},n.prototype.remove=function(t,e){for(var r=this._head.next;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(n.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},n.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ot.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(n.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Ot.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(n,"shared",{get:function(){if(!n._shared){var t=n._shared=new n;t.autoStart=!0,t._protected=!0}return n._shared},enumerable:!1,configurable:!0}),Object.defineProperty(n,"system",{get:function(){if(!n._system){var t=n._system=new n;t.autoStart=!0,t._protected=!0}return n._system},enumerable:!1,configurable:!0}),n}(),mU=function(){function n(){}return n.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Di.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ln.shared:new ln,t.autoStart&&this.start()},n.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},n.extension=pe.Application,n}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ot.PREFER_ENV=$r.any?Oi.WEBGL:Oi.WEBGL2;Ot.STRICT_TEXTURE_CACHE=!1;var qv=[];function GA(n,t){if(!n)return null;var e="";if(typeof n=="string"){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(e=r[1].toLowerCase())}for(var i=qv.length-1;i>=0;--i){var o=qv[i];if(o.test&&o.test(n,e))return new o(n,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kv=function(n,t){return Kv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},Kv(n,t)};function _e(n,t){Kv(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Zv=function(){return Zv=Object.assign||function(t){for(var e=arguments,r,i=1,o=arguments.length;i<o;i++){r=e[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Zv.apply(this,arguments)};function vU(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}var bu=function(){function n(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new an("setRealSize"),this.onUpdate=new an("update"),this.onError=new an("onError")}return n.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},n.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},n.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(n.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),n.prototype.update=function(){this.destroyed||this.onUpdate.emit()},n.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),n.prototype.style=function(t,e,r){return!1},n.prototype.dispose=function(){},n.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},n.test=function(t,e){return!1},n}(),Xu=function(n){_e(t,n);function t(e,r){var i=this,o=r||{},a=o.width,s=o.height;if(!a||!s)throw new Error("BufferResource width or height invalid");return i=n.call(this,a,s)||this,i.data=e,i}return t.prototype.upload=function(e,r,i){var o=e.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Dr.UNPACK);var a=r.realWidth,s=r.realHeight;return i.width===a&&i.height===s?o.texSubImage2D(r.target,0,0,0,a,s,r.format,i.type,this.data):(i.width=a,i.height=s,o.texImage2D(r.target,0,i.internalFormat,a,s,0,r.format,i.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(bu),gU={scaleMode:Xr.NEAREST,format:St.RGBA,alphaMode:Dr.NPM},ie=function(n){_e(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var i=n.call(this)||this;r=r||{};var o=r.alphaMode,a=r.mipmap,s=r.anisotropicLevel,l=r.scaleMode,u=r.width,c=r.height,h=r.wrapMode,f=r.format,d=r.type,m=r.target,g=r.resolution,p=r.resourceOptions;return e&&!(e instanceof bu)&&(e=GA(e,p),e.internal=!0),i.resolution=g||Ot.RESOLUTION,i.width=Math.round((u||0)*i.resolution)/i.resolution,i.height=Math.round((c||0)*i.resolution)/i.resolution,i._mipmap=a!==void 0?a:Ot.MIPMAP_TEXTURES,i.anisotropicLevel=s!==void 0?s:Ot.ANISOTROPIC_LEVEL,i._wrapMode=h||Ot.WRAP_MODE,i._scaleMode=l!==void 0?l:Ot.SCALE_MODE,i.format=f||St.RGBA,i.type=d||Bt.UNSIGNED_BYTE,i.target=m||la.TEXTURE_2D,i.alphaMode=o!==void 0?o:Dr.UNPACK,i.uid=Ea(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=u>0&&c>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(e),i}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,r){var i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,i=!0),i&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,r,i){return i=i||this.resolution,this.setRealSize(e*i,r*i,i)},t.prototype.setRealSize=function(e,r,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=$x(this.realWidth)&&$x(this.realHeight)},t.prototype.setResolution=function(e){var r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Po[this.cacheId],delete gi[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,r,i){i===void 0&&(i=Ot.STRICT_TEXTURE_CACHE);var o=typeof e=="string",a=null;if(o)a=e;else{if(!e._pixiId){var s=r&&r.pixiIdPrefix||"pixiid";e._pixiId=s+"_"+Ea()}a=e._pixiId}var l=Po[a];if(o&&i&&!l)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return l||(l=new t(e,r),l.cacheId=a,t.addToCache(l,a)),l},t.fromBuffer=function(e,r,i,o){e=e||new Float32Array(r*i*4);var a=new Xu(e,{width:r,height:i}),s=e instanceof Float32Array?Bt.FLOAT:Bt.UNSIGNED_BYTE;return new t(a,Object.assign({},gU,o||{width:r,height:i,type:s}))},t.addToCache=function(e,r){r&&(e.textureCacheIds.indexOf(r)===-1&&e.textureCacheIds.push(r),Po[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),Po[r]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var r=Po[e];if(r){var i=r.textureCacheIds.indexOf(e);return i>-1&&r.textureCacheIds.splice(i,1),delete Po[e],r}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)delete Po[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(zu),kA=function(n){_e(t,n);function t(e,r){var i=this,o=r||{},a=o.width,s=o.height;i=n.call(this,a,s)||this,i.items=[],i.itemDirtyIds=[];for(var l=0;l<e;l++){var u=new ie;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return t.prototype.initFromArray=function(e,r){for(var i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof bu?this.addResourceAt(e[i],i):this.addResourceAt(GA(e[i],r),i))},t.prototype.dispose=function(){for(var e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");n.prototype.bind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)},t.prototype.unbind=function(e){n.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.items.map(function(o){return o.resource}).filter(function(o){return o}),i=r.map(function(o){return o.load()});return this._load=Promise.all(i).then(function(){var o=e.items[0],a=o.realWidth,s=o.realHeight;return e.resize(a,s),Promise.resolve(e)}),this._load},t}(bu),_U=function(n){_e(t,n);function t(e,r){var i=this,o=r||{},a=o.width,s=o.height,l,u;return Array.isArray(e)?(l=e,u=e.length):u=e,i=n.call(this,u,{width:a,height:s})||this,l&&i.initFromArray(l,r),i}return t.prototype.addBaseTextureAt=function(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){n.prototype.bind.call(this,e),e.target=la.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,r,i){var o=this,a=o.length,s=o.itemDirtyIds,l=o.items,u=e.gl;i.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,a,0,r.format,i.type,null);for(var c=0;c<a;c++){var h=l[c];s[c]<h.dirtyId&&(s[c]=h.dirtyId,h.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,c,h.resource.width,h.resource.height,1,r.format,i.type,h.resource.source))}return!0},t}(kA),yo=function(n){_e(t,n);function t(e){var r=this,i=e,o=i.naturalWidth||i.videoWidth||i.width,a=i.naturalHeight||i.videoHeight||i.height;return r=n.call(this,o,a)||this,r.source=e,r.noSubImage=!1,r}return t.crossOrigin=function(e,r,i){i===void 0&&r.indexOf("data:")!==0?e.crossOrigin=sU(r):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")},t.prototype.upload=function(e,r,i,o){var a=e.gl,s=r.realWidth,l=r.realHeight;if(o=o||this.source,o instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Dr.UNPACK),!this.noSubImage&&r.target===a.TEXTURE_2D&&i.width===s&&i.height===l?a.texSubImage2D(a.TEXTURE_2D,0,0,0,r.format,i.type,o):(i.width=s,i.height=l,a.texImage2D(r.target,0,i.internalFormat,r.format,i.type,o)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,r=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(r,i),n.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(bu),yU=function(n){_e(t,n);function t(e){return n.call(this,e)||this}return t.test=function(e){var r=globalThis.OffscreenCanvas;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(yo),xU=function(n){_e(t,n);function t(e,r){var i=this,o=r||{},a=o.width,s=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");i=n.call(this,6,{width:a,height:s})||this;for(var c=0;c<t.SIDES;c++)i.items[c].target=la.TEXTURE_CUBE_MAP_POSITIVE_X+c;return i.linkBaseTexture=u!==!1,e&&i.initFromArray(e,r),l!==!1&&i.load(),i}return t.prototype.bind=function(e){n.prototype.bind.call(this,e),e.target=la.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,r,i){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=la.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this},t.prototype.upload=function(e,r,i){for(var o=this.itemDirtyIds,a=0;a<t.SIDES;a++){var s=this.items[a];(o[a]<s.dirtyId||i.dirtyId<r.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,i),o[a]=s.dirtyId):o[a]<-1&&(e.gl.texImage2D(s.target,0,i.internalFormat,r.realWidth,r.realHeight,0,r.format,i.type,null),o[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(kA),HA=function(n){_e(t,n);function t(e,r){var i=this;if(r=r||{},!(e instanceof HTMLImageElement)){var o=new Image;yo.crossOrigin(o,e,r.crossorigin),o.src=e,e=o}return i=n.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(r.createBitmap!==void 0?r.createBitmap:Ot.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,i.bitmap=null,i._load=null,r.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(e){var r=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(i,o){var a=r.source;r.url=a.src;var s=function(){r.destroyed||(a.onload=null,a.onerror=null,r.resize(a.width,a.height),r._load=null,r.createBitmap?i(r.process()):i(r))};a.complete&&a.src?s():(a.onload=s,a.onerror=function(l){o(l),r.onError.emit(l)})}),this._load)},t.prototype.process=function(){var e=this,r=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,o=!r.crossOrigin||r.crossOrigin==="anonymous";return this._process=fetch(r.src,{mode:o?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return i(a,0,0,r.width,r.height,{premultiplyAlpha:e.alphaMode===null||e.alphaMode===Dr.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,r,i){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return n.prototype.upload.call(this,e,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(n.prototype.upload.call(this,e,r,i,this.bitmap),!this.preserveBitmap){var o=!0,a=r._glTextures;for(var s in a){var l=a[s];if(l!==i&&l.dirtyId!==r.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,n.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(yo),bU=function(n){_e(t,n);function t(e,r){var i=this;return r=r||{},i=n.call(this,Ot.ADAPTER.createCanvas())||this,i._width=0,i._height=0,i.svg=e,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,r.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(r){if(e._resolve=function(){e.resize(e.source.width,e.source.height),r(e)},t.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,r=new Image;yo.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(i){e._resolve&&(r.onerror=null,e.onError.emit(i))},r.onload=function(){if(e._resolve){var i=r.width,o=r.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*e.scale,s=o*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/o*i,s=e._overrideHeight||e._overrideWidth/i*o),a=Math.round(a),s=Math.round(s);var l=e.source;l.width=a,l.height=s,l._pixiId="canvas_"+Ea(),l.getContext("2d").drawImage(r,0,0,i,o,0,0,a,s),e._resolve(),e._resolve=null}}},t.getSize=function(e){var r=t.SVG_SIZE.exec(e),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i},t.prototype.dispose=function(){n.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(yo),SU=function(n){_e(t,n);function t(e,r){var i=this;if(r=r||{},!(e instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];yo.crossOrigin(o,a,r.crossorigin);for(var s=0;s<e.length;++s){var l=document.createElement("source"),u=e[s],c=u.src,h=u.mime;c=c||e[s];var f=c.split("?").shift().toLowerCase(),d=f.slice(f.lastIndexOf(".")+1);h=h||t.MIME_TYPES[d]||"video/"+d,l.src=c,l.type=h,o.appendChild(l)}e=o}return i=n.call(this,e)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=r.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),r.autoLoad!==!1&&i.load(),i}return t.prototype.update=function(e){if(!this.destroyed){var r=ln.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(n.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){e.valid?i(e):(e._resolve=i,r.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState>2},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ln.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ln.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(e.videoWidth,e.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(ln.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),n.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(ln.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ln.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(r)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(yo),EU=function(n){_e(t,n);function t(e){return n.call(this,e)||this}return t.test=function(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&e instanceof ImageBitmap},t}(yo);qv.push(HA,EU,yU,SU,bU,Xu,xU,_U);var TU=function(n){_e(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.upload=function(e,r,i){var o=e.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Dr.UNPACK);var a=r.realWidth,s=r.realHeight;return i.width===a&&i.height===s?o.texSubImage2D(r.target,0,0,0,a,s,r.format,i.type,this.data):(i.width=a,i.height=s,o.texImage2D(r.target,0,i.internalFormat,a,s,0,r.format,i.type,this.data)),!0},t}(Xu),Jv=function(){function n(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new an("disposeFramebuffer"),this.multisample=we.NONE}return Object.defineProperty(n.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),n.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new ie(null,{scaleMode:Xr.NEAREST,resolution:1,mipmap:Or.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.addDepthTexture=function(t){return this.depthTexture=t||new ie(new TU(null,{width:this.width,height:this.height}),{scaleMode:Xr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Or.OFF,format:St.DEPTH_COMPONENT,type:Bt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],o=i.resolution;i.setSize(t/o,e/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},n}(),zA=function(n){_e(t,n);function t(e){e===void 0&&(e={});var r=this;if(typeof e=="number"){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e={width:i,height:o,scaleMode:a,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:we.NONE,r=n.call(this,null,e)||this,r.mipmap=Or.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new Jv(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=e.multisample,r.maskStack=[],r.filterStack=[{}],r}return t.prototype.resize=function(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),n.prototype.dispose.call(this)},t.prototype.destroy=function(){n.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(ie),VA=function(){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return n.prototype.set=function(t,e,r){var i=e.width,o=e.height;if(r){var a=t.width/2/i,s=t.height/2/o,l=t.x/i+a,u=t.y/o+s;r=Pe.add(r,Pe.NW),this.x0=l+a*Pe.uX(r),this.y0=u+s*Pe.uY(r),r=Pe.add(r,2),this.x1=l+a*Pe.uX(r),this.y1=u+s*Pe.uY(r),r=Pe.add(r,2),this.x2=l+a*Pe.uX(r),this.y2=u+s*Pe.uY(r),r=Pe.add(r,2),this.x3=l+a*Pe.uX(r),this.y3=u+s*Pe.uY(r)}else this.x0=t.x/i,this.y0=t.y/o,this.x1=(t.x+t.width)/i,this.y1=t.y/o,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/o,this.x3=t.x/i,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},n.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},n}(),Jx=new VA;function Mc(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}var Xt=function(n){_e(t,n);function t(e,r,i,o,a,s){var l=n.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new ae(0,0,1,1)),e instanceof t&&(e=e.baseTexture),l.baseTexture=e,l._frame=r,l.trim=o,l.valid=!1,l._uvs=Jx,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(a||0),a===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=s?new Te(s.x,s.y):new Te(0,0),l._updateID=0,l.textureCacheIds=[],e.valid?l.noFrame?e.valid&&l.onBaseTextureUpdated(e):l.frame=r:e.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&e.on("update",l.onBaseTextureUpdated,l),l}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var r=this.baseTexture.resource;r&&r.url&&gi[r.url]&&t.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),i=new t(this.baseTexture,!this.noFrame&&e,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=e),i},t.prototype.updateUvs=function(){this._uvs===Jx&&(this._uvs=new VA),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,r,i){r===void 0&&(r={}),i===void 0&&(i=Ot.STRICT_TEXTURE_CACHE);var o=typeof e=="string",a=null;if(o)a=e;else if(e instanceof ie){if(!e.cacheId){var s=r&&r.pixiIdPrefix||"pixiid";e.cacheId=s+"-"+Ea(),ie.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){var s=r&&r.pixiIdPrefix||"pixiid";e._pixiId=s+"_"+Ea()}a=e._pixiId}var l=gi[a];if(o&&i&&!l)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return!l&&!(e instanceof ie)?(r.resolution||(r.resolution=Vf(e)),l=new t(new ie(e,r)),l.baseTexture.cacheId=a,ie.addToCache(l.baseTexture,a),t.addToCache(l,a)):!l&&e instanceof ie&&(l=new t(e),t.addToCache(l,a)),l},t.fromURL=function(e,r){var i=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),o=t.from(e,Object.assign({resourceOptions:i},r),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then(function(){return Promise.resolve(o)})},t.fromBuffer=function(e,r,i,o){return new t(ie.fromBuffer(e,r,i,o))},t.fromLoader=function(e,r,i,o){var a=new ie(e,Object.assign({scaleMode:Ot.SCALE_MODE,resolution:Vf(r)},o)),s=a.resource;s instanceof HA&&(s.url=r);var l=new t(a);return i||(i=r),ie.addToCache(l.baseTexture,i),t.addToCache(l,i),i!==r&&(ie.addToCache(l.baseTexture,r),t.addToCache(l,r)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},t.addToCache=function(e,r){r&&(e.textureCacheIds.indexOf(r)===-1&&e.textureCacheIds.push(r),gi[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),gi[r]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var r=gi[e];if(r){var i=r.textureCacheIds.indexOf(e);return i>-1&&r.textureCacheIds.splice(i,1),delete gi[e],r}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)gi[e.textureCacheIds[o]]===e&&delete gi[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var r=e.x,i=e.y,o=e.width,a=e.height,s=r+o>this.baseTexture.width,l=i+a>this.baseTexture.height;if(s||l){var u=s&&l?"and":"or",c="X: "+r+" + "+o+" = "+(r+o)+" > "+this.baseTexture.width,h="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(c+" "+u+" "+h))}this.valid=o&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new ie),Mc(t._EMPTY),Mc(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var e=Ot.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),t._WHITE=new t(ie.from(e)),Mc(t._WHITE),Mc(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(zu),Ta=function(n){_e(t,n);function t(e,r){var i=n.call(this,e,r)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,r,i){i===void 0&&(i=!0);var o=this.baseTexture.resolution,a=Math.round(e*o)/o,s=Math.round(r*o)/o;this.valid=a>0&&s>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(a,s),this.updateUvs()},t.prototype.setResolution=function(e){var r=this.baseTexture;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))},t.create=function(e){for(var r=arguments,i=[],o=1;o<arguments.length;o++)i[o-1]=r[o];return typeof e=="number"&&(Rr("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:i[0],scaleMode:i[1],resolution:i[2]}),new t(new zA(e))},t}(Xt),wU=function(){function n(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return n.prototype.createTexture=function(t,e,r){r===void 0&&(r=we.NONE);var i=new zA(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new Ta(i)},n.prototype.getOptimalTexture=function(t,e,r,i){r===void 0&&(r=1),i===void 0&&(i=we.NONE);var o;t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=zf(t),e=zf(e),o=((t&65535)<<16|e&65535)>>>0,i>1&&(o+=i*4294967296)):o=i>1?-i:-1,this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,i)),a.filterPoolKey=o,a.setResolution(r),a},n.prototype.getFilterTexture=function(t,e,r){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||we.NONE);return i.filterFrame=t.filterFrame,i},n.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},n.prototype.returnFilterTexture=function(t){this.returnTexture(t)},n.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},n.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},n.SCREEN_KEY=-1,n}(),Qx=function(){function n(t,e,r,i,o,a,s){e===void 0&&(e=0),r===void 0&&(r=!1),i===void 0&&(i=Bt.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=o,this.start=a,this.instance=s}return n.prototype.destroy=function(){this.buffer=null},n.from=function(t,e,r,i,o){return new n(t,e,r,i,o)},n}(),AU=0,Ve=function(){function n(t,e,r){e===void 0&&(e=!0),r===void 0&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=AU++,this.disposeRunner=new an("disposeBuffer")}return n.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(n.prototype,"index",{get:function(){return this.type===Kr.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Kr.ELEMENT_ARRAY_BUFFER:Kr.ARRAY_BUFFER},enumerable:!1,configurable:!0}),n.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new n(t)},n}(),MU={Float32Array,Uint32Array,Int32Array,Uint8Array};function CU(n,t){for(var e=0,r=0,i={},o=0;o<n.length;o++)r+=t[o],e+=n[o].length;for(var a=new ArrayBuffer(e*4),s=null,l=0,o=0;o<n.length;o++){var u=t[o],c=n[o],h=NA(c);i[h]||(i[h]=new MU[h](a)),s=i[h];for(var f=0;f<c.length;f++){var d=(f/u|0)*r+l,m=f%u;s[d+m]=c[f]}l+=u}return new Float32Array(a)}var tb={5126:4,5123:2,5121:1},RU=0,PU={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},$u=function(){function n(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=RU++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new an("disposeGeometry"),this.refCount=0}return n.prototype.addAttribute=function(t,e,r,i,o,a,s,l){if(r===void 0&&(r=0),i===void 0&&(i=!1),l===void 0&&(l=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ve||(e instanceof Array&&(e=new Float32Array(e)),e=new Ve(e));var u=t.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],e,r,i,o);return this}var h=this.buffers.indexOf(e);return h===-1&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new Qx(h,r,i,o,a,s,l),this.instanced=this.instanced||l,this},n.prototype.getAttribute=function(t){return this.attributes[t]},n.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},n.prototype.addIndex=function(t){return t instanceof Ve||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ve(t)),t.type=Kr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},n.prototype.getIndex=function(){return this.indexBuffer},n.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],r=new Ve,i;for(i in this.attributes){var o=this.attributes[i],a=this.buffers[o.buffer];t.push(a.data),e.push(o.size*tb[o.type]/4),o.buffer=0}for(r.data=CU(t,e),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},n.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],r=this.buffers[e.buffer];return r.data.length/(e.stride/4||e.size)}return 0},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},n.prototype.clone=function(){for(var t=new n,e=0;e<this.buffers.length;e++)t.buffers[e]=new Ve(this.buffers[e].data.slice(0));for(var e in this.attributes){var r=this.attributes[e];t.attributes[e]=new Qx(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Kr.ELEMENT_ARRAY_BUFFER),t},n.merge=function(t){for(var e=new n,r=[],i=[],o=[],a,s=0;s<t.length;s++){a=t[s];for(var l=0;l<a.buffers.length;l++)i[l]=i[l]||0,i[l]+=a.buffers[l].data.length,o[l]=0}for(var s=0;s<a.buffers.length;s++)r[s]=new PU[NA(a.buffers[s].data)](i[s]),e.buffers[s]=new Ve(r[s]);for(var s=0;s<t.length;s++){a=t[s];for(var l=0;l<a.buffers.length;l++)r[l].set(a.buffers[l].data,o[l]),o[l]+=a.buffers[l].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Kr.ELEMENT_ARRAY_BUFFER;for(var u=0,c=0,h=0,f=0,s=0;s<a.buffers.length;s++)if(a.buffers[s]!==a.indexBuffer){f=s;break}for(var s in a.attributes){var d=a.attributes[s];(d.buffer|0)===f&&(c+=d.size*tb[d.type]/4)}for(var s=0;s<t.length;s++){for(var m=t[s].indexBuffer.data,l=0;l<m.length;l++)e.indexBuffer.data[l+h]+=u;u+=t[s].buffers[f].data.length/c,h+=m.length}}return e},n}(),IU=function(n){_e(t,n);function t(){var e=n.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}($u),WA=function(n){_e(t,n);function t(){var e=n.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Ve(e.vertices),e.uvBuffer=new Ve(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,r){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+r.width/e.width,this.uvs[3]=o,this.uvs[4]=i+r.width/e.width,this.uvs[5]=o+r.height/e.height,this.uvs[6]=i,this.uvs[7]=o+r.height/e.height,i=r.x,o=r.y,this.vertices[0]=i,this.vertices[1]=o,this.vertices[2]=i+r.width,this.vertices[3]=o,this.vertices[4]=i+r.width,this.vertices[5]=o+r.height,this.vertices[6]=i,this.vertices[7]=o+r.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}($u),OU=0,ha=function(){function n(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=OU++,this.static=!!e,this.ubo=!!r,t instanceof Ve?(this.buffer=t,this.buffer.type=Kr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ve(new Float32Array(1)),this.buffer.type=Kr.UNIFORM_BUFFER,this.autoManage=!0))}return n.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},n.prototype.add=function(t,e,r){if(!this.ubo)this.uniforms[t]=new n(e,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},n.from=function(t,e,r){return new n(t,e,r)},n.uboFrom=function(t,e){return new n(t,e??!0,!0)},n}(),DU=function(){function n(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=we.NONE,this.sourceFrame=new ae,this.destinationFrame=new ae,this.bindingSourceFrame=new ae,this.bindingDestinationFrame=new ae,this.filters=[],this.transform=null}return n.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},n}(),Cc=[new Te,new Te,new Te,new Te],Gp=new Xe,LU=function(){function n(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new wU,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new IU,this.quadUv=new WA,this.tempRect=new ae,this.activeState={},this.globalUniforms=new ha({outputFrame:new ae,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return n.prototype.push=function(t,e){for(var r,i,o=this.renderer,a=this.defaultFilterStack,s=this.statePool.pop()||new DU,l=this.renderer.renderTexture,u=e[0].resolution,c=e[0].multisample,h=e[0].padding,f=e[0].autoFit,d=(r=e[0].legacy)!==null&&r!==void 0?r:!0,m=1;m<e.length;m++){var g=e[m];u=Math.min(u,g.resolution),c=Math.min(c,g.multisample),h=this.useMaxPadding?Math.max(h,g.padding):h+g.padding,f=f&&g.autoFit,d=d||((i=g.legacy)!==null&&i!==void 0?i:!0)}a.length===1&&(this.defaultFilterStack[0].renderTexture=l.current),a.push(s),s.resolution=u,s.multisample=c,s.legacy=d,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(h);var p=this.tempRect.copyFrom(l.sourceFrame);o.projection.transform&&this.transformAABB(Gp.copyFrom(o.projection.transform).invert(),p),f?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,l.current?l.current.resolution:o.resolution,l.sourceFrame,l.destinationFrame,o.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,c),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(l.sourceFrame),s.bindingDestinationFrame.copyFrom(l.destinationFrame),s.transform=o.projection.transform,o.projection.transform=null,l.bind(s.renderTexture,s.sourceFrame,v),o.framebuffer.clear(0,0,0,0)},n.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var o=i.inputSize,a=i.inputPixel,s=i.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*e.resolution),a[1]=Math.round(o[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var l=i.filterArea;l[0]=e.destinationFrame.width,l[1]=e.destinationFrame.height,l[2]=e.sourceFrame.x,l[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,e.renderTexture,u.renderTexture,br.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,e.resolution);h.filterFrame=c.filterFrame;var f=0;for(f=0;f<r.length-1;++f){f===1&&e.multisample>1&&(h=this.getOptimalFilterTexture(c.width,c.height,e.resolution),h.filterFrame=c.filterFrame),r[f].apply(this,c,h,br.CLEAR,e);var d=c;c=h,h=d}r[f].apply(this,c,u.renderTexture,br.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},n.prototype.bindAndClear=function(t,e){e===void 0&&(e=br.CLEAR);var r=this.renderer,i=r.renderTexture,o=r.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,i.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=o.stateId&1||this.forceClear;(e===br.CLEAR||e===br.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},n.prototype.applyFilter=function(t,e,r,i){var o=this.renderer;o.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Mr.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Mr.TRIANGLE_STRIP))},n.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,o=r.destinationFrame,a=e._texture.orig,s=t.set(o.width,0,0,o.height,i.x,i.y),l=e.worldTransform.copyTo(Xe.TEMP_MATRIX);return l.invert(),s.prepend(l),s.scale(1/a.width,1/a.height),s.translate(e.anchor.x,e.anchor.y),s},n.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},n.prototype.getOptimalFilterTexture=function(t,e,r,i){return r===void 0&&(r=1),i===void 0&&(i=we.NONE),this.texturePool.getOptimalTexture(t,e,r,i)},n.prototype.getFilterTexture=function(t,e,r){if(typeof t=="number"){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||we.NONE);return o.filterFrame=t.filterFrame,o},n.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},n.prototype.emptyPool=function(){this.texturePool.clear(!0)},n.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},n.prototype.transformAABB=function(t,e){var r=Cc[0],i=Cc[1],o=Cc[2],a=Cc[3];r.set(e.left,e.top),i.set(e.left,e.bottom),o.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(o,o),t.apply(a,a);var s=Math.min(r.x,i.x,o.x,a.x),l=Math.min(r.y,i.y,o.y,a.y),u=Math.max(r.x,i.x,o.x,a.x),c=Math.max(r.y,i.y,o.y,a.y);e.x=s,e.y=l,e.width=u-s,e.height=c-l},n.prototype.roundFrame=function(t,e,r,i,o){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(o){var a=o.a,s=o.b,l=o.c,u=o.d;if((Math.abs(s)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}o=o?Gp.copyFrom(o):Gp.identity(),o.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(o,t),t.ceil(e),this.transformAABB(o.invert(),t)}},n}(),Fd=function(){function n(t){this.renderer=t}return n.prototype.flush=function(){},n.prototype.destroy=function(){this.renderer=null},n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.render=function(t){},n}(),NU=function(){function n(t){this.renderer=t,this.emptyRenderer=new Fd(t),this.currentRenderer=this.emptyRenderer}return n.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;i>=0;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},n.prototype.boundArray=function(t,e,r,i){for(var o=t.elements,a=t.ids,s=t.count,l=0,u=0;u<s;u++){var c=o[u],h=c._batchLocation;if(h>=0&&h<i&&e[h]===c){a[u]=h;continue}for(;l<i;){var f=e[l];if(f&&f._batchEnabled===r&&f._batchLocation===l){l++;continue}a[u]=l,c._batchLocation=l,e[l]=c;break}}},n.prototype.destroy=function(){this.renderer=null},n}(),eb=0,FU=function(){function n(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(n.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),n.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=eb++},n.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=eb++,this.renderer.runners.contextChange.emit(t)},n.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},n.prototype.createContext=function(t,e){var r;if(Ot.PREFER_ENV>=Oi.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},n.prototype.getExtensions=function(){var t=this.gl,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},n.prototype.handleContextLost=function(t){var e=this;t.preventDefault(),setTimeout(function(){e.gl.isContextLost()&&e.extensions.loseContext&&e.extensions.loseContext.restoreContext()},0)},n.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},n.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},n.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},n.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},n}(),UU=function(){function n(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=we.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return n}(),BU=new ae,GU=function(){function n(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Jv(10,10),this.msaaSamples=null}return n.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ae,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Ot.PREFER_ENV===Oi.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=function(i){return e.drawBuffersWEBGL(i)}:(this.hasMRT=!1,t.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},n.prototype.bind=function(t,e,r){r===void 0&&(r=0);var i=this.gl;if(t){var o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=r),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var s=t.colorTextures[a];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var l=e.width>>r,u=e.height>>r,c=l/e.width;this.setViewport(e.x*c,e.y*c,l,u)}else{var l=t.width>>r,u=t.height>>r;this.setViewport(0,0,l,u)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},n.prototype.setViewport=function(t,e,r,i){var o=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),i=Math.round(i),(o.width!==r||o.height!==i||o.x!==t||o.y!==e)&&(o.x=t,o.y=e,o.width=r,o.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(n.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),n.prototype.clear=function(t,e,r,i,o){o===void 0&&(o=Lf.COLOR|Lf.DEPTH);var a=this.gl;a.clearColor(t,e,r,i),a.clear(o)},n.prototype.initFramebuffer=function(t){var e=this.gl,r=new UU(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r},n.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height)),r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var i=t.colorTextures,o=i.length;e.drawBuffers||(o=Math.min(o,1));for(var a=0;a<o;a++){var s=i[a],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},n.prototype.updateFramebuffer=function(t,e){var r=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures,a=o.length;r.drawBuffers||(a=Math.min(a,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?(i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var s=[],l=0;l<a;l++){var u=o[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),!(l===0&&i.msaaBuffer)&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,e),s.push(r.COLOR_ATTACHMENT0+l))}if(s.length>1&&r.drawBuffers(s),t.depthTexture){var h=this.writeDepthTexture;if(h){var f=t.depthTexture;this.renderer.texture.bind(f,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil)):i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)},n.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},n.prototype.detectSamples=function(t){var e=this.msaaSamples,r=we.NONE;if(t<=1||e===null)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return r===1&&(r=we.NONE),r},n.prototype.blit=function(t,e,r){var i=this,o=i.current,a=i.renderer,s=i.gl,l=i.CONTEXT_UID;if(a.context.webGLVersion===2&&o){var u=o.glFramebuffers[l];if(u){if(!t){if(!u.msaaBuffer)return;var c=o.colorTextures[0];if(!c)return;u.blitFramebuffer||(u.blitFramebuffer=new Jv(o.width,o.height),u.blitFramebuffer.addColorTexture(0,c)),t=u.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==o.width||t.height!==o.height)&&(t.width=o.width,t.height=o.height,t.dirtyId++,t.dirtySize++)}e||(e=BU,e.width=o.width,e.height=o.height),r||(r=e);var h=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,u.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,h?s.NEAREST:s.LINEAR)}}},n.prototype.disposeFramebuffer=function(t,e){var r=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(r){delete t.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},n.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},n.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var r=t.width,i=t.height,o=this.gl,a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),e.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,e.multisample,o.DEPTH24_STENCIL8,r,i):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,r,i),e.stencil=a,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}}},n.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ae},n.prototype.destroy=function(){this.renderer=null},n}(),kp={5126:4,5123:2,5121:1},kU=function(){function n(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return n.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var r=this.renderer.context.extensions.vertexArrayObject;Ot.PREFER_ENV===Oi.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=function(){return r.createVertexArrayOES()},t.bindVertexArray=function(o){return r.bindVertexArrayOES(o)},t.deleteVertexArray=function(o){return r.deleteVertexArrayOES(o)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(o,a){return i.vertexAttribDivisorANGLE(o,a)},t.drawElementsInstanced=function(o,a,s,l,u){return i.drawElementsInstancedANGLE(o,a,s,l,u)},t.drawArraysInstanced=function(o,a,s,l){return i.drawArraysInstancedANGLE(o,a,s,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},n.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},o=!0);var a=i[e.program.id]||this.initGeometryVao(t,e,o);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?r.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},n.prototype.reset=function(){this.unbind()},n.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,r=0;r<t.buffers.length;r++){var i=t.buffers[r];e.update(i)}},n.prototype.checkCompatibility=function(t,e){var r=t.attributes,i=e.attributeData;for(var o in i)if(!r[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},n.prototype.getSignature=function(t,e){var r=t.attributes,i=e.attributeData,o=["g",t.id];for(var a in r)i[a]&&o.push(a,i[a].location);return o.join("-")},n.prototype.initGeometryVao=function(t,e,r){r===void 0&&(r=!0);var i=this.gl,o=this.CONTEXT_UID,a=this.renderer.buffer,s=e.program;s.glPrograms[o]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,s);var l=this.getSignature(t,s),u=t.glVertexArrayObjects[this.CONTEXT_UID],c=u[l];if(c)return u[s.id]=c,c;var h=t.buffers,f=t.attributes,d={},m={};for(var g in h)d[g]=0,m[g]=0;for(var g in f)!f[g].size&&s.attributeData[g]?f[g].size=s.attributeData[g].size:f[g].size||console.warn("PIXI Geometry attribute '"+g+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[f[g].buffer]+=f[g].size*kp[f[g].type];for(var g in f){var p=f[g],v=p.size;p.stride===void 0&&(d[p.buffer]===v*kp[p.type]?p.stride=0:p.stride=d[p.buffer]),p.start===void 0&&(p.start=m[p.buffer],m[p.buffer]+=v*kp[p.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(var y=0;y<h.length;y++){var _=h[y];a.bind(_),r&&_._glBuffers[o].refCount++}return this.activateVao(t,s),this._activeVao=c,u[s.id]=c,u[l]=c,c},n.prototype.disposeGeometry=function(t,e){var r;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=t.buffers,s=(r=this.renderer)===null||r===void 0?void 0:r.buffer;if(t.disposeRunner.remove(this),!!i){if(s)for(var l=0;l<a.length;l++){var u=a[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&s.dispose(a[l],e))}if(!e){for(var c in i)if(c[0]==="g"){var h=i[c];this._activeVao===h&&this.unbind(),o.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},n.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)},n.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=t.buffers,s=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);var l=null;for(var u in s){var c=s[u],h=a[c.buffer],f=h._glBuffers[i];if(e.attributeData[u]){l!==f&&(o.bind(h),l=f);var d=e.attributeData[u].location;if(r.enableVertexAttribArray(d),r.vertexAttribPointer(d,c.size,c.type||r.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)r.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},n.prototype.draw=function(t,e,r,i){var o=this.gl,a=this._activeGeometry;if(a.indexBuffer){var s=a.indexBuffer.data.BYTES_PER_ELEMENT,l=s===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;s===2||s===4&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,l,(r||0)*s,i||1):o.drawElements(t,e||a.indexBuffer.data.length,l,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(t,r,e||a.getSize(),i||1):o.drawArrays(t,r,e||a.getSize());return this},n.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},n.prototype.destroy=function(){this.renderer=null},n}(),HU=function(){function n(t){t===void 0&&(t=null),this.type=He.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ot.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(n.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=He.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},n.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},n}();function nb(n,t,e){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function rb(n,t){var e=n.getShaderSource(t).split(`
`).map(function(u,c){return c+": "+u}),r=n.getShaderInfoLog(t),i=r.split(`
`),o={},a=i.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!o[u]?(o[u]=!0,!0):!1}),s=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=e.join(`
`);s[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function zU(n,t,e,r){n.getProgramParameter(t,n.LINK_STATUS)||(n.getShaderParameter(e,n.COMPILE_STATUS)||rb(n,e),n.getShaderParameter(r,n.COMPILE_STATUS)||rb(n,r),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(t)))}function Hp(n){for(var t=new Array(n),e=0;e<t.length;e++)t[e]=!1;return t}function XA(n,t){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Hp(2*t);case"bvec3":return Hp(3*t);case"bvec4":return Hp(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var $A={},pl=$A;function VU(){if(pl===$A||pl&&pl.isContextLost()){var n=Ot.ADAPTER.createCanvas(),t=void 0;Ot.PREFER_ENV>=Oi.WEBGL2&&(t=n.getContext("webgl2",{})),t||(t=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),pl=t}return pl}var Rc;function WU(){if(!Rc){Rc=jn.MEDIUM;var n=VU();if(n&&n.getShaderPrecisionFormat){var t=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);Rc=t.precision?jn.HIGH:jn.MEDIUM}}return Rc}function ib(n,t,e){if(n.substring(0,9)!=="precision"){var r=t;return t===jn.HIGH&&e!==jn.HIGH&&(r=jn.MEDIUM),"precision "+r+` float;
`+n}else if(e!==jn.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}var XU={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function jA(n){return XU[n]}var Pc=null,ob={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function YA(n,t){if(!Pc){var e=Object.keys(ob);Pc={};for(var r=0;r<e.length;++r){var i=e[r];Pc[n[i]]=ob[i]}}return Pc[t]}var Os=[{test:function(n){return n.type==="float"&&n.size===1&&!n.isArray},code:function(n){return`
            if(uv["`+n+'"] !== ud["'+n+`"].value)
            {
                ud["`+n+'"].value = uv["'+n+`"]
                gl.uniform1f(ud["`+n+'"].location, uv["'+n+`"])
            }
            `}},{test:function(n,t){return(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(t==null||t.castToBaseTexture!==void 0)},code:function(n){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+n+`"], t);

            if(ud["`+n+`"].value !== t)
            {
                ud["`+n+`"].value = t;
                gl.uniform1i(ud["`+n+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(n,t){return n.type==="mat3"&&n.size===1&&!n.isArray&&t.a!==void 0},code:function(n){return`
            gl.uniformMatrix3fv(ud["`+n+'"].location, false, uv["'+n+`"].toArray(true));
            `},codeUbo:function(n){return`
                var `+n+"_matrix = uv."+n+`.toArray(true);

                data[offset] = `+n+`_matrix[0];
                data[offset+1] = `+n+`_matrix[1];
                data[offset+2] = `+n+`_matrix[2];
        
                data[offset + 4] = `+n+`_matrix[3];
                data[offset + 5] = `+n+`_matrix[4];
                data[offset + 6] = `+n+`_matrix[5];
        
                data[offset + 8] = `+n+`_matrix[6];
                data[offset + 9] = `+n+`_matrix[7];
                data[offset + 10] = `+n+`_matrix[8];
            `}},{test:function(n,t){return n.type==="vec2"&&n.size===1&&!n.isArray&&t.x!==void 0},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+n+`"].location, v.x, v.y);
                }`},codeUbo:function(n){return`
                v = uv.`+n+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(n){return n.type==="vec2"&&n.size===1&&!n.isArray},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+n+`"].location, v[0], v[1]);
                }
            `}},{test:function(n,t){return n.type==="vec4"&&n.size===1&&!n.isArray&&t.width!==void 0},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+n+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(n){return`
                    v = uv.`+n+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(n){return n.type==="vec4"&&n.size===1&&!n.isArray},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+n+`"].location, v[0], v[1], v[2], v[3])
                }`}}],$U={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},jU={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function YU(n,t){var e,r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in n.uniforms){var o=t[i];if(!o){!((e=n.uniforms[i])===null||e===void 0)&&e.group&&(n.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var a=n.uniforms[i],s=!1,l=0;l<Os.length;l++)if(Os[l].test(o,a)){r.push(Os[l].code(i,a)),s=!0;break}if(!s){var u=o.size===1&&!o.isArray?$U:jU,c=u[o.type].replace("location",'ud["'+i+'"].location');r.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+c+";")}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}var qU=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function KU(n){for(var t="",e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+="if(test == "+e+".0){}");return t}function ZU(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var r=qU.replace(/%forloop%/gi,KU(n));if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}return n}var ml;function JU(){if(typeof ml=="boolean")return ml;try{var n=new Function("param1","param2","param3","return param1[param2] === param3;");ml=n({a:"b"},"a","b")===!0}catch{ml=!1}return ml}var QU=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,tB=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,eB=0,Ic={},ju=function(){function n(t,e,r){r===void 0&&(r="pixi-shader"),this.id=eB++,this.vertexSrc=t||n.defaultVertexSrc,this.fragmentSrc=e||n.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Ic[r]?(Ic[r]++,r+="-"+Ic[r]):Ic[r]=1,this.vertexSrc="#define SHADER_NAME "+r+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+`
`+this.fragmentSrc,this.vertexSrc=ib(this.vertexSrc,Ot.PRECISION_VERTEX,jn.HIGH),this.fragmentSrc=ib(this.fragmentSrc,Ot.PRECISION_FRAGMENT,WU())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(n,"defaultVertexSrc",{get:function(){return tB},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return QU},enumerable:!1,configurable:!0}),n.from=function(t,e,r){var i=t+e,o=qx[i];return o||(qx[i]=o=new n(t,e,r)),o},n}(),fo=function(){function n(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof ha?this.uniformGroup=e:this.uniformGroup=new ha(e):this.uniformGroup=new ha({}),this.disposeRunner=new an("disposeShader")}return n.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var i=e.uniforms[r];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},n.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(n.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),n.from=function(t,e,r){var i=ju.from(t,e);return new n(i,r)},n}(),zp=0,Vp=1,Wp=2,Xp=3,$p=4,jp=5,Na=function(){function n(){this.data=0,this.blendMode=Gt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(n.prototype,"blend",{get:function(){return!!(this.data&1<<zp)},set:function(t){!!(this.data&1<<zp)!==t&&(this.data^=1<<zp)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsets",{get:function(){return!!(this.data&1<<Vp)},set:function(t){!!(this.data&1<<Vp)!==t&&(this.data^=1<<Vp)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"culling",{get:function(){return!!(this.data&1<<Wp)},set:function(t){!!(this.data&1<<Wp)!==t&&(this.data^=1<<Wp)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthTest",{get:function(){return!!(this.data&1<<Xp)},set:function(t){!!(this.data&1<<Xp)!==t&&(this.data^=1<<Xp)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthMask",{get:function(){return!!(this.data&1<<jp)},set:function(t){!!(this.data&1<<jp)!==t&&(this.data^=1<<jp)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<$p)},set:function(t){!!(this.data&1<<$p)!==t&&(this.data^=1<<$p)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Gt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},n.for2d=function(){var t=new n;return t.depthTest=!1,t.blend=!0,t},n}(),nB=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,rB=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,So=function(n){_e(t,n);function t(e,r,i){var o=this,a=ju.from(e||t.defaultVertexSrc,r||t.defaultFragmentSrc);return o=n.call(this,a,i)||this,o.padding=0,o.resolution=Ot.FILTER_RESOLUTION,o.multisample=Ot.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Na,o}return t.prototype.apply=function(e,r,i,o,a){e.applyFilter(this,r,i,o)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return rB},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return nB},enumerable:!1,configurable:!0}),t}(fo),iB=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,oB=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,ab=new Xe,Q_=function(){function n(t,e){this._texture=t,this.mapCoord=new Xe,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),n.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var o=t[i],a=t[i+1];e[i]=o*r.a+a*r.c+r.tx,e[i+1]=o*r.b+a*r.d+r.ty}return e},n.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,o=e.trim;o&&(ab.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(ab));var a=e.baseTexture,s=this.uClampFrame,l=this.clampMargin/a.resolution,u=this.clampOffset;return s[0]=(e._frame.x+l+u)/a.width,s[1]=(e._frame.y+l+u)/a.height,s[2]=(e._frame.x+e._frame.width-l+u)/a.width,s[3]=(e._frame.y+e._frame.height-l+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},n}(),aB=function(n){_e(t,n);function t(e,r,i){var o=this,a=null;return typeof e!="string"&&r===void 0&&i===void 0&&(a=e,e=void 0,r=void 0,i=void 0),o=n.call(this,e||iB,r||oB,i)||this,o.maskSprite=a,o.maskMatrix=new Xe,o}return Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(e,r,i,o){var a=this._maskSprite,s=a._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Q_(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,e.applyFilter(this,r,i,o))},t}(So),sB=function(){function n(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return n.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},n.prototype.push=function(t,e){var r=e;if(!r.isMaskData){var i=this.maskDataPool.pop()||new HU;i.pooled=!0,i.maskObject=e,r=i}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(o),r._colorMask=o?o._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==He.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case He.SCISSOR:this.renderer.scissor.push(r);break;case He.STENCIL:this.renderer.stencil.push(r);break;case He.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case He.COLOR:this.pushColorMask(r);break}r.type===He.SPRITE&&this.maskStack.push(r)},n.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case He.SCISSOR:this.renderer.scissor.pop(e);break;case He.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case He.SPRITE:this.popSpriteMask(e);break;case He.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){var r=this.maskStack[this.maskStack.length-1];r.type===He.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},n.prototype.detect=function(t){var e=t.maskObject;e?e.isSprite?t.type=He.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=He.SCISSOR:t.type=He.STENCIL:t.type=He.COLOR},n.prototype.pushSpriteMask=function(t){var e,r,i=t.maskObject,o=t._target,a=t._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex],a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new aB]));var s=this.renderer,l=s.renderTexture,u,c;if(l.current){var h=l.current;u=t.resolution||h.resolution,c=(e=t.multisample)!==null&&e!==void 0?e:h.multisample}else u=t.resolution||s.resolution,c=(r=t.multisample)!==null&&r!==void 0?r:s.multisample;a[0].resolution=u,a[0].multisample=c,a[0].maskSprite=i;var f=o.filterArea;o.filterArea=i.getBounds(!0),s.filter.push(o,a),o.filterArea=f,t._filters||this.alphaMaskIndex++},n.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},n.prototype.pushColorMask=function(t){var e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)},n.prototype.popColorMask=function(t){var e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)},n.prototype.destroy=function(){this.renderer=null},n}(),qA=function(){function n(t){this.renderer=t,this.maskStack=[],this.glConst=0}return n.prototype.getStackLength=function(){return this.maskStack.length},n.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==r&&(i===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},n.prototype._useCurrent=function(){},n.prototype.destroy=function(){this.renderer=null,this.maskStack=null},n}(),sb=new Xe,lb=[],lB=function(n){_e(t,n);function t(e){var r=n.call(this,e)||this;return r.glConst=Ot.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.calcScissorRect=function(e){var r;if(!e._scissorRectLocal){var i=e._scissorRect,o=e.maskObject,a=this.renderer,s=a.renderTexture,l=o.getBounds(!0,(r=lb.pop())!==null&&r!==void 0?r:new ae);this.roundFrameToPixels(l,s.current?s.current.resolution:a.resolution,s.sourceFrame,s.destinationFrame,a.projection.transform),i&&l.fit(i),e._scissorRectLocal=l}},t.isMatrixRotated=function(e){if(!e)return!1;var r=e.a,i=e.b,o=e.c,a=e.d;return(Math.abs(i)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(a)>1e-4)},t.prototype.testScissor=function(e){var r=e.maskObject;if(!r.isFastRect||!r.isFastRect()||t.isMatrixRotated(r.worldTransform)||t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var i=e._scissorRectLocal;return i.width>0&&i.height>0},t.prototype.roundFrameToPixels=function(e,r,i,o,a){t.isMatrixRotated(a)||(a=a?sb.copyFrom(a):sb.identity(),a.translate(-i.x,-i.y).scale(o.width/i.width,o.height/i.height).translate(o.x,o.y),this.renderer.filter.transformAABB(a,e),e.fit(o),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))},t.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var r=this.renderer.gl;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(e){var r=this.renderer.gl;e&&lb.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)},t}(qA),uB=function(n){_e(t,n);function t(e){var r=n.call(this,e)||this;return r.glConst=Ot.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var r=e.maskObject,i=this.renderer.gl,o=e._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;var a=e._colorMask;a!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,o,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,a!==0&&(e._colorMask=a,i.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()},t.prototype.pop=function(e){var r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{var i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,o=i?i._colorMask:15;o!==0&&(i._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,o!==0&&(i._colorMask=o,r.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t}(qA),cB=function(){function n(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Xe,this.transform=null}return n.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},n.prototype.calculateProjection=function(t,e,r,i){var o=this.projectionMatrix,a=i?-1:1;o.identity(),o.a=1/e.width*2,o.d=a*(1/e.height*2),o.tx=-1-e.x*o.a,o.ty=-a-e.y*o.d},n.prototype.setTransform=function(t){},n.prototype.destroy=function(){this.renderer=null},n}(),Io=new ae,vl=new ae,hB=function(){function n(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ae,this.destinationFrame=new ae,this.viewportFrame=new ae}return n.prototype.bind=function(t,e,r){t===void 0&&(t=null);var i=this.renderer;this.current=t;var o,a,s;t?(o=t.baseTexture,s=o.resolution,e||(Io.width=t.frame.width,Io.height=t.frame.height,e=Io),r||(vl.x=t.frame.x,vl.y=t.frame.y,vl.width=e.width,vl.height=e.height,r=vl),a=o.framebuffer):(s=i.resolution,e||(Io.width=i.screen.width,Io.height=i.screen.height,e=Io),r||(r=Io,r.width=e.width,r.height=e.height));var l=this.viewportFrame;l.x=r.x*s,l.y=r.y*s,l.width=r.width*s,l.height=r.height*s,t||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(a,l),this.renderer.projection.update(r,e,s,!a),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},n.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var r=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,o=r.width!==i.width||r.height!==i.height;if(o){var a=this.viewportFrame,s=a.x,l=a.y,u=a.width,c=a.height;s=Math.round(s),l=Math.round(l),u=Math.round(u),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,l,u,c)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},n.prototype.resize=function(){this.bind(null)},n.prototype.reset=function(){this.bind(null)},n.prototype.destroy=function(){this.renderer=null},n}();function fB(n,t,e,r,i){e.buffer.update(i)}var dB={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},KA={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function pB(n){for(var t=n.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),e=0,r=0,i=0,o=0;o<t.length;o++){var a=t[o];if(e=KA[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,r%e!==0&&r<16){var s=r%e%16;r+=s,i+=s}r+e>16?(i=Math.ceil(i/16)*16,a.offset=i,i+=e,r=e):(a.offset=i,r+=e,i+=e)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function mB(n,t){var e=[];for(var r in n)t[r]&&e.push(t[r]);return e.sort(function(i,o){return i.index-o.index}),e}function vB(n,t){if(!n.autoManage)return{size:0,syncFunc:fB};for(var e=mB(n.uniforms,t),r=pB(e),i=r.uboElements,o=r.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],s=0;s<i.length;s++){for(var l=i[s],u=n.uniforms[l.data.name],c=l.data.name,h=!1,f=0;f<Os.length;f++){var d=Os[f];if(d.codeUbo&&d.test(l.data,u)){a.push("offset = "+l.offset/4+";",Os[f].codeUbo(l.data.name,u)),h=!0;break}}if(!h)if(l.data.size>1){var m=jA(l.data.type),g=Math.max(KA[l.data.type]/16,1),p=m/g,v=(4-p%4)%4;a.push(`
                cv = ud.`+c+`.value;
                v = uv.`+c+`;
                offset = `+l.offset/4+`;

                t = 0;

                for(var i=0; i < `+l.data.size*g+`; i++)
                {
                    for(var j = 0; j < `+p+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+v+`;
                }

                `)}else{var y=dB[l.data.type];a.push(`
                cv = ud.`+c+`.value;
                v = uv.`+c+`;
                offset = `+l.offset/4+`;
                `+y+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var gB=function(){function n(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return n.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},n}();function _B(n,t){for(var e={},r=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=t.getActiveAttrib(n,i);if(o.name.indexOf("gl_")!==0){var a=YA(t,o.type),s={type:a,name:o.name,size:jA(a),location:t.getAttribLocation(n,o.name)};e[o.name]=s}}return e}function yB(n,t){for(var e={},r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=t.getActiveUniform(n,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),l=YA(t,o.type);e[a]={name:a,index:i,type:l,size:o.size,isArray:s,value:XA(l,o.size)}}return e}function xB(n,t){var e=nb(n,n.VERTEX_SHADER,t.vertexSrc),r=nb(n,n.FRAGMENT_SHADER,t.fragmentSrc),i=n.createProgram();if(n.attachShader(i,e),n.attachShader(i,r),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||zU(n,i,e,r),t.attributeData=_B(i,n),t.uniformData=yB(i,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var o=Object.keys(t.attributeData);o.sort(function(c,h){return c>h?1:-1});for(var a=0;a<o.length;a++)t.attributeData[o[a]].location=a,n.bindAttribLocation(i,a,o[a]);n.linkProgram(i)}n.deleteShader(e),n.deleteShader(r);var s={};for(var a in t.uniformData){var l=t.uniformData[a];s[a]={location:n.getUniformLocation(i,a),value:XA(l.type,l.size)}}var u=new gB(i,s);return u}var bB=0,Oc={textureCount:0,uboCount:0},SB=function(){function n(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=bB++}return n.prototype.systemCheck=function(){if(!JU())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},n.prototype.contextChange=function(t){this.gl=t,this.reset()},n.prototype.bind=function(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(Oc.textureCount=0,Oc.uboCount=0,this.syncUniformGroup(t.uniformGroup,Oc)),i},n.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},n.prototype.syncUniformGroup=function(t,e){var r=this.getGlProgram();(!t.static||t.dirtyId!==r.uniformDirtyGroups[t.id])&&(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},n.prototype.syncUniforms=function(t,e,r){var i=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);i(e.uniformData,t.uniforms,this.renderer,r)},n.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=YU(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},n.prototype.syncUniformBufferGroup=function(t,e){var r=this.getGlProgram();if(!t.static||t.dirtyId!==0||!r.uniformGroups[t.id]){t.dirtyId=0;var i=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),i(r.uniformData,t.uniforms,this.renderer,Oc,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])},n.prototype.createSyncBufferGroup=function(t,e,r){var i=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var o=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(e.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[a];if(s||(s=this._uboCache[a]=vB(t,this.shader.program.uniformData)),t.autoManage){var l=new Float32Array(s.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=s.syncFunc,e.uniformGroups[t.id]},n.prototype.getSignature=function(t,e,r){var i=t.uniforms,o=[r+"-"];for(var a in i)o.push(a),e[a]&&o.push(e[a].type);return o.join("-")},n.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},n.prototype.generateProgram=function(t){var e=this.gl,r=t.program,i=xB(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i},n.prototype.reset=function(){this.program=null,this.shader=null},n.prototype.disposeShader=function(t){this.shader===t&&(this.shader=null)},n.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},n}();function EB(n,t){return t===void 0&&(t=[]),t[Gt.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.ADD]=[n.ONE,n.ONE],t[Gt.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.NONE]=[0,0],t[Gt.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],t[Gt.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[Gt.SRC_IN]=[n.DST_ALPHA,n.ZERO],t[Gt.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],t[Gt.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],t[Gt.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],t[Gt.DST_IN]=[n.ZERO,n.SRC_ALPHA],t[Gt.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],t[Gt.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],t[Gt.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],t[Gt.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],t}var TB=0,wB=1,AB=2,MB=3,CB=4,RB=5,PB=function(){function n(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Gt.NONE,this._blendEq=!1,this.map=[],this.map[TB]=this.setBlend,this.map[wB]=this.setOffset,this.map[AB]=this.setCullFace,this.map[MB]=this.setDepthTest,this.map[CB]=this.setFrontFace,this.map[RB]=this.setDepthMask,this.checks=[],this.defaultState=new Na,this.defaultState.blend=!0}return n.prototype.contextChange=function(t){this.gl=t,this.blendModes=EB(t),this.set(this.defaultState),this.reset()},n.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)e&1&&this.map[r].call(this,!!(t.data&1<<r)),e=e>>1,r++;this.stateId=t.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,t)},n.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},n.prototype.setBlend=function(t){this.updateCheck(n.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},n.prototype.setOffset=function(t){this.updateCheck(n.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},n.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},n.prototype.setDepthMask=function(t){this.gl.depthMask(t)},n.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},n.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},n.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],r=this.gl;e.length===2?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},n.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},n.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},n.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&r===-1?this.checks.push(t):!e&&r!==-1&&this.checks.splice(r,1)},n.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},n.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},n.prototype.destroy=function(){this.gl=null},n}(),IB=function(){function n(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Ot.GC_MAX_IDLE,this.checkCountMax=Ot.GC_MAX_CHECK_COUNT,this.mode=Ot.GC_MODE}return n.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Ff.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},n.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var o=e[i];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),e[i]=null,r=!0)}if(r){for(var a=0,i=0;i<e.length;i++)e[i]!==null&&(e[a++]=e[i]);e.length=a}},n.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},n.prototype.destroy=function(){this.renderer=null},n}();function OB(n){var t,e,r,i,o,a,s,l,u,c,h,f,d,m,g,p,v,y,_,T,E,S,x;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?x=(t={},t[Bt.UNSIGNED_BYTE]=(e={},e[St.RGBA]=n.RGBA8,e[St.RGB]=n.RGB8,e[St.RG]=n.RG8,e[St.RED]=n.R8,e[St.RGBA_INTEGER]=n.RGBA8UI,e[St.RGB_INTEGER]=n.RGB8UI,e[St.RG_INTEGER]=n.RG8UI,e[St.RED_INTEGER]=n.R8UI,e[St.ALPHA]=n.ALPHA,e[St.LUMINANCE]=n.LUMINANCE,e[St.LUMINANCE_ALPHA]=n.LUMINANCE_ALPHA,e),t[Bt.BYTE]=(r={},r[St.RGBA]=n.RGBA8_SNORM,r[St.RGB]=n.RGB8_SNORM,r[St.RG]=n.RG8_SNORM,r[St.RED]=n.R8_SNORM,r[St.RGBA_INTEGER]=n.RGBA8I,r[St.RGB_INTEGER]=n.RGB8I,r[St.RG_INTEGER]=n.RG8I,r[St.RED_INTEGER]=n.R8I,r),t[Bt.UNSIGNED_SHORT]=(i={},i[St.RGBA_INTEGER]=n.RGBA16UI,i[St.RGB_INTEGER]=n.RGB16UI,i[St.RG_INTEGER]=n.RG16UI,i[St.RED_INTEGER]=n.R16UI,i[St.DEPTH_COMPONENT]=n.DEPTH_COMPONENT16,i),t[Bt.SHORT]=(o={},o[St.RGBA_INTEGER]=n.RGBA16I,o[St.RGB_INTEGER]=n.RGB16I,o[St.RG_INTEGER]=n.RG16I,o[St.RED_INTEGER]=n.R16I,o),t[Bt.UNSIGNED_INT]=(a={},a[St.RGBA_INTEGER]=n.RGBA32UI,a[St.RGB_INTEGER]=n.RGB32UI,a[St.RG_INTEGER]=n.RG32UI,a[St.RED_INTEGER]=n.R32UI,a[St.DEPTH_COMPONENT]=n.DEPTH_COMPONENT24,a),t[Bt.INT]=(s={},s[St.RGBA_INTEGER]=n.RGBA32I,s[St.RGB_INTEGER]=n.RGB32I,s[St.RG_INTEGER]=n.RG32I,s[St.RED_INTEGER]=n.R32I,s),t[Bt.FLOAT]=(l={},l[St.RGBA]=n.RGBA32F,l[St.RGB]=n.RGB32F,l[St.RG]=n.RG32F,l[St.RED]=n.R32F,l[St.DEPTH_COMPONENT]=n.DEPTH_COMPONENT32F,l),t[Bt.HALF_FLOAT]=(u={},u[St.RGBA]=n.RGBA16F,u[St.RGB]=n.RGB16F,u[St.RG]=n.RG16F,u[St.RED]=n.R16F,u),t[Bt.UNSIGNED_SHORT_5_6_5]=(c={},c[St.RGB]=n.RGB565,c),t[Bt.UNSIGNED_SHORT_4_4_4_4]=(h={},h[St.RGBA]=n.RGBA4,h),t[Bt.UNSIGNED_SHORT_5_5_5_1]=(f={},f[St.RGBA]=n.RGB5_A1,f),t[Bt.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[St.RGBA]=n.RGB10_A2,d[St.RGBA_INTEGER]=n.RGB10_A2UI,d),t[Bt.UNSIGNED_INT_10F_11F_11F_REV]=(m={},m[St.RGB]=n.R11F_G11F_B10F,m),t[Bt.UNSIGNED_INT_5_9_9_9_REV]=(g={},g[St.RGB]=n.RGB9_E5,g),t[Bt.UNSIGNED_INT_24_8]=(p={},p[St.DEPTH_STENCIL]=n.DEPTH24_STENCIL8,p),t[Bt.FLOAT_32_UNSIGNED_INT_24_8_REV]=(v={},v[St.DEPTH_STENCIL]=n.DEPTH32F_STENCIL8,v),t):x=(y={},y[Bt.UNSIGNED_BYTE]=(_={},_[St.RGBA]=n.RGBA,_[St.RGB]=n.RGB,_[St.ALPHA]=n.ALPHA,_[St.LUMINANCE]=n.LUMINANCE,_[St.LUMINANCE_ALPHA]=n.LUMINANCE_ALPHA,_),y[Bt.UNSIGNED_SHORT_5_6_5]=(T={},T[St.RGB]=n.RGB,T),y[Bt.UNSIGNED_SHORT_4_4_4_4]=(E={},E[St.RGBA]=n.RGBA,E),y[Bt.UNSIGNED_SHORT_5_5_5_1]=(S={},S[St.RGBA]=n.RGBA,S),y),x}var Yp=function(){function n(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Bt.UNSIGNED_BYTE,this.internalFormat=St.RGBA,this.samplerType=0}return n}(),DB=function(){function n(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ie,this.hasIntegerTextures=!1}return n.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=OB(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new Yp(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Yp(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var r=0;r<this.boundTextures.length;r++)this.bind(null,r)},n.prototype.bind=function(t,e){e===void 0&&(e=0);var r=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null},n.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},n.prototype.unbind=function(t){var e=this,r=e.gl,i=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<i.length;o++)i[o]===this.unknownTexture&&this.bind(null,o)}for(var o=0;o<i.length;o++)i[o]===t&&(this.currentLocation!==o&&(r.activeTexture(r.TEXTURE0+o),this.currentLocation=o),r.bindTexture(t.target,this.emptyTextures[t.target].texture),i[o]=null)},n.prototype.ensureSamplerType=function(t){var e=this,r=e.boundTextures,i=e.hasIntegerTextures,o=e.CONTEXT_UID;if(i)for(var a=t-1;a>=0;--a){var s=r[a];if(s){var l=s._glTextures[o];l.samplerType!==Nf.FLOAT&&this.renderer.texture.unbind(s)}}},n.prototype.initTexture=function(t){var e=new Yp(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},n.prototype.initTextureType=function(t,e){var r,i;e.internalFormat=(i=(r=this.internalFormats[t.type])===null||r===void 0?void 0:r[t.format])!==null&&i!==void 0?i:t.format,this.webGLVersion===2&&t.type===Bt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},n.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var r=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(r,t,e))e.samplerType!==Nf.FLOAT&&(this.hasIntegerTextures=!0);else{var i=t.realWidth,o=t.realHeight,a=r.gl;(e.width!==i||e.height!==o||e.dirtyId<0)&&(e.width=i,e.height=o,a.texImage2D(t.target,0,e.internalFormat,i,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},n.prototype.destroyTexture=function(t,e){var r=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(t);i!==-1&&Is(this.managedTextures,i,1)}},n.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Or.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=qr.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},n.prototype.setStyle=function(t,e){var r=this.gl;if(e.mipmap&&t.mipmap!==Or.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===Xr.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===Xr.LINEAR){var o=Math.min(t.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===Xr.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===Xr.LINEAR?r.LINEAR:r.NEAREST)},n.prototype.destroy=function(){this.renderer=null},n}(),qp=new Xe,LB=function(n){_e(t,n);function t(e,r){e===void 0&&(e=gu.UNKNOWN);var i=n.call(this)||this;return r=Object.assign({},Ot.RENDER_OPTIONS,r),i.options=r,i.type=e,i.screen=new ae(0,0,r.width,r.height),i.view=r.view||Ot.ADAPTER.createCanvas(),i.resolution=r.resolution||Ot.RESOLUTION,i.useContextAlpha=r.useContextAlpha,i.autoDensity=!!r.autoDensity,i.preserveDrawingBuffer=r.preserveDrawingBuffer,i.clearBeforeRender=r.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=r.backgroundColor||i._backgroundColor,i.backgroundAlpha=r.backgroundAlpha,r.transparent!==void 0&&(Rr("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=r.transparent,i.backgroundAlpha=r.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return t.prototype.initPlugins=function(e){for(var r in e)this.plugins[r]=new e[r](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,r){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(r*this.resolution);var i=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=i,this.screen.height=o,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=o+"px"),this.emit("resize",i,o)},t.prototype.generateTexture=function(e,r,i,o){r===void 0&&(r={}),typeof r=="number"&&(Rr("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),r={scaleMode:r,resolution:i,region:o});var a=r.region,s=vU(r,["region"]);o=a||e.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var l=Ta.create(Zv({width:o.width,height:o.height},s));return qp.tx=-o.x,qp.ty=-o.y,this.render(e,{renderTexture:l,clear:!1,transform:qp,skipUpdateTransform:!!e.parent}),l},t.prototype.destroy=function(e){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=gu.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=PA(e),Hs(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(zu),NB=function(){function n(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return n}(),FB=function(){function n(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return n.prototype.destroy=function(){this.renderer=null},n.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},n.prototype.bind=function(t){var e=this,r=e.gl,i=e.CONTEXT_UID,o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBuffer(t.type,o.buffer)},n.prototype.bindBufferBase=function(t,e){var r=this,i=r.gl,o=r.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[o]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,a.buffer)}},n.prototype.bindBufferRange=function(t,e,r){var i=this,o=i.gl,a=i.CONTEXT_UID;r=r||0;var s=t._glBuffers[a]||this.createGLBuffer(t);o.bindBufferRange(o.UNIFORM_BUFFER,e||0,s.buffer,r*256,256)},n.prototype.update=function(t){var e=this,r=e.gl,i=e.CONTEXT_UID,o=t._glBuffers[i];if(t._updateID!==o.updateID)if(o.updateID=t._updateID,r.bindBuffer(t.type,o.buffer),o.byteLength>=t.data.byteLength)r.bufferSubData(t.type,0,t.data);else{var a=t.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;o.byteLength=t.data.byteLength,r.bufferData(t.type,t.data,a)}},n.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var r=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}},n.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)},n.prototype.createGLBuffer=function(t){var e=this,r=e.CONTEXT_UID,i=e.gl;return t._glBuffers[r]=new NB(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[r]},n}(),ZA=function(n){_e(t,n);function t(e){var r=n.call(this,gu.WEBGL,e)||this;return e=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new an("destroy"),contextChange:new an("contextChange"),reset:new an("reset"),update:new an("update"),postrender:new an("postrender"),prerender:new an("prerender"),resize:new an("resize")},r.runners.contextChange.add(r),r.globalUniforms=new ha({projectionMatrix:new Xe},!0),r.addSystem(sB,"mask").addSystem(FU,"context").addSystem(PB,"state").addSystem(SB,"shader").addSystem(DB,"texture").addSystem(FB,"buffer").addSystem(kU,"geometry").addSystem(GU,"framebuffer").addSystem(lB,"scissor").addSystem(uB,"stencil").addSystem(cB,"projection").addSystem(IB,"textureGC").addSystem(LU,"filter").addSystem(hB,"renderTexture").addSystem(NU,"batch"),r.initPlugins(t.__plugins),r.multisample=void 0,e.context?r.context.initFromContext(e.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:e.antialias,premultipliedAlpha:r.useContextAlpha&&r.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,dN(r.context.webGLVersion===2?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return t.create=function(e){if(pN())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,r;if(this.context.webGLVersion===1){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{var i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}r>=we.HIGH?this.multisample=we.HIGH:r>=we.MEDIUM?this.multisample=we.MEDIUM:r>=we.LOW?this.multisample=we.LOW:this.multisample=we.NONE},t.prototype.addSystem=function(e,r){var i=new e(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');this[r]=i;for(var o in this.runners)this.runners[o].add(i);return this},t.prototype.render=function(e,r){var i,o,a,s;if(r&&(r instanceof Ta?(Rr("6.0.0","Renderer#render arguments changed, use options instead."),i=r,o=arguments[2],a=arguments[3],s=arguments[4]):(i=r.renderTexture,o=r.clear,a=r.transform,s=r.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(i||(this._lastObjectRendered=e),!s){var l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,r,i,o){r===void 0&&(r={});var a=n.prototype.generateTexture.call(this,e,r,i,o);return this.framebuffer.blit(),a},t.prototype.resize=function(e,r){n.prototype.resize.call(this,e,r),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var r in this.runners)this.runners[r].destroy();n.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return Rr("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,r){Rr("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Gi.add({name:e,type:pe.RendererPlugin,ref:r})},t.__plugins={},t}(LB);Gi.handleByMap(pe.RendererPlugin,ZA.__plugins);function UB(n){return ZA.create(n)}var BB=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,GB=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,kB=BB,JA=GB,Qv=function(){function n(){this.texArray=null,this.blend=0,this.type=Mr.TRIANGLES,this.start=0,this.size=0,this.data=null}return n}(),tg=function(){function n(){this.elements=[],this.ids=[],this.count=0}return n.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},n}(),eg=function(){function n(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(n.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),n.prototype.view=function(t){return this[t+"View"]},n.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},n.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},n}(),HB=function(n){_e(t,n);function t(e){var r=n.call(this,e)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Na.for2d(),r.size=Ot.SPRITE_BATCH_SIZE*4,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),e.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return t.prototype.contextChange=function(){var e=this.renderer.gl;Ot.PREFER_ENV===Oi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ot.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=ZU(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,r=t._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;e.length<i;)e.push(new Qv);for(;r.length<o;)r.push(new tg);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,r=e._bufferedTextures,i=e.MAX_TEXTURES,o=t._textureArrayPool,a=this.renderer.batch,s=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++ie._globalBatch,c=0,h=o[0],f=0;a.copyBoundTextures(s,i);for(var d=0;d<this._bufferSize;++d){var m=r[d];r[d]=null,m._batchEnabled!==u&&(h.count>=i&&(a.boundArray(h,s,u,i),this.buildDrawCalls(h,f,d),f=d,h=o[++c],++u),m._batchEnabled=u,m.touched=l,h.elements[h.count++]=m)}h.count>0&&(a.boundArray(h,s,u,i),this.buildDrawCalls(h,f,this._bufferSize),++c,++u);for(var d=0;d<s.length;d++)s[d]=null;ie._globalBatch=u},t.prototype.buildDrawCalls=function(e,r,i){var o=this,a=o._bufferedElements,s=o._attributeBuffer,l=o._indexBuffer,u=o.vertexSize,c=t._drawCallPool,h=this._dcIndex,f=this._aIndex,d=this._iIndex,m=c[h];m.start=this._iIndex,m.texArray=e;for(var g=r;g<i;++g){var p=a[g],v=p._texture.baseTexture,y=OA[v.alphaMode?1:0][p.blendMode];a[g]=null,r<g&&m.blend!==y&&(m.size=d-m.start,r=g,m=c[++h],m.texArray=e,m.start=d),this.packInterleavedGeometry(p,s,l,f,d),f+=p.vertexData.length/2*u,d+=p.indices.length,m.blend=y}r<i&&(m.size=d-m.start,++h),this._dcIndex=h,this._aIndex=f,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var r=this.renderer.texture,i=0;i<e.count;i++)r.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,r=e._packedGeometries,i=e._attributeBuffer,o=e._indexBuffer;Ot.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,r=this.renderer,i=r.gl,o=r.state,a=t._drawCallPool,s=null,l=0;l<e;l++){var u=a[l],c=u.texArray,h=u.type,f=u.size,d=u.start,m=u.blend;s!==c&&(s=c,this.bindAndClearTexArray(c)),this.state.blendMode=m,o.set(this.state),i.drawElements(h,f,i.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Ot.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),n.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var r=zf(Math.ceil(e/8)),i=jx(r),o=r*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new eg(o*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var r=zf(Math.ceil(e/12)),i=jx(r),o=r*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(o)),a},t.prototype.packInterleavedGeometry=function(e,r,i,o,a){for(var s=r.uint32View,l=r.float32View,u=o/this.vertexSize,c=e.uvs,h=e.indices,f=e.vertexData,d=e._texture.baseTexture._batchLocation,m=Math.min(e.worldAlpha,1),g=m<1&&e._texture.baseTexture.alphaMode?Z_(e._tintRGB,m):e._tintRGB+(m*255<<24),p=0;p<f.length;p+=2)l[o++]=f[p],l[o++]=f[p+1],l[o++]=c[p],l[o++]=c[p+1],s[o++]=g,l[o++]=d;for(var p=0;p<h.length;p++)i[a++]=u+h[p]},t._drawCallPool=[],t._textureArrayPool=[],t}(Fd),zB=function(){function n(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return n.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=ha.from({uSamplers:e},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+t),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ju(this.vertexSrc,i)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Xe,default:this.defaultGroupCache[t]};return new fo(this.programCache[t],o)},n.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var r=0;r<t;r++)r>0&&(e+=`
else `),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},n}(),QA=function(n){_e(t,n);function t(e){e===void 0&&(e=!1);var r=n.call(this)||this;return r._buffer=new Ve(null,e,!1),r._indexBuffer=new Ve(null,e,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,Bt.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,Bt.FLOAT).addAttribute("aColor",r._buffer,4,!0,Bt.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,Bt.FLOAT).addIndex(r._indexBuffer),r}return t}($u),ub=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,cb=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,VB=function(){function n(){}return n.create=function(t){var e=Object.assign({vertex:ub,fragment:cb,geometryClass:QA,vertexSize:6},t),r=e.vertex,i=e.fragment,o=e.vertexSize,a=e.geometryClass;return function(s){_e(l,s);function l(u){var c=s.call(this,u)||this;return c.shaderGenerator=new zB(r,i),c.geometryClass=a,c.vertexSize=o,c}return l}(HB)},Object.defineProperty(n,"defaultVertexSrc",{get:function(){return ub},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentTemplate",{get:function(){return cb},enumerable:!1,configurable:!0}),n}(),tM=VB.create();Object.assign(tM,{extension:{name:"batch",type:pe.RendererPlugin}});/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var WB={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ge.mixin(WB);var XB=9,Dc=100,$B=0,jB=0,hb=2,fb=1,YB=-1e3,qB=-1e3,KB=2,ZB=function(){function n(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,($r.tablet||$r.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=Dc+"px",e.style.height=Dc+"px",e.style.position="absolute",e.style.top=$B+"px",e.style.left=jB+"px",e.style.zIndex=hb.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),n.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=fb+"px",e.style.height=fb+"px",e.style.position="absolute",e.style.top=YB+"px",e.style.left=qB+"px",e.style.zIndex=KB.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},n.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},n.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)===null||t===void 0||t.appendChild(this.div))},n.prototype.deactivate=function(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)===null||t===void 0||t.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},n.prototype.update=function(){var t=performance.now();if(!($r.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),r=e.left,i=e.top,o=e.width,a=e.height,s=this.renderer,l=s.width,u=s.height,c=s.resolution,h=o/l*c,f=a/u*c,d=this.div;d.style.left=r+"px",d.style.top=i+"px",d.style.width=l+"px",d.style.height=u+"px";for(var m=0;m<this.children.length;m++){var g=this.children[m];if(g.renderId!==this.renderId)g._accessibleActive=!1,Is(this.children,m,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,m--;else{d=g._accessibleDiv;var p=g.hitArea,v=g.worldTransform;g.hitArea?(d.style.left=(v.tx+p.x*v.a)*h+"px",d.style.top=(v.ty+p.y*v.d)*f+"px",d.style.width=p.width*v.a*h+"px",d.style.height=p.height*v.d*f+"px"):(p=g.getBounds(),this.capHitArea(p),d.style.left=p.x*h+"px",d.style.top=p.y*f+"px",d.style.width=p.width*h+"px",d.style.height=p.height*f+"px",d.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(d.title=g.accessibleTitle),d.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&d.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==d.title||g.tabIndex!==d.tabIndex)&&(d.title=g.accessibleTitle,d.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},n.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},n.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,r=e.width,i=e.height;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>i&&(t.height=i-t.y)},n.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=Dc+"px",e.style.height=Dc+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=hb.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},n.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,r=t.target.displayObject,i=e.eventData;e.dispatchEvent(r,"click",i),e.dispatchEvent(r,"pointertap",i),e.dispatchEvent(r,"tap",i)},n.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,r=t.target.displayObject,i=e.eventData;e.dispatchEvent(r,"mouseover",i)},n.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,r=t.target.displayObject,i=e.eventData;e.dispatchEvent(r,"mouseout",i)},n.prototype._onKeyDown=function(t){t.keyCode===XB&&this.activate()},n.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},n.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},n.extension={name:"accessibility",type:[pe.RendererPlugin,pe.CanvasRendererPlugin]},n}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var db=function(){function n(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Te,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(n.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),n.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},n.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},n.prototype.reset=function(){this.isPrimary=!1},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ng=function(n,t){return ng=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},ng(n,t)};function JB(n,t){ng(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var QB=function(){function n(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return n.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},n.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},n}(),Kp=function(){function n(t){this._pointerId=t,this._flags=n.FLAGS.NONE}return n.prototype._doSet=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(n.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"none",{get:function(){return this._flags===n.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"over",{get:function(){return(this._flags&n.FLAGS.OVER)!==0},set:function(t){this._doSet(n.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightDown",{get:function(){return(this._flags&n.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(n.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftDown",{get:function(){return(this._flags&n.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(n.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),n}(),tG=function(){function n(){this._tempPoint=new Te}return n.prototype.recursiveFindHit=function(t,e,r,i,o){var a;if(!e||!e.visible)return!1;var s=t.data.global;o=e.interactive||o;var l=!1,u=o,c=!0;if(e.hitArea)i&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?l=!0:(i=!1,c=!1)),u=!1;else if(e._mask&&i){var h=e._mask.isMaskData?e._mask.maskObject:e._mask;h&&!(!((a=h.containsPoint)===null||a===void 0)&&a.call(h,s))&&(i=!1)}if(c&&e.interactiveChildren&&e.children)for(var f=e.children,d=f.length-1;d>=0;d--){var m=f[d],g=this.recursiveFindHit(t,m,r,i,u);if(g){if(!m.parent)continue;u=!1,g&&(t.target&&(i=!1),l=!0)}}return o&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(l=!0),e.interactive&&(l&&!t.target&&(t.target=e),r&&r(t,e,!!l))),l},n.prototype.findHit=function(t,e,r,i){this.recursiveFindHit(t,e,r,i,!1)},n}(),eG={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(n){n?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Ge.mixin(eG);var Lc=1,Nc={target:null,data:{global:null}},nG=function(n){JB(t,n);function t(e,r){var i=n.call(this)||this;return r=r||{},i.renderer=e,i.autoPreventDefault=r.autoPreventDefault!==void 0?r.autoPreventDefault:!0,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new db,i.mouse.identifier=Lc,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Lc]=i.mouse,i.interactionDataPool=[],i.eventData=new QB,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new tG,i._tempDisplayObject=new BA,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=r.useSystemTicker!==void 0?r.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,r){return Nc.target=null,Nc.data.global=e,r||(r=this.lastObjectRendered),this.processInteractive(Nc,r,null,!0),Nc.target},t.prototype.setTargetElement=function(e,r){r===void 0&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=r,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(ln.system.add(this.tickerUpdate,this,Di.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(ln.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&r.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){e=e||"default";var r=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(r=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var i=this.cursorStyles[e];if(i)switch(typeof i){case"string":r&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(e);break;case"object":r&&Object.assign(this.interactionDOMElement.style,i);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,r,i){(!i.stopPropagationHint||e===i.stopsPropagatingAt)&&(i.currentTarget=e,i.type=r,e.emit(r,i),e[r]&&e[r](i))},t.prototype.delayDispatchEvent=function(e,r,i){this.delayedEvents.push({displayObject:e,eventString:r,eventData:i})},t.prototype.mapPositionToPoint=function(e,r,i){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var a=1/this.resolution;e.x=(r-o.left)*(this.interactionDOMElement.width/o.width)*a,e.y=(i-o.top)*(this.interactionDOMElement.height/o.height)*a},t.prototype.processInteractive=function(e,r,i,o){var a=this.search.findHit(e,r,i,o),s=this.delayedEvents;if(!s.length)return a;e.stopPropagationHint=!1;var l=s.length;this.delayedEvents=[];for(var u=0;u<l;u++){var c=s[u],h=c.displayObject,f=c.eventString,d=c.eventData;d.stopsPropagatingAt===h&&(d.stopPropagationHint=!0),this.dispatchEvent(h,f,d)}return a},t.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var r=this.normalizeToPointerData(e);if(this.autoPreventDefault&&r[0].isNormalized){var i=e.cancelable||!("cancelable"in e);i&&e.preventDefault()}for(var o=r.length,a=0;a<o;a++){var s=r[a],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(u.data.originalEvent=e,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),s.pointerType==="touch")this.emit("touchstart",u);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;this.emit(c?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,r,i){var o=e.data,a=e.data.identifier;if(i){if(r.trackedPointers[a]||(r.trackedPointers[a]=new Kp(a)),this.dispatchEvent(r,"pointerdown",e),o.pointerType==="touch")this.dispatchEvent(r,"touchstart",e);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;s?r.trackedPointers[a].rightDown=!0:r.trackedPointers[a].leftDown=!0,this.dispatchEvent(r,s?"rightdown":"mousedown",e)}}},t.prototype.onPointerComplete=function(e,r,i){var o=this.normalizeToPointerData(e),a=o.length,s=e.target;e.composedPath&&e.composedPath().length>0&&(s=e.composedPath()[0]);for(var l=s!==this.interactionDOMElement?"outside":"",u=0;u<a;u++){var c=o[u],h=this.getInteractionDataForPointerId(c),f=this.configureInteractionEventForDOMEvent(this.eventData,c,h);if(f.data.originalEvent=e,this.processInteractive(f,this.lastObjectRendered,i,r||!l),this.emit(r?"pointercancel":"pointerup"+l,f),c.pointerType==="mouse"||c.pointerType==="pen"){var d=c.button===2;this.emit(d?"rightup"+l:"mouseup"+l,f)}else c.pointerType==="touch"&&(this.emit(r?"touchcancel":"touchend"+l,f),this.releaseInteractionDataForPointerId(c.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,r){var i=e.data,o=e.data.identifier;r.trackedPointers[o]!==void 0&&(delete r.trackedPointers[o],this.dispatchEvent(r,"pointercancel",e),i.pointerType==="touch"&&this.dispatchEvent(r,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,r,i){var o=e.data,a=e.data.identifier,s=r.trackedPointers[a],l=o.pointerType==="touch",u=o.pointerType==="mouse"||o.pointerType==="pen",c=!1;if(u){var h=o.button===2,f=Kp.FLAGS,d=h?f.RIGHT_DOWN:f.LEFT_DOWN,m=s!==void 0&&s.flags&d;i?(this.dispatchEvent(r,h?"rightup":"mouseup",e),m&&(this.dispatchEvent(r,h?"rightclick":"click",e),c=!0)):m&&this.dispatchEvent(r,h?"rightupoutside":"mouseupoutside",e),s&&(h?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(r,"pointerup",e),l&&this.dispatchEvent(r,"touchend",e),s&&((!u||c)&&this.dispatchEvent(r,"pointertap",e),l&&(this.dispatchEvent(r,"tap",e),s.over=!1))):s&&(this.dispatchEvent(r,"pointerupoutside",e),l&&this.dispatchEvent(r,"touchendoutside",e)),s&&s.none&&delete r.trackedPointers[a]},t.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var r=this.normalizeToPointerData(e);(r[0].pointerType==="mouse"||r[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=r.length,o=0;o<i;o++){var a=r[o],s=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,s);l.data.originalEvent=e,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),a.pointerType==="touch"&&this.emit("touchmove",l),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",l)}r[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,r,i){var o=e.data,a=o.pointerType==="touch",s=o.pointerType==="mouse"||o.pointerType==="pen";s&&this.processPointerOverOut(e,r,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(r,"pointermove",e),a&&this.dispatchEvent(r,"touchmove",e),s&&this.dispatchEvent(r,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var r=this.normalizeToPointerData(e),i=r[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(e,r,i){var o=e.data,a=e.data.identifier,s=o.pointerType==="mouse"||o.pointerType==="pen",l=r.trackedPointers[a];i&&!l&&(l=r.trackedPointers[a]=new Kp(a)),l!==void 0&&(i&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(r,"pointerover",e),s&&this.delayDispatchEvent(r,"mouseover",e)),s&&this.cursor===null&&(this.cursor=r.cursor)):l.over&&(l.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),s&&this.dispatchEvent(r,"mouseout",e),l.none&&delete r.trackedPointers[a]))},t.prototype.onPointerOver=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var r=this.normalizeToPointerData(e),i=r[0],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",a)}},t.prototype.getInteractionDataForPointerId=function(e){var r=e.pointerId,i;return r===Lc||e.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[r]?i=this.activeInteractionData[r]:(i=this.interactionDataPool.pop()||new db,i.identifier=r,this.activeInteractionData[r]=i),i.copyEvent(e),i},t.prototype.releaseInteractionDataForPointerId=function(e){var r=this.activeInteractionData[e];r&&(delete this.activeInteractionData[e],r.reset(),this.interactionDataPool.push(r))},t.prototype.configureInteractionEventForDOMEvent=function(e,r,i){return e.data=i,this.mapPositionToPoint(i.global,r.clientX,r.clientY),r.pointerType==="touch"&&(r.globalX=i.global.x,r.globalY=i.global.y),i.originalEvent=r,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var i=0,o=e.changedTouches.length;i<o;i++){var a=e.changedTouches[i];typeof a.button>"u"&&(a.button=e.touches.length?1:0),typeof a.buttons>"u"&&(a.buttons=e.touches.length?1:0),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,r.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){var s=e;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=Lc),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,r.push(s)}else r.push(e);return r},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t.extension={name:"interaction",type:[pe.RendererPlugin,pe.CanvasRendererPlugin]},t}(zu);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var rG=new ae,iG=4,oG=function(){function n(t){this.renderer=t}return n.prototype.image=function(t,e,r){var i=new Image;return i.src=this.base64(t,e,r),i},n.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},n.prototype.canvas=function(t,e){var r=this._rawPixels(t,e),i=r.pixels,o=r.width,a=r.height,s=r.flipY,l=new Kx(o,a,1),u=l.context.getImageData(0,0,o,a);if(n.arrayPostDivide(i,u.data),l.context.putImageData(u,0,0),s){var c=new Kx(l.width,l.height,1);c.context.scale(1,-1),c.context.drawImage(l.canvas,0,-a),l.destroy(),l=c}return l.canvas},n.prototype.pixels=function(t,e){var r=this._rawPixels(t,e).pixels;return n.arrayPostDivide(r,r),r},n.prototype._rawPixels=function(t,e){var r=this.renderer,i,o=!1,a,s=!1;if(t)if(t instanceof Ta)a=t;else{var l=r.context.webGLVersion>=2?r.multisample:we.NONE;if(a=this.renderer.generateTexture(t,{multisample:l}),l!==we.NONE){var u=Ta.create({width:a.width,height:a.height});r.framebuffer.bind(a.framebuffer),r.framebuffer.blit(u.framebuffer),r.framebuffer.bind(null),a.destroy(!0),a=u}s=!0}a?(i=a.baseTexture.resolution,e=e??a.frame,o=!1,r.renderTexture.bind(a)):(i=r.resolution,e||(e=rG,e.width=r.width,e.height=r.height),o=!0,r.renderTexture.bind(null));var c=Math.round(e.width*i),h=Math.round(e.height*i),f=new Uint8Array(iG*c*h),d=r.gl;return d.readPixels(Math.round(e.x*i),Math.round(e.y*i),c,h,d.RGBA,d.UNSIGNED_BYTE,f),s&&a.destroy(!0),{pixels:f,width:c,height:h,flipY:o}},n.prototype.destroy=function(){this.renderer=null},n.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var i=e[r+3]=t[r+3];i!==0?(e[r]=Math.round(Math.min(t[r]*255/i,255)),e[r+1]=Math.round(Math.min(t[r+1]*255/i,255)),e[r+2]=Math.round(Math.min(t[r+2]*255/i,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}},n.extension={name:"extract",type:pe.RendererPlugin},n}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Fc=function(){function n(t,e,r){e===void 0&&(e=!1),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}return n.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},n}();function pb(n,t){return n._head?(n._tail._next=t,t._prev=n._tail,n._tail=t):(n._head=t,n._tail=t),t._owner=n,t}var Ei=function(){function n(){this._head=this._tail=void 0}return n.prototype.handlers=function(t){t===void 0&&(t=!1);var e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r},n.prototype.has=function(t){if(!(t instanceof Fc))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},n.prototype.dispatch=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,e),i=i._next;return!0},n.prototype.add=function(t,e){if(e===void 0&&(e=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return pb(this,new Fc(t,!1,e))},n.prototype.once=function(t,e){if(e===void 0&&(e=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return pb(this,new Fc(t,!0,e))},n.prototype.detach=function(t){if(!(t instanceof Fc))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},n.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},n}();function eM(n,t){t=t||{};for(var e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=e.parser[t.strictMode?"strict":"loose"].exec(n),i={},o=14;o--;)i[e.key[o]]=r[o]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(a,s,l){s&&(i[e.q.name][s]=l)}),i}var Zp,Uc=null,aG=0,mb=200,sG=204,lG=1223,uG=2;function vb(){}function gb(n,t,e){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(n[t]=e)}function Jp(n){return n.toString().replace("object ","")}var Le=function(){function n(t,e,r){if(this._dequeue=vb,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof e!="string")throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(n.STATUS_FLAGS.DATA_URL,e.indexOf("data:")===0),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=n.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=vb,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ei,this.onProgress=new Ei,this.onComplete=new Ei,this.onAfterMiddleware=new Ei}return n.setExtensionLoadType=function(t,e){gb(n._loadTypeMap,t,e)},n.setExtensionXhrType=function(t,e){gb(n._xhrTypeMap,t,e)},Object.defineProperty(n.prototype,"isDataUrl",{get:function(){return this._hasFlag(n.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isComplete",{get:function(){return this._hasFlag(n.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLoading",{get:function(){return this._hasFlag(n.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),n.prototype.complete=function(){this._clearEvents(),this._finish()},n.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=n.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},n.prototype.load=function(t){var e=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(e)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(n.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this.type=n.TYPE.IMAGE,this._loadElement("image");break;case n.LOAD_TYPE.AUDIO:this.type=n.TYPE.AUDIO,this._loadSourceElement("audio");break;case n.LOAD_TYPE.VIDEO:this.type=n.TYPE.VIDEO,this._loadSourceElement("video");break;case n.LOAD_TYPE.XHR:default:typeof Zp>"u"&&(Zp=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Zp&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},n.prototype._hasFlag=function(t){return(this._flags&t)!==0},n.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},n.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},n.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(n.STATUS_FLAGS.COMPLETE,!0),this._setFlag(n.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},n.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},n.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},n.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=n.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},n.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},n.prototype._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=r,i},n.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},n.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},n.prototype._onTimeout=function(){this.abort("Load timed out.")},n.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Jp(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},n.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Jp(t)+" Request timed out.")},n.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Jp(t)+" Request was aborted by the user.")},n.prototype._xhrOnLoad=function(){var t=this.xhr,e="",r=typeof t.status>"u"?mb:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(e=t.responseText),r===aG&&(e.length>0||t.responseType===n.XHR_RESPONSE_TYPE.BUFFER)?r=mb:r===lG&&(r=sG);var i=r/100|0;if(i===uG)if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=n.TYPE.TEXT;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=n.TYPE.JSON}catch(s){this.abort("Error trying to parse loaded json: "+s);return}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var o=new DOMParser;this.data=o.parseFromString(e,"text/xml")}else{var a=document.createElement("div");a.innerHTML=e,this.data=a}this.type=n.TYPE.XML}catch(s){this.abort("Error trying to parse loaded xml: "+s);return}else this.data=t.response||e;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},n.prototype._determineCrossOrigin=function(t,e){if(t.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,Uc||(Uc=document.createElement("a")),Uc.href=t;var r=eM(Uc.href,{strictMode:!0}),i=!r.port&&e.port===""||r.port===e.port,o=r.protocol?r.protocol+":":"";return r.host!==e.hostname||!i||o!==e.protocol?"anonymous":""},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this.extension]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this.extension]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(t){t===void 0&&(t=this.url);var e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var i=t.indexOf("?"),o=t.indexOf("#"),a=Math.min(i>-1?i:t.length,o>-1?o:t.length);t=t.substring(0,a),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},n.prototype._getMimeFromXhrType=function(t){switch(t){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n}();(function(n){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(n.STATUS_FLAGS||(n.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(n.TYPE||(n.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(n.LOAD_TYPE||(n.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(n.XHR_RESPONSE_TYPE||(n.XHR_RESPONSE_TYPE={})),n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE,avif:n.LOAD_TYPE.IMAGE,svg:n.LOAD_TYPE.IMAGE,"svg+xml":n.LOAD_TYPE.IMAGE,mp3:n.LOAD_TYPE.AUDIO,ogg:n.LOAD_TYPE.AUDIO,wav:n.LOAD_TYPE.AUDIO,mp4:n.LOAD_TYPE.VIDEO,webm:n.LOAD_TYPE.VIDEO},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,avif:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT,ttf:n.XHR_RESPONSE_TYPE.BUFFER,otf:n.XHR_RESPONSE_TYPE.BUFFER},n.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Le||(Le={}));function Oo(){}function cG(n){return function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];if(n===null)throw new Error("Callback was already called.");var o=n;n=null,o.apply(this,r)}}var hG=function(){function n(t,e){this.data=t,this.callback=e}return n}(),Qp=function(){function n(t,e){var r=this;if(e===void 0&&(e=1),this.workers=0,this.saturated=Oo,this.unsaturated=Oo,this.empty=Oo,this.drain=Oo,this.error=Oo,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,o,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(r.started=!0,i==null&&r.idle()){setTimeout(function(){return r.drain()},1);return}var s=new hG(i,typeof a=="function"?a:Oo);o?r._tasks.unshift(s):r._tasks.push(s),setTimeout(r.process,1)},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var i=r._tasks.shift();r._tasks.length===0&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(i.data,cG(r._next(i)))}},this._worker=t,e===0)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return n.prototype._next=function(t){var e=this;return function(){for(var r=arguments,i=[],o=0;o<arguments.length;o++)i[o]=r[o];e.workers-=1,t.callback.apply(t,i),i[0]!=null&&e.error(i[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},n.prototype.push=function(t,e){this._insert(t,!1,e)},n.prototype.kill=function(){this.workers=0,this.drain=Oo,this.started=!1,this._tasks=[]},n.prototype.unshift=function(t,e){this._insert(t,!0,e)},n.prototype.length=function(){return this._tasks.length},n.prototype.running=function(){return this.workers},n.prototype.idle=function(){return this._tasks.length+this.workers===0},n.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},n.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},n.eachSeries=function(t,e,r,i){var o=0,a=t.length;function s(l){if(l||o===a){r&&r(l);return}i?setTimeout(function(){e(t[o++],s)},1):e(t[o++],s)}s()},n.queue=function(t,e){return new n(t,e)},n}(),tm=100,fG=/(#[\w-]+)?$/,$f=function(){function n(t,e){var r=this;t===void 0&&(t=""),e===void 0&&(e=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return r._loadResource(l,u)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return r._loadResource(l,u)},this._queue=Qp.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new Ei,this.onError=new Ei,this.onLoad=new Ei,this.onStart=new Ei,this.onComplete=new Ei;for(var i=0;i<n._plugins.length;++i){var o=n._plugins[i],a=o.pre,s=o.use;a&&this.pre(a),s&&this.use(s)}this._protected=!1}return n.prototype._add=function(t,e,r,i){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Le(t,e,r),typeof i=="function"&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=r.parentResource,a=[],s=0;s<o.children.length;++s)o.children[s].isComplete||a.push(o.children[s]);var l=o.progressChunk*(a.length+1),u=l/(a.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var s=0;s<a.length;++s)a[s].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},n.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},n.prototype.use=function(t){return this._afterMiddleware.push(t),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},n.prototype.load=function(t){if(Rr("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,r=tm/e,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},Object.defineProperty(n.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),n.prototype._prepareUrl=function(t){var e=eM(t,{strictMode:!0}),r;if(e.protocol||!e.path||t.indexOf("//")===0?r=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?r=this.baseUrl+"/"+t:r=this.baseUrl+t,this.defaultQueryString){var i=fG.exec(r)[0];r=r.slice(0,r.length-i.length),r.indexOf("?")!==-1?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=i}return r},n.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,Qp.eachSeries(this._beforeMiddleware,function(i,o){i.call(r,t,function(){o(t.isComplete?{}:null)})},function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())},!0)},n.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},n.prototype._onComplete=function(){this.progress=tm,this.loading=!1,this.onComplete.dispatch(this,this.resources)},n.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Qp.eachSeries(this._afterMiddleware,function(r,i){r.call(e,t,i)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(tm,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&e._resourcesParsing.length===0&&e._onComplete()},!0)},n.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(n,"shared",{get:function(){var t=n._shared;return t||(t=new n,t._protected=!0,n._shared=t),t},enumerable:!1,configurable:!0}),n.registerPlugin=function(t){return Rr("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Gi.add({type:pe.Loader,ref:t}),n},n._plugins=[],n}();Gi.handleByList(pe.Loader,$f._plugins);$f.prototype.add=function(t,e,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if(typeof t=="object"&&(r=t,i=e||r.callback||r.onComplete,e=r.url,t=r.name||r.key||r.url),typeof e!="string"&&(i=r,r=e,e=t),typeof e!="string")throw new Error("No url passed to add resource to loader.");return typeof r=="function"&&(i=r,r=null),this._add(t,e,r,i)};var dG=function(){function n(){}return n.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?$f.shared:new $f},n.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},n.extension=pe.Application,n}(),pG=function(){function n(){}return n.add=function(){Le.setExtensionLoadType("svg",Le.LOAD_TYPE.XHR),Le.setExtensionXhrType("svg",Le.XHR_RESPONSE_TYPE.TEXT)},n.use=function(t,e){if(t.data&&(t.type===Le.TYPE.IMAGE||t.extension==="svg")){var r=t.data,i=t.url,o=t.name,a=t.metadata;Xt.fromLoader(r,i,o,a).then(function(s){t.texture=s,e()}).catch(e)}else e()},n.extension=pe.Loader,n}(),mG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function vG(n){for(var t="",e=0;e<n.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)e<n.length?r[o]=n.charCodeAt(e++)&255:r[o]=0;i[0]=r[0]>>2,i[1]=(r[0]&3)<<4|r[1]>>4,i[2]=(r[1]&15)<<2|r[2]>>6,i[3]=r[2]&63;var a=e-(n.length-1);switch(a){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var o=0;o<i.length;++o)t+=mG.charAt(i[o])}return t}function gG(n,t){if(!n.data){t();return}if(n.xhr&&n.xhrType===Le.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof n.data=="string"){var e=n.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){n.data=new Image,n.data.src="data:"+e+";base64,"+vG(n.xhr.responseText),n.type=Le.TYPE.IMAGE,n.data.onload=function(){n.data.onload=null,t()};return}}else if(n.data.type.indexOf("image")===0){var r=globalThis.URL||globalThis.webkitURL,i=r.createObjectURL(n.data);n.blob=n.data,n.data=new Image,n.data.src=i,n.type=Le.TYPE.IMAGE,n.data.onload=function(){r.revokeObjectURL(i),n.data.onload=null,t()};return}}t()}var _G=function(){function n(){}return n.extension=pe.Loader,n.use=gG,n}();Gi.add(pG,_G);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ue,Yt;(function(n){n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(Yt||(Yt={}));var jf=(ue={},ue[Yt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ue[Yt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ue[Yt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ue[Yt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ue[Yt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ue[Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ue[Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ue[Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ue[Yt.COMPRESSED_R11_EAC]=.5,ue[Yt.COMPRESSED_SIGNED_R11_EAC]=.5,ue[Yt.COMPRESSED_RG11_EAC]=1,ue[Yt.COMPRESSED_SIGNED_RG11_EAC]=1,ue[Yt.COMPRESSED_RGB8_ETC2]=.5,ue[Yt.COMPRESSED_RGBA8_ETC2_EAC]=1,ue[Yt.COMPRESSED_SRGB8_ETC2]=.5,ue[Yt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ue[Yt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ue[Yt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ue[Yt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ue[Yt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ue[Yt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ue[Yt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ue[Yt.COMPRESSED_RGB_ETC1_WEBGL]=.5,ue[Yt.COMPRESSED_RGB_ATC_WEBGL]=.5,ue[Yt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ue[Yt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ue[Yt.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,ue);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rg=function(n,t){return rg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},rg(n,t)};function nM(n,t){rg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function yG(n,t,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(n,t||[])).next())})}function xG(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var bG=function(n){nM(t,n);function t(e,r){r===void 0&&(r={width:1,height:1,autoLoad:!0});var i=this,o,a;return typeof e=="string"?(o=e,a=new Uint8Array):(o=null,a=e),i=n.call(this,a,r)||this,i.origin=o,i.buffer=a?new eg(a):null,i.origin&&r.autoLoad!==!1&&i.load(),a&&a.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return t.prototype.onBlobLoaded=function(e){},t.prototype.load=function(){return yG(this,void 0,Promise,function(){var e,r,i;return xG(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return e=o.sent(),[4,e.blob()];case 2:return r=o.sent(),[4,r.arrayBuffer()];case 3:return i=o.sent(),this.data=new Uint32Array(i),this.buffer=new eg(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},t}(Xu),ig=function(n){nM(t,n);function t(e,r){var i=n.call(this,e,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=t._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||t._createLevelBuffers(e instanceof Uint8Array?e:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return t.prototype.upload=function(e,r,i){var o=e.gl,a=e.context.extensions[this._extension];if(!a)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,l=this.levels;s<l;s++){var u=this._levelBuffers[s],c=u.levelID,h=u.levelWidth,f=u.levelHeight,d=u.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,c,this.format,h,f,0,d)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(e,r,i,o,a,s,l){for(var u=new Array(i),c=e.byteOffset,h=s,f=l,d=h+o-1&~(o-1),m=f+a-1&~(a-1),g=d*m*jf[r],p=0;p<i;p++)u[p]={levelID:p,levelWidth:i>1?h:d,levelHeight:i>1?f:m,levelBuffer:new Uint8Array(e.buffer,c,g)},c+=g,h=h>>1||1,f=f>>1||1,d=h+o-1&~(o-1),m=f+a-1&~(a-1),g=d*m*jf[r];return u},t}(bG),SG=function(){function n(){}return n.use=function(t,e){var r=t.data,i=this;if(t.type===Le.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var o=r.textures,a=void 0,s=void 0,l=0,u=o.length;l<u;l++){var c=o[l],h=c.src,f=c.format;if(f||(s=h),n.textureFormats[f]){a=h;break}}if(a=a||s,!a){e(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));return}if(a===t.url){e(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},m=vs.resolve(t.url.replace(i.baseUrl,""),a),g=r.cacheID;i.add(g,m,d,function(p){if(p.error){e(p.error);return}var v=p.texture,y=v===void 0?null:v,_=p.textures,T=_===void 0?{}:_;Object.assign(t,{texture:y,textures:T}),e()})}else e()},Object.defineProperty(n,"textureExtensions",{get:function(){if(!n._textureExtensions){var t=Ot.ADAPTER.createCanvas(),e=t.getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var r={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};n._textureExtensions=r}return n._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(n,"textureFormats",{get:function(){if(!n._textureFormats){var t=n.textureExtensions;n._textureFormats={};for(var e in t){var r=t[e];r&&Object.assign(n._textureFormats,Object.getPrototypeOf(r))}}return n._textureFormats},enumerable:!1,configurable:!0}),n.extension=pe.Loader,n}();function rM(n,t,e){var r={textures:{},texture:null};if(!t)return r;var i=t.map(function(o){return new Xt(new ie(o,Object.assign({mipmap:Or.OFF,alphaMode:Dr.NO_PREMULTIPLIED_ALPHA},e)))});return i.forEach(function(o,a){var s=o.baseTexture,l=n+"-"+(a+1);ie.addToCache(s,l),Xt.addToCache(o,l),a===0&&(ie.addToCache(s,n),Xt.addToCache(o,n),r.texture=o),r.textures[l]=o}),r}var gl,dr,em=4,Bc=124,EG=32,_b=20,TG=542327876,Gc={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},wG={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},kc={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},yr;(function(n){n[n.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",n[n.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",n[n.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",n[n.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",n[n.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",n[n.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",n[n.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",n[n.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",n[n.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",n[n.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",n[n.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",n[n.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",n[n.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",n[n.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",n[n.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",n[n.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",n[n.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",n[n.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",n[n.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",n[n.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",n[n.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",n[n.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",n[n.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",n[n.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",n[n.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",n[n.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",n[n.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",n[n.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",n[n.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",n[n.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",n[n.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",n[n.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",n[n.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",n[n.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",n[n.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",n[n.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",n[n.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",n[n.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",n[n.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",n[n.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",n[n.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",n[n.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",n[n.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",n[n.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",n[n.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",n[n.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",n[n.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",n[n.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",n[n.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",n[n.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",n[n.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",n[n.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",n[n.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",n[n.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",n[n.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",n[n.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",n[n.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",n[n.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",n[n.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",n[n.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",n[n.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",n[n.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",n[n.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",n[n.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",n[n.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",n[n.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",n[n.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",n[n.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",n[n.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",n[n.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",n[n.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",n[n.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",n[n.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",n[n.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",n[n.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",n[n.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",n[n.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",n[n.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",n[n.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",n[n.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",n[n.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",n[n.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",n[n.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",n[n.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",n[n.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",n[n.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",n[n.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",n[n.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",n[n.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",n[n.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",n[n.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",n[n.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",n[n.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",n[n.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",n[n.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",n[n.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",n[n.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",n[n.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",n[n.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",n[n.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",n[n.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",n[n.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",n[n.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",n[n.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",n[n.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",n[n.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",n[n.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",n[n.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",n[n.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",n[n.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",n[n.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",n[n.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(yr||(yr={}));var og;(function(n){n[n.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",n[n.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",n[n.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(og||(og={}));var AG=1,MG=2,CG=4,RG=64,PG=512,IG=131072,OG=827611204,DG=861165636,LG=894720068,NG=808540228,FG=4,UG=(gl={},gl[OG]=Yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,gl[DG]=Yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,gl[LG]=Yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,gl),BG=(dr={},dr[yr.DXGI_FORMAT_BC1_TYPELESS]=Yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,dr[yr.DXGI_FORMAT_BC1_UNORM]=Yt.COMPRESSED_RGBA_S3TC_DXT1_EXT,dr[yr.DXGI_FORMAT_BC2_TYPELESS]=Yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,dr[yr.DXGI_FORMAT_BC2_UNORM]=Yt.COMPRESSED_RGBA_S3TC_DXT3_EXT,dr[yr.DXGI_FORMAT_BC3_TYPELESS]=Yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,dr[yr.DXGI_FORMAT_BC3_UNORM]=Yt.COMPRESSED_RGBA_S3TC_DXT5_EXT,dr[yr.DXGI_FORMAT_BC1_UNORM_SRGB]=Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,dr[yr.DXGI_FORMAT_BC2_UNORM_SRGB]=Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,dr[yr.DXGI_FORMAT_BC3_UNORM_SRGB]=Yt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,dr);function GG(n){var t=new Uint32Array(n),e=t[0];if(e!==TG)throw new Error("Invalid DDS file magic word");var r=new Uint32Array(n,0,Bc/Uint32Array.BYTES_PER_ELEMENT),i=r[Gc.HEIGHT],o=r[Gc.WIDTH],a=r[Gc.MIPMAP_COUNT],s=new Uint32Array(n,Gc.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,EG/Uint32Array.BYTES_PER_ELEMENT),l=s[AG];if(l&CG){var u=s[wG.FOURCC];if(u!==NG){var c=UG[u],h=em+Bc,f=new Uint8Array(n,h),d=new ig(f,{format:c,width:o,height:i,levels:a});return[d]}var m=em+Bc,g=new Uint32Array(t.buffer,m,_b/Uint32Array.BYTES_PER_ELEMENT),p=g[kc.DXGI_FORMAT],v=g[kc.RESOURCE_DIMENSION],y=g[kc.MISC_FLAG],_=g[kc.ARRAY_SIZE],T=BG[p];if(T===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+p);if(y===FG)throw new Error("DDSParser does not support cubemap textures");if(v===og.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var E=new Array,S=em+Bc+_b;if(_===1)E.push(new Uint8Array(n,S));else{for(var x=jf[T],O=0,b=o,A=i,N=0;N<a;N++){var U=Math.max(1,b+3&-4),et=Math.max(1,A+3&-4),L=U*et*x;O+=L,b=b>>>1,A=A>>>1}for(var D=S,N=0;N<_;N++)E.push(new Uint8Array(n,D,O)),D+=O}return E.map(function(B){return new ig(B,{format:T,width:o,height:i,levels:a})})}throw l&RG?new Error("DDSParser does not support uncompressed texture data."):l&PG?new Error("DDSParser does not supported YUV uncompressed texture data."):l&IG?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&MG?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Xi,si,_l,yb=[171,75,84,88,32,49,49,187,13,10,26,10],kG=67305985,pr={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},ag=64,xb=(Xi={},Xi[Bt.UNSIGNED_BYTE]=1,Xi[Bt.UNSIGNED_SHORT]=2,Xi[Bt.INT]=4,Xi[Bt.UNSIGNED_INT]=4,Xi[Bt.FLOAT]=4,Xi[Bt.HALF_FLOAT]=8,Xi),HG=(si={},si[St.RGBA]=4,si[St.RGB]=3,si[St.RG]=2,si[St.RED]=1,si[St.LUMINANCE]=1,si[St.LUMINANCE_ALPHA]=2,si[St.ALPHA]=1,si),zG=(_l={},_l[Bt.UNSIGNED_SHORT_4_4_4_4]=2,_l[Bt.UNSIGNED_SHORT_5_5_5_1]=2,_l[Bt.UNSIGNED_SHORT_5_6_5]=2,_l);function VG(n,t,e){e===void 0&&(e=!1);var r=new DataView(t);if(!WG(n,r))return null;var i=r.getUint32(pr.ENDIANNESS,!0)===kG,o=r.getUint32(pr.GL_TYPE,i),a=r.getUint32(pr.GL_FORMAT,i),s=r.getUint32(pr.GL_INTERNAL_FORMAT,i),l=r.getUint32(pr.PIXEL_WIDTH,i),u=r.getUint32(pr.PIXEL_HEIGHT,i)||1,c=r.getUint32(pr.PIXEL_DEPTH,i)||1,h=r.getUint32(pr.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=r.getUint32(pr.NUMBER_OF_FACES,i),d=r.getUint32(pr.NUMBER_OF_MIPMAP_LEVELS,i),m=r.getUint32(pr.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");var g=4,p=4,v=l+3&-4,y=u+3&-4,_=new Array(h),T=l*u;o===0&&(T=v*y);var E;if(o!==0?xb[o]?E=xb[o]*HG[a]:E=zG[o]:E=jf[s],E===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var S=e?$G(r,m,i):null,x=T*E,O=x,b=l,A=u,N=v,U=y,et=ag+m,L=0;L<d;L++){for(var D=r.getUint32(et,i),B=et+4,q=0;q<h;q++){var Q=_[q];Q||(Q=_[q]=new Array(d)),Q[L]={levelID:L,levelWidth:d>1||o!==0?b:N,levelHeight:d>1||o!==0?A:U,levelBuffer:new Uint8Array(t,B,O)},B+=O}et+=D+4,et=et%4!==0?et+4-et%4:et,b=b>>1||1,A=A>>1||1,N=b+g-1&~(g-1),U=A+p-1&~(p-1),O=N*U*E}return o!==0?{uncompressed:_.map(function(rt){var $=rt[0].levelBuffer,k=!1;return o===Bt.FLOAT?$=new Float32Array(rt[0].levelBuffer.buffer,rt[0].levelBuffer.byteOffset,rt[0].levelBuffer.byteLength/4):o===Bt.UNSIGNED_INT?(k=!0,$=new Uint32Array(rt[0].levelBuffer.buffer,rt[0].levelBuffer.byteOffset,rt[0].levelBuffer.byteLength/4)):o===Bt.INT&&(k=!0,$=new Int32Array(rt[0].levelBuffer.buffer,rt[0].levelBuffer.byteOffset,rt[0].levelBuffer.byteLength/4)),{resource:new Xu($,{width:rt[0].levelWidth,height:rt[0].levelHeight}),type:o,format:k?XG(a):a}}),kvData:S}:{compressed:_.map(function(rt){return new ig(null,{format:s,width:l,height:u,levels:d,levelBuffers:rt})}),kvData:S}}function WG(n,t){for(var e=0;e<yb.length;e++)if(t.getUint8(e)!==yb[e])return console.error(n+" is not a valid *.ktx file!"),!1;return!0}function XG(n){switch(n){case St.RGBA:return St.RGBA_INTEGER;case St.RGB:return St.RGB_INTEGER;case St.RG:return St.RG_INTEGER;case St.RED:return St.RED_INTEGER;default:return n}}function $G(n,t,e){for(var r=new Map,i=0;i<t;){var o=n.getUint32(ag+i,e),a=ag+i+4,s=3-(o+3)%4;if(o===0||o>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<o&&n.getUint8(a+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=new TextDecoder().decode(new Uint8Array(n.buffer,a,l)),c=new DataView(n.buffer,a+l+1,o-l-1);r.set(u,c),i+=4+o+s}return r}Le.setExtensionXhrType("dds",Le.XHR_RESPONSE_TYPE.BUFFER);var jG=function(){function n(){}return n.use=function(t,e){if(t.extension==="dds"&&t.data)try{Object.assign(t,rM(t.name||t.url,GG(t.data),t.metadata))}catch(r){e(r);return}e()},n.extension=pe.Loader,n}();Le.setExtensionXhrType("ktx",Le.XHR_RESPONSE_TYPE.BUFFER);var YG=function(){function n(){}return n.use=function(t,e){if(t.extension==="ktx"&&t.data)try{var r=t.name||t.url,i=VG(r,t.data,this.loadKeyValueData),o=i.compressed,a=i.uncompressed,s=i.kvData;if(o){var l=rM(r,o,t.metadata);if(s&&l.textures)for(var u in l.textures)l.textures[u].baseTexture.ktxKeyValueData=s;Object.assign(t,l)}else if(a){var c={};a.forEach(function(h,f){var d=new Xt(new ie(h.resource,{mipmap:Or.OFF,alphaMode:Dr.NO_PREMULTIPLIED_ALPHA,type:h.type,format:h.format})),m=r+"-"+(f+1);s&&(d.baseTexture.ktxKeyValueData=s),ie.addToCache(d.baseTexture,m),Xt.addToCache(d,m),f===0&&(c[r]=d,ie.addToCache(d.baseTexture,r),Xt.addToCache(d,r)),c[m]=d}),Object.assign(t,{textures:c})}}catch(h){e(h);return}e()},n.extension=pe.Loader,n.loadKeyValueData=!1,n}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sg=function(n,t){return sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},sg(n,t)};function iM(n,t){sg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}(function(n){iM(t,n);function t(e,r,i,o){e===void 0&&(e=1500),i===void 0&&(i=16384),o===void 0&&(o=!1);var a=n.call(this)||this,s=16384;return i>s&&(i=s),a._properties=[!1,!0,!1,!1,!1],a._maxSize=e,a._batchSize=i,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=Gt.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,Hs(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var r=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(e){n.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t})(ti);var bb=function(){function n(t,e,r){this.geometry=new $u,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||Bt.FLOAT,offset:o.offset},e[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return n.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Ve(iU(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];i.offset=e,e+=i.size,this.dynamicStride+=i.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Ve(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var r=0;r<this.staticProperties.length;++r){var i=this.staticProperties[r];i.offset=a,a+=i.size,this.staticStride+=i.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Ve(this.staticData,!0,!1);for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];t.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===Bt.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var r=0;r<this.staticProperties.length;++r){var i=this.staticProperties[r];t.addAttribute(i.attributeName,this.staticBuffer,0,i.type===Bt.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},n.prototype.uploadDynamic=function(t,e,r){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,e,r,o.type===Bt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},n.prototype.uploadStatic=function(t,e,r){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,e,r,o.type===Bt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},n.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},n}(),qG=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,KG=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,ZG=function(n){iM(t,n);function t(e){var r=n.call(this,e)||this;return r.shader=null,r.properties=null,r.tempMatrix=new Xe,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Bt.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=fo.from(KG,qG,{}),r.state=Na.for2d(),r}return t.prototype.render=function(e){var r=e.children,i=e._maxSize,o=e._batchSize,a=this.renderer,s=r.length;if(s!==0){s>i&&!e.autoResize&&(s=i);var l=e._buffers;l||(l=e._buffers=this.generateBuffers(e));var u=r[0]._texture.baseTexture,c=u.alphaMode>0;this.state.blendMode=DA(e.blendMode,c),a.state.set(this.state);var h=a.gl,f=e.worldTransform.copyTo(this.tempMatrix);f.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=rU(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,c),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var d=!1,m=0,g=0;m<s;m+=o,g+=1){var p=s-m;p>o&&(p=o),g>=l.length&&l.push(this._generateOneMoreBuffer(e));var v=l[g];v.uploadDynamic(r,m,p);var y=e._bufferUpdateIDs[g]||0;d=d||v._updateID<y,d&&(v._updateID=e._updateID,v.uploadStatic(r,m,p)),a.geometry.bind(v.geometry),h.drawElements(h.TRIANGLES,p*6,h.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var r=[],i=e._maxSize,o=e._batchSize,a=e._properties,s=0;s<i;s+=o)r.push(new bb(this.properties,a,o));return r},t.prototype._generateOneMoreBuffer=function(e){var r=e._batchSize,i=e._properties;return new bb(this.properties,i,r)},t.prototype.uploadVertices=function(e,r,i,o,a,s){for(var l=0,u=0,c=0,h=0,f=0;f<i;++f){var d=e[r+f],m=d._texture,g=d.scale.x,p=d.scale.y,v=m.trim,y=m.orig;v?(u=v.x-d.anchor.x*y.width,l=u+v.width,h=v.y-d.anchor.y*y.height,c=h+v.height):(l=y.width*(1-d.anchor.x),u=y.width*-d.anchor.x,c=y.height*(1-d.anchor.y),h=y.height*-d.anchor.y),o[s]=u*g,o[s+1]=h*p,o[s+a]=l*g,o[s+a+1]=h*p,o[s+a*2]=l*g,o[s+a*2+1]=c*p,o[s+a*3]=u*g,o[s+a*3+1]=c*p,s+=a*4}},t.prototype.uploadPosition=function(e,r,i,o,a,s){for(var l=0;l<i;l++){var u=e[r+l].position;o[s]=u.x,o[s+1]=u.y,o[s+a]=u.x,o[s+a+1]=u.y,o[s+a*2]=u.x,o[s+a*2+1]=u.y,o[s+a*3]=u.x,o[s+a*3+1]=u.y,s+=a*4}},t.prototype.uploadRotation=function(e,r,i,o,a,s){for(var l=0;l<i;l++){var u=e[r+l].rotation;o[s]=u,o[s+a]=u,o[s+a*2]=u,o[s+a*3]=u,s+=a*4}},t.prototype.uploadUvs=function(e,r,i,o,a,s){for(var l=0;l<i;++l){var u=e[r+l]._texture._uvs;u?(o[s]=u.x0,o[s+1]=u.y0,o[s+a]=u.x1,o[s+a+1]=u.y1,o[s+a*2]=u.x2,o[s+a*2+1]=u.y2,o[s+a*3]=u.x3,o[s+a*3+1]=u.y3,s+=a*4):(o[s]=0,o[s+1]=0,o[s+a]=0,o[s+a+1]=0,o[s+a*2]=0,o[s+a*2+1]=0,o[s+a*3]=0,o[s+a*3+1]=0,s+=a*4)}},t.prototype.uploadTint=function(e,r,i,o,a,s){for(var l=0;l<i;++l){var u=e[r+l],c=u._texture.baseTexture.alphaMode>0,h=u.alpha,f=h<1&&c?Z_(u._tintRGB,h):u._tintRGB+(h*255<<24);o[s]=f,o[s+a]=f,o[s+a*2]=f,o[s+a*3]=f,s+=a*4}},t.prototype.destroy=function(){n.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t.extension={name:"particle",type:pe.RendererPlugin},t}(Fd);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ti;(function(n){n.MITER="miter",n.BEVEL="bevel",n.ROUND="round"})(Ti||(Ti={}));var ao;(function(n){n.BUTT="butt",n.ROUND="round",n.SQUARE="square"})(ao||(ao={}));var Su={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(n,t){if(t===void 0&&(t=20),!this.adaptive||!n||isNaN(n))return t;var e=Math.ceil(n/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},oM=function(){function n(){this.color=16777215,this.alpha=1,this.texture=Xt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return n.prototype.clone=function(){var t=new n;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},n.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Xt.WHITE,this.matrix=null,this.visible=!1},n.prototype.destroy=function(){this.texture=null,this.matrix=null},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lg=function(n,t){return lg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},lg(n,t)};function ty(n,t){lg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Sb(n,t){var e,r;t===void 0&&(t=!1);var i=n.length;if(!(i<6)){for(var o=0,a=0,s=n[i-2],l=n[i-1];a<i;a+=2){var u=n[a],c=n[a+1];o+=(u-s)*(c+l),s=u,l=c}if(!t&&o>0||t&&o<=0)for(var h=i/2,a=h+h%2;a<i;a+=2){var f=i-a-2,d=i-a-1,m=a,g=a+1;e=[n[m],n[f]],n[f]=e[0],n[m]=e[1],r=[n[g],n[d]],n[d]=r[0],n[g]=r[1]}}}var aM={build:function(n){n.points=n.shape.points.slice()},triangulate:function(n,t){var e=n.points,r=n.holes,i=t.points,o=t.indices;if(e.length>=6){Sb(e,!1);for(var a=[],s=0;s<r.length;s++){var l=r[s];Sb(l.points,!0),a.push(e.length/2),e=e.concat(l.points)}var u=cA(e,a,2);if(!u)return;for(var c=i.length/2,s=0;s<u.length;s+=3)o.push(u[s]+c),o.push(u[s+1]+c),o.push(u[s+2]+c);for(var s=0;s<e.length;s++)i.push(e[s])}}},Yf={build:function(n){var t=n.points,e,r,i,o,a,s;if(n.type===Qe.CIRC){var l=n.shape;e=l.x,r=l.y,a=s=l.radius,i=o=0}else if(n.type===Qe.ELIP){var u=n.shape;e=u.x,r=u.y,a=u.width,s=u.height,i=o=0}else{var c=n.shape,h=c.width/2,f=c.height/2;e=c.x+h,r=c.y+f,a=s=Math.max(0,Math.min(c.radius,Math.min(h,f))),i=h-a,o=f-s}if(!(a>=0&&s>=0&&i>=0&&o>=0)){t.length=0;return}var d=Math.ceil(2.3*Math.sqrt(a+s)),m=d*8+(i?4:0)+(o?4:0);if(t.length=m,m!==0){if(d===0){t.length=8,t[0]=t[6]=e+i,t[1]=t[3]=r+o,t[2]=t[4]=e-i,t[5]=t[7]=r-o;return}var g=0,p=d*4+(i?2:0)+2,v=p,y=m;{var _=i+a,T=o,E=e+_,S=e-_,x=r+T;if(t[g++]=E,t[g++]=x,t[--p]=x,t[--p]=S,o){var O=r-T;t[v++]=S,t[v++]=O,t[--y]=O,t[--y]=E}}for(var b=1;b<d;b++){var A=Math.PI/2*(b/d),_=i+Math.cos(A)*a,T=o+Math.sin(A)*s,E=e+_,S=e-_,x=r+T,O=r-T;t[g++]=E,t[g++]=x,t[--p]=x,t[--p]=S,t[v++]=S,t[v++]=O,t[--y]=O,t[--y]=E}{var _=i,T=o+s,E=e+_,S=e-_,x=r+T,O=r-T;t[g++]=E,t[g++]=x,t[--y]=O,t[--y]=E,i&&(t[g++]=S,t[g++]=x,t[--y]=O,t[--y]=S)}}},triangulate:function(n,t){var e=n.points,r=t.points,i=t.indices;if(e.length!==0){var o=r.length/2,a=o,s,l;if(n.type!==Qe.RREC){var u=n.shape;s=u.x,l=u.y}else{var c=n.shape;s=c.x+c.width/2,l=c.y+c.height/2}var h=n.matrix;r.push(n.matrix?h.a*s+h.c*l+h.tx:s,n.matrix?h.b*s+h.d*l+h.ty:l),o++,r.push(e[0],e[1]);for(var f=2;f<e.length;f+=2)r.push(e[f],e[f+1]),i.push(o++,a,o);i.push(a+1,a,o)}}},JG={build:function(n){var t=n.shape,e=t.x,r=t.y,i=t.width,o=t.height,a=n.points;a.length=0,a.push(e,r,e+i,r,e+i,r+o,e,r+o)},triangulate:function(n,t){var e=n.points,r=t.points,i=r.length/2;r.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function za(n,t,e){var r=t-n;return n+r*e}function Hc(n,t,e,r,i,o,a){a===void 0&&(a=[]);for(var s=20,l=a,u=0,c=0,h=0,f=0,d=0,m=0,g=0,p=0;g<=s;++g)p=g/s,u=za(n,e,p),c=za(t,r,p),h=za(e,i,p),f=za(r,o,p),d=za(u,h,p),m=za(c,f,p),!(g===0&&l[l.length-2]===d&&l[l.length-1]===m)&&l.push(d,m);return l}var QG={build:function(n){if(Ii.nextRoundedRectBehavior){Yf.build(n);return}var t=n.shape,e=n.points,r=t.x,i=t.y,o=t.width,a=t.height,s=Math.max(0,Math.min(t.radius,Math.min(o,a)/2));e.length=0,s?(Hc(r,i+s,r,i,r+s,i,e),Hc(r+o-s,i,r+o,i,r+o,i+s,e),Hc(r+o,i+a-s,r+o,i+a,r+o-s,i+a,e),Hc(r+s,i+a,r,i+a,r,i+a-s,e)):e.push(r,i,r+o,i,r+o,i+a,r,i+a)},triangulate:function(n,t){if(Ii.nextRoundedRectBehavior){Yf.triangulate(n,t);return}for(var e=n.points,r=t.points,i=t.indices,o=r.length/2,a=cA(e,null,2),s=0,l=a.length;s<l;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(var s=0,l=e.length;s<l;s++)r.push(e[s],e[++s])}};function Eb(n,t,e,r,i,o,a,s){var l=n-e*i,u=t-r*i,c=n+e*o,h=t+r*o,f,d;a?(f=r,d=-e):(f=-r,d=e);var m=l+f,g=u+d,p=c+f,v=h+d;return s.push(m,g),s.push(p,v),2}function Do(n,t,e,r,i,o,a,s){var l=e-n,u=r-t,c=Math.atan2(l,u),h=Math.atan2(i-n,o-t);s&&c<h?c+=Math.PI*2:!s&&c>h&&(h+=Math.PI*2);var f=c,d=h-c,m=Math.abs(d),g=Math.sqrt(l*l+u*u),p=(15*m*Math.sqrt(g)/Math.PI>>0)+1,v=d/p;if(f+=v,s){a.push(n,t),a.push(e,r);for(var y=1,_=f;y<p;y++,_+=v)a.push(n,t),a.push(n+Math.sin(_)*g,t+Math.cos(_)*g);a.push(n,t),a.push(i,o)}else{a.push(e,r),a.push(n,t);for(var y=1,_=f;y<p;y++,_+=v)a.push(n+Math.sin(_)*g,t+Math.cos(_)*g),a.push(n,t);a.push(i,o),a.push(n,t)}return p*2}function t4(n,t){var e=n.shape,r=n.points||e.points.slice(),i=t.closePointEps;if(r.length!==0){var o=n.lineStyle,a=new Te(r[0],r[1]),s=new Te(r[r.length-2],r[r.length-1]),l=e.type!==Qe.POLY||e.closeStroke,u=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(l){r=r.slice(),u&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var c=(a.x+s.x)*.5,h=(s.y+a.y)*.5;r.unshift(c,h),r.push(c,h)}var f=t.points,d=r.length/2,m=r.length,g=f.length/2,p=o.width/2,v=p*p,y=o.miterLimit*o.miterLimit,_=r[0],T=r[1],E=r[2],S=r[3],x=0,O=0,b=-(T-S),A=_-E,N=0,U=0,et=Math.sqrt(b*b+A*A);b/=et,A/=et,b*=p,A*=p;var L=o.alignment,D=(1-L)*2,B=L*2;l||(o.cap===ao.ROUND?m+=Do(_-b*(D-B)*.5,T-A*(D-B)*.5,_-b*D,T-A*D,_+b*B,T+A*B,f,!0)+2:o.cap===ao.SQUARE&&(m+=Eb(_,T,b,A,D,B,!0,f))),f.push(_-b*D,T-A*D),f.push(_+b*B,T+A*B);for(var q=1;q<d-1;++q){_=r[(q-1)*2],T=r[(q-1)*2+1],E=r[q*2],S=r[q*2+1],x=r[(q+1)*2],O=r[(q+1)*2+1],b=-(T-S),A=_-E,et=Math.sqrt(b*b+A*A),b/=et,A/=et,b*=p,A*=p,N=-(S-O),U=E-x,et=Math.sqrt(N*N+U*U),N/=et,U/=et,N*=p,U*=p;var Q=E-_,rt=T-S,$=E-x,k=O-S,pt=Q*$+rt*k,J=rt*$-k*Q,it=J<0;if(Math.abs(J)<.001*Math.abs(pt)){f.push(E-b*D,S-A*D),f.push(E+b*B,S+A*B),pt>=0&&(o.join===Ti.ROUND?m+=Do(E,S,E-b*D,S-A*D,E-N*D,S-U*D,f,!1)+4:m+=2,f.push(E-N*B,S-U*B),f.push(E+N*D,S+U*D));continue}var vt=(-b+_)*(-A+S)-(-b+E)*(-A+T),gt=(-N+x)*(-U+S)-(-N+E)*(-U+O),W=(Q*gt-$*vt)/J,ft=(k*vt-rt*gt)/J,at=(W-E)*(W-E)+(ft-S)*(ft-S),mt=E+(W-E)*D,_t=S+(ft-S)*D,X=E-(W-E)*B,R=S-(ft-S)*B,C=Math.min(Q*Q+rt*rt,$*$+k*k),z=it?D:B,Y=C+z*z*v,K=at<=Y;K?o.join===Ti.BEVEL||at/v>y?(it?(f.push(mt,_t),f.push(E+b*B,S+A*B),f.push(mt,_t),f.push(E+N*B,S+U*B)):(f.push(E-b*D,S-A*D),f.push(X,R),f.push(E-N*D,S-U*D),f.push(X,R)),m+=2):o.join===Ti.ROUND?it?(f.push(mt,_t),f.push(E+b*B,S+A*B),m+=Do(E,S,E+b*B,S+A*B,E+N*B,S+U*B,f,!0)+4,f.push(mt,_t),f.push(E+N*B,S+U*B)):(f.push(E-b*D,S-A*D),f.push(X,R),m+=Do(E,S,E-b*D,S-A*D,E-N*D,S-U*D,f,!1)+4,f.push(E-N*D,S-U*D),f.push(X,R)):(f.push(mt,_t),f.push(X,R)):(f.push(E-b*D,S-A*D),f.push(E+b*B,S+A*B),o.join===Ti.ROUND?it?m+=Do(E,S,E+b*B,S+A*B,E+N*B,S+U*B,f,!0)+2:m+=Do(E,S,E-b*D,S-A*D,E-N*D,S-U*D,f,!1)+2:o.join===Ti.MITER&&at/v<=y&&(it?(f.push(X,R),f.push(X,R)):(f.push(mt,_t),f.push(mt,_t)),m+=2),f.push(E-N*D,S-U*D),f.push(E+N*B,S+U*B),m+=2)}_=r[(d-2)*2],T=r[(d-2)*2+1],E=r[(d-1)*2],S=r[(d-1)*2+1],b=-(T-S),A=_-E,et=Math.sqrt(b*b+A*A),b/=et,A/=et,b*=p,A*=p,f.push(E-b*D,S-A*D),f.push(E+b*B,S+A*B),l||(o.cap===ao.ROUND?m+=Do(E-b*(D-B)*.5,S-A*(D-B)*.5,E-b*D,S-A*D,E+b*B,S+A*B,f,!1)+2:o.cap===ao.SQUARE&&(m+=Eb(E,S,b,A,D,B,!1,f)));for(var ct=t.indices,M=Su.epsilon*Su.epsilon,q=g;q<m+g-2;++q)_=f[q*2],T=f[q*2+1],E=f[(q+1)*2],S=f[(q+1)*2+1],x=f[(q+2)*2],O=f[(q+2)*2+1],!(Math.abs(_*(S-O)+E*(O-T)+x*(T-S))<M)&&ct.push(q,q+1,q+2)}}function e4(n,t){var e=0,r=n.shape,i=n.points||r.points,o=r.type!==Qe.POLY||r.closeStroke;if(i.length!==0){var a=t.points,s=t.indices,l=i.length/2,u=a.length/2,c=u;for(a.push(i[0],i[1]),e=1;e<l;e++)a.push(i[e*2],i[e*2+1]),s.push(c,c+1),c++;o&&s.push(c,u)}}function Tb(n,t){n.lineStyle.native?e4(n,t):t4(n,t)}var wb=function(){function n(){}return n.curveTo=function(t,e,r,i,o,a){var s=a[a.length-2],l=a[a.length-1],u=l-e,c=s-t,h=i-e,f=r-t,d=Math.abs(u*f-c*h);if(d<1e-8||o===0)return(a[a.length-2]!==t||a[a.length-1]!==e)&&a.push(t,e),null;var m=u*u+c*c,g=h*h+f*f,p=u*h+c*f,v=o*Math.sqrt(m)/d,y=o*Math.sqrt(g)/d,_=v*p/m,T=y*p/g,E=v*f+y*c,S=v*h+y*u,x=c*(y+_),O=u*(y+_),b=f*(v+T),A=h*(v+T),N=Math.atan2(O-S,x-E),U=Math.atan2(A-S,b-E);return{cx:E+t,cy:S+e,radius:o,startAngle:N,endAngle:U,anticlockwise:c*h>f*u}},n.arc=function(t,e,r,i,o,a,s,l,u){for(var c=s-a,h=Su._segmentsCount(Math.abs(c)*o,Math.ceil(Math.abs(c)/Wf)*40),f=c/(h*2),d=f*2,m=Math.cos(f),g=Math.sin(f),p=h-1,v=p%1/p,y=0;y<=p;++y){var _=y+v*y,T=f+a+d*_,E=Math.cos(T),S=-Math.sin(T);u.push((m*E+g*S)*o+r,(m*-S+g*E)*o+i)}},n}(),n4=function(){function n(){}return n.curveLength=function(t,e,r,i,o,a,s,l){for(var u=10,c=0,h=0,f=0,d=0,m=0,g=0,p=0,v=0,y=0,_=0,T=0,E=t,S=e,x=1;x<=u;++x)h=x/u,f=h*h,d=f*h,m=1-h,g=m*m,p=g*m,v=p*t+3*g*h*r+3*m*f*o+d*s,y=p*e+3*g*h*i+3*m*f*a+d*l,_=E-v,T=S-y,E=v,S=y,c+=Math.sqrt(_*_+T*T);return c},n.curveTo=function(t,e,r,i,o,a,s){var l=s[s.length-2],u=s[s.length-1];s.length-=2;var c=Su._segmentsCount(n.curveLength(l,u,t,e,r,i,o,a)),h=0,f=0,d=0,m=0,g=0;s.push(l,u);for(var p=1,v=0;p<=c;++p)v=p/c,h=1-v,f=h*h,d=f*h,m=v*v,g=m*v,s.push(d*l+3*f*v*t+3*h*m*r+g*o,d*u+3*f*v*e+3*h*m*i+g*a)},n}(),r4=function(){function n(){}return n.curveLength=function(t,e,r,i,o,a){var s=t-2*r+o,l=e-2*i+a,u=2*r-2*t,c=2*i-2*e,h=4*(s*s+l*l),f=4*(s*u+l*c),d=u*u+c*c,m=2*Math.sqrt(h+f+d),g=Math.sqrt(h),p=2*h*g,v=2*Math.sqrt(d),y=f/g;return(p*m+g*f*(m-v)+(4*d*h-f*f)*Math.log((2*g+y+m)/(y+v)))/(4*p)},n.curveTo=function(t,e,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],l=Su._segmentsCount(n.curveLength(a,s,t,e,r,i)),u=0,c=0,h=1;h<=l;++h){var f=h/l;u=a+(t-a)*f,c=s+(e-s)*f,o.push(u+(t+(r-t)*f-u)*f,c+(e+(i-e)*f-c)*f)}},n}(),i4=function(){function n(){this.reset()}return n.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},n.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},n.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},n}(),Lo,nm=(Lo={},Lo[Qe.POLY]=aM,Lo[Qe.CIRC]=Yf,Lo[Qe.ELIP]=Yf,Lo[Qe.RECT]=JG,Lo[Qe.RREC]=QG,Lo),Ab=[],zc=[],Mb=function(){function n(t,e,r,i){e===void 0&&(e=null),r===void 0&&(r=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=i,this.type=t.type}return n.prototype.clone=function(){return new n(this.shape,this.fillStyle,this.lineStyle,this.matrix)},n.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},n}(),Va=new Te,o4=function(n){ty(t,n);function t(){var e=n.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new Xf,e.boundsDirty=-1,e}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),zc.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var r=this.batches[e];r.reset(),Ab.push(r)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,r,i,o){r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=null);var a=new Mb(e,r,i,o);return this.graphicsData.push(a),this.dirty++,this},t.prototype.drawHole=function(e,r){if(r===void 0&&(r=null),!this.graphicsData.length)return null;var i=new Mb(e,null,null,r),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},t.prototype.destroy=function(){n.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var r=this.graphicsData,i=0;i<r.length;++i){var o=r[i];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(e,Va):Va.copyFrom(e),o.shape.contains(Va.x,Va.y))){var a=!1;if(o.holes)for(var s=0;s<o.holes.length;s++){var l=o.holes[s];if(l.shape.contains(Va.x,Va.y)){a=!0;break}}if(!a)return!0}}return!1},t.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,r=this.graphicsData,i=null,o=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],o=i.style);for(var a=this.shapeIndex;a<r.length;a++){this.shapeIndex++;var s=r[a],l=s.fillStyle,u=s.lineStyle,c=nm[s.type];c.build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(l.visible||u.visible)&&this.processHoles(s.holes);for(var h=0;h<2;h++){var f=h===0?l:u;if(f.visible){var d=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;d.wrapMode=qr.REPEAT,h===0?this.processFill(s):this.processLine(s);var p=this.points.length/2-g;p!==0&&(i&&!this._compareStyles(o,f)&&(i.end(m,g),i=null),i||(i=Ab.pop()||new i4,i.begin(f,m,g),this.batches.push(i),o=f),this.addUvs(this.points,e,f.texture,g,p,f.matrix))}}}var v=this.indices.length,y=this.points.length/2;if(i&&i.end(v,y),this.batches.length===0){this.batchable=!0;return}var _=y>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&_===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=_?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,r=this.graphicsData.length;e<r;e++){var i=this.graphicsData[e],o=i.fillStyle,a=i.lineStyle;if(o&&!o.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,r=0,i=e.length;r<i;r++)for(var o=e[r],a=0;a<o.size;a++){var s=o.start+a;this.indicesUint16[s]=this.indicesUint16[s]-o.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var e=++ie._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),zc.push(this.drawCalls[r]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,a=zc.pop();a||(a=new Qv,a.texArray=new tg),a.texArray.count=0,a.start=0,a.size=0,a.type=Mr.TRIANGLES;var s=0,l=null,u=0,c=!1,h=Mr.TRIANGLES,f=0;this.drawCalls.push(a);for(var r=0;r<this.batches.length;r++){var d=this.batches[r],m=8,g=d.style,p=g.texture.baseTexture;c!==!!g.native&&(c=!!g.native,h=c?Mr.LINES:Mr.TRIANGLES,l=null,s=m,e++),l!==p&&(l=p,p._batchEnabled!==e&&(s===m&&(e++,s=0,a.size>0&&(a=zc.pop(),a||(a=new Qv,a.texArray=new tg),this.drawCalls.push(a)),a.start=f,a.size=0,a.texArray.count=0,a.type=h),p.touched=1,p._batchEnabled=e,p._batchLocation=s,p.wrapMode=qr.REPEAT,a.texArray.elements[a.texArray.count++]=p,s++)),a.size+=d.size,f+=d.size,u=p._batchLocation,this.addColors(i,g.color,g.alpha,d.attribSize,d.attribStart),this.addTextureIds(o,u,d.attribSize,d.attribStart)}ie._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,r=this.uvs,i=this.colors,o=this.textureIds,a=new ArrayBuffer(e.length*3*4),s=new Float32Array(a),l=new Uint32Array(a),u=0,c=0;c<e.length/2;c++)s[u++]=e[c*2],s[u++]=e[c*2+1],s[u++]=r[c*2],s[u++]=r[c*2+1],l[u++]=i[c],s[u++]=o[c];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){if(e.holes.length)aM.triangulate(e,this);else{var r=nm[e.type];r.triangulate(e,this)}},t.prototype.processLine=function(e){Tb(e,this);for(var r=0;r<e.holes.length;r++)Tb(e.holes[r],this)},t.prototype.processHoles=function(e){for(var r=0;r<e.length;r++){var i=e[r],o=nm[i.type];o.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,r){for(var i=0;i<e.length/2;i++){var o=e[i*2],a=e[i*2+1];e[i*2]=r.a*o+r.c*a+r.tx,e[i*2+1]=r.b*o+r.d*a+r.ty}},t.prototype.addColors=function(e,r,i,o,a){a===void 0&&(a=0);var s=(r>>16)+(r&65280)+((r&255)<<16),l=Z_(s,i);e.length=Math.max(e.length,a+o);for(var u=0;u<o;u++)e[a+u]=l},t.prototype.addTextureIds=function(e,r,i,o){o===void 0&&(o=0),e.length=Math.max(e.length,o+i);for(var a=0;a<i;a++)e[o+a]=r},t.prototype.addUvs=function(e,r,i,o,a,s){s===void 0&&(s=null);for(var l=0,u=r.length,c=i.frame;l<a;){var h=e[(o+l)*2],f=e[(o+l)*2+1];if(s){var d=s.a*h+s.c*f+s.tx;f=s.b*h+s.d*f+s.ty,h=d}l++,r.push(h/c.width,f/c.height)}var m=i.baseTexture;(c.width<m.width||c.height<m.height)&&this.adjustUvs(r,i,u,a)},t.prototype.adjustUvs=function(e,r,i,o){for(var a=r.baseTexture,s=1e-6,l=i+o*2,u=r.frame,c=u.width/a.width,h=u.height/a.height,f=u.x/u.width,d=u.y/u.height,m=Math.floor(e[i]+s),g=Math.floor(e[i+1]+s),p=i+2;p<l;p+=2)m=Math.min(m,Math.floor(e[p]+s)),g=Math.min(g,Math.floor(e[p+1]+s));f-=m,d-=g;for(var p=i;p<l;p+=2)e[p]=(e[p]+f)*c,e[p+1]=(e[p+1]+d)*h},t.BATCHABLE_SIZE=100,t}(QA),a4=function(n){ty(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=ao.BUTT,e.join=Ti.MITER,e.miterLimit=10,e}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){n.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(oM),s4=new Float32Array(3),rm={},Ii=function(n){ty(t,n);function t(e){e===void 0&&(e=null);var r=n.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new oM,r._lineStyle=new a4,r._matrix=null,r._holeMode=!1,r.state=Na.for2d(),r._geometry=e||new o4,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=Gt.NORMAL,r}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e,r,i,o,a){return e===void 0&&(e=null),r===void 0&&(r=0),i===void 0&&(i=1),o===void 0&&(o=.5),a===void 0&&(a=!1),typeof e=="number"&&(e={width:e,color:r,alpha:i,alignment:o,native:a}),this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:Xt.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ao.BUTT,join:Ti.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new Wh,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new Wh,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this},t.prototype.lineTo=function(e,r){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,o=i[i.length-2],a=i[i.length-1];return(o!==e||a!==r)&&i.push(e,r),this},t.prototype._initCurve=function(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)},t.prototype.quadraticCurveTo=function(e,r,i,o){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),r4.curveTo(e,r,i,o,a),this},t.prototype.bezierCurveTo=function(e,r,i,o,a,s){return this._initCurve(),n4.curveTo(e,r,i,o,a,s,this.currentPath.points),this},t.prototype.arcTo=function(e,r,i,o,a){this._initCurve(e,r);var s=this.currentPath.points,l=wb.curveTo(e,r,i,o,a,s);if(l){var u=l.cx,c=l.cy,h=l.radius,f=l.startAngle,d=l.endAngle,m=l.anticlockwise;this.arc(u,c,h,f,d,m)}return this},t.prototype.arc=function(e,r,i,o,a,s){if(s===void 0&&(s=!1),o===a)return this;!s&&a<=o?a+=Wf:s&&o<=a&&(o+=Wf);var l=a-o;if(l===0)return this;var u=e+Math.cos(o)*i,c=r+Math.sin(o)*i,h=this._geometry.closePointEps,f=this.currentPath?this.currentPath.points:null;if(f){var d=Math.abs(f[f.length-2]-u),m=Math.abs(f[f.length-1]-c);d<h&&m<h||f.push(u,c)}else this.moveTo(u,c),f=this.currentPath.points;return wb.arc(u,c,e,r,i,o,a,s,f),this},t.prototype.beginFill=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=1),this.beginTextureFill({texture:Xt.WHITE,color:e,alpha:r})},t.prototype.beginTextureFill=function(e){e=Object.assign({texture:Xt.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,r,i,o){return this.drawShape(new ae(e,r,i,o))},t.prototype.drawRoundedRect=function(e,r,i,o,a){return this.drawShape(new fU(e,r,i,o,a))},t.prototype.drawCircle=function(e,r,i){return this.drawShape(new cU(e,r,i))},t.prototype.drawEllipse=function(e,r,i,o){return this.drawShape(new hU(e,r,i,o))},t.prototype.drawPolygon=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var o,a=!0,s=r[0];s.points?(a=s.closeStroke,o=s.points):Array.isArray(r[0])?o=r[0]:o=r;var l=new Wh(o);return l.closeStroke=a,this.drawShape(l),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Qe.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,r=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(var o=0;o<i;o++){var a=e.batches[o],s=a.style.color,l=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),h={vertexData:l,blendMode:r,indices:c,uvs:u,_batchRGB:Hs(s),_tintRGB:s,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=h}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,i=this.batches.length;r<i;r++){var o=this.batches[r];o.worldAlpha=this.worldAlpha*o.alpha,e.plugins[this.pluginName].render(o)}}},t.prototype._renderDirect=function(e){var r=this._resolveDirectShader(e),i=this._geometry,o=this.tint,a=this.worldAlpha,s=r.uniforms,l=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(o>>16&255)/255*a,s.tint[1]=(o>>8&255)/255*a,s.tint[2]=(o&255)/255*a,s.tint[3]=a,e.shader.bind(r),e.geometry.bind(i,r),e.state.set(this.state);for(var u=0,c=l.length;u<c;u++)this._renderDrawCallDirect(e,i.drawCalls[u])},t.prototype._renderDrawCallDirect=function(e,r){for(var i=r.texArray,o=r.type,a=r.size,s=r.start,l=i.count,u=0;u<l;u++)e.texture.bind(i.elements[u],u);e.geometry.draw(o,a,s)},t.prototype._resolveDirectShader=function(e){var r=this.shader,i=this.pluginName;if(!r){if(!rm[i]){for(var o=e.plugins[i].MAX_TEXTURES,a=new Int32Array(o),s=0;s<o;s++)a[s]=s;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new Xe,default:ha.from({uSamplers:a},!0)},u=e.plugins[i]._shader.program;rm[i]=new fo(u,l)}r=rm[i]}return r},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var r=e.bounds,i=r.minX,o=r.minY,a=r.maxX,s=r.maxY;this._bounds.addFrame(this.transform,i,o,a,s)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Hs(this.tint,s4),r=0;r<this.batches.length;r++){var i=this.batches[r],o=i._batchRGB,a=e[0]*o[0]*255,s=e[1]*o[1]*255,l=e[2]*o[2]*255,u=(a<<16)+(s<<8)+(l|0);i._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,s=r.d,l=r.tx,u=r.ty,c=this._geometry.points,h=this.vertexData,f=0,d=0;d<c.length;d+=2){var m=c[d],g=c[d+1];h[f++]=i*m+a*g+l,h[f++]=s*g+o*m+u}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,n.prototype.destroy.call(this,e)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new Te,t}(ti);/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ug=function(n,t){return ug=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},ug(n,t)};function l4(n,t){ug(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var yl=new Te,u4=new Uint16Array([0,1,2,0,2,3]),Yu=function(n){l4(t,n);function t(e){var r=n.call(this)||this;return r._anchor=new _s(r._onAnchorUpdate,r,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=Gt.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=e||Xt.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=u4,r.pluginName="batch",r.isSprite=!0,r._roundPixels=Ot.ROUND_PIXELS,r}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=gs(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=gs(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,s=r.d,l=r.tx,u=r.ty,c=this.vertexData,h=e.trim,f=e.orig,d=this._anchor,m=0,g=0,p=0,v=0;if(h?(g=h.x-d._x*f.width,m=g+h.width,v=h.y-d._y*f.height,p=v+h.height):(g=-d._x*f.width,m=g+f.width,v=-d._y*f.height,p=v+f.height),c[0]=i*g+a*v+l,c[1]=s*v+o*g+u,c[2]=i*m+a*v+l,c[3]=s*v+o*m+u,c[4]=i*m+a*p+l,c[5]=s*p+o*m+u,c[6]=i*g+a*p+l,c[7]=s*p+o*g+u,this._roundPixels)for(var y=Ot.RESOLUTION,_=0;_<c.length;++_)c[_]=Math.round((c[_]*y|0)/y)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,r=this.vertexTrimmedData,i=e.orig,o=this._anchor,a=this.transform.worldTransform,s=a.a,l=a.b,u=a.c,c=a.d,h=a.tx,f=a.ty,d=-o._x*i.width,m=d+i.width,g=-o._y*i.height,p=g+i.height;r[0]=s*d+u*g+h,r[1]=c*g+l*d+f,r[2]=s*m+u*g+h,r[3]=c*g+l*m+f,r[4]=s*m+u*p+h,r[5]=c*p+l*m+f,r[6]=s*d+u*p+h,r[7]=c*p+l*d+f},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Xf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ae),e=this._localBoundsRect),this._localBounds.getRectangle(e)):n.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,yl);var r=this._texture.orig.width,i=this._texture.orig.height,o=-r*this.anchor.x,a=0;return yl.x>=o&&yl.x<o+r&&(a=-i*this.anchor.y,yl.y>=a&&yl.y<a+i)},t.prototype.destroy=function(e){n.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r=typeof e=="boolean"?e:e&&e.texture;if(r){var i=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},t.from=function(e,r){var i=e instanceof Xt?e:Xt.from(e,r);return new t(i)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var r=gs(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var r=gs(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Xt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(ti);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cg=function(n,t){return cg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},cg(n,t)};function c4(n,t){cg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Eu;(function(n){n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Eu||(Eu={}));var im={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Eu.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},h4=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],wa=function(){function n(t){this.styleID=0,this.reset(),am(this,t,t)}return n.prototype.clone=function(){var t={};return am(t,this,im),new n(t)},n.prototype.reset=function(){am(this,im,im)},Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=om(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=om(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){f4(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=om(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),n.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var i=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&h4.indexOf(i)<0&&(i='"'+i+'"'),e[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},n}();function Cb(n){return typeof n=="number"?PA(n):(typeof n=="string"&&n.indexOf("0x")===0&&(n=n.replace("0x","#")),n)}function om(n){if(Array.isArray(n)){for(var t=0;t<n.length;++t)n[t]=Cb(n[t]);return n}else return Cb(n)}function f4(n,t){if(!Array.isArray(n)||!Array.isArray(t)||n.length!==t.length)return!1;for(var e=0;e<n.length;++e)if(n[e]!==t[e])return!1;return!0}function am(n,t,e){for(var r in e)Array.isArray(t[r])?n[r]=t[r].slice():n[r]=t[r]}var Vc={willReadFrequently:!0},ni=function(){function n(t,e,r,i,o,a,s,l,u){this.text=t,this.style=e,this.width=r,this.height=i,this.lines=o,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=l,this.fontProperties=u}return n.measureText=function(t,e,r,i){i===void 0&&(i=n._canvas),r=r??e.wordWrap;var o=e.toFontString(),a=n.measureFont(o);a.fontSize===0&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);var s=i.getContext("2d",Vc);s.font=o;for(var l=r?n.wordWrap(t,e,i):t,u=l.split(/(?:\r\n|\r|\n)/),c=new Array(u.length),h=0,f=0;f<u.length;f++){var d=s.measureText(u[f]).width+(u[f].length-1)*e.letterSpacing;c[f]=d,h=Math.max(h,d)}var m=h+e.strokeThickness;e.dropShadow&&(m+=e.dropShadowDistance);var g=e.lineHeight||a.fontSize+e.strokeThickness,p=Math.max(g,a.fontSize+e.strokeThickness)+(u.length-1)*(g+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new n(t,e,m,p,u,c,g+e.leading,h,a)},n.wordWrap=function(t,e,r){r===void 0&&(r=n._canvas);for(var i=r.getContext("2d",Vc),o=0,a="",s="",l=Object.create(null),u=e.letterSpacing,c=e.whiteSpace,h=n.collapseSpaces(c),f=n.collapseNewlines(c),d=!h,m=e.wordWrapWidth+u,g=n.tokenize(t),p=0;p<g.length;p++){var v=g[p];if(n.isNewline(v)){if(!f){s+=n.addLine(a),d=!h,a="",o=0;continue}v=" "}if(h){var y=n.isBreakingSpace(v),_=n.isBreakingSpace(a[a.length-1]);if(y&&_)continue}var T=n.getFromCache(v,u,l,i);if(T>m)if(a!==""&&(s+=n.addLine(a),a="",o=0),n.canBreakWords(v,e.breakWords))for(var E=n.wordWrapSplit(v),S=0;S<E.length;S++){for(var x=E[S],O=1;E[S+O];){var b=E[S+O],A=x[x.length-1];if(!n.canBreakChars(A,b,v,S,e.breakWords))x+=b;else break;O++}S+=x.length-1;var N=n.getFromCache(x,u,l,i);N+o>m&&(s+=n.addLine(a),d=!1,a="",o=0),a+=x,o+=N}else{a.length>0&&(s+=n.addLine(a),a="",o=0);var U=p===g.length-1;s+=n.addLine(v,!U),d=!1,a="",o=0}else T+o>m&&(d=!1,s+=n.addLine(a),a="",o=0),(a.length>0||!n.isBreakingSpace(v)||d)&&(a+=v,o+=T)}return s+=n.addLine(a,!1),s},n.addLine=function(t,e){return e===void 0&&(e=!0),t=n.trimRight(t),t=e?t+`
`:t,t},n.getFromCache=function(t,e,r,i){var o=r[t];if(typeof o!="number"){var a=t.length*e;o=i.measureText(t).width+a,r[t]=o}return o},n.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},n.collapseNewlines=function(t){return t==="normal"},n.trimRight=function(t){if(typeof t!="string")return"";for(var e=t.length-1;e>=0;e--){var r=t[e];if(!n.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},n.isNewline=function(t){return typeof t!="string"?!1:n._newlines.indexOf(t.charCodeAt(0))>=0},n.isBreakingSpace=function(t,e){return typeof t!="string"?!1:n._breakingSpaces.indexOf(t.charCodeAt(0))>=0},n.tokenize=function(t){var e=[],r="";if(typeof t!="string")return e;for(var i=0;i<t.length;i++){var o=t[i],a=t[i+1];if(n.isBreakingSpace(o,a)||n.isNewline(o)){r!==""&&(e.push(r),r=""),e.push(o);continue}r+=o}return r!==""&&e.push(r),e},n.canBreakWords=function(t,e){return e},n.canBreakChars=function(t,e,r,i,o){return!0},n.wordWrapSplit=function(t){return t.split("")},n.measureFont=function(t){if(n._fonts[t])return n._fonts[t];var e={ascent:0,descent:0,fontSize:0},r=n._canvas,i=n._context;i.font=t;var o=n.METRICS_STRING+n.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(n.BASELINE_SYMBOL).width),l=Math.ceil(n.HEIGHT_MULTIPLIER*s);s=s*n.BASELINE_MULTIPLIER|0,r.width=a,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var u=i.getImageData(0,0,a,l).data,c=u.length,h=a*4,f=0,d=0,m=!1;for(f=0;f<s;++f){for(var g=0;g<h;g+=4)if(u[d+g]!==255){m=!0;break}if(!m)d+=h;else break}for(e.ascent=s-f,d=c-h,m=!1,f=l;f>s;--f){for(var g=0;g<h;g+=4)if(u[d+g]!==255){m=!0;break}if(!m)d-=h;else break}return e.descent=f-s,e.fontSize=e.ascent+e.descent,n._fonts[t]=e,e},n.clearMetrics=function(t){t===void 0&&(t=""),t?delete n._fonts[t]:n._fonts={}},Object.defineProperty(n,"_canvas",{get:function(){if(!n.__canvas){var t=void 0;try{var e=new OffscreenCanvas(0,0),r=e.getContext("2d",Vc);if(r&&r.measureText)return n.__canvas=e,e;t=Ot.ADAPTER.createCanvas()}catch{t=Ot.ADAPTER.createCanvas()}t.width=t.height=10,n.__canvas=t}return n.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(n,"_context",{get:function(){return n.__context||(n.__context=n._canvas.getContext("2d",Vc)),n.__context},enumerable:!1,configurable:!0}),n}();ni._fonts={};ni.METRICS_STRING="|q";ni.BASELINE_SYMBOL="M";ni.BASELINE_MULTIPLIER=1.4;ni.HEIGHT_MULTIPLIER=2;ni._newlines=[10,13];ni._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var d4={texture:!0,children:!1,baseTexture:!0},Ud=function(n){c4(t,n);function t(e,r,i){var o=this,a=!1;i||(i=Ot.ADAPTER.createCanvas(),a=!0),i.width=3,i.height=3;var s=Xt.from(i);return s.orig=new ae,s.trim=new ae,o=n.call(this,s)||this,o._ownCanvas=a,o.canvas=i,o.context=i.getContext("2d",{willReadFrequently:!0}),o._resolution=Ot.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=e,o.style=r,o.localStyleID=-1,o}return t.prototype.updateText=function(e){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var i=this.context,o=ni.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,s=o.height,l=o.lines,u=o.lineHeight,c=o.lineWidths,h=o.maxLineWidth,f=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+r.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=r.strokeThickness,i.textBaseline=r.textBaseline,i.lineJoin=r.lineJoin,i.miterLimit=r.miterLimit;for(var d,m,g=r.dropShadow?2:1,p=0;p<g;++p){var v=r.dropShadow&&p===0,y=v?Math.ceil(Math.max(1,s)+r.padding*2):0,_=y*this._resolution;if(v){i.fillStyle="black",i.strokeStyle="black";var T=r.dropShadowColor,E=Hs(typeof T=="number"?T:IA(T)),S=r.dropShadowBlur*this._resolution,x=r.dropShadowDistance*this._resolution;i.shadowColor="rgba("+E[0]*255+","+E[1]*255+","+E[2]*255+","+r.dropShadowAlpha+")",i.shadowBlur=S,i.shadowOffsetX=Math.cos(r.dropShadowAngle)*x,i.shadowOffsetY=Math.sin(r.dropShadowAngle)*x+_}else i.fillStyle=this._generateFillStyle(r,l,o),i.strokeStyle=r.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var O=(u-f.fontSize)/2;(!t.nextLineHeightBehavior||u-f.fontSize<0)&&(O=0);for(var b=0;b<l.length;b++)d=r.strokeThickness/2,m=r.strokeThickness/2+b*u+f.ascent+O,r.align==="right"?d+=h-c[b]:r.align==="center"&&(d+=(h-c[b])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(l[b],d+r.padding,m+r.padding-y,!0),r.fill&&this.drawLetterSpacing(l[b],d+r.padding,m+r.padding-y)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,r,i,o){o===void 0&&(o=!1);var a=this._style,s=a.letterSpacing,l=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(s===0||l){l&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),o?this.context.strokeText(e,r,i):this.context.fillText(e,r,i);return}for(var u=r,c=Array.from?Array.from(e):e.split(""),h=this.context.measureText(e).width,f=0,d=0;d<c.length;++d){var m=c[d];o?this.context.strokeText(m,u,i):this.context.fillText(m,u,i);for(var g="",p=d+1;p<c.length;++p)g+=c[p];f=this.context.measureText(g).width,u+=h-f+s,h=f}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var r=aU(e);r.data&&(e.width=r.width,e.height=r.height,this.context.putImageData(r.data,0,0))}var i=this._texture,o=this._style,a=o.trim?0:o.padding,s=i.baseTexture;i.trim.width=i._frame.width=e.width/this._resolution,i.trim.height=i._frame.height=e.height/this._resolution,i.trim.x=-a,i.trim.y=-a,i.orig.width=i._frame.width-a*2,i.orig.height=i._frame.height-a*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),i.updateUvs(),this.dirty=!1},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),n.prototype._render.call(this,e)},t.prototype.updateTransform=function(){this.updateText(!0),n.prototype.updateTransform.call(this)},t.prototype.getBounds=function(e,r){return this.updateText(!0),this._textureID===-1&&(e=!1),n.prototype.getBounds.call(this,e,r)},t.prototype.getLocalBounds=function(e){return this.updateText(!0),n.prototype.getLocalBounds.call(this,e)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,r,i){var o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,s=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,u=this.canvas.width/this._resolution-s-l*2,c=this.canvas.height/this._resolution-s-l*2,h=o.slice(),f=e.fillGradientStops.slice();if(!f.length)for(var d=h.length+1,m=1;m<d;++m)f.push(m/d);if(h.unshift(o[0]),f.unshift(0),h.push(o[o.length-1]),f.push(1),e.fillGradientType===Eu.LINEAR_VERTICAL){a=this.context.createLinearGradient(u/2,l,u/2,c+l);for(var g=i.fontProperties.fontSize+e.strokeThickness,m=0;m<r.length;m++){var p=i.lineHeight*(m-1)+g,v=i.lineHeight*m,y=v;m>0&&p>v&&(y=(v+p)/2);var _=v+g,T=i.lineHeight*(m+1),E=_;m+1<r.length&&T<_&&(E=(_+T)/2);for(var S=(E-y)/c,x=0;x<h.length;x++){var O=0;typeof f[x]=="number"?O=f[x]:O=x/h.length;var b=Math.min(1,Math.max(0,y/c+O*S));b=Number(b.toFixed(5)),a.addColorStop(b,h[x])}}}else{a=this.context.createLinearGradient(l,c/2,u+l,c/2);for(var A=h.length+1,N=1,m=0;m<h.length;m++){var U=void 0;typeof f[m]=="number"?U=f[m]:U=N/A,a.addColorStop(U,h[m]),N++}}return a},t.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},d4,e),n.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var r=gs(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var r=gs(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof wa?this._style=e:this._style=new wa(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(Yu);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ot.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hg=function(n,t){return hg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},hg(n,t)};function p4(n,t){hg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var m4=function(){function n(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},n}();function v4(n,t){var e=!1;if(n&&n._textures&&n._textures.length){for(var r=0;r<n._textures.length;r++)if(n._textures[r]instanceof Xt){var i=n._textures[r].baseTexture;t.indexOf(i)===-1&&(t.push(i),e=!0)}}return e}function g4(n,t){if(n.baseTexture instanceof ie){var e=n.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function _4(n,t){if(n._texture&&n._texture instanceof Xt){var e=n._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function y4(n,t){return t instanceof Ud?(t.updateText(!0),!0):!1}function x4(n,t){if(t instanceof wa){var e=t.toFontString();return ni.measureFont(e),!0}return!1}function b4(n,t){if(n instanceof Ud){t.indexOf(n.style)===-1&&t.push(n.style),t.indexOf(n)===-1&&t.push(n);var e=n._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function S4(n,t){return n instanceof wa?(t.indexOf(n)===-1&&t.push(n),!0):!1}var E4=function(){function n(t){var e=this;this.limiter=new m4(Ot.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(b4),this.registerFindHook(S4),this.registerFindHook(v4),this.registerFindHook(g4),this.registerFindHook(_4),this.registerUploadHook(y4),this.registerUploadHook(x4)}return n.prototype.upload=function(t,e){var r=this;return typeof t=="function"&&(e=t,t=null),e&&Rr("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){t&&r.add(t);var o=function(){e==null||e(),i()};r.queue.length?(r.completes.push(o),r.ticking||(r.ticking=!0,ln.system.addOnce(r.tick,r,Di.UTILITY))):o()})},n.prototype.tick=function(){setTimeout(this.delayedTick,0)},n.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed){for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)ln.system.addOnce(this.tick,this,Di.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var r=0,i=o.length;r<i;r++)o[r]()}},n.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},n.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},n.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof ti)for(var e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},n.prototype.destroy=function(){this.ticking&&ln.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},n}();function sM(n,t){return t instanceof ie?(t._glTextures[n.CONTEXT_UID]||n.texture.bind(t),!0):!1}function T4(n,t){if(!(t instanceof Ii))return!1;var e=t.geometry;t.finishPoly(),e.updateBatches();for(var r=e.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&sM(n,o.baseTexture)}return e.batchable||n.geometry.bind(e,t._resolveDirectShader(n)),!0}function w4(n,t){return n instanceof Ii?(t.push(n),!0):!1}var A4=function(n){p4(t,n);function t(e){var r=n.call(this,e)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(w4),r.registerUploadHook(sM),r.registerUploadHook(T4),r}return t.extension={name:"prepare",type:pe.RendererPlugin},t}(E4);/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var M4=function(){function n(t,e,r){r===void 0&&(r=null),this.linkedSheets=[],this._texture=t instanceof Xt?t:null,this.baseTexture=t instanceof ie?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n.prototype._updateResolution=function(t){t===void 0&&(t=null);var e=this.data.meta.scale,r=Vf(t,null);return r===null&&(r=e!==void 0?parseFloat(e):1),r!==1&&this.baseTexture.setResolution(r),r},n.prototype.parse=function(t){var e=this;return t&&Rr("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(r){e._callback=function(i){t==null||t(i),r(i)},e._batchIndex=0,e._frameKeys.length<=n.BATCH_SIZE?(e._processFrames(0),e._processAnimations(),e._parseComplete()):e._nextBatch()})},n.prototype._processFrames=function(t){for(var e=t,r=n.BATCH_SIZE;e-t<r&&e<this._frameKeys.length;){var i=this._frameKeys[e],o=this._frames[i],a=o.frame;if(a){var s=null,l=null,u=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,c=new ae(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);o.rotated?s=new ae(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):s=new ae(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new ae(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new Xt(this.baseTexture,s,c,l,o.rotated?2:0,o.anchor),Xt.addToCache(this.textures[i],i)}e++}},n.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var i=t[e][r];this.animations[e].push(this.textures[i])}}},n.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},n.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*n.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*n.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},n.prototype.destroy=function(t){var e;t===void 0&&(t=!1);for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)===null||e===void 0||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},n.BATCH_SIZE=1e3,n}(),C4=function(){function n(){}return n.use=function(t,e){var r,i,o=this,a=t.name+"_image";if(!t.data||t.type!==Le.TYPE.JSON||!t.data.frames||o.resources[a]){e();return}var s=(i=(r=t.data)===null||r===void 0?void 0:r.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(s))for(var l=function(m){if(typeof m!="string")return"continue";var g=m.replace(".json",""),p=vs.resolve(t.url.replace(o.baseUrl,""),m);if(o.resources[g]||Object.values(o.resources).some(function(y){return vs.format(vs.parse(y.url))===p}))return"continue";var v={crossOrigin:t.crossOrigin,loadType:Le.LOAD_TYPE.XHR,xhrType:Le.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};o.add(g,p,v)},u=0,c=s;u<c.length;u++){var h=c[u];l(h)}var f={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},d=n.getResourcePath(t,o.baseUrl);o.add(a,d,f,function(g){if(g.error){e(g.error);return}var p=new M4(g.texture,t.data,t.url);p.parse().then(function(){t.spritesheet=p,t.textures=p.textures,e()})})},n.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:vs.resolve(t.url.replace(e,""),t.data.meta.image)},n.extension=pe.Loader,n}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fg=function(n,t){return fg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},fg(n,t)};function lM(n,t){fg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var xl=new Te;(function(n){lM(t,n);function t(e,r,i){r===void 0&&(r=100),i===void 0&&(i=100);var o=n.call(this,e)||this;return o.tileTransform=new UA,o._width=r,o._height=i,o.uvMatrix=o.texture.uvMatrix||new Q_(e),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,r=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,r,i,o)},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ae),e=this._localBoundsRect),this._bounds.getRectangle(e)):n.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,xl);var r=this._width,i=this._height,o=-r*this.anchor._x;if(xl.x>=o&&xl.x<o+r){var a=-i*this.anchor._y;if(xl.y>=a&&xl.y<a+i)return!0}return!1},t.prototype.destroy=function(e){n.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,r){var i=e instanceof Xt?e:Xt.from(e,r);return new t(i,r.width,r.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t})(Yu);var R4=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Rb=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,P4=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,I4=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,O4=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Wc=new Xe,D4=function(n){lM(t,n);function t(e){var r=n.call(this,e)||this;return e.runners.contextChange.add(r),r.quad=new WA,r.state=Na.for2d(),r}return t.prototype.contextChange=function(){var e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=fo.from(Rb,R4,r),this.shader=e.context.webGLVersion>1?fo.from(I4,O4,r):fo.from(Rb,P4,r)},t.prototype.render=function(e){var r=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=e._width*-e.anchor.x,o[1]=o[3]=e._height*-e.anchor.y,o[2]=o[4]=e._width*(1-e.anchor.x),o[5]=o[7]=e._height*(1-e.anchor.y);var a=e.uvRespectAnchor?e.anchor.x:0,s=e.uvRespectAnchor?e.anchor.y:0;o=i.uvs,o[0]=o[6]=-a,o[1]=o[3]=-s,o[2]=o[4]=1-a,o[5]=o[7]=1-s,i.invalidate();var l=e._texture,u=l.baseTexture,c=u.alphaMode>0,h=e.tileTransform.localTransform,f=e.uvMatrix,d=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;d&&(u._glTextures[r.CONTEXT_UID]?d=u.wrapMode!==qr.CLAMP:u.wrapMode===qr.CLAMP&&(u.wrapMode=qr.REPEAT));var m=d?this.simpleShader:this.shader,g=l.width,p=l.height,v=e._width,y=e._height;Wc.set(h.a*g/v,h.b*g/y,h.c*p/v,h.d*p/y,h.tx/v,h.ty/y),Wc.invert(),d?Wc.prepend(f.mapCoord):(m.uniforms.uMapCoord=f.mapCoord.toArray(!0),m.uniforms.uClampFrame=f.uClampFrame,m.uniforms.uClampOffset=f.uClampOffset),m.uniforms.uTransform=Wc.toArray(!0),m.uniforms.uColor=LA(e.tint,e.worldAlpha,m.uniforms.uColor,c),m.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),m.uniforms.uSampler=l,r.shader.bind(m),r.geometry.bind(i),this.state.blendMode=DA(e.blendMode,c),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t.extension={name:"tilingSprite",type:pe.RendererPlugin},t}(Fd);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dg=function(n,t){return dg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},dg(n,t)};function ey(n,t){dg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var L4=function(){function n(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return n.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},n}(),sm=new Te,Pb=new Wh,Tu=function(n){ey(t,n);function t(e,r,i,o){o===void 0&&(o=Mr.TRIANGLES);var a=n.call(this)||this;return a.geometry=e,a.shader=r,a.state=i||Na.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=Ot.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var r=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===Mr.TRIANGLES&&r.length<t.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var r=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var o=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[o]),e.plugins[o].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,r=e.buffers[0],i=r.data,o=r._updateID;if(!(o===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var a=this.transform.worldTransform,s=a.a,l=a.b,u=a.c,c=a.d,h=a.tx,f=a.ty,d=this.vertexData,m=0;m<d.length/2;m++){var g=i[m*2],p=i[m*2+1];d[m*2]=s*g+u*p+h,d[m*2+1]=l*g+c*p+f}if(this._roundPixels)for(var v=Ot.RESOLUTION,m=0;m<d.length;++m)d[m]=Math.round((d[m]*v|0)/v);this.vertexDirty=o}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new L4(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,sm);for(var r=this.geometry.getBuffer("aVertexPosition").data,i=Pb.points,o=this.geometry.getIndex().data,a=o.length,s=this.drawMode===4?3:1,l=0;l+2<a;l+=s){var u=o[l]*2,c=o[l+1]*2,h=o[l+2]*2;if(i[0]=r[u],i[1]=r[u+1],i[2]=r[c],i[3]=r[c+1],i[4]=r[h],i[5]=r[h+1],Pb.contains(sm.x,sm.y))return!0}return!1},t.prototype.destroy=function(e){n.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(ti),N4=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,F4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,wu=function(n){ey(t,n);function t(e,r){var i=this,o={uSampler:e,alpha:1,uTextureMatrix:Xe.IDENTITY,uColor:new Float32Array([1,1,1,1])};return r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(o,r.uniforms),i=n.call(this,r.program||ju.from(F4,N4),o)||this,i._colorDirty=!1,i.uvMatrix=new Q_(e),i.batchable=r.program===void 0,i.pluginName=r.pluginName,i.tint=r.tint,i.alpha=r.alpha,i}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;LA(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(fo),Bd=function(n){ey(t,n);function t(e,r,i){var o=n.call(this)||this,a=new Ve(e),s=new Ve(r,!0),l=new Ve(i,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,Bt.FLOAT).addAttribute("aTextureCoord",s,2,!1,Bt.FLOAT).addIndex(l),o._updateId=-1,o}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}($u);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pg=function(n,t){return pg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},pg(n,t)};function U4(n,t){pg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var qf=function(){function n(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return n}(),B4=function(){function n(){}return n.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},n.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in e){var o=e[i].match(/^[a-z]+/gm)[0],a=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var l in a){var u=a[l].split("="),c=u[0],h=u[1].replace(/"/gm,""),f=parseFloat(h),d=isNaN(f)?h:f;s[c]=d}r[o].push(s)}var m=new qf;return r.info.forEach(function(g){return m.info.push({face:g.face,size:parseInt(g.size,10)})}),r.common.forEach(function(g){return m.common.push({lineHeight:parseInt(g.lineHeight,10)})}),r.page.forEach(function(g){return m.page.push({id:parseInt(g.id,10),file:g.file})}),r.char.forEach(function(g){return m.char.push({id:parseInt(g.id,10),page:parseInt(g.page,10),x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xoffset:parseInt(g.xoffset,10),yoffset:parseInt(g.yoffset,10),xadvance:parseInt(g.xadvance,10)})}),r.kerning.forEach(function(g){return m.kerning.push({first:parseInt(g.first,10),second:parseInt(g.second,10),amount:parseInt(g.amount,10)})}),r.distanceField.forEach(function(g){return m.distanceField.push({distanceRange:parseInt(g.distanceRange,10),fieldType:g.fieldType})}),m},n}(),mg=function(){function n(){}return n.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},n.parse=function(t){for(var e=new qf,r=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField"),u=0;u<r.length;u++)e.info.push({face:r[u].getAttribute("face"),size:parseInt(r[u].getAttribute("size"),10)});for(var u=0;u<i.length;u++)e.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(var u=0;u<o.length;u++)e.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(var u=0;u<a.length;u++){var c=a[u];e.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(var u=0;u<s.length;u++)e.kerning.push({first:parseInt(s[u].getAttribute("first"),10),second:parseInt(s[u].getAttribute("second"),10),amount:parseInt(s[u].getAttribute("amount"),10)});for(var u=0;u<l.length;u++)e.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return e},n}(),G4=function(){function n(){}return n.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var e=new globalThis.DOMParser().parseFromString(t,"text/xml");return mg.test(e)}return!1},n.parse=function(t){var e=new globalThis.DOMParser().parseFromString(t,"text/xml");return mg.parse(e)},n}(),lm=[B4,mg,G4];function uM(n){for(var t=0;t<lm.length;t++)if(lm[t].test(n))return lm[t];return null}function k4(n,t,e,r,i,o){var a=e.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var s,l=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,c=n.width/r-l-u*2,h=n.height/r-l-u*2,f=a.slice(),d=e.fillGradientStops.slice();if(!d.length)for(var m=f.length+1,g=1;g<m;++g)d.push(g/m);if(f.unshift(a[0]),d.unshift(0),f.push(a[a.length-1]),d.push(1),e.fillGradientType===Eu.LINEAR_VERTICAL){s=t.createLinearGradient(c/2,u,c/2,h+u);for(var p=0,v=o.fontProperties.fontSize+e.strokeThickness,y=v/h,g=0;g<i.length;g++)for(var _=o.lineHeight*g,T=0;T<f.length;T++){var E=0;typeof d[T]=="number"?E=d[T]:E=T/f.length;var S=_/h+E*y,x=Math.max(p,S);x=Math.min(x,1),s.addColorStop(x,f[T]),p=x}}else{s=t.createLinearGradient(u,h/2,c+u,h/2);for(var O=f.length+1,b=1,g=0;g<f.length;g++){var A=void 0;typeof d[g]=="number"?A=d[g]:A=b/O,s.addColorStop(A,f[g]),b++}}return s}function H4(n,t,e,r,i,o,a){var s=e.text,l=e.fontProperties;t.translate(r,i),t.scale(o,o);var u=a.strokeThickness/2,c=-(a.strokeThickness/2);if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=k4(n,t,a,o,[s],e),t.strokeStyle=a.stroke,a.dropShadow){var h=a.dropShadowColor,f=Hs(typeof h=="number"?h:IA(h)),d=a.dropShadowBlur*o,m=a.dropShadowDistance*o;t.shadowColor="rgba("+f[0]*255+","+f[1]*255+","+f[2]*255+","+a.dropShadowAlpha+")",t.shadowBlur=d,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*m,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,u,c+e.lineHeight-l.descent),a.fill&&t.fillText(s,u,c+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function cM(n){return Array.from?Array.from(n):n.split("")}function z4(n){typeof n=="string"&&(n=[n]);for(var t=[],e=0,r=n.length;e<r;e++){var i=n[e];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,l=a;s<=l;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,cM(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}function Xh(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}var Zi=function(){function n(t,e,r){var i,o,a=t.info[0],s=t.common[0],l=t.page[0],u=t.distanceField[0],c=Vf(l.file),h={};this._ownsTextures=r,this.font=a.face,this.size=a.size,this.lineHeight=s.lineHeight/c,this.chars={},this.pageTextures=h;for(var f=0;f<t.page.length;f++){var d=t.page[f],m=d.id,g=d.file;h[m]=e instanceof Array?e[f]:e[g],u!=null&&u.fieldType&&u.fieldType!=="none"&&(h[m].baseTexture.alphaMode=Dr.NO_PREMULTIPLIED_ALPHA,h[m].baseTexture.mipmap=Or.OFF)}for(var f=0;f<t.char.length;f++){var p=t.char[f],m=p.id,v=p.page,y=t.char[f],_=y.x,T=y.y,E=y.width,S=y.height,x=y.xoffset,O=y.yoffset,b=y.xadvance;_/=c,T/=c,E/=c,S/=c,x/=c,O/=c,b/=c;var A=new ae(_+h[v].frame.x/c,T+h[v].frame.y/c,E,S);this.chars[m]={xOffset:x,yOffset:O,xAdvance:b,kerning:{},texture:new Xt(h[v].baseTexture,A),page:v}}for(var f=0;f<t.kerning.length;f++){var N=t.kerning[f],U=N.first,et=N.second,L=N.amount;U/=c,et/=c,L/=c,this.chars[et]&&(this.chars[et].kerning[U]=L)}this.distanceFieldRange=u==null?void 0:u.distanceRange,this.distanceFieldType=(o=(i=u==null?void 0:u.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&o!==void 0?o:"none"}return n.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},n.install=function(t,e,r){var i;if(t instanceof qf)i=t;else{var o=uM(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}e instanceof Xt&&(e=[e]);var a=new n(i,e,r);return n.available[a.font]=a,a},n.uninstall=function(t){var e=n.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete n.available[t]},n.from=function(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},n.defaultOptions,r),o=i.chars,a=i.padding,s=i.resolution,l=i.textureWidth,u=i.textureHeight,c=z4(o),h=e instanceof wa?e:new wa(e),f=l,d=new qf;d.info[0]={face:h.fontFamily,size:h.fontSize},d.common[0]={lineHeight:h.fontSize};for(var m=0,g=0,p,v,y,_=0,T=[],E=0;E<c.length;E++){p||(p=Ot.ADAPTER.createCanvas(),p.width=l,p.height=u,v=p.getContext("2d"),y=new ie(p,{resolution:s}),T.push(new Xt(y)),d.page.push({id:T.length-1,file:""}));var S=c[E],x=ni.measureText(S,h,!1,p),O=x.width,b=Math.ceil(x.height),A=Math.ceil((h.fontStyle==="italic"?2:1)*O);if(g>=u-b*s){if(g===0)throw new Error("[BitmapFont] textureHeight "+u+"px is too small "+("(fontFamily: '"+h.fontFamily+"', fontSize: "+h.fontSize+"px, char: '"+S+"')"));--E,p=null,v=null,y=null,g=0,m=0,_=0;continue}if(_=Math.max(b+x.fontProperties.descent,_),A*s+m>=f){if(m===0)throw new Error("[BitmapFont] textureWidth "+l+"px is too small "+("(fontFamily: '"+h.fontFamily+"', fontSize: "+h.fontSize+"px, char: '"+S+"')"));--E,g+=_*s,g=Math.ceil(g),m=0,_=0;continue}H4(p,v,x,m,g,s,h);var N=Xh(x.text);d.char.push({id:N,page:T.length-1,x:m/s,y:g/s,width:A,height:b,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),m+=(A+2*a)*s,m=Math.ceil(m)}if(!(r!=null&&r.skipKerning))for(var E=0,U=c.length;E<U;E++)for(var et=c[E],L=0;L<U;L++){var D=c[L],B=v.measureText(et).width,q=v.measureText(D).width,Q=v.measureText(et+D).width,rt=Q-(B+q);rt&&d.kerning.push({first:Xh(et),second:Xh(D),amount:rt})}var $=new n(d,T,!0);return n.available[t]!==void 0&&n.uninstall(t),n.available[t]=$,$},n.ALPHA=[["a","z"],["A","Z"]," "],n.NUMERIC=[["0","9"]],n.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],n.ASCII=[[" ","~"]],n.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:n.ALPHANUMERIC},n.available={},n}(),V4=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,W4=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,Ib=[],Ob=[],Db=[];(function(n){U4(t,n);function t(e,r){r===void 0&&(r={});var i=n.call(this)||this;i._tint=16777215;var o=Object.assign({},t.styleDefaults,r),a=o.align,s=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,h=o.fontSize;if(!Zi.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._font=void 0,i._fontName=c,i._fontSize=h,i.text=e,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new _s(function(){i.dirty=!0},i,0,0),i._roundPixels=Ot.ROUND_PIXELS,i.dirty=!0,i._resolution=Ot.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return t.prototype.updateText=function(){for(var e,r=Zi.available[this._fontName],i=this.fontSize,o=i/r.size,a=new Te,s=[],l=[],u=[],c=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=cM(c),f=this._maxWidth*r.size/i,d=r.distanceFieldType==="none"?Ib:Ob,m=null,g=0,p=0,v=0,y=-1,_=0,T=0,E=0,S=0,x=0;x<h.length;x++){var O=h[x],b=Xh(O);if(/(?:\s)/.test(O)&&(y=x,_=g,S++),O==="\r"||O===`
`){l.push(g),u.push(-1),p=Math.max(p,g),++v,++T,a.x=0,a.y+=r.lineHeight,m=null,S=0;continue}var A=r.chars[b];if(A){m&&A.kerning[m]&&(a.x+=A.kerning[m]);var N=Db.pop()||{texture:Xt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Te};N.texture=A.texture,N.line=v,N.charCode=b,N.position.x=a.x+A.xOffset+this._letterSpacing/2,N.position.y=a.y+A.yOffset,N.prevSpaces=S,s.push(N),g=N.position.x+Math.max(A.xAdvance-A.xOffset,A.texture.orig.width),a.x+=A.xAdvance+this._letterSpacing,E=Math.max(E,A.yOffset+A.texture.height),m=b,y!==-1&&f>0&&a.x>f&&(++T,Is(s,1+y-T,1+x-y),x=y,y=-1,l.push(_),u.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,_),v++,a.x=0,a.y+=r.lineHeight,m=null,S=0)}}var U=h[h.length-1];U!=="\r"&&U!==`
`&&(/(?:\s)/.test(U)&&(g=_),l.push(g),p=Math.max(p,g),u.push(-1));for(var et=[],x=0;x<=v;x++){var L=0;this._align==="right"?L=p-l[x]:this._align==="center"?L=(p-l[x])/2:this._align==="justify"&&(L=u[x]<0?0:(p-l[x])/u[x]),et.push(L)}var D=s.length,B={},q=[],Q=this._activePagesMeshData;d.push.apply(d,Q);for(var x=0;x<D;x++){var rt=s[x].texture,$=rt.baseTexture.uid;if(!B[$]){var k=d.pop();if(!k){var pt=new Bd,J=void 0,it=void 0;r.distanceFieldType==="none"?(J=new wu(Xt.EMPTY),it=Gt.NORMAL):(J=new wu(Xt.EMPTY,{program:ju.from(W4,V4),uniforms:{uFWidth:0}}),it=Gt.NORMAL_NPM);var vt=new Tu(pt,J);vt.blendMode=it,k={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:vt,vertices:null,uvs:null,indices:null}}k.index=0,k.indexCount=0,k.vertexCount=0,k.uvsCount=0,k.total=0;var gt=this._textureCache;gt[$]=gt[$]||new Xt(rt.baseTexture),k.mesh.texture=gt[$],k.mesh.tint=this._tint,q.push(k),B[$]=k}B[$].total++}for(var x=0;x<Q.length;x++)q.indexOf(Q[x])===-1&&this.removeChild(Q[x].mesh);for(var x=0;x<q.length;x++)q[x].mesh.parent!==this&&this.addChild(q[x].mesh);this._activePagesMeshData=q;for(var x in B){var k=B[x],W=k.total;if(!(((e=k.indices)===null||e===void 0?void 0:e.length)>6*W)||k.vertices.length<Tu.BATCHABLE_SIZE*2)k.vertices=new Float32Array(4*2*W),k.uvs=new Float32Array(4*2*W),k.indices=new Uint16Array(6*W);else for(var ft=k.total,at=k.vertices,mt=ft*4*2;mt<at.length;mt++)at[mt]=0;k.mesh.size=6*W}for(var x=0;x<D;x++){var O=s[x],_t=O.position.x+et[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(_t=Math.round(_t));var X=_t*o,R=O.position.y*o,rt=O.texture,C=B[rt.baseTexture.uid],z=rt.frame,Y=rt._uvs,K=C.index++;C.indices[K*6+0]=0+K*4,C.indices[K*6+1]=1+K*4,C.indices[K*6+2]=2+K*4,C.indices[K*6+3]=0+K*4,C.indices[K*6+4]=2+K*4,C.indices[K*6+5]=3+K*4,C.vertices[K*8+0]=X,C.vertices[K*8+1]=R,C.vertices[K*8+2]=X+z.width*o,C.vertices[K*8+3]=R,C.vertices[K*8+4]=X+z.width*o,C.vertices[K*8+5]=R+z.height*o,C.vertices[K*8+6]=X,C.vertices[K*8+7]=R+z.height*o,C.uvs[K*8+0]=Y.x0,C.uvs[K*8+1]=Y.y0,C.uvs[K*8+2]=Y.x1,C.uvs[K*8+3]=Y.y1,C.uvs[K*8+4]=Y.x2,C.uvs[K*8+5]=Y.y2,C.uvs[K*8+6]=Y.x3,C.uvs[K*8+7]=Y.y3}this._textWidth=p*o,this._textHeight=(a.y+r.lineHeight)*o;for(var x in B){var k=B[x];if(this.anchor.x!==0||this.anchor.y!==0)for(var ct=0,M=this._textWidth*this.anchor.x,w=this._textHeight*this.anchor.y,G=0;G<k.total;G++)k.vertices[ct++]-=M,k.vertices[ct++]-=w,k.vertices[ct++]-=M,k.vertices[ct++]-=w,k.vertices[ct++]-=M,k.vertices[ct++]-=w,k.vertices[ct++]-=M,k.vertices[ct++]-=w;this._maxLineHeight=E*o;var j=k.mesh.geometry.getBuffer("aVertexPosition"),tt=k.mesh.geometry.getBuffer("aTextureCoord"),P=k.mesh.geometry.getIndex();j.data=k.vertices,tt.data=k.uvs,P.data=k.indices,j.update(),tt.update(),P.update()}for(var x=0;x<s.length;x++)Db.push(s[x]);this._font=r,this.dirty=!1},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var r=Zi.available[this._fontName],i=r.distanceFieldRange,o=r.distanceFieldType,a=r.size;if(o!=="none")for(var s=this.worldTransform,l=s.a,u=s.b,c=s.c,h=s.d,f=Math.sqrt(l*l+u*u),d=Math.sqrt(c*c+h*h),m=(Math.abs(f)+Math.abs(d))/2,g=this.fontSize/a,p=0,v=this._activePagesMeshData;p<v.length;p++){var y=v[p];y.mesh.shader.uniforms.uFWidth=m*i*g*this._resolution}n.prototype._render.call(this,e)},t.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){var e=Zi.available[this._fontName];if(!e)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!Zi.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){var e;return(e=this._fontSize)!==null&&e!==void 0?e:Zi.available[this._fontName].size},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e){var r=this._textureCache,i=Zi.available[this._fontName],o=i.distanceFieldType==="none"?Ib:Ob;o.push.apply(o,this._activePagesMeshData);for(var a=0,s=this._activePagesMeshData;a<s.length;a++){var l=s[a];this.removeChild(l.mesh)}this._activePagesMeshData=[],o.filter(function(h){return r[h.mesh.texture.baseTexture.uid]}).forEach(function(h){h.mesh.texture=Xt.EMPTY});for(var u in r){var c=r[u];c.destroy(),delete r[u]}this._font=null,this._textureCache=null,n.prototype.destroy.call(this,e)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t})(ti);var X4=function(){function n(){}return n.add=function(){Le.setExtensionXhrType("fnt",Le.XHR_RESPONSE_TYPE.TEXT)},n.use=function(t,e){var r=uM(t.data);if(!r){e();return}for(var i=n.getBaseUrl(this,t),o=r.parse(t.data),a={},s=function(g){a[g.metadata.pageFile]=g.texture,Object.keys(a).length===o.page.length&&(t.bitmapFont=Zi.install(o,a,!0),e())},l=0;l<o.page.length;++l){var u=o.page[l].file,c=i+u,h=!1;for(var f in this.resources){var d=this.resources[f];if(d.url===c){d.metadata.pageFile=u,d.texture?s(d):d.onAfterMiddleware.add(s),h=!0;break}}if(!h){var m={crossOrigin:t.crossOrigin,loadType:Le.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,m,s)}}},n.getBaseUrl=function(t,e){var r=e.isDataUrl?"":n.dirname(e.url);return e.isDataUrl&&(r==="."&&(r=""),t.baseUrl&&r&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(r+="/")),r=r.replace(t.baseUrl,""),r&&r.charAt(r.length-1)!=="/"&&(r+="/"),r},n.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":e===""?"/":e},n.extension=pe.Loader,n}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vg=function(n,t){return vg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},vg(n,t)};function $4(n,t){vg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var j4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(n){$4(t,n);function t(e){e===void 0&&(e=1);var r=n.call(this,kB,j4,{uAlpha:1})||this;return r.alpha=e,r}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t})(So);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gg=function(n,t){return gg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},gg(n,t)};function hM(n,t){gg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Y4=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function q4(n,t){var e=Math.ceil(n/2),r=Y4,i="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<n;a++){var s=o.replace("%index%",a.toString());s=s.replace("%sampleIndex%",a-(e-1)+".0"),i+=s,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}var K4={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Z4=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function J4(n){for(var t=K4[n],e=t.length,r=Z4,i="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,s=0;s<n;s++){var l=o.replace("%index%",s.toString());a=s,s>=e&&(a=n-s-1),l=l.replace("%value%",t[a].toString()),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}var Lb=function(n){hM(t,n);function t(e,r,i,o,a){r===void 0&&(r=8),i===void 0&&(i=4),o===void 0&&(o=Ot.FILTER_RESOLUTION),a===void 0&&(a=5);var s=this,l=q4(a,e),u=J4(a);return s=n.call(this,l,u)||this,s.horizontal=e,s.resolution=o,s._quality=0,s.quality=i,s.blur=r,s}return t.prototype.apply=function(e,r,i,o){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/r.width):this.uniforms.strength=1/i.height*(i.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,i,o);else{var a=e.getFilterTexture(),s=e.renderer,l=r,u=a;this.state.blend=!1,e.applyFilter(this,l,u,br.CLEAR);for(var c=1;c<this.passes-1;c++){e.bindAndClear(l,br.BLIT),this.uniforms.uSampler=u;var h=u;u=l,l=h,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,i,o),e.returnFilterTexture(a)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2,this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(So);(function(n){hM(t,n);function t(e,r,i,o){e===void 0&&(e=8),r===void 0&&(r=4),i===void 0&&(i=Ot.FILTER_RESOLUTION),o===void 0&&(o=5);var a=n.call(this)||this;return a.blurXFilter=new Lb(!0,e,r,i,o),a.blurYFilter=new Lb(!1,e,r,i,o),a.resolution=i,a.quality=r,a.blur=e,a.repeatEdgePixels=!1,a}return t.prototype.apply=function(e,r,i,o){var a=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(a&&s){var l=e.getFilterTexture();this.blurXFilter.apply(e,r,l,br.CLEAR),this.blurYFilter.apply(e,l,i,o),e.returnFilterTexture(l)}else s?this.blurYFilter.apply(e,r,i,o):this.blurXFilter.apply(e,r,i,o)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),t})(So);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _g=function(n,t){return _g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},_g(n,t)};function Q4(n,t){_g(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var tk=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Nb=function(n){Q4(t,n);function t(){var e=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return e=n.call(this,JA,tk,r)||this,e.alpha=1,e}return t.prototype._loadMatrix=function(e,r){r===void 0&&(r=!1);var i=e;r&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(e,r,i){return e[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],e[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],e[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],e[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],e[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],e[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],e[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],e[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],e[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],e[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],e[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],e[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],e[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],e[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],e[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],e[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],e[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],e[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],e[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],e[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],e},t.prototype._colorMatrix=function(e){var r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},t.prototype.brightness=function(e,r){var i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.tint=function(e,r){var i=e>>16&255,o=e>>8&255,a=e&255,s=[i/255,0,0,0,0,0,o/255,0,0,0,0,0,a/255,0,0,0,0,0,1,0];this._loadMatrix(s,r)},t.prototype.greyscale=function(e,r){var i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.blackAndWhite=function(e){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.hue=function(e,r){e=(e||0)/180*Math.PI;var i=Math.cos(e),o=Math.sin(e),a=Math.sqrt,s=1/3,l=a(s),u=i+(1-i)*s,c=s*(1-i)-l*o,h=s*(1-i)+l*o,f=s*(1-i)+l*o,d=i+s*(1-i),m=s*(1-i)-l*o,g=s*(1-i)-l*o,p=s*(1-i)+l*o,v=i+s*(1-i),y=[u,c,h,0,0,f,d,m,0,0,g,p,v,0,0,0,0,0,1,0];this._loadMatrix(y,r)},t.prototype.contrast=function(e,r){var i=(e||0)+1,o=-.5*(i-1),a=[i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0];this._loadMatrix(a,r)},t.prototype.saturate=function(e,r){e===void 0&&(e=0);var i=e*2/3+1,o=(i-1)*-.5,a=[i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0];this._loadMatrix(a,r)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){var r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.sepia=function(e){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.technicolor=function(e){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.polaroid=function(e){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.toBGR=function(e){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.kodachrome=function(e){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.browni=function(e){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.vintage=function(e){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.colorTone=function(e,r,i,o,a){e=e||.2,r=r||.15,i=i||16770432,o=o||3375104;var s=(i>>16&255)/255,l=(i>>8&255)/255,u=(i&255)/255,c=(o>>16&255)/255,h=(o>>8&255)/255,f=(o&255)/255,d=[.3,.59,.11,0,0,s,l,u,e,0,c,h,f,r,0,s-c,l-h,u-f,0,0];this._loadMatrix(d,a)},t.prototype.night=function(e,r){e=e||.1;var i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.predator=function(e,r){var i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.lsd=function(e){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(So);Nb.prototype.grayscale=Nb.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yg=function(n,t){return yg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},yg(n,t)};function ek(n,t){yg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var nk=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,rk=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(n){ek(t,n);function t(e,r){var i=this,o=new Xe;return e.renderable=!1,i=n.call(this,rk,nk,{mapSampler:e._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=e,i.maskMatrix=o,r==null&&(r=20),i.scale=new Te(r,r),i}return t.prototype.apply=function(e,r,i,o){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,s=Math.sqrt(a.a*a.a+a.b*a.b),l=Math.sqrt(a.c*a.c+a.d*a.d);s!==0&&l!==0&&(this.uniforms.rotation[0]=a.a/s,this.uniforms.rotation[1]=a.b/s,this.uniforms.rotation[2]=a.c/l,this.uniforms.rotation[3]=a.d/l),e.applyFilter(this,r,i,o)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),t})(So);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xg=function(n,t){return xg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},xg(n,t)};function ik(n,t){xg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ok=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,ak=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(n){ik(t,n);function t(){return n.call(this,ok,ak)||this}return t})(So);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bg=function(n,t){return bg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},bg(n,t)};function sk(n,t){bg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var lk=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(n){sk(t,n);function t(e,r){e===void 0&&(e=.5),r===void 0&&(r=Math.random());var i=n.call(this,JA,lk,{uNoise:0,uSeed:0})||this;return i.noise=e,i.seed=r,i}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),t})(So);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fM=new Xe;Ge.prototype._cacheAsBitmap=!1;Ge.prototype._cacheData=null;Ge.prototype._cacheAsBitmapResolution=null;Ge.prototype._cacheAsBitmapMultisample=we.NONE;var uk=function(){function n(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return n}();Object.defineProperties(Ge.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){if(this._cacheAsBitmap!==n){this._cacheAsBitmap=n;var t;n?(this._cacheData||(this._cacheData=new uk),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});Ge.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Ge.prototype._initCachedDisplayObject=function(t){var e;if(!(this._cacheData&&this._cacheData.sprite)){var r=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;i.pad(o)}i.ceil(Ot.RESOLUTION);var a=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),l=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,c=Ta.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(e=this.cacheAsBitmapMultisample)!==null&&e!==void 0?e:t.multisample}),h="cacheAsBitmap_"+Ea();this._cacheData.textureCacheId=h,ie.addToCache(c.baseTexture,h),Xt.addToCache(c,h);var f=this.transform.localTransform.copyTo(fM).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:c,clear:!0,transform:f,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(a,s,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var d=new Yu(c);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(i.x/i.width),d.anchor.y=-(i.y/i.height),d.alpha=r,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};Ge.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Ge.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=t.context,o=t._projTransform;e.ceil(Ot.RESOLUTION);var a=Ta.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+Ea();this._cacheData.textureCacheId=s,ie.addToCache(a.baseTexture,s),Xt.addToCache(a,s);var l=fM;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:a,clear:!0,transform:l,skipUpdateTransform:!1}),t.context=i,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var u=new Yu(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};Ge.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ge.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ge.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ie.removeFromCache(this._cacheData.textureCacheId),Xt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ge.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ge.prototype.name=null;ti.prototype.getChildByName=function(t,e){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===t)return this.children[r];if(e)for(var r=0,i=this.children.length;r<i;r++){var o=this.children[r];if(o.getChildByName){var a=o.getChildByName(t,!0);if(a)return a}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ge.prototype.getGlobalPosition=function(t,e){return t===void 0&&(t=new Te),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ck=function(){function n(){}return n.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){e.cancelResize();var r,i;if(e._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{var o=e._resizeTo,a=o.clientWidth,s=o.clientHeight;r=a,i=s}e.renderer.resize(r,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},n.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},n.extension=pe.Application,n}(),dM=function(){function n(t){var e=this;this.stage=new ti,t=Object.assign({forceCanvas:!1},t),this.renderer=UB(t),n._plugins.forEach(function(r){r.init.call(e,t)})}return n.registerPlugin=function(t){Rr("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Gi.add({type:pe.Application,ref:t})},n.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(n.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),n.prototype.destroy=function(t,e){var r=this,i=n._plugins.slice(0);i.reverse(),i.forEach(function(o){o.destroy.call(r)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},n._plugins=[],n}();Gi.handleByList(pe.Application,dM._plugins);Gi.add(ck);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sg=function(n,t){return Sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},Sg(n,t)};function tl(n,t){Sg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var hk=function(n){tl(t,n);function t(e,r,i,o){e===void 0&&(e=100),r===void 0&&(r=100),i===void 0&&(i=10),o===void 0&&(o=10);var a=n.call(this)||this;return a.segWidth=i,a.segHeight=o,a.width=e,a.height=r,a.build(),a}return t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,r=[],i=[],o=[],a=this.segWidth-1,s=this.segHeight-1,l=this.width/a,u=this.height/s,c=0;c<e;c++){var h=c%this.segWidth,f=c/this.segWidth|0;r.push(h*l,f*u),i.push(h/a,f/s)}for(var d=a*s,c=0;c<d;c++){var m=c%a,g=c/a|0,p=g*this.segWidth+m,v=g*this.segWidth+m+1,y=(g+1)*this.segWidth+m,_=(g+1)*this.segWidth+m+1;o.push(p,v,y,v,_,y)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(Bd),fk=function(n){tl(t,n);function t(e,r,i){e===void 0&&(e=200),i===void 0&&(i=0);var o=n.call(this,new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6))||this;return o.points=r,o._width=e,o.textureScale=i,o.build(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var r=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(e.length<1)){r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),i.data=new Float32Array(e.length*4),o.data=new Uint16Array((e.length-1)*6));var a=i.data,s=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var l=0,u=e[0],c=this._width*this.textureScale,h=e.length,f=0;f<h;f++){var d=f*4;if(this.textureScale>0){var m=u.x-e[f].x,g=u.y-e[f].y,p=Math.sqrt(m*m+g*g);u=e[f],l+=p/c}else l=f/(h-1);a[d]=l,a[d+1]=0,a[d+2]=l,a[d+3]=1}for(var v=0,f=0;f<h-1;f++){var d=f*2;s[v++]=d,s[v++]=d+1,s[v++]=d+2,s[v++]=d+2,s[v++]=d+1,s[v++]=d+3}i.update(),o.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var r=e[0],i,o=0,a=0,s=this.buffers[0].data,l=e.length,u=0;u<l;u++){var c=e[u],h=u*4;u<e.length-1?i=e[u+1]:i=c,a=-(i.x-r.x),o=i.y-r.y;var f=Math.sqrt(o*o+a*a),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=f,a/=f,o*=d,a*=d,s[h]=c.x+o,s[h+1]=c.y+a,s[h+2]=c.x-o,s[h+3]=c.y-a,r=c}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(Bd);(function(n){tl(t,n);function t(e,r,i){i===void 0&&(i=0);var o=this,a=new fk(e.height,r,i),s=new wu(e);return i>0&&(e.baseTexture.wrapMode=qr.REPEAT),o=n.call(this,a,s)||this,o.autoUpdate=!0,o}return t.prototype._render=function(e){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),n.prototype._render.call(this,e)},t})(Tu);var dk=function(n){tl(t,n);function t(e,r,i){var o=this,a=new hk(e.width,e.height,r,i),s=new wu(Xt.WHITE);return o=n.call(this,a,s)||this,o.texture=e,o.autoResize=!0,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,r=this.shader.texture,i=r.width,o=r.height;this.autoResize&&(e.width!==i||e.height!==o)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),n.prototype._render.call(this,e)},t.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),n.prototype.destroy.call(this,e)},t}(Tu);(function(n){tl(t,n);function t(e,r,i,o,a){e===void 0&&(e=Xt.EMPTY);var s=this,l=new Bd(r,i,o);l.getBuffer("aVertexPosition").static=!1;var u=new wu(e);return s=n.call(this,l,u,null,a)||this,s.autoUpdate=!0,s}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),n.prototype._render.call(this,e)},t})(Tu);var Xc=10;(function(n){tl(t,n);function t(e,r,i,o,a){r===void 0&&(r=Xc),i===void 0&&(i=Xc),o===void 0&&(o=Xc),a===void 0&&(a=Xc);var s=n.call(this,Xt.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=r,s._rightWidth=o,s._topHeight=i,s._bottomHeight=a,s.texture=e,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,r=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,r=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e,i=this._topHeight+this._bottomHeight,o=this._height>i?1:this._height/i,a=Math.min(r,o);return a},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,r=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var i=1/this._origWidth,o=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=i*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-i*this._rightWidth,r[9]=r[11]=r[13]=r[15]=o*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t})(dk);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Eg=function(n,t){return Eg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},Eg(n,t)};function pk(n,t){Eg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}(function(n){pk(t,n);function t(e,r){r===void 0&&(r=!0);var i=n.call(this,e[0]instanceof Xt?e[0]:e[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=r,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=e,i}return t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ln.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ln.shared.add(this.update,this,Di.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){if(this._playing){var r=this.animationSpeed*e,i=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=r/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(e){this.stop(),n.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var r=[],i=0;i<e.length;++i)r.push(Xt.from(e[i]));return new t(r)},t.fromImages=function(e){for(var r=[],i=0;i<e.length;++i)r.push(Xt.from(e[i]));return new t(r)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof Xt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(ln.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ln.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t})(Yu);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Gi.add(ZB,oG,nG,ZG,A4,tM,D4,X4,SG,jG,YG,C4,mU,dG);function mk(n){return yT()?(sR(n),!0):!1}function pM(n){return typeof n=="function"?n():Ri(n)}const vk=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const gk=Object.prototype.toString,_k=n=>gk.call(n)==="[object Object]",yk=()=>{};function xk(n){var t;const e=pM(n);return(t=e==null?void 0:e.$el)!=null?t:e}const mM=vk?window:void 0;function $c(...n){let t,e,r,i;if(typeof n[0]=="string"||Array.isArray(n[0])?([e,r,i]=n,t=mM):[t,e,r,i]=n,!t)return yk;Array.isArray(e)||(e=[e]),Array.isArray(r)||(r=[r]);const o=[],a=()=>{o.forEach(c=>c()),o.length=0},s=(c,h,f,d)=>(c.addEventListener(h,f,d),()=>c.removeEventListener(h,f,d)),l=Pi(()=>[xk(t),pM(i)],([c,h])=>{if(a(),!c)return;const f=_k(h)?{...h}:h;o.push(...e.flatMap(d=>r.map(m=>s(c,d,m,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return mk(u),u}const bk={page:n=>[n.pageX,n.pageY],client:n=>[n.clientX,n.clientY],screen:n=>[n.screenX,n.screenY],movement:n=>n instanceof Touch?null:[n.movementX,n.movementY]};function Sk(n={}){const{type:t="page",touch:e=!0,resetOnTouchEnds:r=!1,initialValue:i={x:0,y:0},window:o=mM,target:a=o,scroll:s=!0,eventFilter:l}=n;let u=null;const c=Be(i.x),h=Be(i.y),f=Be(null),d=typeof t=="function"?t:bk[t],m=E=>{const S=d(E);u=E,S&&([c.value,h.value]=S,f.value="mouse")},g=E=>{if(E.touches.length>0){const S=d(E.touches[0]);S&&([c.value,h.value]=S,f.value="touch")}},p=()=>{if(!u||!o)return;const E=d(u);u instanceof MouseEvent&&E&&(c.value=E[0]+o.scrollX,h.value=E[1]+o.scrollY)},v=()=>{c.value=i.x,h.value=i.y},y=l?E=>l(()=>m(E),{}):E=>m(E),_=l?E=>l(()=>g(E),{}):E=>g(E),T=l?()=>l(()=>p(),{}):()=>p();if(a){const E={passive:!0};$c(a,["mousemove","dragover"],y,E),e&&t!=="movement"&&($c(a,["touchstart","touchmove"],_,E),r&&$c(a,"touchend",v,E)),s&&t==="page"&&$c(o,"scroll",T,{passive:!0})}return{x:c,y:h,sourceType:f}}const Ek=[2,40,60,80,100,120,140,160,180,400,220,240,260,280,600],Tg=600,Tk=400,Fb=5,jr={x:100,y:500},nr={width:1,color:16777215,alpha:1},vM=new wa({fontFamily:"Arial",fontSize:12,fill:"white",strokeThickness:4}),gM=(n,t,e=4)=>{const r=new Ii;return r.beginFill(10053375),r.drawCircle(n,t,e),r.endFill(),r.x=jr.x,r.y=jr.y,r},wk=()=>{const n=new Ii;n.lineStyle(nr.width,nr.color,nr.alpha),n.moveTo(0,0),n.lineTo(Tg,0),n.x=jr.x,n.y=jr.y;const t=Tg/Fb;for(let r=0;r<=Fb;r++){const i=new Ud(`${r*t}`,vM);i.x=r*t-10,i.y=10;const o=new Ii;o.lineStyle(nr.width,nr.color,nr.alpha),o.moveTo(r*t,0),o.lineTo(r*t,5),n.addChild(i),n.addChild(o)}const e=new Ii;return e.lineStyle(nr.width,nr.color,nr.alpha),e.moveTo(0,0),e.lineTo(0,-Tk),e.x=jr.x,e.y=jr.y,[n,e]};let ra=null;const{x:Ak,y:Mk}=Sk(),Ck=(n,t)=>{ra||(ra=mw({render(){return xa("div",{style:{position:"absolute",left:`${Ak.value}px`,top:`${Mk.value-150}px`,color:"red",backgroundColor:"rgba(255,255,255,0.5)"}},`${t}`)}}),ra.mount("#pixi-popover"))},Rk=()=>{ra==null||ra.unmount(),ra=null},Pk=n=>{const{scaleX:t}=n,e=-100,r=new Ii;r.lineStyle(nr.width,nr.color,nr.alpha),r.moveTo(0,e),r.lineTo(600,e),r.x=jr.x,r.y=jr.y;const i=Ek.map(a=>{const s=gM(a/t,e,5);return s.interactive=!0,s.on("mouseover",l=>{Ck(l,a)}),s.on("mouseout",Rk),s}),o=new Ud("WO12341234123",vM);return o.style={...o.style,wordWrap:!0,wordWrapWidth:20},o.x=jr.x-100,o.y=jr.y+e,[o,r,...i]},Ik=Ae({name:"PixiContainer",setup(){const n=Be(),t=new dM({resizeTo:n.value}),r=2e3/Tg,i=gM(60,-100,5),o=wk(),a=Pk({scaleX:r});return t.stage.addChild(...o),t.stage.addChild(...a),t.stage.addChild(i),Ui(()=>{n.value&&n.value.appendChild(t.view)}),{pixiContainer:n}},render(){return Et("div",null,[Et("div",{id:"pixi-popover",class:"relative"},null),Et("div",{ref:"pixiContainer"},null)])}}),Ok=Ae({name:"Pixi",setup(){return{}},render(){return Et(Ik,null,null)}});/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ny="160",Dk=0,Ub=1,Lk=2,_M=1,Nk=2,_i=3,xo=0,Dn=1,wi=2,po=0,Ds=1,Bb=2,Gb=3,kb=4,Fk=5,Zo=100,Uk=101,Bk=102,Hb=103,zb=104,Gk=200,kk=201,Hk=202,zk=203,wg=204,Ag=205,Vk=206,Wk=207,Xk=208,$k=209,jk=210,Yk=211,qk=212,Kk=213,Zk=214,Jk=0,Qk=1,tH=2,Kf=3,eH=4,nH=5,rH=6,iH=7,yM=0,oH=1,aH=2,mo=0,sH=1,lH=2,uH=3,cH=4,hH=5,fH=6,xM=300,zs=301,Vs=302,Mg=303,Cg=304,Gd=306,Rg=1e3,Er=1001,Pg=1002,wn=1003,Vb=1004,um=1005,rr=1006,dH=1007,Au=1008,vo=1009,pH=1010,mH=1011,ry=1012,bM=1013,so=1014,lo=1015,Mu=1016,SM=1017,EM=1018,fa=1020,vH=1021,Tr=1023,gH=1024,_H=1025,da=1026,Ws=1027,yH=1028,TM=1029,xH=1030,wM=1031,AM=1033,cm=33776,hm=33777,fm=33778,dm=33779,Wb=35840,Xb=35841,$b=35842,jb=35843,MM=36196,Yb=37492,qb=37496,Kb=37808,Zb=37809,Jb=37810,Qb=37811,tS=37812,eS=37813,nS=37814,rS=37815,iS=37816,oS=37817,aS=37818,sS=37819,lS=37820,uS=37821,pm=36492,cS=36494,hS=36495,bH=36283,fS=36284,dS=36285,pS=36286,CM=3e3,pa=3001,SH=3200,EH=3201,TH=0,wH=1,or="",sn="srgb",Li="srgb-linear",iy="display-p3",kd="display-p3-linear",Zf="linear",xe="srgb",Jf="rec709",Qf="p3",Wa=7680,mS=519,AH=512,MH=513,CH=514,RM=515,RH=516,PH=517,IH=518,OH=519,vS=35044,gS="300 es",Ig=1035,Ai=2e3,td=2001;class el{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(e)===-1&&r[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const o=i.indexOf(e);o!==-1&&i.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const r=this._listeners[t.type];if(r!==void 0){t.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,t);t.target=null}}}const mn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],mm=Math.PI/180,Og=180/Math.PI;function qu(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(mn[n&255]+mn[n>>8&255]+mn[n>>16&255]+mn[n>>24&255]+"-"+mn[t&255]+mn[t>>8&255]+"-"+mn[t>>16&15|64]+mn[t>>24&255]+"-"+mn[e&63|128]+mn[e>>8&255]+"-"+mn[e>>16&255]+mn[e>>24&255]+mn[r&255]+mn[r>>8&255]+mn[r>>16&255]+mn[r>>24&255]).toLowerCase()}function Pn(n,t,e){return Math.max(t,Math.min(e,n))}function DH(n,t){return(n%t+t)%t}function vm(n,t,e){return(1-e)*n+e*t}function _S(n){return(n&n-1)===0&&n!==0}function Dg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function bl(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Cn(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}class de{constructor(t=0,e=0){de.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,r=this.y,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6],this.y=i[1]*e+i[4]*r+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const r=this.dot(t)/e;return Math.acos(Pn(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,r=this.y-t.y;return e*e+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const r=Math.cos(e),i=Math.sin(e),o=this.x-t.x,a=this.y-t.y;return this.x=o*r-a*i+t.x,this.y=o*i+a*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ee{constructor(t,e,r,i,o,a,s,l,u){ee.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,r,i,o,a,s,l,u)}set(t,e,r,i,o,a,s,l,u){const c=this.elements;return c[0]=t,c[1]=i,c[2]=s,c[3]=e,c[4]=o,c[5]=l,c[6]=r,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}extractBasis(t,e,r){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,i=e.elements,o=this.elements,a=r[0],s=r[3],l=r[6],u=r[1],c=r[4],h=r[7],f=r[2],d=r[5],m=r[8],g=i[0],p=i[3],v=i[6],y=i[1],_=i[4],T=i[7],E=i[2],S=i[5],x=i[8];return o[0]=a*g+s*y+l*E,o[3]=a*p+s*_+l*S,o[6]=a*v+s*T+l*x,o[1]=u*g+c*y+h*E,o[4]=u*p+c*_+h*S,o[7]=u*v+c*T+h*x,o[2]=f*g+d*y+m*E,o[5]=f*p+d*_+m*S,o[8]=f*v+d*T+m*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e*a*c-e*s*u-r*o*c+r*s*l+i*o*u-i*a*l}invert(){const t=this.elements,e=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=c*a-s*u,f=s*l-c*o,d=u*o-a*l,m=e*h+r*f+i*d;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return t[0]=h*g,t[1]=(i*u-c*r)*g,t[2]=(s*r-i*a)*g,t[3]=f*g,t[4]=(c*e-i*l)*g,t[5]=(i*o-s*e)*g,t[6]=d*g,t[7]=(r*l-u*e)*g,t[8]=(a*e-r*o)*g,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,r,i,o,a,s){const l=Math.cos(o),u=Math.sin(o);return this.set(r*l,r*u,-r*(l*a+u*s)+a+t,-i*u,i*l,-i*(-u*a+l*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(gm.makeScale(t,e)),this}rotate(t){return this.premultiply(gm.makeRotation(-t)),this}translate(t,e){return this.premultiply(gm.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,r,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,r=t.elements;for(let i=0;i<9;i++)if(e[i]!==r[i])return!1;return!0}fromArray(t,e=0){for(let r=0;r<9;r++)this.elements[r]=t[r+e];return this}toArray(t=[],e=0){const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const gm=new ee;function PM(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function ed(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function LH(){const n=ed("canvas");return n.style.display="block",n}const yS={};function nu(n){n in yS||(yS[n]=!0,console.warn(n))}const xS=new ee().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),bS=new ee().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),jc={[Li]:{transfer:Zf,primaries:Jf,toReference:n=>n,fromReference:n=>n},[sn]:{transfer:xe,primaries:Jf,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[kd]:{transfer:Zf,primaries:Qf,toReference:n=>n.applyMatrix3(bS),fromReference:n=>n.applyMatrix3(xS)},[iy]:{transfer:xe,primaries:Qf,toReference:n=>n.convertSRGBToLinear().applyMatrix3(bS),fromReference:n=>n.applyMatrix3(xS).convertLinearToSRGB()}},NH=new Set([Li,kd]),he={enabled:!0,_workingColorSpace:Li,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!NH.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,t,e){if(this.enabled===!1||t===e||!t||!e)return n;const r=jc[t].toReference,i=jc[e].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,t){return this.convert(n,this._workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this._workingColorSpace)},getPrimaries:function(n){return jc[n].primaries},getTransfer:function(n){return n===or?Zf:jc[n].transfer}};function Ls(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function _m(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Xa;class IM{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Xa===void 0&&(Xa=ed("canvas")),Xa.width=t.width,Xa.height=t.height;const r=Xa.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=Xa}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=ed("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const i=r.getImageData(0,0,t.width,t.height),o=i.data;for(let a=0;a<o.length;a++)o[a]=Ls(o[a]/255)*255;return r.putImageData(i,0,0),e}else if(t.data){const e=t.data.slice(0);for(let r=0;r<e.length;r++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[r]=Math.floor(Ls(e[r]/255)*255):e[r]=Ls(e[r]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let FH=0;class OM{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:FH++}),this.uuid=qu(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(ym(i[a].image)):o.push(ym(i[a]))}else o=ym(i);r.url=o}return e||(t.images[this.uuid]=r),r}}function ym(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?IM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let UH=0;class Yn extends el{constructor(t=Yn.DEFAULT_IMAGE,e=Yn.DEFAULT_MAPPING,r=Er,i=Er,o=rr,a=Au,s=Tr,l=vo,u=Yn.DEFAULT_ANISOTROPY,c=or){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:UH++}),this.uuid=qu(),this.name="",this.source=new OM(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ee,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(nu("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===pa?sn:or),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),e||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==xM)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Rg:t.x=t.x-Math.floor(t.x);break;case Er:t.x=t.x<0?0:1;break;case Pg:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Rg:t.y=t.y-Math.floor(t.y);break;case Er:t.y=t.y<0?0:1;break;case Pg:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return nu("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===sn?pa:CM}set encoding(t){nu("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===pa?sn:or}}Yn.DEFAULT_IMAGE=null;Yn.DEFAULT_MAPPING=xM;Yn.DEFAULT_ANISOTROPY=1;class cn{constructor(t=0,e=0,r=0,i=1){cn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=r,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,r,i){return this.x=t,this.y=e,this.z=r,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,r=this.y,i=this.z,o=this.w,a=t.elements;return this.x=a[0]*e+a[4]*r+a[8]*i+a[12]*o,this.y=a[1]*e+a[5]*r+a[9]*i+a[13]*o,this.z=a[2]*e+a[6]*r+a[10]*i+a[14]*o,this.w=a[3]*e+a[7]*r+a[11]*i+a[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,r,i,o;const l=t.elements,u=l[0],c=l[4],h=l[8],f=l[1],d=l[5],m=l[9],g=l[2],p=l[6],v=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-g)<.01&&Math.abs(m-p)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+g)<.1&&Math.abs(m+p)<.1&&Math.abs(u+d+v-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const _=(u+1)/2,T=(d+1)/2,E=(v+1)/2,S=(c+f)/4,x=(h+g)/4,O=(m+p)/4;return _>T&&_>E?_<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(_),i=S/r,o=x/r):T>E?T<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(T),r=S/i,o=O/i):E<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(E),r=x/o,i=O/o),this.set(r,i,o,e),this}let y=Math.sqrt((p-m)*(p-m)+(h-g)*(h-g)+(f-c)*(f-c));return Math.abs(y)<.001&&(y=1),this.x=(p-m)/y,this.y=(h-g)/y,this.z=(f-c)/y,this.w=Math.acos((u+d+v-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this.z=t.z+(e.z-t.z)*r,this.w=t.w+(e.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class BH extends el{constructor(t=1,e=1,r={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new cn(0,0,t,e),this.scissorTest=!1,this.viewport=new cn(0,0,t,e);const i={width:t,height:e,depth:1};r.encoding!==void 0&&(nu("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===pa?sn:or),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:rr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Yn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(t,e,r=1){(this.width!==t||this.height!==e||this.depth!==r)&&(this.width=t,this.height=e,this.depth=r,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new OM(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Aa extends BH{constructor(t=1,e=1,r={}){super(t,e,r),this.isWebGLRenderTarget=!0}}class DM extends Yn{constructor(t=null,e=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:r,depth:i},this.magFilter=wn,this.minFilter=wn,this.wrapR=Er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class GH extends Yn{constructor(t=null,e=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:r,depth:i},this.magFilter=wn,this.minFilter=wn,this.wrapR=Er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ku{constructor(t=0,e=0,r=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=r,this._w=i}static slerpFlat(t,e,r,i,o,a,s){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3];const f=o[a+0],d=o[a+1],m=o[a+2],g=o[a+3];if(s===0){t[e+0]=l,t[e+1]=u,t[e+2]=c,t[e+3]=h;return}if(s===1){t[e+0]=f,t[e+1]=d,t[e+2]=m,t[e+3]=g;return}if(h!==g||l!==f||u!==d||c!==m){let p=1-s;const v=l*f+u*d+c*m+h*g,y=v>=0?1:-1,_=1-v*v;if(_>Number.EPSILON){const E=Math.sqrt(_),S=Math.atan2(E,v*y);p=Math.sin(p*S)/E,s=Math.sin(s*S)/E}const T=s*y;if(l=l*p+f*T,u=u*p+d*T,c=c*p+m*T,h=h*p+g*T,p===1-s){const E=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=E,u*=E,c*=E,h*=E}}t[e]=l,t[e+1]=u,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,r,i,o,a){const s=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=o[a],f=o[a+1],d=o[a+2],m=o[a+3];return t[e]=s*m+c*h+l*d-u*f,t[e+1]=l*m+c*f+u*h-s*d,t[e+2]=u*m+c*d+s*f-l*h,t[e+3]=c*m-s*h-l*f-u*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const r=t._x,i=t._y,o=t._z,a=t._order,s=Math.cos,l=Math.sin,u=s(r/2),c=s(i/2),h=s(o/2),f=l(r/2),d=l(i/2),m=l(o/2);switch(a){case"XYZ":this._x=f*c*h+u*d*m,this._y=u*d*h-f*c*m,this._z=u*c*m+f*d*h,this._w=u*c*h-f*d*m;break;case"YXZ":this._x=f*c*h+u*d*m,this._y=u*d*h-f*c*m,this._z=u*c*m-f*d*h,this._w=u*c*h+f*d*m;break;case"ZXY":this._x=f*c*h-u*d*m,this._y=u*d*h+f*c*m,this._z=u*c*m+f*d*h,this._w=u*c*h-f*d*m;break;case"ZYX":this._x=f*c*h-u*d*m,this._y=u*d*h+f*c*m,this._z=u*c*m-f*d*h,this._w=u*c*h+f*d*m;break;case"YZX":this._x=f*c*h+u*d*m,this._y=u*d*h+f*c*m,this._z=u*c*m-f*d*h,this._w=u*c*h-f*d*m;break;case"XZY":this._x=f*c*h-u*d*m,this._y=u*d*h-f*c*m,this._z=u*c*m+f*d*h,this._w=u*c*h+f*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const r=e/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,r=e[0],i=e[4],o=e[8],a=e[1],s=e[5],l=e[9],u=e[2],c=e[6],h=e[10],f=r+s+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(o-u)*d,this._z=(a-i)*d}else if(r>s&&r>h){const d=2*Math.sqrt(1+r-s-h);this._w=(c-l)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(o+u)/d}else if(s>h){const d=2*Math.sqrt(1+s-r-h);this._w=(o-u)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+h-r-s);this._w=(a-i)/d,this._x=(o+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let r=t.dot(e)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Pn(this.dot(t),-1,1)))}rotateTowards(t,e){const r=this.angleTo(t);if(r===0)return this;const i=Math.min(1,e/r);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const r=t._x,i=t._y,o=t._z,a=t._w,s=e._x,l=e._y,u=e._z,c=e._w;return this._x=r*c+a*s+i*u-o*l,this._y=i*c+a*l+o*s-r*u,this._z=o*c+a*u+r*l-i*s,this._w=a*c-r*s-i*l-o*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const r=this._x,i=this._y,o=this._z,a=this._w;let s=a*t._w+r*t._x+i*t._y+o*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=r,this._y=i,this._z=o,this;const l=1-s*s;if(l<=Number.EPSILON){const d=1-e;return this._w=d*a+e*this._w,this._x=d*r+e*this._x,this._y=d*i+e*this._y,this._z=d*o+e*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,s),h=Math.sin((1-e)*c)/u,f=Math.sin(e*c)/u;return this._w=a*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=o*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(t,e,r){return this.copy(t).slerp(e,r)}random(){const t=Math.random(),e=Math.sqrt(1-t),r=Math.sqrt(t),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(e*Math.cos(i),r*Math.sin(o),r*Math.cos(o),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ut{constructor(t=0,e=0,r=0){ut.prototype.isVector3=!0,this.x=t,this.y=e,this.z=r}set(t,e,r){return r===void 0&&(r=this.z),this.x=t,this.y=e,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(SS.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(SS.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,r=this.y,i=this.z,o=t.elements;return this.x=o[0]*e+o[3]*r+o[6]*i,this.y=o[1]*e+o[4]*r+o[7]*i,this.z=o[2]*e+o[5]*r+o[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,r=this.y,i=this.z,o=t.elements,a=1/(o[3]*e+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*e+o[4]*r+o[8]*i+o[12])*a,this.y=(o[1]*e+o[5]*r+o[9]*i+o[13])*a,this.z=(o[2]*e+o[6]*r+o[10]*i+o[14])*a,this}applyQuaternion(t){const e=this.x,r=this.y,i=this.z,o=t.x,a=t.y,s=t.z,l=t.w,u=2*(a*i-s*r),c=2*(s*e-o*i),h=2*(o*r-a*e);return this.x=e+l*u+a*h-s*c,this.y=r+l*c+s*u-o*h,this.z=i+l*h+o*c-a*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,r=this.y,i=this.z,o=t.elements;return this.x=o[0]*e+o[4]*r+o[8]*i,this.y=o[1]*e+o[5]*r+o[9]*i,this.z=o[2]*e+o[6]*r+o[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this.z=t.z+(e.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const r=t.x,i=t.y,o=t.z,a=e.x,s=e.y,l=e.z;return this.x=i*l-o*s,this.y=o*a-r*l,this.z=r*s-i*a,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const r=t.dot(this)/e;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return xm.copy(this).projectOnVector(t),this.sub(xm)}reflect(t){return this.sub(xm.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const r=this.dot(t)/e;return Math.acos(Pn(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return e*e+r*r+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,r){const i=Math.sin(e)*t;return this.x=i*Math.sin(r),this.y=Math.cos(e)*t,this.z=i*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,r){return this.x=t*Math.sin(e),this.y=r,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,r=Math.sqrt(1-t**2);return this.x=r*Math.cos(e),this.y=r*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xm=new ut,SS=new Ku;class Zu{constructor(t=new ut(1/0,1/0,1/0),e=new ut(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,r=t.length;e<r;e+=3)this.expandByPoint(mr.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,r=t.count;e<r;e++)this.expandByPoint(mr.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const r=mr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const r=t.geometry;if(r!==void 0){const o=r.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let a=0,s=o.count;a<s;a++)t.isMesh===!0?t.getVertexPosition(a,mr):mr.fromBufferAttribute(o,a),mr.applyMatrix4(t.matrixWorld),this.expandByPoint(mr);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Yc.copy(t.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Yc.copy(r.boundingBox)),Yc.applyMatrix4(t.matrixWorld),this.union(Yc)}const i=t.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,mr),mr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Sl),qc.subVectors(this.max,Sl),$a.subVectors(t.a,Sl),ja.subVectors(t.b,Sl),Ya.subVectors(t.c,Sl),$i.subVectors(ja,$a),ji.subVectors(Ya,ja),No.subVectors($a,Ya);let e=[0,-$i.z,$i.y,0,-ji.z,ji.y,0,-No.z,No.y,$i.z,0,-$i.x,ji.z,0,-ji.x,No.z,0,-No.x,-$i.y,$i.x,0,-ji.y,ji.x,0,-No.y,No.x,0];return!bm(e,$a,ja,Ya,qc)||(e=[1,0,0,0,1,0,0,0,1],!bm(e,$a,ja,Ya,qc))?!1:(Kc.crossVectors($i,ji),e=[Kc.x,Kc.y,Kc.z],bm(e,$a,ja,Ya,qc))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,mr).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(mr).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(li[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),li[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),li[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),li[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),li[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),li[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),li[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),li[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(li),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const li=[new ut,new ut,new ut,new ut,new ut,new ut,new ut,new ut],mr=new ut,Yc=new Zu,$a=new ut,ja=new ut,Ya=new ut,$i=new ut,ji=new ut,No=new ut,Sl=new ut,qc=new ut,Kc=new ut,Fo=new ut;function bm(n,t,e,r,i){for(let o=0,a=n.length-3;o<=a;o+=3){Fo.fromArray(n,o);const s=i.x*Math.abs(Fo.x)+i.y*Math.abs(Fo.y)+i.z*Math.abs(Fo.z),l=t.dot(Fo),u=e.dot(Fo),c=r.dot(Fo);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}const kH=new Zu,El=new ut,Sm=new ut;class oy{constructor(t=new ut,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const r=this.center;e!==void 0?r.copy(e):kH.setFromPoints(t).getCenter(r);let i=0;for(let o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const r=this.center.distanceToSquared(t);return e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;El.subVectors(t,this.center);const e=El.lengthSq();if(e>this.radius*this.radius){const r=Math.sqrt(e),i=(r-this.radius)*.5;this.center.addScaledVector(El,i/r),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Sm.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(El.copy(t.center).add(Sm)),this.expandByPoint(El.copy(t.center).sub(Sm))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ui=new ut,Em=new ut,Zc=new ut,Yi=new ut,Tm=new ut,Jc=new ut,wm=new ut;class HH{constructor(t=new ut,e=new ut(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ui)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const r=e.dot(this.direction);return r<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ui.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ui.copy(this.origin).addScaledVector(this.direction,e),ui.distanceToSquared(t))}distanceSqToSegment(t,e,r,i){Em.copy(t).add(e).multiplyScalar(.5),Zc.copy(e).sub(t).normalize(),Yi.copy(this.origin).sub(Em);const o=t.distanceTo(e)*.5,a=-this.direction.dot(Zc),s=Yi.dot(this.direction),l=-Yi.dot(Zc),u=Yi.lengthSq(),c=Math.abs(1-a*a);let h,f,d,m;if(c>0)if(h=a*l-s,f=a*s-l,m=o*c,h>=0)if(f>=-m)if(f<=m){const g=1/c;h*=g,f*=g,d=h*(h+a*f+2*s)+f*(a*h+f+2*l)+u}else f=o,h=Math.max(0,-(a*f+s)),d=-h*h+f*(f+2*l)+u;else f=-o,h=Math.max(0,-(a*f+s)),d=-h*h+f*(f+2*l)+u;else f<=-m?(h=Math.max(0,-(-a*o+s)),f=h>0?-o:Math.min(Math.max(-o,-l),o),d=-h*h+f*(f+2*l)+u):f<=m?(h=0,f=Math.min(Math.max(-o,-l),o),d=f*(f+2*l)+u):(h=Math.max(0,-(a*o+s)),f=h>0?o:Math.min(Math.max(-o,-l),o),d=-h*h+f*(f+2*l)+u);else f=a>0?-o:o,h=Math.max(0,-(a*f+s)),d=-h*h+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(Em).addScaledVector(Zc,f),d}intersectSphere(t,e){ui.subVectors(t.center,this.origin);const r=ui.dot(this.direction),i=ui.dot(ui)-r*r,o=t.radius*t.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=r-a,l=r+a;return l<0?null:s<0?this.at(l,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null}intersectPlane(t,e){const r=this.distanceToPlane(t);return r===null?null:this.at(r,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let r,i,o,a,s,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(t.min.x-f.x)*u,i=(t.max.x-f.x)*u):(r=(t.max.x-f.x)*u,i=(t.min.x-f.x)*u),c>=0?(o=(t.min.y-f.y)*c,a=(t.max.y-f.y)*c):(o=(t.max.y-f.y)*c,a=(t.min.y-f.y)*c),r>a||o>i||((o>r||isNaN(r))&&(r=o),(a<i||isNaN(i))&&(i=a),h>=0?(s=(t.min.z-f.z)*h,l=(t.max.z-f.z)*h):(s=(t.max.z-f.z)*h,l=(t.min.z-f.z)*h),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,e)}intersectsBox(t){return this.intersectBox(t,ui)!==null}intersectTriangle(t,e,r,i,o){Tm.subVectors(e,t),Jc.subVectors(r,t),wm.crossVectors(Tm,Jc);let a=this.direction.dot(wm),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;Yi.subVectors(this.origin,t);const l=s*this.direction.dot(Jc.crossVectors(Yi,Jc));if(l<0)return null;const u=s*this.direction.dot(Tm.cross(Yi));if(u<0||l+u>a)return null;const c=-s*Yi.dot(wm);return c<0?null:this.at(c/a,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class hn{constructor(t,e,r,i,o,a,s,l,u,c,h,f,d,m,g,p){hn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,r,i,o,a,s,l,u,c,h,f,d,m,g,p)}set(t,e,r,i,o,a,s,l,u,c,h,f,d,m,g,p){const v=this.elements;return v[0]=t,v[4]=e,v[8]=r,v[12]=i,v[1]=o,v[5]=a,v[9]=s,v[13]=l,v[2]=u,v[6]=c,v[10]=h,v[14]=f,v[3]=d,v[7]=m,v[11]=g,v[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new hn().fromArray(this.elements)}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}copyPosition(t){const e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,r=t.elements,i=1/qa.setFromMatrixColumn(t,0).length(),o=1/qa.setFromMatrixColumn(t,1).length(),a=1/qa.setFromMatrixColumn(t,2).length();return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=0,e[4]=r[4]*o,e[5]=r[5]*o,e[6]=r[6]*o,e[7]=0,e[8]=r[8]*a,e[9]=r[9]*a,e[10]=r[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,r=t.x,i=t.y,o=t.z,a=Math.cos(r),s=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(o),h=Math.sin(o);if(t.order==="XYZ"){const f=a*c,d=a*h,m=s*c,g=s*h;e[0]=l*c,e[4]=-l*h,e[8]=u,e[1]=d+m*u,e[5]=f-g*u,e[9]=-s*l,e[2]=g-f*u,e[6]=m+d*u,e[10]=a*l}else if(t.order==="YXZ"){const f=l*c,d=l*h,m=u*c,g=u*h;e[0]=f+g*s,e[4]=m*s-d,e[8]=a*u,e[1]=a*h,e[5]=a*c,e[9]=-s,e[2]=d*s-m,e[6]=g+f*s,e[10]=a*l}else if(t.order==="ZXY"){const f=l*c,d=l*h,m=u*c,g=u*h;e[0]=f-g*s,e[4]=-a*h,e[8]=m+d*s,e[1]=d+m*s,e[5]=a*c,e[9]=g-f*s,e[2]=-a*u,e[6]=s,e[10]=a*l}else if(t.order==="ZYX"){const f=a*c,d=a*h,m=s*c,g=s*h;e[0]=l*c,e[4]=m*u-d,e[8]=f*u+g,e[1]=l*h,e[5]=g*u+f,e[9]=d*u-m,e[2]=-u,e[6]=s*l,e[10]=a*l}else if(t.order==="YZX"){const f=a*l,d=a*u,m=s*l,g=s*u;e[0]=l*c,e[4]=g-f*h,e[8]=m*h+d,e[1]=h,e[5]=a*c,e[9]=-s*c,e[2]=-u*c,e[6]=d*h+m,e[10]=f-g*h}else if(t.order==="XZY"){const f=a*l,d=a*u,m=s*l,g=s*u;e[0]=l*c,e[4]=-h,e[8]=u*c,e[1]=f*h+g,e[5]=a*c,e[9]=d*h-m,e[2]=m*h-d,e[6]=s*c,e[10]=g*h+f}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(zH,t,VH)}lookAt(t,e,r){const i=this.elements;return Bn.subVectors(t,e),Bn.lengthSq()===0&&(Bn.z=1),Bn.normalize(),qi.crossVectors(r,Bn),qi.lengthSq()===0&&(Math.abs(r.z)===1?Bn.x+=1e-4:Bn.z+=1e-4,Bn.normalize(),qi.crossVectors(r,Bn)),qi.normalize(),Qc.crossVectors(Bn,qi),i[0]=qi.x,i[4]=Qc.x,i[8]=Bn.x,i[1]=qi.y,i[5]=Qc.y,i[9]=Bn.y,i[2]=qi.z,i[6]=Qc.z,i[10]=Bn.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,i=e.elements,o=this.elements,a=r[0],s=r[4],l=r[8],u=r[12],c=r[1],h=r[5],f=r[9],d=r[13],m=r[2],g=r[6],p=r[10],v=r[14],y=r[3],_=r[7],T=r[11],E=r[15],S=i[0],x=i[4],O=i[8],b=i[12],A=i[1],N=i[5],U=i[9],et=i[13],L=i[2],D=i[6],B=i[10],q=i[14],Q=i[3],rt=i[7],$=i[11],k=i[15];return o[0]=a*S+s*A+l*L+u*Q,o[4]=a*x+s*N+l*D+u*rt,o[8]=a*O+s*U+l*B+u*$,o[12]=a*b+s*et+l*q+u*k,o[1]=c*S+h*A+f*L+d*Q,o[5]=c*x+h*N+f*D+d*rt,o[9]=c*O+h*U+f*B+d*$,o[13]=c*b+h*et+f*q+d*k,o[2]=m*S+g*A+p*L+v*Q,o[6]=m*x+g*N+p*D+v*rt,o[10]=m*O+g*U+p*B+v*$,o[14]=m*b+g*et+p*q+v*k,o[3]=y*S+_*A+T*L+E*Q,o[7]=y*x+_*N+T*D+E*rt,o[11]=y*O+_*U+T*B+E*$,o[15]=y*b+_*et+T*q+E*k,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[4],i=t[8],o=t[12],a=t[1],s=t[5],l=t[9],u=t[13],c=t[2],h=t[6],f=t[10],d=t[14],m=t[3],g=t[7],p=t[11],v=t[15];return m*(+o*l*h-i*u*h-o*s*f+r*u*f+i*s*d-r*l*d)+g*(+e*l*d-e*u*f+o*a*f-i*a*d+i*u*c-o*l*c)+p*(+e*u*h-e*s*d-o*a*h+r*a*d+o*s*c-r*u*c)+v*(-i*s*c-e*l*h+e*s*f+i*a*h-r*a*f+r*l*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,r){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=r),this}invert(){const t=this.elements,e=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],m=t[12],g=t[13],p=t[14],v=t[15],y=h*p*u-g*f*u+g*l*d-s*p*d-h*l*v+s*f*v,_=m*f*u-c*p*u-m*l*d+a*p*d+c*l*v-a*f*v,T=c*g*u-m*h*u+m*s*d-a*g*d-c*s*v+a*h*v,E=m*h*l-c*g*l-m*s*f+a*g*f+c*s*p-a*h*p,S=e*y+r*_+i*T+o*E;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/S;return t[0]=y*x,t[1]=(g*f*o-h*p*o-g*i*d+r*p*d+h*i*v-r*f*v)*x,t[2]=(s*p*o-g*l*o+g*i*u-r*p*u-s*i*v+r*l*v)*x,t[3]=(h*l*o-s*f*o-h*i*u+r*f*u+s*i*d-r*l*d)*x,t[4]=_*x,t[5]=(c*p*o-m*f*o+m*i*d-e*p*d-c*i*v+e*f*v)*x,t[6]=(m*l*o-a*p*o-m*i*u+e*p*u+a*i*v-e*l*v)*x,t[7]=(a*f*o-c*l*o+c*i*u-e*f*u-a*i*d+e*l*d)*x,t[8]=T*x,t[9]=(m*h*o-c*g*o-m*r*d+e*g*d+c*r*v-e*h*v)*x,t[10]=(a*g*o-m*s*o+m*r*u-e*g*u-a*r*v+e*s*v)*x,t[11]=(c*s*o-a*h*o-c*r*u+e*h*u+a*r*d-e*s*d)*x,t[12]=E*x,t[13]=(c*g*i-m*h*i+m*r*f-e*g*f-c*r*p+e*h*p)*x,t[14]=(m*s*i-a*g*i-m*r*l+e*g*l+a*r*p-e*s*p)*x,t[15]=(a*h*i-c*s*i+c*r*l-e*h*l-a*r*f+e*s*f)*x,this}scale(t){const e=this.elements,r=t.x,i=t.y,o=t.z;return e[0]*=r,e[4]*=i,e[8]*=o,e[1]*=r,e[5]*=i,e[9]*=o,e[2]*=r,e[6]*=i,e[10]*=o,e[3]*=r,e[7]*=i,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,i))}makeTranslation(t,e,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const r=Math.cos(e),i=Math.sin(e),o=1-r,a=t.x,s=t.y,l=t.z,u=o*a,c=o*s;return this.set(u*a+r,u*s-i*l,u*l+i*s,0,u*s+i*l,c*s+r,c*l-i*a,0,u*l-i*s,c*l+i*a,o*l*l+r,0,0,0,0,1),this}makeScale(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,e,r,i,o,a){return this.set(1,r,o,0,t,1,a,0,e,i,1,0,0,0,0,1),this}compose(t,e,r){const i=this.elements,o=e._x,a=e._y,s=e._z,l=e._w,u=o+o,c=a+a,h=s+s,f=o*u,d=o*c,m=o*h,g=a*c,p=a*h,v=s*h,y=l*u,_=l*c,T=l*h,E=r.x,S=r.y,x=r.z;return i[0]=(1-(g+v))*E,i[1]=(d+T)*E,i[2]=(m-_)*E,i[3]=0,i[4]=(d-T)*S,i[5]=(1-(f+v))*S,i[6]=(p+y)*S,i[7]=0,i[8]=(m+_)*x,i[9]=(p-y)*x,i[10]=(1-(f+g))*x,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,r){const i=this.elements;let o=qa.set(i[0],i[1],i[2]).length();const a=qa.set(i[4],i[5],i[6]).length(),s=qa.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),t.x=i[12],t.y=i[13],t.z=i[14],vr.copy(this);const u=1/o,c=1/a,h=1/s;return vr.elements[0]*=u,vr.elements[1]*=u,vr.elements[2]*=u,vr.elements[4]*=c,vr.elements[5]*=c,vr.elements[6]*=c,vr.elements[8]*=h,vr.elements[9]*=h,vr.elements[10]*=h,e.setFromRotationMatrix(vr),r.x=o,r.y=a,r.z=s,this}makePerspective(t,e,r,i,o,a,s=Ai){const l=this.elements,u=2*o/(e-t),c=2*o/(r-i),h=(e+t)/(e-t),f=(r+i)/(r-i);let d,m;if(s===Ai)d=-(a+o)/(a-o),m=-2*a*o/(a-o);else if(s===td)d=-a/(a-o),m=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,r,i,o,a,s=Ai){const l=this.elements,u=1/(e-t),c=1/(r-i),h=1/(a-o),f=(e+t)*u,d=(r+i)*c;let m,g;if(s===Ai)m=(a+o)*h,g=-2*h;else if(s===td)m=o*h,g=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=g,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,r=t.elements;for(let i=0;i<16;i++)if(e[i]!==r[i])return!1;return!0}fromArray(t,e=0){for(let r=0;r<16;r++)this.elements[r]=t[r+e];return this}toArray(t=[],e=0){const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}}const qa=new ut,vr=new hn,zH=new ut(0,0,0),VH=new ut(1,1,1),qi=new ut,Qc=new ut,Bn=new ut,ES=new hn,TS=new Ku;class Hd{constructor(t=0,e=0,r=0,i=Hd.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=r,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,r,i=this._order){return this._x=t,this._y=e,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,r=!0){const i=t.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(Pn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Pn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Pn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Pn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Pn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Pn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,r){return ES.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ES,e,r)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return TS.setFromEuler(this),this.setFromQuaternion(TS,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Hd.DEFAULT_ORDER="XYZ";class LM{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let WH=0;const wS=new ut,Ka=new Ku,ci=new hn,th=new ut,Tl=new ut,XH=new ut,$H=new Ku,AS=new ut(1,0,0),MS=new ut(0,1,0),CS=new ut(0,0,1),jH={type:"added"},YH={type:"removed"};class qn extends el{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:WH++}),this.uuid=qu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qn.DEFAULT_UP.clone();const t=new ut,e=new Hd,r=new Ku,i=new ut(1,1,1);function o(){r.setFromEuler(e,!1)}function a(){e.setFromQuaternion(r,void 0,!1)}e._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new hn},normalMatrix:{value:new ee}}),this.matrix=new hn,this.matrixWorld=new hn,this.matrixAutoUpdate=qn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new LM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ka.setFromAxisAngle(t,e),this.quaternion.multiply(Ka),this}rotateOnWorldAxis(t,e){return Ka.setFromAxisAngle(t,e),this.quaternion.premultiply(Ka),this}rotateX(t){return this.rotateOnAxis(AS,t)}rotateY(t){return this.rotateOnAxis(MS,t)}rotateZ(t){return this.rotateOnAxis(CS,t)}translateOnAxis(t,e){return wS.copy(t).applyQuaternion(this.quaternion),this.position.add(wS.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(AS,t)}translateY(t){return this.translateOnAxis(MS,t)}translateZ(t){return this.translateOnAxis(CS,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ci.copy(this.matrixWorld).invert())}lookAt(t,e,r){t.isVector3?th.copy(t):th.set(t,e,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Tl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ci.lookAt(Tl,th,this.up):ci.lookAt(th,Tl,this.up),this.quaternion.setFromRotationMatrix(ci),i&&(ci.extractRotation(i.matrixWorld),Ka.setFromRotationMatrix(ci),this.quaternion.premultiply(Ka.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(jH)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(YH)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),ci.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),ci.multiply(t.parent.matrixWorld)),t.applyMatrix4(ci),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(t,e);if(a!==void 0)return a}}getObjectsByProperty(t,e,r=[]){this[t]===e&&r.push(this);const i=this.children;for(let o=0,a=i.length;o<a;o++)i[o].getObjectsByProperty(t,e,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tl,t,XH),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tl,$H,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let r=0,i=e.length;r<i;r++){const o=e[r];(o.matrixWorldAutoUpdate===!0||t===!0)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const r=this.parent;if(t===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let o=0,a=i.length;o<a;o++){const s=i[o];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=t===void 0||typeof t=="string",r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(t.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];o(t.shapes,h)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(o(t.materials,this.material[l]));i.material=s}else i.material=o(t.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(o(t.animations,l))}}if(e){const s=a(t.geometries),l=a(t.materials),u=a(t.textures),c=a(t.images),h=a(t.shapes),f=a(t.skeletons),d=a(t.animations),m=a(t.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),d.length>0&&(r.animations=d),m.length>0&&(r.nodes=m)}return r.object=i,r;function a(s){const l=[];for(const u in s){const c=s[u];delete c.metadata,l.push(c)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let r=0;r<t.children.length;r++){const i=t.children[r];this.add(i.clone())}return this}}qn.DEFAULT_UP=new ut(0,1,0);qn.DEFAULT_MATRIX_AUTO_UPDATE=!0;qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gr=new ut,hi=new ut,Am=new ut,fi=new ut,Za=new ut,Ja=new ut,RS=new ut,Mm=new ut,Cm=new ut,Rm=new ut;let eh=!1;class Sr{constructor(t=new ut,e=new ut,r=new ut){this.a=t,this.b=e,this.c=r}static getNormal(t,e,r,i){i.subVectors(r,e),gr.subVectors(t,e),i.cross(gr);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(t,e,r,i,o){gr.subVectors(i,e),hi.subVectors(r,e),Am.subVectors(t,e);const a=gr.dot(gr),s=gr.dot(hi),l=gr.dot(Am),u=hi.dot(hi),c=hi.dot(Am),h=a*u-s*s;if(h===0)return o.set(0,0,0),null;const f=1/h,d=(u*l-s*c)*f,m=(a*c-s*l)*f;return o.set(1-d-m,m,d)}static containsPoint(t,e,r,i){return this.getBarycoord(t,e,r,i,fi)===null?!1:fi.x>=0&&fi.y>=0&&fi.x+fi.y<=1}static getUV(t,e,r,i,o,a,s,l){return eh===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),eh=!0),this.getInterpolation(t,e,r,i,o,a,s,l)}static getInterpolation(t,e,r,i,o,a,s,l){return this.getBarycoord(t,e,r,i,fi)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,fi.x),l.addScaledVector(a,fi.y),l.addScaledVector(s,fi.z),l)}static isFrontFacing(t,e,r,i){return gr.subVectors(r,e),hi.subVectors(t,e),gr.cross(hi).dot(i)<0}set(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this}setFromPointsAndIndices(t,e,r,i){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,r,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return gr.subVectors(this.c,this.b),hi.subVectors(this.a,this.b),gr.cross(hi).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Sr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Sr.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,r,i,o){return eh===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),eh=!0),Sr.getInterpolation(t,this.a,this.b,this.c,e,r,i,o)}getInterpolation(t,e,r,i,o){return Sr.getInterpolation(t,this.a,this.b,this.c,e,r,i,o)}containsPoint(t){return Sr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Sr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const r=this.a,i=this.b,o=this.c;let a,s;Za.subVectors(i,r),Ja.subVectors(o,r),Mm.subVectors(t,r);const l=Za.dot(Mm),u=Ja.dot(Mm);if(l<=0&&u<=0)return e.copy(r);Cm.subVectors(t,i);const c=Za.dot(Cm),h=Ja.dot(Cm);if(c>=0&&h<=c)return e.copy(i);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return a=l/(l-c),e.copy(r).addScaledVector(Za,a);Rm.subVectors(t,o);const d=Za.dot(Rm),m=Ja.dot(Rm);if(m>=0&&d<=m)return e.copy(o);const g=d*u-l*m;if(g<=0&&u>=0&&m<=0)return s=u/(u-m),e.copy(r).addScaledVector(Ja,s);const p=c*m-d*h;if(p<=0&&h-c>=0&&d-m>=0)return RS.subVectors(o,i),s=(h-c)/(h-c+(d-m)),e.copy(i).addScaledVector(RS,s);const v=1/(p+g+f);return a=g*v,s=f*v,e.copy(r).addScaledVector(Za,a).addScaledVector(Ja,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const NM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ki={h:0,s:0,l:0},nh={h:0,s:0,l:0};function Pm(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class fe{constructor(t,e,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,r)}set(t,e,r){if(e===void 0&&r===void 0){const i=t;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(t,e,r);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=sn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,he.toWorkingColorSpace(this,e),this}setRGB(t,e,r,i=he.workingColorSpace){return this.r=t,this.g=e,this.b=r,he.toWorkingColorSpace(this,i),this}setHSL(t,e,r,i=he.workingColorSpace){if(t=DH(t,1),e=Pn(e,0,1),r=Pn(r,0,1),e===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+e):r+e-r*e,a=2*r-o;this.r=Pm(a,o,t+1/3),this.g=Pm(a,o,t),this.b=Pm(a,o,t-1/3)}return he.toWorkingColorSpace(this,i),this}setStyle(t,e=sn){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=i[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(a===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=sn){const r=NM[t.toLowerCase()];return r!==void 0?this.setHex(r,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ls(t.r),this.g=Ls(t.g),this.b=Ls(t.b),this}copyLinearToSRGB(t){return this.r=_m(t.r),this.g=_m(t.g),this.b=_m(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=sn){return he.fromWorkingColorSpace(vn.copy(this),t),Math.round(Pn(vn.r*255,0,255))*65536+Math.round(Pn(vn.g*255,0,255))*256+Math.round(Pn(vn.b*255,0,255))}getHexString(t=sn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=he.workingColorSpace){he.fromWorkingColorSpace(vn.copy(this),e);const r=vn.r,i=vn.g,o=vn.b,a=Math.max(r,i,o),s=Math.min(r,i,o);let l,u;const c=(s+a)/2;if(s===a)l=0,u=0;else{const h=a-s;switch(u=c<=.5?h/(a+s):h/(2-a-s),a){case r:l=(i-o)/h+(i<o?6:0);break;case i:l=(o-r)/h+2;break;case o:l=(r-i)/h+4;break}l/=6}return t.h=l,t.s=u,t.l=c,t}getRGB(t,e=he.workingColorSpace){return he.fromWorkingColorSpace(vn.copy(this),e),t.r=vn.r,t.g=vn.g,t.b=vn.b,t}getStyle(t=sn){he.fromWorkingColorSpace(vn.copy(this),t);const e=vn.r,r=vn.g,i=vn.b;return t!==sn?`color(${t} ${e.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(t,e,r){return this.getHSL(Ki),this.setHSL(Ki.h+t,Ki.s+e,Ki.l+r)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,r){return this.r=t.r+(e.r-t.r)*r,this.g=t.g+(e.g-t.g)*r,this.b=t.b+(e.b-t.b)*r,this}lerpHSL(t,e){this.getHSL(Ki),t.getHSL(nh);const r=vm(Ki.h,nh.h,e),i=vm(Ki.s,nh.s,e),o=vm(Ki.l,nh.l,e);return this.setHSL(r,i,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,r=this.g,i=this.b,o=t.elements;return this.r=o[0]*e+o[3]*r+o[6]*i,this.g=o[1]*e+o[4]*r+o[7]*i,this.b=o[2]*e+o[5]*r+o[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vn=new fe;fe.NAMES=NM;let qH=0;class zd extends el{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:qH++}),this.uuid=qu(),this.name="",this.type="Material",this.blending=Ds,this.side=xo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=wg,this.blendDst=Ag,this.blendEquation=Zo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new fe(0,0,0),this.blendAlpha=0,this.depthFunc=Kf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wa,this.stencilZFail=Wa,this.stencilZPass=Wa,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const r=t[e];if(r===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const i=this[e];if(i===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[e]=r}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ds&&(r.blending=this.blending),this.side!==xo&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==wg&&(r.blendSrc=this.blendSrc),this.blendDst!==Ag&&(r.blendDst=this.blendDst),this.blendEquation!==Zo&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Kf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==mS&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Wa&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Wa&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Wa&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const a=[];for(const s in o){const l=o[s];delete l.metadata,a.push(l)}return a}if(e){const o=i(t.textures),a=i(t.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let r=null;if(e!==null){const i=e.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=e[o].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class ay extends zd{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ke=new ut,rh=new de;class Zr{constructor(t,e,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=r,this.usage=vS,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=lo,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,r){t*=this.itemSize,r*=e.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[t+i]=e.array[r+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,r=this.count;e<r;e++)rh.fromBufferAttribute(this,e),rh.applyMatrix3(t),this.setXY(e,rh.x,rh.y);else if(this.itemSize===3)for(let e=0,r=this.count;e<r;e++)ke.fromBufferAttribute(this,e),ke.applyMatrix3(t),this.setXYZ(e,ke.x,ke.y,ke.z);return this}applyMatrix4(t){for(let e=0,r=this.count;e<r;e++)ke.fromBufferAttribute(this,e),ke.applyMatrix4(t),this.setXYZ(e,ke.x,ke.y,ke.z);return this}applyNormalMatrix(t){for(let e=0,r=this.count;e<r;e++)ke.fromBufferAttribute(this,e),ke.applyNormalMatrix(t),this.setXYZ(e,ke.x,ke.y,ke.z);return this}transformDirection(t){for(let e=0,r=this.count;e<r;e++)ke.fromBufferAttribute(this,e),ke.transformDirection(t),this.setXYZ(e,ke.x,ke.y,ke.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let r=this.array[t*this.itemSize+e];return this.normalized&&(r=bl(r,this.array)),r}setComponent(t,e,r){return this.normalized&&(r=Cn(r,this.array)),this.array[t*this.itemSize+e]=r,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=bl(e,this.array)),e}setX(t,e){return this.normalized&&(e=Cn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=bl(e,this.array)),e}setY(t,e){return this.normalized&&(e=Cn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=bl(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Cn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=bl(e,this.array)),e}setW(t,e){return this.normalized&&(e=Cn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,r){return t*=this.itemSize,this.normalized&&(e=Cn(e,this.array),r=Cn(r,this.array)),this.array[t+0]=e,this.array[t+1]=r,this}setXYZ(t,e,r,i){return t*=this.itemSize,this.normalized&&(e=Cn(e,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this}setXYZW(t,e,r,i,o){return t*=this.itemSize,this.normalized&&(e=Cn(e,this.array),r=Cn(r,this.array),i=Cn(i,this.array),o=Cn(o,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==vS&&(t.usage=this.usage),t}}class FM extends Zr{constructor(t,e,r){super(new Uint16Array(t),e,r)}}class UM extends Zr{constructor(t,e,r){super(new Uint32Array(t),e,r)}}class ma extends Zr{constructor(t,e,r){super(new Float32Array(t),e,r)}}let KH=0;const Qn=new hn,Im=new qn,Qa=new ut,Gn=new Zu,wl=new Zu,Ke=new ut;class Fa extends el{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:KH++}),this.uuid=qu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(PM(t)?UM:FM)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,r=0){this.groups.push({start:t,count:e,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new ee().getNormalMatrix(t);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Qn.makeRotationFromQuaternion(t),this.applyMatrix4(Qn),this}rotateX(t){return Qn.makeRotationX(t),this.applyMatrix4(Qn),this}rotateY(t){return Qn.makeRotationY(t),this.applyMatrix4(Qn),this}rotateZ(t){return Qn.makeRotationZ(t),this.applyMatrix4(Qn),this}translate(t,e,r){return Qn.makeTranslation(t,e,r),this.applyMatrix4(Qn),this}scale(t,e,r){return Qn.makeScale(t,e,r),this.applyMatrix4(Qn),this}lookAt(t){return Im.lookAt(t),Im.updateMatrix(),this.applyMatrix4(Im.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qa).negate(),this.translate(Qa.x,Qa.y,Qa.z),this}setFromPoints(t){const e=[];for(let r=0,i=t.length;r<i;r++){const o=t[r];e.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ma(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zu);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ut(-1/0,-1/0,-1/0),new ut(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let r=0,i=e.length;r<i;r++){const o=e[r];Gn.setFromBufferAttribute(o),this.morphTargetsRelative?(Ke.addVectors(this.boundingBox.min,Gn.min),this.boundingBox.expandByPoint(Ke),Ke.addVectors(this.boundingBox.max,Gn.max),this.boundingBox.expandByPoint(Ke)):(this.boundingBox.expandByPoint(Gn.min),this.boundingBox.expandByPoint(Gn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oy);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ut,1/0);return}if(t){const r=this.boundingSphere.center;if(Gn.setFromBufferAttribute(t),e)for(let o=0,a=e.length;o<a;o++){const s=e[o];wl.setFromBufferAttribute(s),this.morphTargetsRelative?(Ke.addVectors(Gn.min,wl.min),Gn.expandByPoint(Ke),Ke.addVectors(Gn.max,wl.max),Gn.expandByPoint(Ke)):(Gn.expandByPoint(wl.min),Gn.expandByPoint(wl.max))}Gn.getCenter(r);let i=0;for(let o=0,a=t.count;o<a;o++)Ke.fromBufferAttribute(t,o),i=Math.max(i,r.distanceToSquared(Ke));if(e)for(let o=0,a=e.length;o<a;o++){const s=e[o],l=this.morphTargetsRelative;for(let u=0,c=s.count;u<c;u++)Ke.fromBufferAttribute(s,u),l&&(Qa.fromBufferAttribute(t,u),Ke.add(Qa)),i=Math.max(i,r.distanceToSquared(Ke))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.array,i=e.position.array,o=e.normal.array,a=e.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Zr(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let A=0;A<s;A++)u[A]=new ut,c[A]=new ut;const h=new ut,f=new ut,d=new ut,m=new de,g=new de,p=new de,v=new ut,y=new ut;function _(A,N,U){h.fromArray(i,A*3),f.fromArray(i,N*3),d.fromArray(i,U*3),m.fromArray(a,A*2),g.fromArray(a,N*2),p.fromArray(a,U*2),f.sub(h),d.sub(h),g.sub(m),p.sub(m);const et=1/(g.x*p.y-p.x*g.y);isFinite(et)&&(v.copy(f).multiplyScalar(p.y).addScaledVector(d,-g.y).multiplyScalar(et),y.copy(d).multiplyScalar(g.x).addScaledVector(f,-p.x).multiplyScalar(et),u[A].add(v),u[N].add(v),u[U].add(v),c[A].add(y),c[N].add(y),c[U].add(y))}let T=this.groups;T.length===0&&(T=[{start:0,count:r.length}]);for(let A=0,N=T.length;A<N;++A){const U=T[A],et=U.start,L=U.count;for(let D=et,B=et+L;D<B;D+=3)_(r[D+0],r[D+1],r[D+2])}const E=new ut,S=new ut,x=new ut,O=new ut;function b(A){x.fromArray(o,A*3),O.copy(x);const N=u[A];E.copy(N),E.sub(x.multiplyScalar(x.dot(N))).normalize(),S.crossVectors(O,N);const et=S.dot(c[A])<0?-1:1;l[A*4]=E.x,l[A*4+1]=E.y,l[A*4+2]=E.z,l[A*4+3]=et}for(let A=0,N=T.length;A<N;++A){const U=T[A],et=U.start,L=U.count;for(let D=et,B=et+L;D<B;D+=3)b(r[D+0]),b(r[D+1]),b(r[D+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Zr(new Float32Array(e.count*3),3),this.setAttribute("normal",r);else for(let f=0,d=r.count;f<d;f++)r.setXYZ(f,0,0,0);const i=new ut,o=new ut,a=new ut,s=new ut,l=new ut,u=new ut,c=new ut,h=new ut;if(t)for(let f=0,d=t.count;f<d;f+=3){const m=t.getX(f+0),g=t.getX(f+1),p=t.getX(f+2);i.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),a.fromBufferAttribute(e,p),c.subVectors(a,o),h.subVectors(i,o),c.cross(h),s.fromBufferAttribute(r,m),l.fromBufferAttribute(r,g),u.fromBufferAttribute(r,p),s.add(c),l.add(c),u.add(c),r.setXYZ(m,s.x,s.y,s.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(p,u.x,u.y,u.z)}else for(let f=0,d=e.count;f<d;f+=3)i.fromBufferAttribute(e,f+0),o.fromBufferAttribute(e,f+1),a.fromBufferAttribute(e,f+2),c.subVectors(a,o),h.subVectors(i,o),c.cross(h),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,r=t.count;e<r;e++)Ke.fromBufferAttribute(t,e),Ke.normalize(),t.setXYZ(e,Ke.x,Ke.y,Ke.z)}toNonIndexed(){function t(s,l){const u=s.array,c=s.itemSize,h=s.normalized,f=new u.constructor(l.length*c);let d=0,m=0;for(let g=0,p=l.length;g<p;g++){s.isInterleavedBufferAttribute?d=l[g]*s.data.stride+s.offset:d=l[g]*c;for(let v=0;v<c;v++)f[m++]=u[d++]}return new Zr(f,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Fa,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],u=t(l,r);e.setAttribute(s,u)}const o=this.morphAttributes;for(const s in o){const l=[],u=o[s];for(let c=0,h=u.length;c<h;c++){const f=u[c],d=t(f,r);l.push(d)}e.morphAttributes[s]=l}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,l=a.length;s<l;s++){const u=a[s];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const r=this.attributes;for(const l in r){const u=r[l];t.data.attributes[l]=u.toJSON(t.data)}const i={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h];c.push(d.toJSON(t.data))}c.length>0&&(i[l]=c,o=!0)}o&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const r=t.index;r!==null&&this.setIndex(r.clone(e));const i=t.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(e))}const o=t.morphAttributes;for(const u in o){const c=[],h=o[u];for(let f=0,d=h.length;f<d;f++)c.push(h[f].clone(e));this.morphAttributes[u]=c}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let u=0,c=a.length;u<c;u++){const h=a[u];this.addGroup(h.start,h.count,h.materialIndex)}const s=t.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const PS=new hn,Uo=new HH,ih=new oy,IS=new ut,ts=new ut,es=new ut,ns=new ut,Om=new ut,oh=new ut,ah=new de,sh=new de,lh=new de,OS=new ut,DS=new ut,LS=new ut,uh=new ut,ch=new ut;class Mi extends qn{constructor(t=new Fa,e=new ay){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,r=Object.keys(e);if(r.length>0){const i=e[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(t,e){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,a=r.morphTargetsRelative;e.fromBufferAttribute(i,t);const s=this.morphTargetInfluences;if(o&&s){oh.set(0,0,0);for(let l=0,u=o.length;l<u;l++){const c=s[l],h=o[l];c!==0&&(Om.fromBufferAttribute(h,t),a?oh.addScaledVector(Om,c):oh.addScaledVector(Om.sub(e),c))}e.add(oh)}return e}raycast(t,e){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),ih.copy(r.boundingSphere),ih.applyMatrix4(o),Uo.copy(t.ray).recast(t.near),!(ih.containsPoint(Uo.origin)===!1&&(Uo.intersectSphere(ih,IS)===null||Uo.origin.distanceToSquared(IS)>(t.far-t.near)**2))&&(PS.copy(o).invert(),Uo.copy(t.ray).applyMatrix4(PS),!(r.boundingBox!==null&&Uo.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(t,e,Uo)))}_computeIntersections(t,e,r){let i;const o=this.geometry,a=this.material,s=o.index,l=o.attributes.position,u=o.attributes.uv,c=o.attributes.uv1,h=o.attributes.normal,f=o.groups,d=o.drawRange;if(s!==null)if(Array.isArray(a))for(let m=0,g=f.length;m<g;m++){const p=f[m],v=a[p.materialIndex],y=Math.max(p.start,d.start),_=Math.min(s.count,Math.min(p.start+p.count,d.start+d.count));for(let T=y,E=_;T<E;T+=3){const S=s.getX(T),x=s.getX(T+1),O=s.getX(T+2);i=hh(this,v,t,r,u,c,h,S,x,O),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=p.materialIndex,e.push(i))}}else{const m=Math.max(0,d.start),g=Math.min(s.count,d.start+d.count);for(let p=m,v=g;p<v;p+=3){const y=s.getX(p),_=s.getX(p+1),T=s.getX(p+2);i=hh(this,a,t,r,u,c,h,y,_,T),i&&(i.faceIndex=Math.floor(p/3),e.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,g=f.length;m<g;m++){const p=f[m],v=a[p.materialIndex],y=Math.max(p.start,d.start),_=Math.min(l.count,Math.min(p.start+p.count,d.start+d.count));for(let T=y,E=_;T<E;T+=3){const S=T,x=T+1,O=T+2;i=hh(this,v,t,r,u,c,h,S,x,O),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=p.materialIndex,e.push(i))}}else{const m=Math.max(0,d.start),g=Math.min(l.count,d.start+d.count);for(let p=m,v=g;p<v;p+=3){const y=p,_=p+1,T=p+2;i=hh(this,a,t,r,u,c,h,y,_,T),i&&(i.faceIndex=Math.floor(p/3),e.push(i))}}}}function ZH(n,t,e,r,i,o,a,s){let l;if(t.side===Dn?l=r.intersectTriangle(a,o,i,!0,s):l=r.intersectTriangle(i,o,a,t.side===xo,s),l===null)return null;ch.copy(s),ch.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(ch);return u<e.near||u>e.far?null:{distance:u,point:ch.clone(),object:n}}function hh(n,t,e,r,i,o,a,s,l,u){n.getVertexPosition(s,ts),n.getVertexPosition(l,es),n.getVertexPosition(u,ns);const c=ZH(n,t,e,r,ts,es,ns,uh);if(c){i&&(ah.fromBufferAttribute(i,s),sh.fromBufferAttribute(i,l),lh.fromBufferAttribute(i,u),c.uv=Sr.getInterpolation(uh,ts,es,ns,ah,sh,lh,new de)),o&&(ah.fromBufferAttribute(o,s),sh.fromBufferAttribute(o,l),lh.fromBufferAttribute(o,u),c.uv1=Sr.getInterpolation(uh,ts,es,ns,ah,sh,lh,new de),c.uv2=c.uv1),a&&(OS.fromBufferAttribute(a,s),DS.fromBufferAttribute(a,l),LS.fromBufferAttribute(a,u),c.normal=Sr.getInterpolation(uh,ts,es,ns,OS,DS,LS,new ut),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a:s,b:l,c:u,normal:new ut,materialIndex:0};Sr.getNormal(ts,es,ns,h.normal),c.face=h}return c}class nl extends Fa{constructor(t=1,e=1,r=1,i=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const l=[],u=[],c=[],h=[];let f=0,d=0;m("z","y","x",-1,-1,r,e,t,a,o,0),m("z","y","x",1,-1,r,e,-t,a,o,1),m("x","z","y",1,1,t,r,e,i,a,2),m("x","z","y",1,-1,t,r,-e,i,a,3),m("x","y","z",1,-1,t,e,r,i,o,4),m("x","y","z",-1,-1,t,e,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new ma(u,3)),this.setAttribute("normal",new ma(c,3)),this.setAttribute("uv",new ma(h,2));function m(g,p,v,y,_,T,E,S,x,O,b){const A=T/x,N=E/O,U=T/2,et=E/2,L=S/2,D=x+1,B=O+1;let q=0,Q=0;const rt=new ut;for(let $=0;$<B;$++){const k=$*N-et;for(let pt=0;pt<D;pt++){const J=pt*A-U;rt[g]=J*y,rt[p]=k*_,rt[v]=L,u.push(rt.x,rt.y,rt.z),rt[g]=0,rt[p]=0,rt[v]=S>0?1:-1,c.push(rt.x,rt.y,rt.z),h.push(pt/x),h.push(1-$/O),q+=1}}for(let $=0;$<O;$++)for(let k=0;k<x;k++){const pt=f+k+D*$,J=f+k+D*($+1),it=f+(k+1)+D*($+1),vt=f+(k+1)+D*$;l.push(pt,J,vt),l.push(J,it,vt),Q+=6}s.addGroup(d,Q,b),d+=Q,f+=q}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new nl(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Xs(n){const t={};for(const e in n){t[e]={};for(const r in n[e]){const i=n[e][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][r]=null):t[e][r]=i.clone():Array.isArray(i)?t[e][r]=i.slice():t[e][r]=i}}return t}function Tn(n){const t={};for(let e=0;e<n.length;e++){const r=Xs(n[e]);for(const i in r)t[i]=r[i]}return t}function JH(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function BM(n){return n.getRenderTarget()===null?n.outputColorSpace:he.workingColorSpace}const QH={clone:Xs,merge:Tn};var t5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,e5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ma extends zd{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=t5,this.fragmentShader=e5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Xs(t.uniforms),this.uniformsGroups=JH(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?e.uniforms[i]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[i]={type:"m4",value:a.toArray()}:e.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(e.extensions=r),e}}class GM extends qn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hn,this.projectionMatrix=new hn,this.projectionMatrixInverse=new hn,this.coordinateSystem=Ai}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let ir=class extends GM{constructor(t=50,e=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=Og*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(mm*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Og*2*Math.atan(Math.tan(mm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,r,i,o,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(mm*.5*this.fov)/this.zoom,r=2*e,i=this.aspect*r,o=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;o+=a.offsetX*i/l,e-=a.offsetY*r/u,i*=a.width/l,r*=a.height/u}const s=this.filmOffset;s!==0&&(o+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,e,e-r,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}};const rs=-90,is=1;class n5 extends qn{constructor(t,e,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ir(rs,is,t,e);i.layers=this.layers,this.add(i);const o=new ir(rs,is,t,e);o.layers=this.layers,this.add(o);const a=new ir(rs,is,t,e);a.layers=this.layers,this.add(a);const s=new ir(rs,is,t,e);s.layers=this.layers,this.add(s);const l=new ir(rs,is,t,e);l.layers=this.layers,this.add(l);const u=new ir(rs,is,t,e);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[r,i,o,a,s,l]=e;for(const u of e)this.remove(u);if(t===Ai)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(t===td)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const u of e)this.add(u),u.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,a,s,l,u,c]=this.children,h=t.getRenderTarget(),f=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),m=t.xr.enabled;t.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0,i),t.render(e,o),t.setRenderTarget(r,1,i),t.render(e,a),t.setRenderTarget(r,2,i),t.render(e,s),t.setRenderTarget(r,3,i),t.render(e,l),t.setRenderTarget(r,4,i),t.render(e,u),r.texture.generateMipmaps=g,t.setRenderTarget(r,5,i),t.render(e,c),t.setRenderTarget(h,f,d),t.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class kM extends Yn{constructor(t,e,r,i,o,a,s,l,u,c){t=t!==void 0?t:[],e=e!==void 0?e:zs,super(t,e,r,i,o,a,s,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class r5 extends Aa{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const r={width:t,height:t,depth:1},i=[r,r,r,r,r,r];e.encoding!==void 0&&(nu("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===pa?sn:or),this.texture=new kM(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:rr}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new nl(5,5,5),o=new Ma({name:"CubemapFromEquirect",uniforms:Xs(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Dn,blending:po});o.uniforms.tEquirect.value=e;const a=new Mi(i,o),s=e.minFilter;return e.minFilter===Au&&(e.minFilter=rr),new n5(1,10,this).update(t,a),e.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,r,i){const o=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,r,i);t.setRenderTarget(o)}}const Dm=new ut,i5=new ut,o5=new ee;class Wo{constructor(t=new ut(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,r,i){return this.normal.set(t,e,r),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,r){const i=Dm.subVectors(r,e).cross(i5.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const r=t.delta(Dm),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:e.copy(t.start).addScaledVector(r,o)}intersectsLine(t){const e=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return e<0&&r>0||r<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const r=e||o5.getNormalMatrix(t),i=this.coplanarPoint(Dm).applyMatrix4(t),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Bo=new oy,fh=new ut;class HM{constructor(t=new Wo,e=new Wo,r=new Wo,i=new Wo,o=new Wo,a=new Wo){this.planes=[t,e,r,i,o,a]}set(t,e,r,i,o,a){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(r),s[3].copy(i),s[4].copy(o),s[5].copy(a),this}copy(t){const e=this.planes;for(let r=0;r<6;r++)e[r].copy(t.planes[r]);return this}setFromProjectionMatrix(t,e=Ai){const r=this.planes,i=t.elements,o=i[0],a=i[1],s=i[2],l=i[3],u=i[4],c=i[5],h=i[6],f=i[7],d=i[8],m=i[9],g=i[10],p=i[11],v=i[12],y=i[13],_=i[14],T=i[15];if(r[0].setComponents(l-o,f-u,p-d,T-v).normalize(),r[1].setComponents(l+o,f+u,p+d,T+v).normalize(),r[2].setComponents(l+a,f+c,p+m,T+y).normalize(),r[3].setComponents(l-a,f-c,p-m,T-y).normalize(),r[4].setComponents(l-s,f-h,p-g,T-_).normalize(),e===Ai)r[5].setComponents(l+s,f+h,p+g,T+_).normalize();else if(e===td)r[5].setComponents(s,h,g,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Bo.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Bo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Bo)}intersectsSprite(t){return Bo.center.set(0,0,0),Bo.radius=.7071067811865476,Bo.applyMatrix4(t.matrixWorld),this.intersectsSphere(Bo)}intersectsSphere(t){const e=this.planes,r=t.center,i=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let r=0;r<6;r++){const i=e[r];if(fh.x=i.normal.x>0?t.max.x:t.min.x,fh.y=i.normal.y>0?t.max.y:t.min.y,fh.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(fh)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let r=0;r<6;r++)if(e[r].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function zM(){let n=null,t=!1,e=null,r=null;function i(o,a){e(o,a),r=n.requestAnimationFrame(i)}return{start:function(){t!==!0&&e!==null&&(r=n.requestAnimationFrame(i),t=!0)},stop:function(){n.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){n=o}}}function a5(n,t){const e=t.isWebGL2,r=new WeakMap;function i(u,c){const h=u.array,f=u.usage,d=h.byteLength,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,h,f),u.onUploadCallback();let g;if(h instanceof Float32Array)g=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(e)g=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)g=n.SHORT;else if(h instanceof Uint32Array)g=n.UNSIGNED_INT;else if(h instanceof Int32Array)g=n.INT;else if(h instanceof Int8Array)g=n.BYTE;else if(h instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:d}}function o(u,c,h){const f=c.array,d=c._updateRange,m=c.updateRanges;if(n.bindBuffer(h,u),d.count===-1&&m.length===0&&n.bufferSubData(h,0,f),m.length!==0){for(let g=0,p=m.length;g<p;g++){const v=m[g];e?n.bufferSubData(h,v.start*f.BYTES_PER_ELEMENT,f,v.start,v.count):n.bufferSubData(h,v.start*f.BYTES_PER_ELEMENT,f.subarray(v.start,v.start+v.count))}c.clearUpdateRanges()}d.count!==-1&&(e?n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1),c.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const f=r.get(u);(!f||f.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);if(h===void 0)r.set(u,i(u,c));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(h.buffer,u,c),h.version=u.version}}return{get:a,remove:s,update:l}}class sy extends Fa{constructor(t=1,e=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:i};const o=t/2,a=e/2,s=Math.floor(r),l=Math.floor(i),u=s+1,c=l+1,h=t/s,f=e/l,d=[],m=[],g=[],p=[];for(let v=0;v<c;v++){const y=v*f-a;for(let _=0;_<u;_++){const T=_*h-o;m.push(T,-y,0),g.push(0,0,1),p.push(_/s),p.push(1-v/l)}}for(let v=0;v<l;v++)for(let y=0;y<s;y++){const _=y+u*v,T=y+u*(v+1),E=y+1+u*(v+1),S=y+1+u*v;d.push(_,T,S),d.push(T,E,S)}this.setIndex(d),this.setAttribute("position",new ma(m,3)),this.setAttribute("normal",new ma(g,3)),this.setAttribute("uv",new ma(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new sy(t.width,t.height,t.widthSegments,t.heightSegments)}}var s5=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,l5=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,u5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,c5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,h5=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,f5=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,d5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,p5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,m5=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,v5=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,g5=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,_5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,y5=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,x5=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,b5=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,S5=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,E5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,T5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,w5=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,A5=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,M5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,C5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,R5=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,P5=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,I5=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,O5=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,D5=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,L5=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,N5=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,F5=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,U5="gl_FragColor = linearToOutputTexel( gl_FragColor );",B5=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,G5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,k5=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,H5=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,z5=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,V5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,W5=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,X5=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$5=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,j5=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Y5=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,q5=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,K5=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Z5=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,J5=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Q5=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,tz=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ez=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,nz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iz=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,oz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,az=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,sz=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,uz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,cz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,hz=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,dz=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,pz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,mz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,vz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_z=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,yz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,xz=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,bz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Sz=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Ez=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Tz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,wz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Az=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Cz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Rz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Pz=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Iz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Oz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Dz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Lz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Nz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Fz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Uz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Bz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Gz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,kz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Hz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,zz=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Vz=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Wz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Xz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$z=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,jz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Yz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,qz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Kz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Zz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Jz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Qz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,t8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,e8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,n8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,r8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,i8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,o8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const a8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,s8=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,l8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,u8=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,c8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,h8=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,f8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,d8=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,p8=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,m8=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,v8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,g8=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_8=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,y8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,x8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,b8=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,S8=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,E8=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,T8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,w8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,M8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,C8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,R8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,I8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,O8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,D8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,N8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,F8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,B8=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,G8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Zt={alphahash_fragment:s5,alphahash_pars_fragment:l5,alphamap_fragment:u5,alphamap_pars_fragment:c5,alphatest_fragment:h5,alphatest_pars_fragment:f5,aomap_fragment:d5,aomap_pars_fragment:p5,batching_pars_vertex:m5,batching_vertex:v5,begin_vertex:g5,beginnormal_vertex:_5,bsdfs:y5,iridescence_fragment:x5,bumpmap_pars_fragment:b5,clipping_planes_fragment:S5,clipping_planes_pars_fragment:E5,clipping_planes_pars_vertex:T5,clipping_planes_vertex:w5,color_fragment:A5,color_pars_fragment:M5,color_pars_vertex:C5,color_vertex:R5,common:P5,cube_uv_reflection_fragment:I5,defaultnormal_vertex:O5,displacementmap_pars_vertex:D5,displacementmap_vertex:L5,emissivemap_fragment:N5,emissivemap_pars_fragment:F5,colorspace_fragment:U5,colorspace_pars_fragment:B5,envmap_fragment:G5,envmap_common_pars_fragment:k5,envmap_pars_fragment:H5,envmap_pars_vertex:z5,envmap_physical_pars_fragment:tz,envmap_vertex:V5,fog_vertex:W5,fog_pars_vertex:X5,fog_fragment:$5,fog_pars_fragment:j5,gradientmap_pars_fragment:Y5,lightmap_fragment:q5,lightmap_pars_fragment:K5,lights_lambert_fragment:Z5,lights_lambert_pars_fragment:J5,lights_pars_begin:Q5,lights_toon_fragment:ez,lights_toon_pars_fragment:nz,lights_phong_fragment:rz,lights_phong_pars_fragment:iz,lights_physical_fragment:oz,lights_physical_pars_fragment:az,lights_fragment_begin:sz,lights_fragment_maps:lz,lights_fragment_end:uz,logdepthbuf_fragment:cz,logdepthbuf_pars_fragment:hz,logdepthbuf_pars_vertex:fz,logdepthbuf_vertex:dz,map_fragment:pz,map_pars_fragment:mz,map_particle_fragment:vz,map_particle_pars_fragment:gz,metalnessmap_fragment:_z,metalnessmap_pars_fragment:yz,morphcolor_vertex:xz,morphnormal_vertex:bz,morphtarget_pars_vertex:Sz,morphtarget_vertex:Ez,normal_fragment_begin:Tz,normal_fragment_maps:wz,normal_pars_fragment:Az,normal_pars_vertex:Mz,normal_vertex:Cz,normalmap_pars_fragment:Rz,clearcoat_normal_fragment_begin:Pz,clearcoat_normal_fragment_maps:Iz,clearcoat_pars_fragment:Oz,iridescence_pars_fragment:Dz,opaque_fragment:Lz,packing:Nz,premultiplied_alpha_fragment:Fz,project_vertex:Uz,dithering_fragment:Bz,dithering_pars_fragment:Gz,roughnessmap_fragment:kz,roughnessmap_pars_fragment:Hz,shadowmap_pars_fragment:zz,shadowmap_pars_vertex:Vz,shadowmap_vertex:Wz,shadowmask_pars_fragment:Xz,skinbase_vertex:$z,skinning_pars_vertex:jz,skinning_vertex:Yz,skinnormal_vertex:qz,specularmap_fragment:Kz,specularmap_pars_fragment:Zz,tonemapping_fragment:Jz,tonemapping_pars_fragment:Qz,transmission_fragment:t8,transmission_pars_fragment:e8,uv_pars_fragment:n8,uv_pars_vertex:r8,uv_vertex:i8,worldpos_vertex:o8,background_vert:a8,background_frag:s8,backgroundCube_vert:l8,backgroundCube_frag:u8,cube_vert:c8,cube_frag:h8,depth_vert:f8,depth_frag:d8,distanceRGBA_vert:p8,distanceRGBA_frag:m8,equirect_vert:v8,equirect_frag:g8,linedashed_vert:_8,linedashed_frag:y8,meshbasic_vert:x8,meshbasic_frag:b8,meshlambert_vert:S8,meshlambert_frag:E8,meshmatcap_vert:T8,meshmatcap_frag:w8,meshnormal_vert:A8,meshnormal_frag:M8,meshphong_vert:C8,meshphong_frag:R8,meshphysical_vert:P8,meshphysical_frag:I8,meshtoon_vert:O8,meshtoon_frag:D8,points_vert:L8,points_frag:N8,shadow_vert:F8,shadow_frag:U8,sprite_vert:B8,sprite_frag:G8},Ct={common:{diffuse:{value:new fe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ee},alphaMap:{value:null},alphaMapTransform:{value:new ee},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ee}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ee}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ee}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ee},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ee},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ee},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ee}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ee}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ee}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ee},alphaTest:{value:0},uvTransform:{value:new ee}},sprite:{diffuse:{value:new fe(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ee},alphaMap:{value:null},alphaMapTransform:{value:new ee},alphaTest:{value:0}}},zr={basic:{uniforms:Tn([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:Zt.meshbasic_vert,fragmentShader:Zt.meshbasic_frag},lambert:{uniforms:Tn([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new fe(0)}}]),vertexShader:Zt.meshlambert_vert,fragmentShader:Zt.meshlambert_frag},phong:{uniforms:Tn([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new fe(0)},specular:{value:new fe(1118481)},shininess:{value:30}}]),vertexShader:Zt.meshphong_vert,fragmentShader:Zt.meshphong_frag},standard:{uniforms:Tn([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag},toon:{uniforms:Tn([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new fe(0)}}]),vertexShader:Zt.meshtoon_vert,fragmentShader:Zt.meshtoon_frag},matcap:{uniforms:Tn([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:Zt.meshmatcap_vert,fragmentShader:Zt.meshmatcap_frag},points:{uniforms:Tn([Ct.points,Ct.fog]),vertexShader:Zt.points_vert,fragmentShader:Zt.points_frag},dashed:{uniforms:Tn([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zt.linedashed_vert,fragmentShader:Zt.linedashed_frag},depth:{uniforms:Tn([Ct.common,Ct.displacementmap]),vertexShader:Zt.depth_vert,fragmentShader:Zt.depth_frag},normal:{uniforms:Tn([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:Zt.meshnormal_vert,fragmentShader:Zt.meshnormal_frag},sprite:{uniforms:Tn([Ct.sprite,Ct.fog]),vertexShader:Zt.sprite_vert,fragmentShader:Zt.sprite_frag},background:{uniforms:{uvTransform:{value:new ee},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Zt.background_vert,fragmentShader:Zt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Zt.backgroundCube_vert,fragmentShader:Zt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Zt.cube_vert,fragmentShader:Zt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zt.equirect_vert,fragmentShader:Zt.equirect_frag},distanceRGBA:{uniforms:Tn([Ct.common,Ct.displacementmap,{referencePosition:{value:new ut},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zt.distanceRGBA_vert,fragmentShader:Zt.distanceRGBA_frag},shadow:{uniforms:Tn([Ct.lights,Ct.fog,{color:{value:new fe(0)},opacity:{value:1}}]),vertexShader:Zt.shadow_vert,fragmentShader:Zt.shadow_frag}};zr.physical={uniforms:Tn([zr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ee},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ee},clearcoatNormalScale:{value:new de(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ee},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ee},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ee},sheen:{value:0},sheenColor:{value:new fe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ee},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ee},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ee},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ee},attenuationDistance:{value:0},attenuationColor:{value:new fe(0)},specularColor:{value:new fe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ee},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ee},anisotropyVector:{value:new de},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ee}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag};const dh={r:0,b:0,g:0};function k8(n,t,e,r,i,o,a){const s=new fe(0);let l=o===!0?0:1,u,c,h=null,f=0,d=null;function m(p,v){let y=!1,_=v.isScene===!0?v.background:null;_&&_.isTexture&&(_=(v.backgroundBlurriness>0?e:t).get(_)),_===null?g(s,l):_&&_.isColor&&(g(_,1),y=!0);const T=n.xr.getEnvironmentBlendMode();T==="additive"?r.buffers.color.setClear(0,0,0,1,a):T==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Gd)?(c===void 0&&(c=new Mi(new nl(1,1,1),new Ma({name:"BackgroundCubeMaterial",uniforms:Xs(zr.backgroundCube.uniforms),vertexShader:zr.backgroundCube.vertexShader,fragmentShader:zr.backgroundCube.fragmentShader,side:Dn,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(E,S,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=he.getTransfer(_.colorSpace)!==xe,(h!==_||f!==_.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,h=_,f=_.version,d=n.toneMapping),c.layers.enableAll(),p.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(u===void 0&&(u=new Mi(new sy(2,2),new Ma({name:"BackgroundMaterial",uniforms:Xs(zr.background.uniforms),vertexShader:zr.background.vertexShader,fragmentShader:zr.background.fragmentShader,side:xo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=_,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=he.getTransfer(_.colorSpace)!==xe,_.matrixAutoUpdate===!0&&_.updateMatrix(),u.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||f!==_.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,h=_,f=_.version,d=n.toneMapping),u.layers.enableAll(),p.unshift(u,u.geometry,u.material,0,0,null))}function g(p,v){p.getRGB(dh,BM(n)),r.buffers.color.setClear(dh.r,dh.g,dh.b,v,a)}return{getClearColor:function(){return s},setClearColor:function(p,v=1){s.set(p),l=v,g(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(p){l=p,g(s,l)},render:m}}function H8(n,t,e,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||o!==null,s={},l=p(null);let u=l,c=!1;function h(L,D,B,q,Q){let rt=!1;if(a){const $=g(q,B,D);u!==$&&(u=$,d(u.object)),rt=v(L,q,B,Q),rt&&y(L,q,B,Q)}else{const $=D.wireframe===!0;(u.geometry!==q.id||u.program!==B.id||u.wireframe!==$)&&(u.geometry=q.id,u.program=B.id,u.wireframe=$,rt=!0)}Q!==null&&e.update(Q,n.ELEMENT_ARRAY_BUFFER),(rt||c)&&(c=!1,O(L,D,B,q),Q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Q).buffer))}function f(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function d(L){return r.isWebGL2?n.bindVertexArray(L):o.bindVertexArrayOES(L)}function m(L){return r.isWebGL2?n.deleteVertexArray(L):o.deleteVertexArrayOES(L)}function g(L,D,B){const q=B.wireframe===!0;let Q=s[L.id];Q===void 0&&(Q={},s[L.id]=Q);let rt=Q[D.id];rt===void 0&&(rt={},Q[D.id]=rt);let $=rt[q];return $===void 0&&($=p(f()),rt[q]=$),$}function p(L){const D=[],B=[],q=[];for(let Q=0;Q<i;Q++)D[Q]=0,B[Q]=0,q[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:B,attributeDivisors:q,object:L,attributes:{},index:null}}function v(L,D,B,q){const Q=u.attributes,rt=D.attributes;let $=0;const k=B.getAttributes();for(const pt in k)if(k[pt].location>=0){const it=Q[pt];let vt=rt[pt];if(vt===void 0&&(pt==="instanceMatrix"&&L.instanceMatrix&&(vt=L.instanceMatrix),pt==="instanceColor"&&L.instanceColor&&(vt=L.instanceColor)),it===void 0||it.attribute!==vt||vt&&it.data!==vt.data)return!0;$++}return u.attributesNum!==$||u.index!==q}function y(L,D,B,q){const Q={},rt=D.attributes;let $=0;const k=B.getAttributes();for(const pt in k)if(k[pt].location>=0){let it=rt[pt];it===void 0&&(pt==="instanceMatrix"&&L.instanceMatrix&&(it=L.instanceMatrix),pt==="instanceColor"&&L.instanceColor&&(it=L.instanceColor));const vt={};vt.attribute=it,it&&it.data&&(vt.data=it.data),Q[pt]=vt,$++}u.attributes=Q,u.attributesNum=$,u.index=q}function _(){const L=u.newAttributes;for(let D=0,B=L.length;D<B;D++)L[D]=0}function T(L){E(L,0)}function E(L,D){const B=u.newAttributes,q=u.enabledAttributes,Q=u.attributeDivisors;B[L]=1,q[L]===0&&(n.enableVertexAttribArray(L),q[L]=1),Q[L]!==D&&((r.isWebGL2?n:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,D),Q[L]=D)}function S(){const L=u.newAttributes,D=u.enabledAttributes;for(let B=0,q=D.length;B<q;B++)D[B]!==L[B]&&(n.disableVertexAttribArray(B),D[B]=0)}function x(L,D,B,q,Q,rt,$){$===!0?n.vertexAttribIPointer(L,D,B,Q,rt):n.vertexAttribPointer(L,D,B,q,Q,rt)}function O(L,D,B,q){if(r.isWebGL2===!1&&(L.isInstancedMesh||q.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;_();const Q=q.attributes,rt=B.getAttributes(),$=D.defaultAttributeValues;for(const k in rt){const pt=rt[k];if(pt.location>=0){let J=Q[k];if(J===void 0&&(k==="instanceMatrix"&&L.instanceMatrix&&(J=L.instanceMatrix),k==="instanceColor"&&L.instanceColor&&(J=L.instanceColor)),J!==void 0){const it=J.normalized,vt=J.itemSize,gt=e.get(J);if(gt===void 0)continue;const W=gt.buffer,ft=gt.type,at=gt.bytesPerElement,mt=r.isWebGL2===!0&&(ft===n.INT||ft===n.UNSIGNED_INT||J.gpuType===bM);if(J.isInterleavedBufferAttribute){const _t=J.data,X=_t.stride,R=J.offset;if(_t.isInstancedInterleavedBuffer){for(let C=0;C<pt.locationSize;C++)E(pt.location+C,_t.meshPerAttribute);L.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=_t.meshPerAttribute*_t.count)}else for(let C=0;C<pt.locationSize;C++)T(pt.location+C);n.bindBuffer(n.ARRAY_BUFFER,W);for(let C=0;C<pt.locationSize;C++)x(pt.location+C,vt/pt.locationSize,ft,it,X*at,(R+vt/pt.locationSize*C)*at,mt)}else{if(J.isInstancedBufferAttribute){for(let _t=0;_t<pt.locationSize;_t++)E(pt.location+_t,J.meshPerAttribute);L.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let _t=0;_t<pt.locationSize;_t++)T(pt.location+_t);n.bindBuffer(n.ARRAY_BUFFER,W);for(let _t=0;_t<pt.locationSize;_t++)x(pt.location+_t,vt/pt.locationSize,ft,it,vt*at,vt/pt.locationSize*_t*at,mt)}}else if($!==void 0){const it=$[k];if(it!==void 0)switch(it.length){case 2:n.vertexAttrib2fv(pt.location,it);break;case 3:n.vertexAttrib3fv(pt.location,it);break;case 4:n.vertexAttrib4fv(pt.location,it);break;default:n.vertexAttrib1fv(pt.location,it)}}}}S()}function b(){U();for(const L in s){const D=s[L];for(const B in D){const q=D[B];for(const Q in q)m(q[Q].object),delete q[Q];delete D[B]}delete s[L]}}function A(L){if(s[L.id]===void 0)return;const D=s[L.id];for(const B in D){const q=D[B];for(const Q in q)m(q[Q].object),delete q[Q];delete D[B]}delete s[L.id]}function N(L){for(const D in s){const B=s[D];if(B[L.id]===void 0)continue;const q=B[L.id];for(const Q in q)m(q[Q].object),delete q[Q];delete B[L.id]}}function U(){et(),c=!0,u!==l&&(u=l,d(u.object))}function et(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:U,resetDefaultState:et,dispose:b,releaseStatesOfGeometry:A,releaseStatesOfProgram:N,initAttributes:_,enableAttribute:T,disableUnusedAttributes:S}}function z8(n,t,e,r){const i=r.isWebGL2;let o;function a(c){o=c}function s(c,h){n.drawArrays(o,c,h),e.update(h,o,1)}function l(c,h,f){if(f===0)return;let d,m;if(i)d=n,m="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[m](o,c,h,f),e.update(h,o,f)}function u(c,h,f){if(f===0)return;const d=t.get("WEBGL_multi_draw");if(d===null)for(let m=0;m<f;m++)this.render(c[m],h[m]);else{d.multiDrawArraysWEBGL(o,c,0,h,0,f);let m=0;for(let g=0;g<f;g++)m+=h[g];e.update(m,o,1)}}this.setMode=a,this.render=s,this.renderInstances=l,this.renderMultiDraw=u}function V8(n,t,e){let r;function i(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){const x=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(x){if(x==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return x==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let s=e.precision!==void 0?e.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const u=a||t.has("WEBGL_draw_buffers"),c=e.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),p=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),y=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),_=f>0,T=a||t.has("OES_texture_float"),E=_&&T,S=a?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:p,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:T,floatVertexTextures:E,maxSamples:S}}function W8(n){const t=this;let e=null,r=0,i=!1,o=!1;const a=new Wo,s=new ee,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const d=h.length!==0||f||r!==0||i;return i=f,r=h.length,d},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,f){e=c(h,f,0)},this.setState=function(h,f,d){const m=h.clippingPlanes,g=h.clipIntersection,p=h.clipShadows,v=n.get(h);if(!i||m===null||m.length===0||o&&!p)o?c(null):u();else{const y=o?0:r,_=y*4;let T=v.clippingState||null;l.value=T,T=c(m,f,_,d);for(let E=0;E!==_;++E)T[E]=e[E];v.clippingState=T,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}};function u(){l.value!==e&&(l.value=e,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(h,f,d,m){const g=h!==null?h.length:0;let p=null;if(g!==0){if(p=l.value,m!==!0||p===null){const v=d+g*4,y=f.matrixWorldInverse;s.getNormalMatrix(y),(p===null||p.length<v)&&(p=new Float32Array(v));for(let _=0,T=d;_!==g;++_,T+=4)a.copy(h[_]).applyMatrix4(y,s),a.normal.toArray(p,T),p[T+3]=a.constant}l.value=p,l.needsUpdate=!0}return t.numPlanes=g,t.numIntersection=0,p}}function X8(n){let t=new WeakMap;function e(a,s){return s===Mg?a.mapping=zs:s===Cg&&(a.mapping=Vs),a}function r(a){if(a&&a.isTexture){const s=a.mapping;if(s===Mg||s===Cg)if(t.has(a)){const l=t.get(a).texture;return e(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new r5(l.height/2);return u.fromEquirectangularTexture(n,a),t.set(a,u),a.addEventListener("dispose",i),e(u.texture,a.mapping)}else return null}}return a}function i(a){const s=a.target;s.removeEventListener("dispose",i);const l=t.get(s);l!==void 0&&(t.delete(s),l.dispose())}function o(){t=new WeakMap}return{get:r,dispose:o}}class $8 extends GM{constructor(t=-1,e=1,r=1,i=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=r,this.bottom=i,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,r,i,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-t,a=r+t,s=i+e,l=i-e;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,a=o+u*this.view.width,s-=c*this.view.offsetY,l=s-c*this.view.height}this.projectionMatrix.makeOrthographic(o,a,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}const ys=4,NS=[.125,.215,.35,.446,.526,.582],Jo=20,Lm=new $8,FS=new fe;let Nm=null,Fm=0,Um=0;const Xo=(1+Math.sqrt(5))/2,os=1/Xo,US=[new ut(1,1,1),new ut(-1,1,1),new ut(1,1,-1),new ut(-1,1,-1),new ut(0,Xo,os),new ut(0,Xo,-os),new ut(os,0,Xo),new ut(-os,0,Xo),new ut(Xo,os,0),new ut(-Xo,os,0)];class BS{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,r=.1,i=100){Nm=this._renderer.getRenderTarget(),Fm=this._renderer.getActiveCubeFace(),Um=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,r,i,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=HS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Nm,Fm,Um),t.scissorTest=!1,ph(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===zs||t.mapping===Vs?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Nm=this._renderer.getRenderTarget(),Fm=this._renderer.getActiveCubeFace(),Um=this._renderer.getActiveMipmapLevel();const r=e||this._allocateTargets();return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,r={magFilter:rr,minFilter:rr,generateMipmaps:!1,type:Mu,format:Tr,colorSpace:Li,depthBuffer:!1},i=GS(t,e,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=GS(t,e,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=j8(o)),this._blurMaterial=Y8(o,t,e)}return i}_compileMaterial(t){const e=new Mi(this._lodPlanes[0],t);this._renderer.compile(e,Lm)}_sceneToCubeUV(t,e,r,i){const s=new ir(90,1,e,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,f=c.toneMapping;c.getClearColor(FS),c.toneMapping=mo,c.autoClear=!1;const d=new ay({name:"PMREM.Background",side:Dn,depthWrite:!1,depthTest:!1}),m=new Mi(new nl,d);let g=!1;const p=t.background;p?p.isColor&&(d.color.copy(p),t.background=null,g=!0):(d.color.copy(FS),g=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(s.up.set(0,l[v],0),s.lookAt(u[v],0,0)):y===1?(s.up.set(0,0,l[v]),s.lookAt(0,u[v],0)):(s.up.set(0,l[v],0),s.lookAt(0,0,u[v]));const _=this._cubeSize;ph(i,y*_,v>2?_:0,_,_),c.setRenderTarget(i),g&&c.render(m,s),c.render(t,s)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=f,c.autoClear=h,t.background=p}_textureToCubeUV(t,e){const r=this._renderer,i=t.mapping===zs||t.mapping===Vs;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=HS()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=kS());const o=i?this._cubemapMaterial:this._equirectMaterial,a=new Mi(this._lodPlanes[0],o),s=o.uniforms;s.envMap.value=t;const l=this._cubeSize;ph(e,0,0,3*l,2*l),r.setRenderTarget(e),r.render(a,Lm)}_applyPMREM(t){const e=this._renderer,r=e.autoClear;e.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=US[(i-1)%US.length];this._blur(t,i-1,i,o,a)}e.autoClear=r}_blur(t,e,r,i,o){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,r,i,"latitudinal",o),this._halfBlur(a,t,r,r,i,"longitudinal",o)}_halfBlur(t,e,r,i,o,a,s){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new Mi(this._lodPlanes[i],u),f=u.uniforms,d=this._sizeLods[r]-1,m=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*Jo-1),g=o/m,p=isFinite(o)?1+Math.floor(c*g):Jo;p>Jo&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Jo}`);const v=[];let y=0;for(let x=0;x<Jo;++x){const O=x/g,b=Math.exp(-O*O/2);v.push(b),x===0?y+=b:x<p&&(y+=2*b)}for(let x=0;x<v.length;x++)v[x]=v[x]/y;f.envMap.value=t.texture,f.samples.value=p,f.weights.value=v,f.latitudinal.value=a==="latitudinal",s&&(f.poleAxis.value=s);const{_lodMax:_}=this;f.dTheta.value=m,f.mipInt.value=_-r;const T=this._sizeLods[i],E=3*T*(i>_-ys?i-_+ys:0),S=4*(this._cubeSize-T);ph(e,E,S,3*T,2*T),l.setRenderTarget(e),l.render(h,Lm)}}function j8(n){const t=[],e=[],r=[];let i=n;const o=n-ys+1+NS.length;for(let a=0;a<o;a++){const s=Math.pow(2,i);e.push(s);let l=1/s;a>n-ys?l=NS[a-n+ys-1]:a===0&&(l=0),r.push(l);const u=1/(s-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,m=6,g=3,p=2,v=1,y=new Float32Array(g*m*d),_=new Float32Array(p*m*d),T=new Float32Array(v*m*d);for(let S=0;S<d;S++){const x=S%3*2/3-1,O=S>2?0:-1,b=[x,O,0,x+2/3,O,0,x+2/3,O+1,0,x,O,0,x+2/3,O+1,0,x,O+1,0];y.set(b,g*m*S),_.set(f,p*m*S);const A=[S,S,S,S,S,S];T.set(A,v*m*S)}const E=new Fa;E.setAttribute("position",new Zr(y,g)),E.setAttribute("uv",new Zr(_,p)),E.setAttribute("faceIndex",new Zr(T,v)),t.push(E),i>ys&&i--}return{lodPlanes:t,sizeLods:e,sigmas:r}}function GS(n,t,e){const r=new Aa(n,t,e);return r.texture.mapping=Gd,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ph(n,t,e,r,i){n.viewport.set(t,e,r,i),n.scissor.set(t,e,r,i)}function Y8(n,t,e){const r=new Float32Array(Jo),i=new ut(0,1,0);return new Ma({name:"SphericalGaussianBlur",defines:{n:Jo,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:ly(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function kS(){return new Ma({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ly(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function HS(){return new Ma({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ly(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function ly(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function q8(n){let t=new WeakMap,e=null;function r(s){if(s&&s.isTexture){const l=s.mapping,u=l===Mg||l===Cg,c=l===zs||l===Vs;if(u||c)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let h=t.get(s);return e===null&&(e=new BS(n)),h=u?e.fromEquirectangular(s,h):e.fromCubemap(s,h),t.set(s,h),h.texture}else{if(t.has(s))return t.get(s).texture;{const h=s.image;if(u&&h&&h.height>0||c&&h&&i(h)){e===null&&(e=new BS(n));const f=u?e.fromEquirectangular(s):e.fromCubemap(s);return t.set(s,f),s.addEventListener("dispose",o),f.texture}else return null}}}return s}function i(s){let l=0;const u=6;for(let c=0;c<u;c++)s[c]!==void 0&&l++;return l===u}function o(s){const l=s.target;l.removeEventListener("dispose",o);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function a(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:r,dispose:a}}function K8(n){const t={};function e(r){if(t[r]!==void 0)return t[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return t[r]=i,i}return{has:function(r){return e(r)!==null},init:function(r){r.isWebGL2?(e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance")):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(r){const i=e(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Z8(n,t,e,r){const i={},o=new WeakMap;function a(h){const f=h.target;f.index!==null&&t.remove(f.index);for(const m in f.attributes)t.remove(f.attributes[m]);for(const m in f.morphAttributes){const g=f.morphAttributes[m];for(let p=0,v=g.length;p<v;p++)t.remove(g[p])}f.removeEventListener("dispose",a),delete i[f.id];const d=o.get(f);d&&(t.remove(d),o.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,e.memory.geometries--}function s(h,f){return i[f.id]===!0||(f.addEventListener("dispose",a),i[f.id]=!0,e.memory.geometries++),f}function l(h){const f=h.attributes;for(const m in f)t.update(f[m],n.ARRAY_BUFFER);const d=h.morphAttributes;for(const m in d){const g=d[m];for(let p=0,v=g.length;p<v;p++)t.update(g[p],n.ARRAY_BUFFER)}}function u(h){const f=[],d=h.index,m=h.attributes.position;let g=0;if(d!==null){const y=d.array;g=d.version;for(let _=0,T=y.length;_<T;_+=3){const E=y[_+0],S=y[_+1],x=y[_+2];f.push(E,S,S,x,x,E)}}else if(m!==void 0){const y=m.array;g=m.version;for(let _=0,T=y.length/3-1;_<T;_+=3){const E=_+0,S=_+1,x=_+2;f.push(E,S,S,x,x,E)}}else return;const p=new(PM(f)?UM:FM)(f,1);p.version=g;const v=o.get(h);v&&t.remove(v),o.set(h,p)}function c(h){const f=o.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&u(h)}else u(h);return o.get(h)}return{get:s,update:l,getWireframeAttribute:c}}function J8(n,t,e,r){const i=r.isWebGL2;let o;function a(d){o=d}let s,l;function u(d){s=d.type,l=d.bytesPerElement}function c(d,m){n.drawElements(o,m,s,d*l),e.update(m,o,1)}function h(d,m,g){if(g===0)return;let p,v;if(i)p=n,v="drawElementsInstanced";else if(p=t.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[v](o,m,s,d*l,g),e.update(m,o,g)}function f(d,m,g){if(g===0)return;const p=t.get("WEBGL_multi_draw");if(p===null)for(let v=0;v<g;v++)this.render(d[v]/l,m[v]);else{p.multiDrawElementsWEBGL(o,m,0,s,d,0,g);let v=0;for(let y=0;y<g;y++)v+=m[y];e.update(v,o,1)}}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=h,this.renderMultiDraw=f}function Q8(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,s){switch(e.calls++,a){case n.TRIANGLES:e.triangles+=s*(o/3);break;case n.LINES:e.lines+=s*(o/2);break;case n.LINE_STRIP:e.lines+=s*(o-1);break;case n.LINE_LOOP:e.lines+=s*o;break;case n.POINTS:e.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:i,update:r}}function t6(n,t){return n[0]-t[0]}function e6(n,t){return Math.abs(t[1])-Math.abs(n[1])}function n6(n,t,e){const r={},i=new Float32Array(8),o=new WeakMap,a=new cn,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,c,h){const f=u.morphTargetInfluences;if(t.isWebGL2===!0){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=d!==void 0?d.length:0;let g=o.get(c);if(g===void 0||g.count!==m){let L=function(){U.dispose(),o.delete(c),c.removeEventListener("dispose",L)};g!==void 0&&g.texture.dispose();const y=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,T=c.morphAttributes.color!==void 0,E=c.morphAttributes.position||[],S=c.morphAttributes.normal||[],x=c.morphAttributes.color||[];let O=0;y===!0&&(O=1),_===!0&&(O=2),T===!0&&(O=3);let b=c.attributes.position.count*O,A=1;b>t.maxTextureSize&&(A=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);const N=new Float32Array(b*A*4*m),U=new DM(N,b,A,m);U.type=lo,U.needsUpdate=!0;const et=O*4;for(let D=0;D<m;D++){const B=E[D],q=S[D],Q=x[D],rt=b*A*4*D;for(let $=0;$<B.count;$++){const k=$*et;y===!0&&(a.fromBufferAttribute(B,$),N[rt+k+0]=a.x,N[rt+k+1]=a.y,N[rt+k+2]=a.z,N[rt+k+3]=0),_===!0&&(a.fromBufferAttribute(q,$),N[rt+k+4]=a.x,N[rt+k+5]=a.y,N[rt+k+6]=a.z,N[rt+k+7]=0),T===!0&&(a.fromBufferAttribute(Q,$),N[rt+k+8]=a.x,N[rt+k+9]=a.y,N[rt+k+10]=a.z,N[rt+k+11]=Q.itemSize===4?a.w:1)}}g={count:m,texture:U,size:new de(b,A)},o.set(c,g),c.addEventListener("dispose",L)}let p=0;for(let y=0;y<f.length;y++)p+=f[y];const v=c.morphTargetsRelative?1:1-p;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,e),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const d=f===void 0?0:f.length;let m=r[c.id];if(m===void 0||m.length!==d){m=[];for(let _=0;_<d;_++)m[_]=[_,0];r[c.id]=m}for(let _=0;_<d;_++){const T=m[_];T[0]=_,T[1]=f[_]}m.sort(e6);for(let _=0;_<8;_++)_<d&&m[_][1]?(s[_][0]=m[_][0],s[_][1]=m[_][1]):(s[_][0]=Number.MAX_SAFE_INTEGER,s[_][1]=0);s.sort(t6);const g=c.morphAttributes.position,p=c.morphAttributes.normal;let v=0;for(let _=0;_<8;_++){const T=s[_],E=T[0],S=T[1];E!==Number.MAX_SAFE_INTEGER&&S?(g&&c.getAttribute("morphTarget"+_)!==g[E]&&c.setAttribute("morphTarget"+_,g[E]),p&&c.getAttribute("morphNormal"+_)!==p[E]&&c.setAttribute("morphNormal"+_,p[E]),i[_]=S,v+=S):(g&&c.hasAttribute("morphTarget"+_)===!0&&c.deleteAttribute("morphTarget"+_),p&&c.hasAttribute("morphNormal"+_)===!0&&c.deleteAttribute("morphNormal"+_),i[_]=0)}const y=c.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function r6(n,t,e,r){let i=new WeakMap;function o(l){const u=r.render.frame,c=l.geometry,h=t.get(l,c);if(i.get(h)!==u&&(t.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==u&&(e.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&e.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return h}function a(){i=new WeakMap}function s(l){const u=l.target;u.removeEventListener("dispose",s),e.remove(u.instanceMatrix),u.instanceColor!==null&&e.remove(u.instanceColor)}return{update:o,dispose:a}}class VM extends Yn{constructor(t,e,r,i,o,a,s,l,u,c){if(c=c!==void 0?c:da,c!==da&&c!==Ws)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===da&&(r=so),r===void 0&&c===Ws&&(r=fa),super(null,i,o,a,s,l,c,r,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=s!==void 0?s:wn,this.minFilter=l!==void 0?l:wn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}const WM=new Yn,XM=new VM(1,1);XM.compareFunction=RM;const $M=new DM,jM=new GH,YM=new kM,zS=[],VS=[],WS=new Float32Array(16),XS=new Float32Array(9),$S=new Float32Array(4);function rl(n,t,e){const r=n[0];if(r<=0||r>0)return n;const i=t*e;let o=zS[i];if(o===void 0&&(o=new Float32Array(i),zS[i]=o),t!==0){r.toArray(o,0);for(let a=1,s=0;a!==t;++a)s+=e,n[a].toArray(o,s)}return o}function $e(n,t){if(n.length!==t.length)return!1;for(let e=0,r=n.length;e<r;e++)if(n[e]!==t[e])return!1;return!0}function je(n,t){for(let e=0,r=t.length;e<r;e++)n[e]=t[e]}function Vd(n,t){let e=VS[t];e===void 0&&(e=new Int32Array(t),VS[t]=e);for(let r=0;r!==t;++r)e[r]=n.allocateTextureUnit();return e}function i6(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function o6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if($e(e,t))return;n.uniform2fv(this.addr,t),je(e,t)}}function a6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if($e(e,t))return;n.uniform3fv(this.addr,t),je(e,t)}}function s6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if($e(e,t))return;n.uniform4fv(this.addr,t),je(e,t)}}function l6(n,t){const e=this.cache,r=t.elements;if(r===void 0){if($e(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),je(e,t)}else{if($e(e,r))return;$S.set(r),n.uniformMatrix2fv(this.addr,!1,$S),je(e,r)}}function u6(n,t){const e=this.cache,r=t.elements;if(r===void 0){if($e(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),je(e,t)}else{if($e(e,r))return;XS.set(r),n.uniformMatrix3fv(this.addr,!1,XS),je(e,r)}}function c6(n,t){const e=this.cache,r=t.elements;if(r===void 0){if($e(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),je(e,t)}else{if($e(e,r))return;WS.set(r),n.uniformMatrix4fv(this.addr,!1,WS),je(e,r)}}function h6(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function f6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if($e(e,t))return;n.uniform2iv(this.addr,t),je(e,t)}}function d6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if($e(e,t))return;n.uniform3iv(this.addr,t),je(e,t)}}function p6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if($e(e,t))return;n.uniform4iv(this.addr,t),je(e,t)}}function m6(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function v6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if($e(e,t))return;n.uniform2uiv(this.addr,t),je(e,t)}}function g6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if($e(e,t))return;n.uniform3uiv(this.addr,t),je(e,t)}}function _6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if($e(e,t))return;n.uniform4uiv(this.addr,t),je(e,t)}}function y6(n,t,e){const r=this.cache,i=e.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const o=this.type===n.SAMPLER_2D_SHADOW?XM:WM;e.setTexture2D(t||o,i)}function x6(n,t,e){const r=this.cache,i=e.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),e.setTexture3D(t||jM,i)}function b6(n,t,e){const r=this.cache,i=e.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),e.setTextureCube(t||YM,i)}function S6(n,t,e){const r=this.cache,i=e.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),e.setTexture2DArray(t||$M,i)}function E6(n){switch(n){case 5126:return i6;case 35664:return o6;case 35665:return a6;case 35666:return s6;case 35674:return l6;case 35675:return u6;case 35676:return c6;case 5124:case 35670:return h6;case 35667:case 35671:return f6;case 35668:case 35672:return d6;case 35669:case 35673:return p6;case 5125:return m6;case 36294:return v6;case 36295:return g6;case 36296:return _6;case 35678:case 36198:case 36298:case 36306:case 35682:return y6;case 35679:case 36299:case 36307:return x6;case 35680:case 36300:case 36308:case 36293:return b6;case 36289:case 36303:case 36311:case 36292:return S6}}function T6(n,t){n.uniform1fv(this.addr,t)}function w6(n,t){const e=rl(t,this.size,2);n.uniform2fv(this.addr,e)}function A6(n,t){const e=rl(t,this.size,3);n.uniform3fv(this.addr,e)}function M6(n,t){const e=rl(t,this.size,4);n.uniform4fv(this.addr,e)}function C6(n,t){const e=rl(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function R6(n,t){const e=rl(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function P6(n,t){const e=rl(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function I6(n,t){n.uniform1iv(this.addr,t)}function O6(n,t){n.uniform2iv(this.addr,t)}function D6(n,t){n.uniform3iv(this.addr,t)}function L6(n,t){n.uniform4iv(this.addr,t)}function N6(n,t){n.uniform1uiv(this.addr,t)}function F6(n,t){n.uniform2uiv(this.addr,t)}function U6(n,t){n.uniform3uiv(this.addr,t)}function B6(n,t){n.uniform4uiv(this.addr,t)}function G6(n,t,e){const r=this.cache,i=t.length,o=Vd(e,i);$e(r,o)||(n.uniform1iv(this.addr,o),je(r,o));for(let a=0;a!==i;++a)e.setTexture2D(t[a]||WM,o[a])}function k6(n,t,e){const r=this.cache,i=t.length,o=Vd(e,i);$e(r,o)||(n.uniform1iv(this.addr,o),je(r,o));for(let a=0;a!==i;++a)e.setTexture3D(t[a]||jM,o[a])}function H6(n,t,e){const r=this.cache,i=t.length,o=Vd(e,i);$e(r,o)||(n.uniform1iv(this.addr,o),je(r,o));for(let a=0;a!==i;++a)e.setTextureCube(t[a]||YM,o[a])}function z6(n,t,e){const r=this.cache,i=t.length,o=Vd(e,i);$e(r,o)||(n.uniform1iv(this.addr,o),je(r,o));for(let a=0;a!==i;++a)e.setTexture2DArray(t[a]||$M,o[a])}function V6(n){switch(n){case 5126:return T6;case 35664:return w6;case 35665:return A6;case 35666:return M6;case 35674:return C6;case 35675:return R6;case 35676:return P6;case 5124:case 35670:return I6;case 35667:case 35671:return O6;case 35668:case 35672:return D6;case 35669:case 35673:return L6;case 5125:return N6;case 36294:return F6;case 36295:return U6;case 36296:return B6;case 35678:case 36198:case 36298:case 36306:case 35682:return G6;case 35679:case 36299:case 36307:return k6;case 35680:case 36300:case 36308:case 36293:return H6;case 36289:case 36303:case 36311:case 36292:return z6}}class W6{constructor(t,e,r){this.id=t,this.addr=r,this.cache=[],this.type=e.type,this.setValue=E6(e.type)}}class X6{constructor(t,e,r){this.id=t,this.addr=r,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=V6(e.type)}}class $6{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,r){const i=this.seq;for(let o=0,a=i.length;o!==a;++o){const s=i[o];s.setValue(t,e[s.id],r)}}}const Bm=/(\w+)(\])?(\[|\.)?/g;function jS(n,t){n.seq.push(t),n.map[t.id]=t}function j6(n,t,e){const r=n.name,i=r.length;for(Bm.lastIndex=0;;){const o=Bm.exec(r),a=Bm.lastIndex;let s=o[1];const l=o[2]==="]",u=o[3];if(l&&(s=s|0),u===void 0||u==="["&&a+2===i){jS(e,u===void 0?new W6(s,n,t):new X6(s,n,t));break}else{let h=e.map[s];h===void 0&&(h=new $6(s),jS(e,h)),e=h}}}class $h{constructor(t,e){this.seq=[],this.map={};const r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=t.getActiveUniform(e,i),a=t.getUniformLocation(e,o.name);j6(o,a,this)}}setValue(t,e,r,i){const o=this.map[e];o!==void 0&&o.setValue(t,r,i)}setOptional(t,e,r){const i=e[r];i!==void 0&&this.setValue(t,r,i)}static upload(t,e,r,i){for(let o=0,a=e.length;o!==a;++o){const s=e[o],l=r[s.id];l.needsUpdate!==!1&&s.setValue(t,l.value,i)}}static seqWithValue(t,e){const r=[];for(let i=0,o=t.length;i!==o;++i){const a=t[i];a.id in e&&r.push(a)}return r}}function YS(n,t,e){const r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}const Y6=37297;let q6=0;function K6(n,t){const e=n.split(`
`),r=[],i=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let a=i;a<o;a++){const s=a+1;r.push(`${s===t?">":" "} ${s}: ${e[a]}`)}return r.join(`
`)}function Z6(n){const t=he.getPrimaries(he.workingColorSpace),e=he.getPrimaries(n);let r;switch(t===e?r="":t===Qf&&e===Jf?r="LinearDisplayP3ToLinearSRGB":t===Jf&&e===Qf&&(r="LinearSRGBToLinearDisplayP3"),n){case Li:case kd:return[r,"LinearTransferOETF"];case sn:case iy:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function qS(n,t,e){const r=n.getShaderParameter(t,n.COMPILE_STATUS),i=n.getShaderInfoLog(t).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const a=parseInt(o[1]);return e.toUpperCase()+`

`+i+`

`+K6(n.getShaderSource(t),a)}else return i}function J6(n,t){const e=Z6(t);return`vec4 ${n}( vec4 value ) { return ${e[0]}( ${e[1]}( value ) ); }`}function Q6(n,t){let e;switch(t){case sH:e="Linear";break;case lH:e="Reinhard";break;case uH:e="OptimizedCineon";break;case cH:e="ACESFilmic";break;case fH:e="AgX";break;case hH:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function tV(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xs).join(`
`)}function eV(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(xs).join(`
`)}function nV(n){const t=[];for(const e in n){const r=n[e];r!==!1&&t.push("#define "+e+" "+r)}return t.join(`
`)}function rV(n,t){const e={},r=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=n.getActiveAttrib(t,i),a=o.name;let s=1;o.type===n.FLOAT_MAT2&&(s=2),o.type===n.FLOAT_MAT3&&(s=3),o.type===n.FLOAT_MAT4&&(s=4),e[a]={type:o.type,location:n.getAttribLocation(t,a),locationSize:s}}return e}function xs(n){return n!==""}function KS(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ZS(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const iV=/^[ \t]*#include +<([\w\d./]+)>/gm;function Lg(n){return n.replace(iV,aV)}const oV=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function aV(n,t){let e=Zt[t];if(e===void 0){const r=oV.get(t);if(r!==void 0)e=Zt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r);else throw new Error("Can not resolve #include <"+t+">")}return Lg(e)}const sV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function JS(n){return n.replace(sV,lV)}function lV(n,t,e,r){let i="";for(let o=parseInt(t);o<parseInt(e);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function QS(n){let t="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function uV(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===_M?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===Nk?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===_i&&(t="SHADOWMAP_TYPE_VSM"),t}function cV(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case zs:case Vs:t="ENVMAP_TYPE_CUBE";break;case Gd:t="ENVMAP_TYPE_CUBE_UV";break}return t}function hV(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Vs:t="ENVMAP_MODE_REFRACTION";break}return t}function fV(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case yM:t="ENVMAP_BLENDING_MULTIPLY";break;case oH:t="ENVMAP_BLENDING_MIX";break;case aH:t="ENVMAP_BLENDING_ADD";break}return t}function dV(n){const t=n.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:r,maxMip:e}}function pV(n,t,e,r){const i=n.getContext(),o=e.defines;let a=e.vertexShader,s=e.fragmentShader;const l=uV(e),u=cV(e),c=hV(e),h=fV(e),f=dV(e),d=e.isWebGL2?"":tV(e),m=eV(e),g=nV(o),p=i.createProgram();let v,y,_=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(v=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g].filter(xs).join(`
`),v.length>0&&(v+=`
`),y=[d,"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g].filter(xs).join(`
`),y.length>0&&(y+=`
`)):(v=[QS(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.useLegacyLights?"#define LEGACY_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(xs).join(`
`),y=[d,QS(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.envMap?"#define "+c:"",e.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.useLegacyLights?"#define LEGACY_LIGHTS":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==mo?"#define TONE_MAPPING":"",e.toneMapping!==mo?Zt.tonemapping_pars_fragment:"",e.toneMapping!==mo?Q6("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Zt.colorspace_pars_fragment,J6("linearToOutputTexel",e.outputColorSpace),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(xs).join(`
`)),a=Lg(a),a=KS(a,e),a=ZS(a,e),s=Lg(s),s=KS(s,e),s=ZS(s,e),a=JS(a),s=JS(s),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=[m,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,y=["precision mediump sampler2DArray;","#define varying in",e.glslVersion===gS?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===gS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const T=_+v+a,E=_+y+s,S=YS(i,i.VERTEX_SHADER,T),x=YS(i,i.FRAGMENT_SHADER,E);i.attachShader(p,S),i.attachShader(p,x),e.index0AttributeName!==void 0?i.bindAttribLocation(p,0,e.index0AttributeName):e.morphTargets===!0&&i.bindAttribLocation(p,0,"position"),i.linkProgram(p);function O(U){if(n.debug.checkShaderErrors){const et=i.getProgramInfoLog(p).trim(),L=i.getShaderInfoLog(S).trim(),D=i.getShaderInfoLog(x).trim();let B=!0,q=!0;if(i.getProgramParameter(p,i.LINK_STATUS)===!1)if(B=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,p,S,x);else{const Q=qS(i,S,"vertex"),rt=qS(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(p,i.VALIDATE_STATUS)+`

Program Info Log: `+et+`
`+Q+`
`+rt)}else et!==""?console.warn("THREE.WebGLProgram: Program Info Log:",et):(L===""||D==="")&&(q=!1);q&&(U.diagnostics={runnable:B,programLog:et,vertexShader:{log:L,prefix:v},fragmentShader:{log:D,prefix:y}})}i.deleteShader(S),i.deleteShader(x),b=new $h(i,p),A=rV(i,p)}let b;this.getUniforms=function(){return b===void 0&&O(this),b};let A;this.getAttributes=function(){return A===void 0&&O(this),A};let N=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=i.getProgramParameter(p,Y6)),N},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(p),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=q6++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=S,this.fragmentShader=x,this}let mV=0;class vV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,r=t.fragmentShader,i=this._getShaderStage(e),o=this._getShaderStage(r),a=this._getShaderCacheForMaterial(t);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const r of e)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let r=e.get(t);return r===void 0&&(r=new Set,e.set(t,r)),r}_getShaderStage(t){const e=this.shaderCache;let r=e.get(t);return r===void 0&&(r=new gV(t),e.set(t,r)),r}}class gV{constructor(t){this.id=mV++,this.code=t,this.usedTimes=0}}function _V(n,t,e,r,i,o,a){const s=new LM,l=new vV,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(b){return b===0?"uv":`uv${b}`}function p(b,A,N,U,et){const L=U.fog,D=et.geometry,B=b.isMeshStandardMaterial?U.environment:null,q=(b.isMeshStandardMaterial?e:t).get(b.envMap||B),Q=q&&q.mapping===Gd?q.image.height:null,rt=m[b.type];b.precision!==null&&(d=i.getMaxPrecision(b.precision),d!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",d,"instead."));const $=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,k=$!==void 0?$.length:0;let pt=0;D.morphAttributes.position!==void 0&&(pt=1),D.morphAttributes.normal!==void 0&&(pt=2),D.morphAttributes.color!==void 0&&(pt=3);let J,it,vt,gt;if(rt){const bn=zr[rt];J=bn.vertexShader,it=bn.fragmentShader}else J=b.vertexShader,it=b.fragmentShader,l.update(b),vt=l.getVertexShaderID(b),gt=l.getFragmentShaderID(b);const W=n.getRenderTarget(),ft=et.isInstancedMesh===!0,at=et.isBatchedMesh===!0,mt=!!b.map,_t=!!b.matcap,X=!!q,R=!!b.aoMap,C=!!b.lightMap,z=!!b.bumpMap,Y=!!b.normalMap,K=!!b.displacementMap,ct=!!b.emissiveMap,M=!!b.metalnessMap,w=!!b.roughnessMap,G=b.anisotropy>0,j=b.clearcoat>0,tt=b.iridescence>0,P=b.sheen>0,F=b.transmission>0,H=G&&!!b.anisotropyMap,Z=j&&!!b.clearcoatMap,dt=j&&!!b.clearcoatNormalMap,Tt=j&&!!b.clearcoatRoughnessMap,ot=tt&&!!b.iridescenceMap,wt=tt&&!!b.iridescenceThicknessMap,yt=P&&!!b.sheenColorMap,At=P&&!!b.sheenRoughnessMap,bt=!!b.specularMap,Rt=!!b.specularColorMap,Nt=!!b.specularIntensityMap,Kt=F&&!!b.transmissionMap,ye=F&&!!b.thicknessMap,Qt=!!b.gradientMap,Mt=!!b.alphaMap,V=b.alphaTest>0,Pt=!!b.alphaHash,It=!!b.extensions,zt=!!D.attributes.uv1,kt=!!D.attributes.uv2,me=!!D.attributes.uv3;let ve=mo;return b.toneMapped&&(W===null||W.isXRRenderTarget===!0)&&(ve=n.toneMapping),{isWebGL2:c,shaderID:rt,shaderType:b.type,shaderName:b.name,vertexShader:J,fragmentShader:it,defines:b.defines,customVertexShaderID:vt,customFragmentShaderID:gt,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:d,batching:at,instancing:ft,instancingColor:ft&&et.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:W===null?n.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:Li,map:mt,matcap:_t,envMap:X,envMapMode:X&&q.mapping,envMapCubeUVHeight:Q,aoMap:R,lightMap:C,bumpMap:z,normalMap:Y,displacementMap:f&&K,emissiveMap:ct,normalMapObjectSpace:Y&&b.normalMapType===wH,normalMapTangentSpace:Y&&b.normalMapType===TH,metalnessMap:M,roughnessMap:w,anisotropy:G,anisotropyMap:H,clearcoat:j,clearcoatMap:Z,clearcoatNormalMap:dt,clearcoatRoughnessMap:Tt,iridescence:tt,iridescenceMap:ot,iridescenceThicknessMap:wt,sheen:P,sheenColorMap:yt,sheenRoughnessMap:At,specularMap:bt,specularColorMap:Rt,specularIntensityMap:Nt,transmission:F,transmissionMap:Kt,thicknessMap:ye,gradientMap:Qt,opaque:b.transparent===!1&&b.blending===Ds,alphaMap:Mt,alphaTest:V,alphaHash:Pt,combine:b.combine,mapUv:mt&&g(b.map.channel),aoMapUv:R&&g(b.aoMap.channel),lightMapUv:C&&g(b.lightMap.channel),bumpMapUv:z&&g(b.bumpMap.channel),normalMapUv:Y&&g(b.normalMap.channel),displacementMapUv:K&&g(b.displacementMap.channel),emissiveMapUv:ct&&g(b.emissiveMap.channel),metalnessMapUv:M&&g(b.metalnessMap.channel),roughnessMapUv:w&&g(b.roughnessMap.channel),anisotropyMapUv:H&&g(b.anisotropyMap.channel),clearcoatMapUv:Z&&g(b.clearcoatMap.channel),clearcoatNormalMapUv:dt&&g(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Tt&&g(b.clearcoatRoughnessMap.channel),iridescenceMapUv:ot&&g(b.iridescenceMap.channel),iridescenceThicknessMapUv:wt&&g(b.iridescenceThicknessMap.channel),sheenColorMapUv:yt&&g(b.sheenColorMap.channel),sheenRoughnessMapUv:At&&g(b.sheenRoughnessMap.channel),specularMapUv:bt&&g(b.specularMap.channel),specularColorMapUv:Rt&&g(b.specularColorMap.channel),specularIntensityMapUv:Nt&&g(b.specularIntensityMap.channel),transmissionMapUv:Kt&&g(b.transmissionMap.channel),thicknessMapUv:ye&&g(b.thicknessMap.channel),alphaMapUv:Mt&&g(b.alphaMap.channel),vertexTangents:!!D.attributes.tangent&&(Y||G),vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,vertexUv1s:zt,vertexUv2s:kt,vertexUv3s:me,pointsUvs:et.isPoints===!0&&!!D.attributes.uv&&(mt||Mt),fog:!!L,useFog:b.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:et.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:pt,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:ve,useLegacyLights:n._useLegacyLights,decodeVideoTexture:mt&&b.map.isVideoTexture===!0&&he.getTransfer(b.map.colorSpace)===xe,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===wi,flipSided:b.side===Dn,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:It&&b.extensions.derivatives===!0,extensionFragDepth:It&&b.extensions.fragDepth===!0,extensionDrawBuffers:It&&b.extensions.drawBuffers===!0,extensionShaderTextureLOD:It&&b.extensions.shaderTextureLOD===!0,extensionClipCullDistance:It&&b.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:b.customProgramCacheKey()}}function v(b){const A=[];if(b.shaderID?A.push(b.shaderID):(A.push(b.customVertexShaderID),A.push(b.customFragmentShaderID)),b.defines!==void 0)for(const N in b.defines)A.push(N),A.push(b.defines[N]);return b.isRawShaderMaterial===!1&&(y(A,b),_(A,b),A.push(n.outputColorSpace)),A.push(b.customProgramCacheKey),A.join()}function y(b,A){b.push(A.precision),b.push(A.outputColorSpace),b.push(A.envMapMode),b.push(A.envMapCubeUVHeight),b.push(A.mapUv),b.push(A.alphaMapUv),b.push(A.lightMapUv),b.push(A.aoMapUv),b.push(A.bumpMapUv),b.push(A.normalMapUv),b.push(A.displacementMapUv),b.push(A.emissiveMapUv),b.push(A.metalnessMapUv),b.push(A.roughnessMapUv),b.push(A.anisotropyMapUv),b.push(A.clearcoatMapUv),b.push(A.clearcoatNormalMapUv),b.push(A.clearcoatRoughnessMapUv),b.push(A.iridescenceMapUv),b.push(A.iridescenceThicknessMapUv),b.push(A.sheenColorMapUv),b.push(A.sheenRoughnessMapUv),b.push(A.specularMapUv),b.push(A.specularColorMapUv),b.push(A.specularIntensityMapUv),b.push(A.transmissionMapUv),b.push(A.thicknessMapUv),b.push(A.combine),b.push(A.fogExp2),b.push(A.sizeAttenuation),b.push(A.morphTargetsCount),b.push(A.morphAttributeCount),b.push(A.numDirLights),b.push(A.numPointLights),b.push(A.numSpotLights),b.push(A.numSpotLightMaps),b.push(A.numHemiLights),b.push(A.numRectAreaLights),b.push(A.numDirLightShadows),b.push(A.numPointLightShadows),b.push(A.numSpotLightShadows),b.push(A.numSpotLightShadowsWithMaps),b.push(A.numLightProbes),b.push(A.shadowMapType),b.push(A.toneMapping),b.push(A.numClippingPlanes),b.push(A.numClipIntersection),b.push(A.depthPacking)}function _(b,A){s.disableAll(),A.isWebGL2&&s.enable(0),A.supportsVertexTextures&&s.enable(1),A.instancing&&s.enable(2),A.instancingColor&&s.enable(3),A.matcap&&s.enable(4),A.envMap&&s.enable(5),A.normalMapObjectSpace&&s.enable(6),A.normalMapTangentSpace&&s.enable(7),A.clearcoat&&s.enable(8),A.iridescence&&s.enable(9),A.alphaTest&&s.enable(10),A.vertexColors&&s.enable(11),A.vertexAlphas&&s.enable(12),A.vertexUv1s&&s.enable(13),A.vertexUv2s&&s.enable(14),A.vertexUv3s&&s.enable(15),A.vertexTangents&&s.enable(16),A.anisotropy&&s.enable(17),A.alphaHash&&s.enable(18),A.batching&&s.enable(19),b.push(s.mask),s.disableAll(),A.fog&&s.enable(0),A.useFog&&s.enable(1),A.flatShading&&s.enable(2),A.logarithmicDepthBuffer&&s.enable(3),A.skinning&&s.enable(4),A.morphTargets&&s.enable(5),A.morphNormals&&s.enable(6),A.morphColors&&s.enable(7),A.premultipliedAlpha&&s.enable(8),A.shadowMapEnabled&&s.enable(9),A.useLegacyLights&&s.enable(10),A.doubleSided&&s.enable(11),A.flipSided&&s.enable(12),A.useDepthPacking&&s.enable(13),A.dithering&&s.enable(14),A.transmission&&s.enable(15),A.sheen&&s.enable(16),A.opaque&&s.enable(17),A.pointsUvs&&s.enable(18),A.decodeVideoTexture&&s.enable(19),b.push(s.mask)}function T(b){const A=m[b.type];let N;if(A){const U=zr[A];N=QH.clone(U.uniforms)}else N=b.uniforms;return N}function E(b,A){let N;for(let U=0,et=u.length;U<et;U++){const L=u[U];if(L.cacheKey===A){N=L,++N.usedTimes;break}}return N===void 0&&(N=new pV(n,A,b,o),u.push(N)),N}function S(b){if(--b.usedTimes===0){const A=u.indexOf(b);u[A]=u[u.length-1],u.pop(),b.destroy()}}function x(b){l.remove(b)}function O(){l.dispose()}return{getParameters:p,getProgramCacheKey:v,getUniforms:T,acquireProgram:E,releaseProgram:S,releaseShaderCache:x,programs:u,dispose:O}}function yV(){let n=new WeakMap;function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function e(o){n.delete(o)}function r(o,a,s){n.get(o)[a]=s}function i(){n=new WeakMap}return{get:t,remove:e,update:r,dispose:i}}function xV(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function tE(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function eE(){const n=[];let t=0;const e=[],r=[],i=[];function o(){t=0,e.length=0,r.length=0,i.length=0}function a(h,f,d,m,g,p){let v=n[t];return v===void 0?(v={id:h.id,object:h,geometry:f,material:d,groupOrder:m,renderOrder:h.renderOrder,z:g,group:p},n[t]=v):(v.id=h.id,v.object=h,v.geometry=f,v.material=d,v.groupOrder=m,v.renderOrder=h.renderOrder,v.z=g,v.group=p),t++,v}function s(h,f,d,m,g,p){const v=a(h,f,d,m,g,p);d.transmission>0?r.push(v):d.transparent===!0?i.push(v):e.push(v)}function l(h,f,d,m,g,p){const v=a(h,f,d,m,g,p);d.transmission>0?r.unshift(v):d.transparent===!0?i.unshift(v):e.unshift(v)}function u(h,f){e.length>1&&e.sort(h||xV),r.length>1&&r.sort(f||tE),i.length>1&&i.sort(f||tE)}function c(){for(let h=t,f=n.length;h<f;h++){const d=n[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:e,transmissive:r,transparent:i,init:o,push:s,unshift:l,finish:c,sort:u}}function bV(){let n=new WeakMap;function t(r,i){const o=n.get(r);let a;return o===void 0?(a=new eE,n.set(r,[a])):i>=o.length?(a=new eE,o.push(a)):a=o[i],a}function e(){n=new WeakMap}return{get:t,dispose:e}}function SV(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new ut,color:new fe};break;case"SpotLight":e={position:new ut,direction:new ut,color:new fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new ut,color:new fe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new ut,skyColor:new fe,groundColor:new fe};break;case"RectAreaLight":e={color:new fe,position:new ut,halfWidth:new ut,halfHeight:new ut};break}return n[t.id]=e,e}}}function EV(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let TV=0;function wV(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function AV(n,t){const e=new SV,r=EV(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new ut);const o=new ut,a=new hn,s=new hn;function l(c,h){let f=0,d=0,m=0;for(let U=0;U<9;U++)i.probe[U].set(0,0,0);let g=0,p=0,v=0,y=0,_=0,T=0,E=0,S=0,x=0,O=0,b=0;c.sort(wV);const A=h===!0?Math.PI:1;for(let U=0,et=c.length;U<et;U++){const L=c[U],D=L.color,B=L.intensity,q=L.distance,Q=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)f+=D.r*B*A,d+=D.g*B*A,m+=D.b*B*A;else if(L.isLightProbe){for(let rt=0;rt<9;rt++)i.probe[rt].addScaledVector(L.sh.coefficients[rt],B);b++}else if(L.isDirectionalLight){const rt=e.get(L);if(rt.color.copy(L.color).multiplyScalar(L.intensity*A),L.castShadow){const $=L.shadow,k=r.get(L);k.shadowBias=$.bias,k.shadowNormalBias=$.normalBias,k.shadowRadius=$.radius,k.shadowMapSize=$.mapSize,i.directionalShadow[g]=k,i.directionalShadowMap[g]=Q,i.directionalShadowMatrix[g]=L.shadow.matrix,T++}i.directional[g]=rt,g++}else if(L.isSpotLight){const rt=e.get(L);rt.position.setFromMatrixPosition(L.matrixWorld),rt.color.copy(D).multiplyScalar(B*A),rt.distance=q,rt.coneCos=Math.cos(L.angle),rt.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),rt.decay=L.decay,i.spot[v]=rt;const $=L.shadow;if(L.map&&(i.spotLightMap[x]=L.map,x++,$.updateMatrices(L),L.castShadow&&O++),i.spotLightMatrix[v]=$.matrix,L.castShadow){const k=r.get(L);k.shadowBias=$.bias,k.shadowNormalBias=$.normalBias,k.shadowRadius=$.radius,k.shadowMapSize=$.mapSize,i.spotShadow[v]=k,i.spotShadowMap[v]=Q,S++}v++}else if(L.isRectAreaLight){const rt=e.get(L);rt.color.copy(D).multiplyScalar(B),rt.halfWidth.set(L.width*.5,0,0),rt.halfHeight.set(0,L.height*.5,0),i.rectArea[y]=rt,y++}else if(L.isPointLight){const rt=e.get(L);if(rt.color.copy(L.color).multiplyScalar(L.intensity*A),rt.distance=L.distance,rt.decay=L.decay,L.castShadow){const $=L.shadow,k=r.get(L);k.shadowBias=$.bias,k.shadowNormalBias=$.normalBias,k.shadowRadius=$.radius,k.shadowMapSize=$.mapSize,k.shadowCameraNear=$.camera.near,k.shadowCameraFar=$.camera.far,i.pointShadow[p]=k,i.pointShadowMap[p]=Q,i.pointShadowMatrix[p]=L.shadow.matrix,E++}i.point[p]=rt,p++}else if(L.isHemisphereLight){const rt=e.get(L);rt.skyColor.copy(L.color).multiplyScalar(B*A),rt.groundColor.copy(L.groundColor).multiplyScalar(B*A),i.hemi[_]=rt,_++}}y>0&&(t.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ct.LTC_FLOAT_1,i.rectAreaLTC2=Ct.LTC_FLOAT_2):(i.rectAreaLTC1=Ct.LTC_HALF_1,i.rectAreaLTC2=Ct.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ct.LTC_FLOAT_1,i.rectAreaLTC2=Ct.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ct.LTC_HALF_1,i.rectAreaLTC2=Ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=m;const N=i.hash;(N.directionalLength!==g||N.pointLength!==p||N.spotLength!==v||N.rectAreaLength!==y||N.hemiLength!==_||N.numDirectionalShadows!==T||N.numPointShadows!==E||N.numSpotShadows!==S||N.numSpotMaps!==x||N.numLightProbes!==b)&&(i.directional.length=g,i.spot.length=v,i.rectArea.length=y,i.point.length=p,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=S+x-O,i.spotLightMap.length=x,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=b,N.directionalLength=g,N.pointLength=p,N.spotLength=v,N.rectAreaLength=y,N.hemiLength=_,N.numDirectionalShadows=T,N.numPointShadows=E,N.numSpotShadows=S,N.numSpotMaps=x,N.numLightProbes=b,i.version=TV++)}function u(c,h){let f=0,d=0,m=0,g=0,p=0;const v=h.matrixWorldInverse;for(let y=0,_=c.length;y<_;y++){const T=c[y];if(T.isDirectionalLight){const E=i.directional[f];E.direction.setFromMatrixPosition(T.matrixWorld),o.setFromMatrixPosition(T.target.matrixWorld),E.direction.sub(o),E.direction.transformDirection(v),f++}else if(T.isSpotLight){const E=i.spot[m];E.position.setFromMatrixPosition(T.matrixWorld),E.position.applyMatrix4(v),E.direction.setFromMatrixPosition(T.matrixWorld),o.setFromMatrixPosition(T.target.matrixWorld),E.direction.sub(o),E.direction.transformDirection(v),m++}else if(T.isRectAreaLight){const E=i.rectArea[g];E.position.setFromMatrixPosition(T.matrixWorld),E.position.applyMatrix4(v),s.identity(),a.copy(T.matrixWorld),a.premultiply(v),s.extractRotation(a),E.halfWidth.set(T.width*.5,0,0),E.halfHeight.set(0,T.height*.5,0),E.halfWidth.applyMatrix4(s),E.halfHeight.applyMatrix4(s),g++}else if(T.isPointLight){const E=i.point[d];E.position.setFromMatrixPosition(T.matrixWorld),E.position.applyMatrix4(v),d++}else if(T.isHemisphereLight){const E=i.hemi[p];E.direction.setFromMatrixPosition(T.matrixWorld),E.direction.transformDirection(v),p++}}}return{setup:l,setupView:u,state:i}}function nE(n,t){const e=new AV(n,t),r=[],i=[];function o(){r.length=0,i.length=0}function a(h){r.push(h)}function s(h){i.push(h)}function l(h){e.setup(r,h)}function u(h){e.setupView(r,h)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:e},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:s}}function MV(n,t){let e=new WeakMap;function r(o,a=0){const s=e.get(o);let l;return s===void 0?(l=new nE(n,t),e.set(o,[l])):a>=s.length?(l=new nE(n,t),s.push(l)):l=s[a],l}function i(){e=new WeakMap}return{get:r,dispose:i}}class CV extends zd{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=SH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class RV extends zd{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const PV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,IV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function OV(n,t,e){let r=new HM;const i=new de,o=new de,a=new cn,s=new CV({depthPacking:EH}),l=new RV,u={},c=e.maxTextureSize,h={[xo]:Dn,[Dn]:xo,[wi]:wi},f=new Ma({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:PV,fragmentShader:IV}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const m=new Fa;m.setAttribute("position",new Zr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Mi(m,f),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_M;let v=this.type;this.render=function(S,x,O){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||S.length===0)return;const b=n.getRenderTarget(),A=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),U=n.state;U.setBlending(po),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const et=v!==_i&&this.type===_i,L=v===_i&&this.type!==_i;for(let D=0,B=S.length;D<B;D++){const q=S[D],Q=q.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;i.copy(Q.mapSize);const rt=Q.getFrameExtents();if(i.multiply(rt),o.copy(Q.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/rt.x),i.x=o.x*rt.x,Q.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/rt.y),i.y=o.y*rt.y,Q.mapSize.y=o.y)),Q.map===null||et===!0||L===!0){const k=this.type!==_i?{minFilter:wn,magFilter:wn}:{};Q.map!==null&&Q.map.dispose(),Q.map=new Aa(i.x,i.y,k),Q.map.texture.name=q.name+".shadowMap",Q.camera.updateProjectionMatrix()}n.setRenderTarget(Q.map),n.clear();const $=Q.getViewportCount();for(let k=0;k<$;k++){const pt=Q.getViewport(k);a.set(o.x*pt.x,o.y*pt.y,o.x*pt.z,o.y*pt.w),U.viewport(a),Q.updateMatrices(q,k),r=Q.getFrustum(),T(x,O,Q.camera,q,this.type)}Q.isPointLightShadow!==!0&&this.type===_i&&y(Q,O),Q.needsUpdate=!1}v=this.type,p.needsUpdate=!1,n.setRenderTarget(b,A,N)};function y(S,x){const O=t.update(g);f.defines.VSM_SAMPLES!==S.blurSamples&&(f.defines.VSM_SAMPLES=S.blurSamples,d.defines.VSM_SAMPLES=S.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Aa(i.x,i.y)),f.uniforms.shadow_pass.value=S.map.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(x,null,O,f,g,null),d.uniforms.shadow_pass.value=S.mapPass.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(x,null,O,d,g,null)}function _(S,x,O,b){let A=null;const N=O.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(N!==void 0)A=N;else if(A=O.isPointLight===!0?l:s,n.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0||x.map&&x.alphaTest>0){const U=A.uuid,et=x.uuid;let L=u[U];L===void 0&&(L={},u[U]=L);let D=L[et];D===void 0&&(D=A.clone(),L[et]=D,x.addEventListener("dispose",E)),A=D}if(A.visible=x.visible,A.wireframe=x.wireframe,b===_i?A.side=x.shadowSide!==null?x.shadowSide:x.side:A.side=x.shadowSide!==null?x.shadowSide:h[x.side],A.alphaMap=x.alphaMap,A.alphaTest=x.alphaTest,A.map=x.map,A.clipShadows=x.clipShadows,A.clippingPlanes=x.clippingPlanes,A.clipIntersection=x.clipIntersection,A.displacementMap=x.displacementMap,A.displacementScale=x.displacementScale,A.displacementBias=x.displacementBias,A.wireframeLinewidth=x.wireframeLinewidth,A.linewidth=x.linewidth,O.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const U=n.properties.get(A);U.light=O}return A}function T(S,x,O,b,A){if(S.visible===!1)return;if(S.layers.test(x.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&A===_i)&&(!S.frustumCulled||r.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,S.matrixWorld);const et=t.update(S),L=S.material;if(Array.isArray(L)){const D=et.groups;for(let B=0,q=D.length;B<q;B++){const Q=D[B],rt=L[Q.materialIndex];if(rt&&rt.visible){const $=_(S,rt,b,A);S.onBeforeShadow(n,S,x,O,et,$,Q),n.renderBufferDirect(O,null,et,$,S,Q),S.onAfterShadow(n,S,x,O,et,$,Q)}}}else if(L.visible){const D=_(S,L,b,A);S.onBeforeShadow(n,S,x,O,et,D,null),n.renderBufferDirect(O,null,et,D,S,null),S.onAfterShadow(n,S,x,O,et,D,null)}}const U=S.children;for(let et=0,L=U.length;et<L;et++)T(U[et],x,O,b,A)}function E(S){S.target.removeEventListener("dispose",E);for(const O in u){const b=u[O],A=S.target.uuid;A in b&&(b[A].dispose(),delete b[A])}}}function DV(n,t,e){const r=e.isWebGL2;function i(){let V=!1;const Pt=new cn;let It=null;const zt=new cn(0,0,0,0);return{setMask:function(kt){It!==kt&&!V&&(n.colorMask(kt,kt,kt,kt),It=kt)},setLocked:function(kt){V=kt},setClear:function(kt,me,ve,Ye,bn){bn===!0&&(kt*=Ye,me*=Ye,ve*=Ye),Pt.set(kt,me,ve,Ye),zt.equals(Pt)===!1&&(n.clearColor(kt,me,ve,Ye),zt.copy(Pt))},reset:function(){V=!1,It=null,zt.set(-1,0,0,0)}}}function o(){let V=!1,Pt=null,It=null,zt=null;return{setTest:function(kt){kt?at(n.DEPTH_TEST):mt(n.DEPTH_TEST)},setMask:function(kt){Pt!==kt&&!V&&(n.depthMask(kt),Pt=kt)},setFunc:function(kt){if(It!==kt){switch(kt){case Jk:n.depthFunc(n.NEVER);break;case Qk:n.depthFunc(n.ALWAYS);break;case tH:n.depthFunc(n.LESS);break;case Kf:n.depthFunc(n.LEQUAL);break;case eH:n.depthFunc(n.EQUAL);break;case nH:n.depthFunc(n.GEQUAL);break;case rH:n.depthFunc(n.GREATER);break;case iH:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}It=kt}},setLocked:function(kt){V=kt},setClear:function(kt){zt!==kt&&(n.clearDepth(kt),zt=kt)},reset:function(){V=!1,Pt=null,It=null,zt=null}}}function a(){let V=!1,Pt=null,It=null,zt=null,kt=null,me=null,ve=null,Ye=null,bn=null;return{setTest:function(ge){V||(ge?at(n.STENCIL_TEST):mt(n.STENCIL_TEST))},setMask:function(ge){Pt!==ge&&!V&&(n.stencilMask(ge),Pt=ge)},setFunc:function(ge,Sn,Lr){(It!==ge||zt!==Sn||kt!==Lr)&&(n.stencilFunc(ge,Sn,Lr),It=ge,zt=Sn,kt=Lr)},setOp:function(ge,Sn,Lr){(me!==ge||ve!==Sn||Ye!==Lr)&&(n.stencilOp(ge,Sn,Lr),me=ge,ve=Sn,Ye=Lr)},setLocked:function(ge){V=ge},setClear:function(ge){bn!==ge&&(n.clearStencil(ge),bn=ge)},reset:function(){V=!1,Pt=null,It=null,zt=null,kt=null,me=null,ve=null,Ye=null,bn=null}}}const s=new i,l=new o,u=new a,c=new WeakMap,h=new WeakMap;let f={},d={},m=new WeakMap,g=[],p=null,v=!1,y=null,_=null,T=null,E=null,S=null,x=null,O=null,b=new fe(0,0,0),A=0,N=!1,U=null,et=null,L=null,D=null,B=null;const q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,rt=0;const $=n.getParameter(n.VERSION);$.indexOf("WebGL")!==-1?(rt=parseFloat(/^WebGL (\d)/.exec($)[1]),Q=rt>=1):$.indexOf("OpenGL ES")!==-1&&(rt=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),Q=rt>=2);let k=null,pt={};const J=n.getParameter(n.SCISSOR_BOX),it=n.getParameter(n.VIEWPORT),vt=new cn().fromArray(J),gt=new cn().fromArray(it);function W(V,Pt,It,zt){const kt=new Uint8Array(4),me=n.createTexture();n.bindTexture(V,me),n.texParameteri(V,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(V,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ve=0;ve<It;ve++)r&&(V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY)?n.texImage3D(Pt,0,n.RGBA,1,1,zt,0,n.RGBA,n.UNSIGNED_BYTE,kt):n.texImage2D(Pt+ve,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,kt);return me}const ft={};ft[n.TEXTURE_2D]=W(n.TEXTURE_2D,n.TEXTURE_2D,1),ft[n.TEXTURE_CUBE_MAP]=W(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(ft[n.TEXTURE_2D_ARRAY]=W(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ft[n.TEXTURE_3D]=W(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),at(n.DEPTH_TEST),l.setFunc(Kf),ct(!1),M(Ub),at(n.CULL_FACE),Y(po);function at(V){f[V]!==!0&&(n.enable(V),f[V]=!0)}function mt(V){f[V]!==!1&&(n.disable(V),f[V]=!1)}function _t(V,Pt){return d[V]!==Pt?(n.bindFramebuffer(V,Pt),d[V]=Pt,r&&(V===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Pt),V===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Pt)),!0):!1}function X(V,Pt){let It=g,zt=!1;if(V)if(It=m.get(Pt),It===void 0&&(It=[],m.set(Pt,It)),V.isWebGLMultipleRenderTargets){const kt=V.texture;if(It.length!==kt.length||It[0]!==n.COLOR_ATTACHMENT0){for(let me=0,ve=kt.length;me<ve;me++)It[me]=n.COLOR_ATTACHMENT0+me;It.length=kt.length,zt=!0}}else It[0]!==n.COLOR_ATTACHMENT0&&(It[0]=n.COLOR_ATTACHMENT0,zt=!0);else It[0]!==n.BACK&&(It[0]=n.BACK,zt=!0);zt&&(e.isWebGL2?n.drawBuffers(It):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(It))}function R(V){return p!==V?(n.useProgram(V),p=V,!0):!1}const C={[Zo]:n.FUNC_ADD,[Uk]:n.FUNC_SUBTRACT,[Bk]:n.FUNC_REVERSE_SUBTRACT};if(r)C[Hb]=n.MIN,C[zb]=n.MAX;else{const V=t.get("EXT_blend_minmax");V!==null&&(C[Hb]=V.MIN_EXT,C[zb]=V.MAX_EXT)}const z={[Gk]:n.ZERO,[kk]:n.ONE,[Hk]:n.SRC_COLOR,[wg]:n.SRC_ALPHA,[jk]:n.SRC_ALPHA_SATURATE,[Xk]:n.DST_COLOR,[Vk]:n.DST_ALPHA,[zk]:n.ONE_MINUS_SRC_COLOR,[Ag]:n.ONE_MINUS_SRC_ALPHA,[$k]:n.ONE_MINUS_DST_COLOR,[Wk]:n.ONE_MINUS_DST_ALPHA,[Yk]:n.CONSTANT_COLOR,[qk]:n.ONE_MINUS_CONSTANT_COLOR,[Kk]:n.CONSTANT_ALPHA,[Zk]:n.ONE_MINUS_CONSTANT_ALPHA};function Y(V,Pt,It,zt,kt,me,ve,Ye,bn,ge){if(V===po){v===!0&&(mt(n.BLEND),v=!1);return}if(v===!1&&(at(n.BLEND),v=!0),V!==Fk){if(V!==y||ge!==N){if((_!==Zo||S!==Zo)&&(n.blendEquation(n.FUNC_ADD),_=Zo,S=Zo),ge)switch(V){case Ds:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Bb:n.blendFunc(n.ONE,n.ONE);break;case Gb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case kb:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",V);break}else switch(V){case Ds:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Bb:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Gb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case kb:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",V);break}T=null,E=null,x=null,O=null,b.set(0,0,0),A=0,y=V,N=ge}return}kt=kt||Pt,me=me||It,ve=ve||zt,(Pt!==_||kt!==S)&&(n.blendEquationSeparate(C[Pt],C[kt]),_=Pt,S=kt),(It!==T||zt!==E||me!==x||ve!==O)&&(n.blendFuncSeparate(z[It],z[zt],z[me],z[ve]),T=It,E=zt,x=me,O=ve),(Ye.equals(b)===!1||bn!==A)&&(n.blendColor(Ye.r,Ye.g,Ye.b,bn),b.copy(Ye),A=bn),y=V,N=!1}function K(V,Pt){V.side===wi?mt(n.CULL_FACE):at(n.CULL_FACE);let It=V.side===Dn;Pt&&(It=!It),ct(It),V.blending===Ds&&V.transparent===!1?Y(po):Y(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.blendColor,V.blendAlpha,V.premultipliedAlpha),l.setFunc(V.depthFunc),l.setTest(V.depthTest),l.setMask(V.depthWrite),s.setMask(V.colorWrite);const zt=V.stencilWrite;u.setTest(zt),zt&&(u.setMask(V.stencilWriteMask),u.setFunc(V.stencilFunc,V.stencilRef,V.stencilFuncMask),u.setOp(V.stencilFail,V.stencilZFail,V.stencilZPass)),G(V.polygonOffset,V.polygonOffsetFactor,V.polygonOffsetUnits),V.alphaToCoverage===!0?at(n.SAMPLE_ALPHA_TO_COVERAGE):mt(n.SAMPLE_ALPHA_TO_COVERAGE)}function ct(V){U!==V&&(V?n.frontFace(n.CW):n.frontFace(n.CCW),U=V)}function M(V){V!==Dk?(at(n.CULL_FACE),V!==et&&(V===Ub?n.cullFace(n.BACK):V===Lk?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):mt(n.CULL_FACE),et=V}function w(V){V!==L&&(Q&&n.lineWidth(V),L=V)}function G(V,Pt,It){V?(at(n.POLYGON_OFFSET_FILL),(D!==Pt||B!==It)&&(n.polygonOffset(Pt,It),D=Pt,B=It)):mt(n.POLYGON_OFFSET_FILL)}function j(V){V?at(n.SCISSOR_TEST):mt(n.SCISSOR_TEST)}function tt(V){V===void 0&&(V=n.TEXTURE0+q-1),k!==V&&(n.activeTexture(V),k=V)}function P(V,Pt,It){It===void 0&&(k===null?It=n.TEXTURE0+q-1:It=k);let zt=pt[It];zt===void 0&&(zt={type:void 0,texture:void 0},pt[It]=zt),(zt.type!==V||zt.texture!==Pt)&&(k!==It&&(n.activeTexture(It),k=It),n.bindTexture(V,Pt||ft[V]),zt.type=V,zt.texture=Pt)}function F(){const V=pt[k];V!==void 0&&V.type!==void 0&&(n.bindTexture(V.type,null),V.type=void 0,V.texture=void 0)}function H(){try{n.compressedTexImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Z(){try{n.compressedTexImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function dt(){try{n.texSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Tt(){try{n.texSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function ot(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function wt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function yt(){try{n.texStorage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function At(){try{n.texStorage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function bt(){try{n.texImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Rt(){try{n.texImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Nt(V){vt.equals(V)===!1&&(n.scissor(V.x,V.y,V.z,V.w),vt.copy(V))}function Kt(V){gt.equals(V)===!1&&(n.viewport(V.x,V.y,V.z,V.w),gt.copy(V))}function ye(V,Pt){let It=h.get(Pt);It===void 0&&(It=new WeakMap,h.set(Pt,It));let zt=It.get(V);zt===void 0&&(zt=n.getUniformBlockIndex(Pt,V.name),It.set(V,zt))}function Qt(V,Pt){const zt=h.get(Pt).get(V);c.get(Pt)!==zt&&(n.uniformBlockBinding(Pt,zt,V.__bindingPointIndex),c.set(Pt,zt))}function Mt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},k=null,pt={},d={},m=new WeakMap,g=[],p=null,v=!1,y=null,_=null,T=null,E=null,S=null,x=null,O=null,b=new fe(0,0,0),A=0,N=!1,U=null,et=null,L=null,D=null,B=null,vt.set(0,0,n.canvas.width,n.canvas.height),gt.set(0,0,n.canvas.width,n.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:at,disable:mt,bindFramebuffer:_t,drawBuffers:X,useProgram:R,setBlending:Y,setMaterial:K,setFlipSided:ct,setCullFace:M,setLineWidth:w,setPolygonOffset:G,setScissorTest:j,activeTexture:tt,bindTexture:P,unbindTexture:F,compressedTexImage2D:H,compressedTexImage3D:Z,texImage2D:bt,texImage3D:Rt,updateUBOMapping:ye,uniformBlockBinding:Qt,texStorage2D:yt,texStorage3D:At,texSubImage2D:dt,texSubImage3D:Tt,compressedTexSubImage2D:ot,compressedTexSubImage3D:wt,scissor:Nt,viewport:Kt,reset:Mt}}function LV(n,t,e,r,i,o,a){const s=i.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let h;const f=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(M,w){return d?new OffscreenCanvas(M,w):ed("canvas")}function g(M,w,G,j){let tt=1;if((M.width>j||M.height>j)&&(tt=j/Math.max(M.width,M.height)),tt<1||w===!0)if(typeof HTMLImageElement<"u"&&M instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&M instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&M instanceof ImageBitmap){const P=w?Dg:Math.floor,F=P(tt*M.width),H=P(tt*M.height);h===void 0&&(h=m(F,H));const Z=G?m(F,H):h;return Z.width=F,Z.height=H,Z.getContext("2d").drawImage(M,0,0,F,H),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+M.width+"x"+M.height+") to ("+F+"x"+H+")."),Z}else return"data"in M&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+M.width+"x"+M.height+")."),M;return M}function p(M){return _S(M.width)&&_S(M.height)}function v(M){return s?!1:M.wrapS!==Er||M.wrapT!==Er||M.minFilter!==wn&&M.minFilter!==rr}function y(M,w){return M.generateMipmaps&&w&&M.minFilter!==wn&&M.minFilter!==rr}function _(M){n.generateMipmap(M)}function T(M,w,G,j,tt=!1){if(s===!1)return w;if(M!==null){if(n[M]!==void 0)return n[M];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+M+"'")}let P=w;if(w===n.RED&&(G===n.FLOAT&&(P=n.R32F),G===n.HALF_FLOAT&&(P=n.R16F),G===n.UNSIGNED_BYTE&&(P=n.R8)),w===n.RED_INTEGER&&(G===n.UNSIGNED_BYTE&&(P=n.R8UI),G===n.UNSIGNED_SHORT&&(P=n.R16UI),G===n.UNSIGNED_INT&&(P=n.R32UI),G===n.BYTE&&(P=n.R8I),G===n.SHORT&&(P=n.R16I),G===n.INT&&(P=n.R32I)),w===n.RG&&(G===n.FLOAT&&(P=n.RG32F),G===n.HALF_FLOAT&&(P=n.RG16F),G===n.UNSIGNED_BYTE&&(P=n.RG8)),w===n.RGBA){const F=tt?Zf:he.getTransfer(j);G===n.FLOAT&&(P=n.RGBA32F),G===n.HALF_FLOAT&&(P=n.RGBA16F),G===n.UNSIGNED_BYTE&&(P=F===xe?n.SRGB8_ALPHA8:n.RGBA8),G===n.UNSIGNED_SHORT_4_4_4_4&&(P=n.RGBA4),G===n.UNSIGNED_SHORT_5_5_5_1&&(P=n.RGB5_A1)}return(P===n.R16F||P===n.R32F||P===n.RG16F||P===n.RG32F||P===n.RGBA16F||P===n.RGBA32F)&&t.get("EXT_color_buffer_float"),P}function E(M,w,G){return y(M,G)===!0||M.isFramebufferTexture&&M.minFilter!==wn&&M.minFilter!==rr?Math.log2(Math.max(w.width,w.height))+1:M.mipmaps!==void 0&&M.mipmaps.length>0?M.mipmaps.length:M.isCompressedTexture&&Array.isArray(M.image)?w.mipmaps.length:1}function S(M){return M===wn||M===Vb||M===um?n.NEAREST:n.LINEAR}function x(M){const w=M.target;w.removeEventListener("dispose",x),b(w),w.isVideoTexture&&c.delete(w)}function O(M){const w=M.target;w.removeEventListener("dispose",O),N(w)}function b(M){const w=r.get(M);if(w.__webglInit===void 0)return;const G=M.source,j=f.get(G);if(j){const tt=j[w.__cacheKey];tt.usedTimes--,tt.usedTimes===0&&A(M),Object.keys(j).length===0&&f.delete(G)}r.remove(M)}function A(M){const w=r.get(M);n.deleteTexture(w.__webglTexture);const G=M.source,j=f.get(G);delete j[w.__cacheKey],a.memory.textures--}function N(M){const w=M.texture,G=r.get(M),j=r.get(w);if(j.__webglTexture!==void 0&&(n.deleteTexture(j.__webglTexture),a.memory.textures--),M.depthTexture&&M.depthTexture.dispose(),M.isWebGLCubeRenderTarget)for(let tt=0;tt<6;tt++){if(Array.isArray(G.__webglFramebuffer[tt]))for(let P=0;P<G.__webglFramebuffer[tt].length;P++)n.deleteFramebuffer(G.__webglFramebuffer[tt][P]);else n.deleteFramebuffer(G.__webglFramebuffer[tt]);G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer[tt])}else{if(Array.isArray(G.__webglFramebuffer))for(let tt=0;tt<G.__webglFramebuffer.length;tt++)n.deleteFramebuffer(G.__webglFramebuffer[tt]);else n.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&n.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let tt=0;tt<G.__webglColorRenderbuffer.length;tt++)G.__webglColorRenderbuffer[tt]&&n.deleteRenderbuffer(G.__webglColorRenderbuffer[tt]);G.__webglDepthRenderbuffer&&n.deleteRenderbuffer(G.__webglDepthRenderbuffer)}if(M.isWebGLMultipleRenderTargets)for(let tt=0,P=w.length;tt<P;tt++){const F=r.get(w[tt]);F.__webglTexture&&(n.deleteTexture(F.__webglTexture),a.memory.textures--),r.remove(w[tt])}r.remove(w),r.remove(M)}let U=0;function et(){U=0}function L(){const M=U;return M>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+M+" texture units while this GPU supports only "+i.maxTextures),U+=1,M}function D(M){const w=[];return w.push(M.wrapS),w.push(M.wrapT),w.push(M.wrapR||0),w.push(M.magFilter),w.push(M.minFilter),w.push(M.anisotropy),w.push(M.internalFormat),w.push(M.format),w.push(M.type),w.push(M.generateMipmaps),w.push(M.premultiplyAlpha),w.push(M.flipY),w.push(M.unpackAlignment),w.push(M.colorSpace),w.join()}function B(M,w){const G=r.get(M);if(M.isVideoTexture&&K(M),M.isRenderTargetTexture===!1&&M.version>0&&G.__version!==M.version){const j=M.image;if(j===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(j.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{vt(G,M,w);return}}e.bindTexture(n.TEXTURE_2D,G.__webglTexture,n.TEXTURE0+w)}function q(M,w){const G=r.get(M);if(M.version>0&&G.__version!==M.version){vt(G,M,w);return}e.bindTexture(n.TEXTURE_2D_ARRAY,G.__webglTexture,n.TEXTURE0+w)}function Q(M,w){const G=r.get(M);if(M.version>0&&G.__version!==M.version){vt(G,M,w);return}e.bindTexture(n.TEXTURE_3D,G.__webglTexture,n.TEXTURE0+w)}function rt(M,w){const G=r.get(M);if(M.version>0&&G.__version!==M.version){gt(G,M,w);return}e.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+w)}const $={[Rg]:n.REPEAT,[Er]:n.CLAMP_TO_EDGE,[Pg]:n.MIRRORED_REPEAT},k={[wn]:n.NEAREST,[Vb]:n.NEAREST_MIPMAP_NEAREST,[um]:n.NEAREST_MIPMAP_LINEAR,[rr]:n.LINEAR,[dH]:n.LINEAR_MIPMAP_NEAREST,[Au]:n.LINEAR_MIPMAP_LINEAR},pt={[AH]:n.NEVER,[OH]:n.ALWAYS,[MH]:n.LESS,[RM]:n.LEQUAL,[CH]:n.EQUAL,[IH]:n.GEQUAL,[RH]:n.GREATER,[PH]:n.NOTEQUAL};function J(M,w,G){if(G?(n.texParameteri(M,n.TEXTURE_WRAP_S,$[w.wrapS]),n.texParameteri(M,n.TEXTURE_WRAP_T,$[w.wrapT]),(M===n.TEXTURE_3D||M===n.TEXTURE_2D_ARRAY)&&n.texParameteri(M,n.TEXTURE_WRAP_R,$[w.wrapR]),n.texParameteri(M,n.TEXTURE_MAG_FILTER,k[w.magFilter]),n.texParameteri(M,n.TEXTURE_MIN_FILTER,k[w.minFilter])):(n.texParameteri(M,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(M,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(M===n.TEXTURE_3D||M===n.TEXTURE_2D_ARRAY)&&n.texParameteri(M,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(w.wrapS!==Er||w.wrapT!==Er)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(M,n.TEXTURE_MAG_FILTER,S(w.magFilter)),n.texParameteri(M,n.TEXTURE_MIN_FILTER,S(w.minFilter)),w.minFilter!==wn&&w.minFilter!==rr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),w.compareFunction&&(n.texParameteri(M,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(M,n.TEXTURE_COMPARE_FUNC,pt[w.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){const j=t.get("EXT_texture_filter_anisotropic");if(w.magFilter===wn||w.minFilter!==um&&w.minFilter!==Au||w.type===lo&&t.has("OES_texture_float_linear")===!1||s===!1&&w.type===Mu&&t.has("OES_texture_half_float_linear")===!1)return;(w.anisotropy>1||r.get(w).__currentAnisotropy)&&(n.texParameterf(M,j.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(w.anisotropy,i.getMaxAnisotropy())),r.get(w).__currentAnisotropy=w.anisotropy)}}function it(M,w){let G=!1;M.__webglInit===void 0&&(M.__webglInit=!0,w.addEventListener("dispose",x));const j=w.source;let tt=f.get(j);tt===void 0&&(tt={},f.set(j,tt));const P=D(w);if(P!==M.__cacheKey){tt[P]===void 0&&(tt[P]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,G=!0),tt[P].usedTimes++;const F=tt[M.__cacheKey];F!==void 0&&(tt[M.__cacheKey].usedTimes--,F.usedTimes===0&&A(w)),M.__cacheKey=P,M.__webglTexture=tt[P].texture}return G}function vt(M,w,G){let j=n.TEXTURE_2D;(w.isDataArrayTexture||w.isCompressedArrayTexture)&&(j=n.TEXTURE_2D_ARRAY),w.isData3DTexture&&(j=n.TEXTURE_3D);const tt=it(M,w),P=w.source;e.bindTexture(j,M.__webglTexture,n.TEXTURE0+G);const F=r.get(P);if(P.version!==F.__version||tt===!0){e.activeTexture(n.TEXTURE0+G);const H=he.getPrimaries(he.workingColorSpace),Z=w.colorSpace===or?null:he.getPrimaries(w.colorSpace),dt=w.colorSpace===or||H===Z?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,w.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,w.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);const Tt=v(w)&&p(w.image)===!1;let ot=g(w.image,Tt,!1,i.maxTextureSize);ot=ct(w,ot);const wt=p(ot)||s,yt=o.convert(w.format,w.colorSpace);let At=o.convert(w.type),bt=T(w.internalFormat,yt,At,w.colorSpace,w.isVideoTexture);J(j,w,wt);let Rt;const Nt=w.mipmaps,Kt=s&&w.isVideoTexture!==!0&&bt!==MM,ye=F.__version===void 0||tt===!0,Qt=E(w,ot,wt);if(w.isDepthTexture)bt=n.DEPTH_COMPONENT,s?w.type===lo?bt=n.DEPTH_COMPONENT32F:w.type===so?bt=n.DEPTH_COMPONENT24:w.type===fa?bt=n.DEPTH24_STENCIL8:bt=n.DEPTH_COMPONENT16:w.type===lo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),w.format===da&&bt===n.DEPTH_COMPONENT&&w.type!==ry&&w.type!==so&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),w.type=so,At=o.convert(w.type)),w.format===Ws&&bt===n.DEPTH_COMPONENT&&(bt=n.DEPTH_STENCIL,w.type!==fa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),w.type=fa,At=o.convert(w.type))),ye&&(Kt?e.texStorage2D(n.TEXTURE_2D,1,bt,ot.width,ot.height):e.texImage2D(n.TEXTURE_2D,0,bt,ot.width,ot.height,0,yt,At,null));else if(w.isDataTexture)if(Nt.length>0&&wt){Kt&&ye&&e.texStorage2D(n.TEXTURE_2D,Qt,bt,Nt[0].width,Nt[0].height);for(let Mt=0,V=Nt.length;Mt<V;Mt++)Rt=Nt[Mt],Kt?e.texSubImage2D(n.TEXTURE_2D,Mt,0,0,Rt.width,Rt.height,yt,At,Rt.data):e.texImage2D(n.TEXTURE_2D,Mt,bt,Rt.width,Rt.height,0,yt,At,Rt.data);w.generateMipmaps=!1}else Kt?(ye&&e.texStorage2D(n.TEXTURE_2D,Qt,bt,ot.width,ot.height),e.texSubImage2D(n.TEXTURE_2D,0,0,0,ot.width,ot.height,yt,At,ot.data)):e.texImage2D(n.TEXTURE_2D,0,bt,ot.width,ot.height,0,yt,At,ot.data);else if(w.isCompressedTexture)if(w.isCompressedArrayTexture){Kt&&ye&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Qt,bt,Nt[0].width,Nt[0].height,ot.depth);for(let Mt=0,V=Nt.length;Mt<V;Mt++)Rt=Nt[Mt],w.format!==Tr?yt!==null?Kt?e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Mt,0,0,0,Rt.width,Rt.height,ot.depth,yt,Rt.data,0,0):e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Mt,bt,Rt.width,Rt.height,ot.depth,0,Rt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Kt?e.texSubImage3D(n.TEXTURE_2D_ARRAY,Mt,0,0,0,Rt.width,Rt.height,ot.depth,yt,At,Rt.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Mt,bt,Rt.width,Rt.height,ot.depth,0,yt,At,Rt.data)}else{Kt&&ye&&e.texStorage2D(n.TEXTURE_2D,Qt,bt,Nt[0].width,Nt[0].height);for(let Mt=0,V=Nt.length;Mt<V;Mt++)Rt=Nt[Mt],w.format!==Tr?yt!==null?Kt?e.compressedTexSubImage2D(n.TEXTURE_2D,Mt,0,0,Rt.width,Rt.height,yt,Rt.data):e.compressedTexImage2D(n.TEXTURE_2D,Mt,bt,Rt.width,Rt.height,0,Rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Kt?e.texSubImage2D(n.TEXTURE_2D,Mt,0,0,Rt.width,Rt.height,yt,At,Rt.data):e.texImage2D(n.TEXTURE_2D,Mt,bt,Rt.width,Rt.height,0,yt,At,Rt.data)}else if(w.isDataArrayTexture)Kt?(ye&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Qt,bt,ot.width,ot.height,ot.depth),e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ot.width,ot.height,ot.depth,yt,At,ot.data)):e.texImage3D(n.TEXTURE_2D_ARRAY,0,bt,ot.width,ot.height,ot.depth,0,yt,At,ot.data);else if(w.isData3DTexture)Kt?(ye&&e.texStorage3D(n.TEXTURE_3D,Qt,bt,ot.width,ot.height,ot.depth),e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ot.width,ot.height,ot.depth,yt,At,ot.data)):e.texImage3D(n.TEXTURE_3D,0,bt,ot.width,ot.height,ot.depth,0,yt,At,ot.data);else if(w.isFramebufferTexture){if(ye)if(Kt)e.texStorage2D(n.TEXTURE_2D,Qt,bt,ot.width,ot.height);else{let Mt=ot.width,V=ot.height;for(let Pt=0;Pt<Qt;Pt++)e.texImage2D(n.TEXTURE_2D,Pt,bt,Mt,V,0,yt,At,null),Mt>>=1,V>>=1}}else if(Nt.length>0&&wt){Kt&&ye&&e.texStorage2D(n.TEXTURE_2D,Qt,bt,Nt[0].width,Nt[0].height);for(let Mt=0,V=Nt.length;Mt<V;Mt++)Rt=Nt[Mt],Kt?e.texSubImage2D(n.TEXTURE_2D,Mt,0,0,yt,At,Rt):e.texImage2D(n.TEXTURE_2D,Mt,bt,yt,At,Rt);w.generateMipmaps=!1}else Kt?(ye&&e.texStorage2D(n.TEXTURE_2D,Qt,bt,ot.width,ot.height),e.texSubImage2D(n.TEXTURE_2D,0,0,0,yt,At,ot)):e.texImage2D(n.TEXTURE_2D,0,bt,yt,At,ot);y(w,wt)&&_(j),F.__version=P.version,w.onUpdate&&w.onUpdate(w)}M.__version=w.version}function gt(M,w,G){if(w.image.length!==6)return;const j=it(M,w),tt=w.source;e.bindTexture(n.TEXTURE_CUBE_MAP,M.__webglTexture,n.TEXTURE0+G);const P=r.get(tt);if(tt.version!==P.__version||j===!0){e.activeTexture(n.TEXTURE0+G);const F=he.getPrimaries(he.workingColorSpace),H=w.colorSpace===or?null:he.getPrimaries(w.colorSpace),Z=w.colorSpace===or||F===H?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,w.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,w.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Z);const dt=w.isCompressedTexture||w.image[0].isCompressedTexture,Tt=w.image[0]&&w.image[0].isDataTexture,ot=[];for(let Mt=0;Mt<6;Mt++)!dt&&!Tt?ot[Mt]=g(w.image[Mt],!1,!0,i.maxCubemapSize):ot[Mt]=Tt?w.image[Mt].image:w.image[Mt],ot[Mt]=ct(w,ot[Mt]);const wt=ot[0],yt=p(wt)||s,At=o.convert(w.format,w.colorSpace),bt=o.convert(w.type),Rt=T(w.internalFormat,At,bt,w.colorSpace),Nt=s&&w.isVideoTexture!==!0,Kt=P.__version===void 0||j===!0;let ye=E(w,wt,yt);J(n.TEXTURE_CUBE_MAP,w,yt);let Qt;if(dt){Nt&&Kt&&e.texStorage2D(n.TEXTURE_CUBE_MAP,ye,Rt,wt.width,wt.height);for(let Mt=0;Mt<6;Mt++){Qt=ot[Mt].mipmaps;for(let V=0;V<Qt.length;V++){const Pt=Qt[V];w.format!==Tr?At!==null?Nt?e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,V,0,0,Pt.width,Pt.height,At,Pt.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,V,Rt,Pt.width,Pt.height,0,Pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Nt?e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,V,0,0,Pt.width,Pt.height,At,bt,Pt.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,V,Rt,Pt.width,Pt.height,0,At,bt,Pt.data)}}}else{Qt=w.mipmaps,Nt&&Kt&&(Qt.length>0&&ye++,e.texStorage2D(n.TEXTURE_CUBE_MAP,ye,Rt,ot[0].width,ot[0].height));for(let Mt=0;Mt<6;Mt++)if(Tt){Nt?e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,ot[Mt].width,ot[Mt].height,At,bt,ot[Mt].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,Rt,ot[Mt].width,ot[Mt].height,0,At,bt,ot[Mt].data);for(let V=0;V<Qt.length;V++){const It=Qt[V].image[Mt].image;Nt?e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,V+1,0,0,It.width,It.height,At,bt,It.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,V+1,Rt,It.width,It.height,0,At,bt,It.data)}}else{Nt?e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,At,bt,ot[Mt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,Rt,At,bt,ot[Mt]);for(let V=0;V<Qt.length;V++){const Pt=Qt[V];Nt?e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,V+1,0,0,At,bt,Pt.image[Mt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,V+1,Rt,At,bt,Pt.image[Mt])}}}y(w,yt)&&_(n.TEXTURE_CUBE_MAP),P.__version=tt.version,w.onUpdate&&w.onUpdate(w)}M.__version=w.version}function W(M,w,G,j,tt,P){const F=o.convert(G.format,G.colorSpace),H=o.convert(G.type),Z=T(G.internalFormat,F,H,G.colorSpace);if(!r.get(w).__hasExternalTextures){const Tt=Math.max(1,w.width>>P),ot=Math.max(1,w.height>>P);tt===n.TEXTURE_3D||tt===n.TEXTURE_2D_ARRAY?e.texImage3D(tt,P,Z,Tt,ot,w.depth,0,F,H,null):e.texImage2D(tt,P,Z,Tt,ot,0,F,H,null)}e.bindFramebuffer(n.FRAMEBUFFER,M),Y(w)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,j,tt,r.get(G).__webglTexture,0,z(w)):(tt===n.TEXTURE_2D||tt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&tt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,j,tt,r.get(G).__webglTexture,P),e.bindFramebuffer(n.FRAMEBUFFER,null)}function ft(M,w,G){if(n.bindRenderbuffer(n.RENDERBUFFER,M),w.depthBuffer&&!w.stencilBuffer){let j=s===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(G||Y(w)){const tt=w.depthTexture;tt&&tt.isDepthTexture&&(tt.type===lo?j=n.DEPTH_COMPONENT32F:tt.type===so&&(j=n.DEPTH_COMPONENT24));const P=z(w);Y(w)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,P,j,w.width,w.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,P,j,w.width,w.height)}else n.renderbufferStorage(n.RENDERBUFFER,j,w.width,w.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,M)}else if(w.depthBuffer&&w.stencilBuffer){const j=z(w);G&&Y(w)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,j,n.DEPTH24_STENCIL8,w.width,w.height):Y(w)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,j,n.DEPTH24_STENCIL8,w.width,w.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,w.width,w.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,M)}else{const j=w.isWebGLMultipleRenderTargets===!0?w.texture:[w.texture];for(let tt=0;tt<j.length;tt++){const P=j[tt],F=o.convert(P.format,P.colorSpace),H=o.convert(P.type),Z=T(P.internalFormat,F,H,P.colorSpace),dt=z(w);G&&Y(w)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,dt,Z,w.width,w.height):Y(w)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,dt,Z,w.width,w.height):n.renderbufferStorage(n.RENDERBUFFER,Z,w.width,w.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function at(M,w){if(w&&w.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,M),!(w.depthTexture&&w.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(w.depthTexture).__webglTexture||w.depthTexture.image.width!==w.width||w.depthTexture.image.height!==w.height)&&(w.depthTexture.image.width=w.width,w.depthTexture.image.height=w.height,w.depthTexture.needsUpdate=!0),B(w.depthTexture,0);const j=r.get(w.depthTexture).__webglTexture,tt=z(w);if(w.depthTexture.format===da)Y(w)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,j,0,tt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,j,0);else if(w.depthTexture.format===Ws)Y(w)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,j,0,tt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,j,0);else throw new Error("Unknown depthTexture format")}function mt(M){const w=r.get(M),G=M.isWebGLCubeRenderTarget===!0;if(M.depthTexture&&!w.__autoAllocateDepthBuffer){if(G)throw new Error("target.depthTexture not supported in Cube render targets");at(w.__webglFramebuffer,M)}else if(G){w.__webglDepthbuffer=[];for(let j=0;j<6;j++)e.bindFramebuffer(n.FRAMEBUFFER,w.__webglFramebuffer[j]),w.__webglDepthbuffer[j]=n.createRenderbuffer(),ft(w.__webglDepthbuffer[j],M,!1)}else e.bindFramebuffer(n.FRAMEBUFFER,w.__webglFramebuffer),w.__webglDepthbuffer=n.createRenderbuffer(),ft(w.__webglDepthbuffer,M,!1);e.bindFramebuffer(n.FRAMEBUFFER,null)}function _t(M,w,G){const j=r.get(M);w!==void 0&&W(j.__webglFramebuffer,M,M.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),G!==void 0&&mt(M)}function X(M){const w=M.texture,G=r.get(M),j=r.get(w);M.addEventListener("dispose",O),M.isWebGLMultipleRenderTargets!==!0&&(j.__webglTexture===void 0&&(j.__webglTexture=n.createTexture()),j.__version=w.version,a.memory.textures++);const tt=M.isWebGLCubeRenderTarget===!0,P=M.isWebGLMultipleRenderTargets===!0,F=p(M)||s;if(tt){G.__webglFramebuffer=[];for(let H=0;H<6;H++)if(s&&w.mipmaps&&w.mipmaps.length>0){G.__webglFramebuffer[H]=[];for(let Z=0;Z<w.mipmaps.length;Z++)G.__webglFramebuffer[H][Z]=n.createFramebuffer()}else G.__webglFramebuffer[H]=n.createFramebuffer()}else{if(s&&w.mipmaps&&w.mipmaps.length>0){G.__webglFramebuffer=[];for(let H=0;H<w.mipmaps.length;H++)G.__webglFramebuffer[H]=n.createFramebuffer()}else G.__webglFramebuffer=n.createFramebuffer();if(P)if(i.drawBuffers){const H=M.texture;for(let Z=0,dt=H.length;Z<dt;Z++){const Tt=r.get(H[Z]);Tt.__webglTexture===void 0&&(Tt.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&M.samples>0&&Y(M)===!1){const H=P?w:[w];G.__webglMultisampledFramebuffer=n.createFramebuffer(),G.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,G.__webglMultisampledFramebuffer);for(let Z=0;Z<H.length;Z++){const dt=H[Z];G.__webglColorRenderbuffer[Z]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,G.__webglColorRenderbuffer[Z]);const Tt=o.convert(dt.format,dt.colorSpace),ot=o.convert(dt.type),wt=T(dt.internalFormat,Tt,ot,dt.colorSpace,M.isXRRenderTarget===!0),yt=z(M);n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,wt,M.width,M.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Z,n.RENDERBUFFER,G.__webglColorRenderbuffer[Z])}n.bindRenderbuffer(n.RENDERBUFFER,null),M.depthBuffer&&(G.__webglDepthRenderbuffer=n.createRenderbuffer(),ft(G.__webglDepthRenderbuffer,M,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(tt){e.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture),J(n.TEXTURE_CUBE_MAP,w,F);for(let H=0;H<6;H++)if(s&&w.mipmaps&&w.mipmaps.length>0)for(let Z=0;Z<w.mipmaps.length;Z++)W(G.__webglFramebuffer[H][Z],M,w,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+H,Z);else W(G.__webglFramebuffer[H],M,w,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+H,0);y(w,F)&&_(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(P){const H=M.texture;for(let Z=0,dt=H.length;Z<dt;Z++){const Tt=H[Z],ot=r.get(Tt);e.bindTexture(n.TEXTURE_2D,ot.__webglTexture),J(n.TEXTURE_2D,Tt,F),W(G.__webglFramebuffer,M,Tt,n.COLOR_ATTACHMENT0+Z,n.TEXTURE_2D,0),y(Tt,F)&&_(n.TEXTURE_2D)}e.unbindTexture()}else{let H=n.TEXTURE_2D;if((M.isWebGL3DRenderTarget||M.isWebGLArrayRenderTarget)&&(s?H=M.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(H,j.__webglTexture),J(H,w,F),s&&w.mipmaps&&w.mipmaps.length>0)for(let Z=0;Z<w.mipmaps.length;Z++)W(G.__webglFramebuffer[Z],M,w,n.COLOR_ATTACHMENT0,H,Z);else W(G.__webglFramebuffer,M,w,n.COLOR_ATTACHMENT0,H,0);y(w,F)&&_(H),e.unbindTexture()}M.depthBuffer&&mt(M)}function R(M){const w=p(M)||s,G=M.isWebGLMultipleRenderTargets===!0?M.texture:[M.texture];for(let j=0,tt=G.length;j<tt;j++){const P=G[j];if(y(P,w)){const F=M.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,H=r.get(P).__webglTexture;e.bindTexture(F,H),_(F),e.unbindTexture()}}}function C(M){if(s&&M.samples>0&&Y(M)===!1){const w=M.isWebGLMultipleRenderTargets?M.texture:[M.texture],G=M.width,j=M.height;let tt=n.COLOR_BUFFER_BIT;const P=[],F=M.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,H=r.get(M),Z=M.isWebGLMultipleRenderTargets===!0;if(Z)for(let dt=0;dt<w.length;dt++)e.bindFramebuffer(n.FRAMEBUFFER,H.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,H.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,H.__webglFramebuffer);for(let dt=0;dt<w.length;dt++){P.push(n.COLOR_ATTACHMENT0+dt),M.depthBuffer&&P.push(F);const Tt=H.__ignoreDepthValues!==void 0?H.__ignoreDepthValues:!1;if(Tt===!1&&(M.depthBuffer&&(tt|=n.DEPTH_BUFFER_BIT),M.stencilBuffer&&(tt|=n.STENCIL_BUFFER_BIT)),Z&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,H.__webglColorRenderbuffer[dt]),Tt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[F]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[F])),Z){const ot=r.get(w[dt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ot,0)}n.blitFramebuffer(0,0,G,j,0,0,G,j,tt,n.NEAREST),u&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,P)}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Z)for(let dt=0;dt<w.length;dt++){e.bindFramebuffer(n.FRAMEBUFFER,H.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.RENDERBUFFER,H.__webglColorRenderbuffer[dt]);const Tt=r.get(w[dt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.TEXTURE_2D,Tt,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,H.__webglMultisampledFramebuffer)}}function z(M){return Math.min(i.maxSamples,M.samples)}function Y(M){const w=r.get(M);return s&&M.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&w.__useRenderToTexture!==!1}function K(M){const w=a.render.frame;c.get(M)!==w&&(c.set(M,w),M.update())}function ct(M,w){const G=M.colorSpace,j=M.format,tt=M.type;return M.isCompressedTexture===!0||M.isVideoTexture===!0||M.format===Ig||G!==Li&&G!==or&&(he.getTransfer(G)===xe?s===!1?t.has("EXT_sRGB")===!0&&j===Tr?(M.format=Ig,M.minFilter=rr,M.generateMipmaps=!1):w=IM.sRGBToLinear(w):(j!==Tr||tt!==vo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",G)),w}this.allocateTextureUnit=L,this.resetTextureUnits=et,this.setTexture2D=B,this.setTexture2DArray=q,this.setTexture3D=Q,this.setTextureCube=rt,this.rebindTextures=_t,this.setupRenderTarget=X,this.updateRenderTargetMipmap=R,this.updateMultisampleRenderTarget=C,this.setupDepthRenderbuffer=mt,this.setupFrameBufferTexture=W,this.useMultisampledRTT=Y}function NV(n,t,e){const r=e.isWebGL2;function i(o,a=or){let s;const l=he.getTransfer(a);if(o===vo)return n.UNSIGNED_BYTE;if(o===SM)return n.UNSIGNED_SHORT_4_4_4_4;if(o===EM)return n.UNSIGNED_SHORT_5_5_5_1;if(o===pH)return n.BYTE;if(o===mH)return n.SHORT;if(o===ry)return n.UNSIGNED_SHORT;if(o===bM)return n.INT;if(o===so)return n.UNSIGNED_INT;if(o===lo)return n.FLOAT;if(o===Mu)return r?n.HALF_FLOAT:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===vH)return n.ALPHA;if(o===Tr)return n.RGBA;if(o===gH)return n.LUMINANCE;if(o===_H)return n.LUMINANCE_ALPHA;if(o===da)return n.DEPTH_COMPONENT;if(o===Ws)return n.DEPTH_STENCIL;if(o===Ig)return s=t.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(o===yH)return n.RED;if(o===TM)return n.RED_INTEGER;if(o===xH)return n.RG;if(o===wM)return n.RG_INTEGER;if(o===AM)return n.RGBA_INTEGER;if(o===cm||o===hm||o===fm||o===dm)if(l===xe)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(o===cm)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===hm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===fm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===dm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===cm)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===hm)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===fm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===dm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===Wb||o===Xb||o===$b||o===jb)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===Wb)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===Xb)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===$b)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===jb)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===MM)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===Yb||o===qb)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(o===Yb)return l===xe?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(o===qb)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===Kb||o===Zb||o===Jb||o===Qb||o===tS||o===eS||o===nS||o===rS||o===iS||o===oS||o===aS||o===sS||o===lS||o===uS)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(o===Kb)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===Zb)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===Jb)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===Qb)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===tS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===eS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===nS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===rS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===iS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===oS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===aS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===sS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===lS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===uS)return l===xe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===pm||o===cS||o===hS)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(o===pm)return l===xe?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===cS)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===hS)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===bH||o===fS||o===dS||o===pS)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(o===pm)return s.COMPRESSED_RED_RGTC1_EXT;if(o===fS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===dS)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===pS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===fa?r?n.UNSIGNED_INT_24_8:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:i}}class FV extends ir{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class mh extends qn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const UV={type:"move"};class Gm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ut,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ut),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ut,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ut),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const r of t.hand.values())this._getHandJoint(e,r)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,r){let i=null,o=null,a=null;const s=this._targetRay,l=this._grip,u=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(u&&t.hand){a=!0;for(const g of t.hand.values()){const p=e.getJointPose(g,r),v=this._getHandJoint(u,g);p!==null&&(v.matrix.fromArray(p.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=p.radius),v.visible=p!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=c.position.distanceTo(h.position),d=.02,m=.005;u.inputState.pinching&&f>d+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&f<=d-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=e.getPose(t.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(UV)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const r=new mh;r.matrixAutoUpdate=!1,r.visible=!1,t.joints[e.jointName]=r,t.add(r)}return t.joints[e.jointName]}}class BV extends el{constructor(t,e){super();const r=this;let i=null,o=1,a=null,s="local-floor",l=1,u=null,c=null,h=null,f=null,d=null,m=null;const g=e.getContextAttributes();let p=null,v=null;const y=[],_=[],T=new de;let E=null;const S=new ir;S.layers.enable(1),S.viewport=new cn;const x=new ir;x.layers.enable(2),x.viewport=new cn;const O=[S,x],b=new FV;b.layers.enable(1),b.layers.enable(2);let A=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let it=y[J];return it===void 0&&(it=new Gm,y[J]=it),it.getTargetRaySpace()},this.getControllerGrip=function(J){let it=y[J];return it===void 0&&(it=new Gm,y[J]=it),it.getGripSpace()},this.getHand=function(J){let it=y[J];return it===void 0&&(it=new Gm,y[J]=it),it.getHandSpace()};function U(J){const it=_.indexOf(J.inputSource);if(it===-1)return;const vt=y[it];vt!==void 0&&(vt.update(J.inputSource,J.frame,u||a),vt.dispatchEvent({type:J.type,data:J.inputSource}))}function et(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",et),i.removeEventListener("inputsourceschange",L);for(let J=0;J<y.length;J++){const it=_[J];it!==null&&(_[J]=null,y[J].disconnect(it))}A=null,N=null,t.setRenderTarget(p),d=null,f=null,h=null,i=null,v=null,pt.stop(),r.isPresenting=!1,t.setPixelRatio(E),t.setSize(T.width,T.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){o=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){s=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(J){u=J},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(J){if(i=J,i!==null){if(p=t.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",et),i.addEventListener("inputsourceschange",L),g.xrCompatible!==!0&&await e.makeXRCompatible(),E=t.getPixelRatio(),t.getSize(T),i.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const it={antialias:i.renderState.layers===void 0?g.antialias:!0,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,e,it),i.updateRenderState({baseLayer:d}),t.setPixelRatio(1),t.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new Aa(d.framebufferWidth,d.framebufferHeight,{format:Tr,type:vo,colorSpace:t.outputColorSpace,stencilBuffer:g.stencil})}else{let it=null,vt=null,gt=null;g.depth&&(gt=g.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,it=g.stencil?Ws:da,vt=g.stencil?fa:so);const W={colorFormat:e.RGBA8,depthFormat:gt,scaleFactor:o};h=new XRWebGLBinding(i,e),f=h.createProjectionLayer(W),i.updateRenderState({layers:[f]}),t.setPixelRatio(1),t.setSize(f.textureWidth,f.textureHeight,!1),v=new Aa(f.textureWidth,f.textureHeight,{format:Tr,type:vo,depthTexture:new VM(f.textureWidth,f.textureHeight,vt,void 0,void 0,void 0,void 0,void 0,void 0,it),stencilBuffer:g.stencil,colorSpace:t.outputColorSpace,samples:g.antialias?4:0});const ft=t.properties.get(v);ft.__ignoreDepthValues=f.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await i.requestReferenceSpace(s),pt.setContext(i),pt.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function L(J){for(let it=0;it<J.removed.length;it++){const vt=J.removed[it],gt=_.indexOf(vt);gt>=0&&(_[gt]=null,y[gt].disconnect(vt))}for(let it=0;it<J.added.length;it++){const vt=J.added[it];let gt=_.indexOf(vt);if(gt===-1){for(let ft=0;ft<y.length;ft++)if(ft>=_.length){_.push(vt),gt=ft;break}else if(_[ft]===null){_[ft]=vt,gt=ft;break}if(gt===-1)break}const W=y[gt];W&&W.connect(vt)}}const D=new ut,B=new ut;function q(J,it,vt){D.setFromMatrixPosition(it.matrixWorld),B.setFromMatrixPosition(vt.matrixWorld);const gt=D.distanceTo(B),W=it.projectionMatrix.elements,ft=vt.projectionMatrix.elements,at=W[14]/(W[10]-1),mt=W[14]/(W[10]+1),_t=(W[9]+1)/W[5],X=(W[9]-1)/W[5],R=(W[8]-1)/W[0],C=(ft[8]+1)/ft[0],z=at*R,Y=at*C,K=gt/(-R+C),ct=K*-R;it.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(ct),J.translateZ(K),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const M=at+K,w=mt+K,G=z-ct,j=Y+(gt-ct),tt=_t*mt/w*M,P=X*mt/w*M;J.projectionMatrix.makePerspective(G,j,tt,P,M,w),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}function Q(J,it){it===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(it.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(i===null)return;b.near=x.near=S.near=J.near,b.far=x.far=S.far=J.far,(A!==b.near||N!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),A=b.near,N=b.far);const it=J.parent,vt=b.cameras;Q(b,it);for(let gt=0;gt<vt.length;gt++)Q(vt[gt],it);vt.length===2?q(b,S,x):b.projectionMatrix.copy(S.projectionMatrix),rt(J,b,it)};function rt(J,it,vt){vt===null?J.matrix.copy(it.matrixWorld):(J.matrix.copy(vt.matrixWorld),J.matrix.invert(),J.matrix.multiply(it.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(it.projectionMatrix),J.projectionMatrixInverse.copy(it.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=Og*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(J){l=J,f!==null&&(f.fixedFoveation=J),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=J)};let $=null;function k(J,it){if(c=it.getViewerPose(u||a),m=it,c!==null){const vt=c.views;d!==null&&(t.setRenderTargetFramebuffer(v,d.framebuffer),t.setRenderTarget(v));let gt=!1;vt.length!==b.cameras.length&&(b.cameras.length=0,gt=!0);for(let W=0;W<vt.length;W++){const ft=vt[W];let at=null;if(d!==null)at=d.getViewport(ft);else{const _t=h.getViewSubImage(f,ft);at=_t.viewport,W===0&&(t.setRenderTargetTextures(v,_t.colorTexture,f.ignoreDepthValues?void 0:_t.depthStencilTexture),t.setRenderTarget(v))}let mt=O[W];mt===void 0&&(mt=new ir,mt.layers.enable(W),mt.viewport=new cn,O[W]=mt),mt.matrix.fromArray(ft.transform.matrix),mt.matrix.decompose(mt.position,mt.quaternion,mt.scale),mt.projectionMatrix.fromArray(ft.projectionMatrix),mt.projectionMatrixInverse.copy(mt.projectionMatrix).invert(),mt.viewport.set(at.x,at.y,at.width,at.height),W===0&&(b.matrix.copy(mt.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),gt===!0&&b.cameras.push(mt)}}for(let vt=0;vt<y.length;vt++){const gt=_[vt],W=y[vt];gt!==null&&W!==void 0&&W.update(gt,it,u||a)}$&&$(J,it),it.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:it}),m=null}const pt=new zM;pt.setAnimationLoop(k),this.setAnimationLoop=function(J){$=J},this.dispose=function(){}}}function GV(n,t){function e(p,v){p.matrixAutoUpdate===!0&&p.updateMatrix(),v.value.copy(p.matrix)}function r(p,v){v.color.getRGB(p.fogColor.value,BM(n)),v.isFog?(p.fogNear.value=v.near,p.fogFar.value=v.far):v.isFogExp2&&(p.fogDensity.value=v.density)}function i(p,v,y,_,T){v.isMeshBasicMaterial||v.isMeshLambertMaterial?o(p,v):v.isMeshToonMaterial?(o(p,v),h(p,v)):v.isMeshPhongMaterial?(o(p,v),c(p,v)):v.isMeshStandardMaterial?(o(p,v),f(p,v),v.isMeshPhysicalMaterial&&d(p,v,T)):v.isMeshMatcapMaterial?(o(p,v),m(p,v)):v.isMeshDepthMaterial?o(p,v):v.isMeshDistanceMaterial?(o(p,v),g(p,v)):v.isMeshNormalMaterial?o(p,v):v.isLineBasicMaterial?(a(p,v),v.isLineDashedMaterial&&s(p,v)):v.isPointsMaterial?l(p,v,y,_):v.isSpriteMaterial?u(p,v):v.isShadowMaterial?(p.color.value.copy(v.color),p.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function o(p,v){p.opacity.value=v.opacity,v.color&&p.diffuse.value.copy(v.color),v.emissive&&p.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(p.map.value=v.map,e(v.map,p.mapTransform)),v.alphaMap&&(p.alphaMap.value=v.alphaMap,e(v.alphaMap,p.alphaMapTransform)),v.bumpMap&&(p.bumpMap.value=v.bumpMap,e(v.bumpMap,p.bumpMapTransform),p.bumpScale.value=v.bumpScale,v.side===Dn&&(p.bumpScale.value*=-1)),v.normalMap&&(p.normalMap.value=v.normalMap,e(v.normalMap,p.normalMapTransform),p.normalScale.value.copy(v.normalScale),v.side===Dn&&p.normalScale.value.negate()),v.displacementMap&&(p.displacementMap.value=v.displacementMap,e(v.displacementMap,p.displacementMapTransform),p.displacementScale.value=v.displacementScale,p.displacementBias.value=v.displacementBias),v.emissiveMap&&(p.emissiveMap.value=v.emissiveMap,e(v.emissiveMap,p.emissiveMapTransform)),v.specularMap&&(p.specularMap.value=v.specularMap,e(v.specularMap,p.specularMapTransform)),v.alphaTest>0&&(p.alphaTest.value=v.alphaTest);const y=t.get(v).envMap;if(y&&(p.envMap.value=y,p.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=v.reflectivity,p.ior.value=v.ior,p.refractionRatio.value=v.refractionRatio),v.lightMap){p.lightMap.value=v.lightMap;const _=n._useLegacyLights===!0?Math.PI:1;p.lightMapIntensity.value=v.lightMapIntensity*_,e(v.lightMap,p.lightMapTransform)}v.aoMap&&(p.aoMap.value=v.aoMap,p.aoMapIntensity.value=v.aoMapIntensity,e(v.aoMap,p.aoMapTransform))}function a(p,v){p.diffuse.value.copy(v.color),p.opacity.value=v.opacity,v.map&&(p.map.value=v.map,e(v.map,p.mapTransform))}function s(p,v){p.dashSize.value=v.dashSize,p.totalSize.value=v.dashSize+v.gapSize,p.scale.value=v.scale}function l(p,v,y,_){p.diffuse.value.copy(v.color),p.opacity.value=v.opacity,p.size.value=v.size*y,p.scale.value=_*.5,v.map&&(p.map.value=v.map,e(v.map,p.uvTransform)),v.alphaMap&&(p.alphaMap.value=v.alphaMap,e(v.alphaMap,p.alphaMapTransform)),v.alphaTest>0&&(p.alphaTest.value=v.alphaTest)}function u(p,v){p.diffuse.value.copy(v.color),p.opacity.value=v.opacity,p.rotation.value=v.rotation,v.map&&(p.map.value=v.map,e(v.map,p.mapTransform)),v.alphaMap&&(p.alphaMap.value=v.alphaMap,e(v.alphaMap,p.alphaMapTransform)),v.alphaTest>0&&(p.alphaTest.value=v.alphaTest)}function c(p,v){p.specular.value.copy(v.specular),p.shininess.value=Math.max(v.shininess,1e-4)}function h(p,v){v.gradientMap&&(p.gradientMap.value=v.gradientMap)}function f(p,v){p.metalness.value=v.metalness,v.metalnessMap&&(p.metalnessMap.value=v.metalnessMap,e(v.metalnessMap,p.metalnessMapTransform)),p.roughness.value=v.roughness,v.roughnessMap&&(p.roughnessMap.value=v.roughnessMap,e(v.roughnessMap,p.roughnessMapTransform)),t.get(v).envMap&&(p.envMapIntensity.value=v.envMapIntensity)}function d(p,v,y){p.ior.value=v.ior,v.sheen>0&&(p.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),p.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(p.sheenColorMap.value=v.sheenColorMap,e(v.sheenColorMap,p.sheenColorMapTransform)),v.sheenRoughnessMap&&(p.sheenRoughnessMap.value=v.sheenRoughnessMap,e(v.sheenRoughnessMap,p.sheenRoughnessMapTransform))),v.clearcoat>0&&(p.clearcoat.value=v.clearcoat,p.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(p.clearcoatMap.value=v.clearcoatMap,e(v.clearcoatMap,p.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,e(v.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(p.clearcoatNormalMap.value=v.clearcoatNormalMap,e(v.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Dn&&p.clearcoatNormalScale.value.negate())),v.iridescence>0&&(p.iridescence.value=v.iridescence,p.iridescenceIOR.value=v.iridescenceIOR,p.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(p.iridescenceMap.value=v.iridescenceMap,e(v.iridescenceMap,p.iridescenceMapTransform)),v.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=v.iridescenceThicknessMap,e(v.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),v.transmission>0&&(p.transmission.value=v.transmission,p.transmissionSamplerMap.value=y.texture,p.transmissionSamplerSize.value.set(y.width,y.height),v.transmissionMap&&(p.transmissionMap.value=v.transmissionMap,e(v.transmissionMap,p.transmissionMapTransform)),p.thickness.value=v.thickness,v.thicknessMap&&(p.thicknessMap.value=v.thicknessMap,e(v.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=v.attenuationDistance,p.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(p.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(p.anisotropyMap.value=v.anisotropyMap,e(v.anisotropyMap,p.anisotropyMapTransform))),p.specularIntensity.value=v.specularIntensity,p.specularColor.value.copy(v.specularColor),v.specularColorMap&&(p.specularColorMap.value=v.specularColorMap,e(v.specularColorMap,p.specularColorMapTransform)),v.specularIntensityMap&&(p.specularIntensityMap.value=v.specularIntensityMap,e(v.specularIntensityMap,p.specularIntensityMapTransform))}function m(p,v){v.matcap&&(p.matcap.value=v.matcap)}function g(p,v){const y=t.get(v).light;p.referencePosition.value.setFromMatrixPosition(y.matrixWorld),p.nearDistance.value=y.shadow.camera.near,p.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function kV(n,t,e,r){let i={},o={},a=[];const s=e.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(y,_){const T=_.program;r.uniformBlockBinding(y,T)}function u(y,_){let T=i[y.id];T===void 0&&(m(y),T=c(y),i[y.id]=T,y.addEventListener("dispose",p));const E=_.program;r.updateUBOMapping(y,E);const S=t.render.frame;o[y.id]!==S&&(f(y),o[y.id]=S)}function c(y){const _=h();y.__bindingPointIndex=_;const T=n.createBuffer(),E=y.__size,S=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,E,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,T),T}function h(){for(let y=0;y<s;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const _=i[y.id],T=y.uniforms,E=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let S=0,x=T.length;S<x;S++){const O=Array.isArray(T[S])?T[S]:[T[S]];for(let b=0,A=O.length;b<A;b++){const N=O[b];if(d(N,S,b,E)===!0){const U=N.__offset,et=Array.isArray(N.value)?N.value:[N.value];let L=0;for(let D=0;D<et.length;D++){const B=et[D],q=g(B);typeof B=="number"||typeof B=="boolean"?(N.__data[0]=B,n.bufferSubData(n.UNIFORM_BUFFER,U+L,N.__data)):B.isMatrix3?(N.__data[0]=B.elements[0],N.__data[1]=B.elements[1],N.__data[2]=B.elements[2],N.__data[3]=0,N.__data[4]=B.elements[3],N.__data[5]=B.elements[4],N.__data[6]=B.elements[5],N.__data[7]=0,N.__data[8]=B.elements[6],N.__data[9]=B.elements[7],N.__data[10]=B.elements[8],N.__data[11]=0):(B.toArray(N.__data,L),L+=q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function d(y,_,T,E){const S=y.value,x=_+"_"+T;if(E[x]===void 0)return typeof S=="number"||typeof S=="boolean"?E[x]=S:E[x]=S.clone(),!0;{const O=E[x];if(typeof S=="number"||typeof S=="boolean"){if(O!==S)return E[x]=S,!0}else if(O.equals(S)===!1)return O.copy(S),!0}return!1}function m(y){const _=y.uniforms;let T=0;const E=16;for(let x=0,O=_.length;x<O;x++){const b=Array.isArray(_[x])?_[x]:[_[x]];for(let A=0,N=b.length;A<N;A++){const U=b[A],et=Array.isArray(U.value)?U.value:[U.value];for(let L=0,D=et.length;L<D;L++){const B=et[L],q=g(B),Q=T%E;Q!==0&&E-Q<q.boundary&&(T+=E-Q),U.__data=new Float32Array(q.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=T,T+=q.storage}}}const S=T%E;return S>0&&(T+=E-S),y.__size=T,y.__cache={},this}function g(y){const _={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function p(y){const _=y.target;_.removeEventListener("dispose",p);const T=a.indexOf(_.__bindingPointIndex);a.splice(T,1),n.deleteBuffer(i[_.id]),delete i[_.id],delete o[_.id]}function v(){for(const y in i)n.deleteBuffer(i[y]);a=[],i={},o={}}return{bind:l,update:u,dispose:v}}class qM{constructor(t={}){const{canvas:e=LH(),context:r=null,depth:i=!0,stencil:o=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=t;this.isWebGLRenderer=!0;let f;r!==null?f=r.getContextAttributes().alpha:f=a;const d=new Uint32Array(4),m=new Int32Array(4);let g=null,p=null;const v=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=sn,this._useLegacyLights=!1,this.toneMapping=mo,this.toneMappingExposure=1;const _=this;let T=!1,E=0,S=0,x=null,O=-1,b=null;const A=new cn,N=new cn;let U=null;const et=new fe(0);let L=0,D=e.width,B=e.height,q=1,Q=null,rt=null;const $=new cn(0,0,D,B),k=new cn(0,0,D,B);let pt=!1;const J=new HM;let it=!1,vt=!1,gt=null;const W=new hn,ft=new de,at=new ut,mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _t(){return x===null?q:1}let X=r;function R(I,nt){for(let lt=0;lt<I.length;lt++){const ht=I[lt],st=e.getContext(ht,nt);if(st!==null)return st}return null}try{const I={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${ny}`),e.addEventListener("webglcontextlost",Mt,!1),e.addEventListener("webglcontextrestored",V,!1),e.addEventListener("webglcontextcreationerror",Pt,!1),X===null){const nt=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&nt.shift(),X=R(nt,I),X===null)throw R(nt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&X instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let C,z,Y,K,ct,M,w,G,j,tt,P,F,H,Z,dt,Tt,ot,wt,yt,At,bt,Rt,Nt,Kt;function ye(){C=new K8(X),z=new V8(X,C,t),C.init(z),Rt=new NV(X,C,z),Y=new DV(X,C,z),K=new Q8(X),ct=new yV,M=new LV(X,C,Y,ct,z,Rt,K),w=new X8(_),G=new q8(_),j=new a5(X,z),Nt=new H8(X,C,j,z),tt=new Z8(X,j,K,Nt),P=new r6(X,tt,j,K),yt=new n6(X,z,M),Tt=new W8(ct),F=new _V(_,w,G,C,z,Nt,Tt),H=new GV(_,ct),Z=new bV,dt=new MV(C,z),wt=new k8(_,w,G,Y,P,f,l),ot=new OV(_,P,z),Kt=new kV(X,K,z,Y),At=new z8(X,C,K,z),bt=new J8(X,C,K,z),K.programs=F.programs,_.capabilities=z,_.extensions=C,_.properties=ct,_.renderLists=Z,_.shadowMap=ot,_.state=Y,_.info=K}ye();const Qt=new BV(_,X);this.xr=Qt,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const I=C.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){const I=C.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(I){I!==void 0&&(q=I,this.setSize(D,B,!1))},this.getSize=function(I){return I.set(D,B)},this.setSize=function(I,nt,lt=!0){if(Qt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}D=I,B=nt,e.width=Math.floor(I*q),e.height=Math.floor(nt*q),lt===!0&&(e.style.width=I+"px",e.style.height=nt+"px"),this.setViewport(0,0,I,nt)},this.getDrawingBufferSize=function(I){return I.set(D*q,B*q).floor()},this.setDrawingBufferSize=function(I,nt,lt){D=I,B=nt,q=lt,e.width=Math.floor(I*lt),e.height=Math.floor(nt*lt),this.setViewport(0,0,I,nt)},this.getCurrentViewport=function(I){return I.copy(A)},this.getViewport=function(I){return I.copy($)},this.setViewport=function(I,nt,lt,ht){I.isVector4?$.set(I.x,I.y,I.z,I.w):$.set(I,nt,lt,ht),Y.viewport(A.copy($).multiplyScalar(q).floor())},this.getScissor=function(I){return I.copy(k)},this.setScissor=function(I,nt,lt,ht){I.isVector4?k.set(I.x,I.y,I.z,I.w):k.set(I,nt,lt,ht),Y.scissor(N.copy(k).multiplyScalar(q).floor())},this.getScissorTest=function(){return pt},this.setScissorTest=function(I){Y.setScissorTest(pt=I)},this.setOpaqueSort=function(I){Q=I},this.setTransparentSort=function(I){rt=I},this.getClearColor=function(I){return I.copy(wt.getClearColor())},this.setClearColor=function(){wt.setClearColor.apply(wt,arguments)},this.getClearAlpha=function(){return wt.getClearAlpha()},this.setClearAlpha=function(){wt.setClearAlpha.apply(wt,arguments)},this.clear=function(I=!0,nt=!0,lt=!0){let ht=0;if(I){let st=!1;if(x!==null){const Dt=x.texture.format;st=Dt===AM||Dt===wM||Dt===TM}if(st){const Dt=x.texture.type,Ut=Dt===vo||Dt===so||Dt===ry||Dt===fa||Dt===SM||Dt===EM,Ht=wt.getClearColor(),Vt=wt.getClearAlpha(),Jt=Ht.r,$t=Ht.g,jt=Ht.b;Ut?(d[0]=Jt,d[1]=$t,d[2]=jt,d[3]=Vt,X.clearBufferuiv(X.COLOR,0,d)):(m[0]=Jt,m[1]=$t,m[2]=jt,m[3]=Vt,X.clearBufferiv(X.COLOR,0,m))}else ht|=X.COLOR_BUFFER_BIT}nt&&(ht|=X.DEPTH_BUFFER_BIT),lt&&(ht|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(ht)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Mt,!1),e.removeEventListener("webglcontextrestored",V,!1),e.removeEventListener("webglcontextcreationerror",Pt,!1),Z.dispose(),dt.dispose(),ct.dispose(),w.dispose(),G.dispose(),P.dispose(),Nt.dispose(),Kt.dispose(),F.dispose(),Qt.dispose(),Qt.removeEventListener("sessionstart",bn),Qt.removeEventListener("sessionend",ge),gt&&(gt.dispose(),gt=null),Sn.stop()};function Mt(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function V(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const I=K.autoReset,nt=ot.enabled,lt=ot.autoUpdate,ht=ot.needsUpdate,st=ot.type;ye(),K.autoReset=I,ot.enabled=nt,ot.autoUpdate=lt,ot.needsUpdate=ht,ot.type=st}function Pt(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function It(I){const nt=I.target;nt.removeEventListener("dispose",It),zt(nt)}function zt(I){kt(I),ct.remove(I)}function kt(I){const nt=ct.get(I).programs;nt!==void 0&&(nt.forEach(function(lt){F.releaseProgram(lt)}),I.isShaderMaterial&&F.releaseShaderCache(I))}this.renderBufferDirect=function(I,nt,lt,ht,st,Dt){nt===null&&(nt=mt);const Ut=st.isMesh&&st.matrixWorld.determinant()<0,Ht=UC(I,nt,lt,ht,st);Y.setMaterial(ht,Ut);let Vt=lt.index,Jt=1;if(ht.wireframe===!0){if(Vt=tt.getWireframeAttribute(lt),Vt===void 0)return;Jt=2}const $t=lt.drawRange,jt=lt.attributes.position;let Fe=$t.start*Jt,Fn=($t.start+$t.count)*Jt;Dt!==null&&(Fe=Math.max(Fe,Dt.start*Jt),Fn=Math.min(Fn,(Dt.start+Dt.count)*Jt)),Vt!==null?(Fe=Math.max(Fe,0),Fn=Math.min(Fn,Vt.count)):jt!=null&&(Fe=Math.max(Fe,0),Fn=Math.min(Fn,jt.count));const qe=Fn-Fe;if(qe<0||qe===1/0)return;Nt.setup(st,ht,Ht,lt,Vt);let ri,Ce=At;if(Vt!==null&&(ri=j.get(Vt),Ce=bt,Ce.setIndex(ri)),st.isMesh)ht.wireframe===!0?(Y.setLineWidth(ht.wireframeLinewidth*_t()),Ce.setMode(X.LINES)):Ce.setMode(X.TRIANGLES);else if(st.isLine){let te=ht.linewidth;te===void 0&&(te=1),Y.setLineWidth(te*_t()),st.isLineSegments?Ce.setMode(X.LINES):st.isLineLoop?Ce.setMode(X.LINE_LOOP):Ce.setMode(X.LINE_STRIP)}else st.isPoints?Ce.setMode(X.POINTS):st.isSprite&&Ce.setMode(X.TRIANGLES);if(st.isBatchedMesh)Ce.renderMultiDraw(st._multiDrawStarts,st._multiDrawCounts,st._multiDrawCount);else if(st.isInstancedMesh)Ce.renderInstances(Fe,qe,st.count);else if(lt.isInstancedBufferGeometry){const te=lt._maxInstanceCount!==void 0?lt._maxInstanceCount:1/0,tp=Math.min(lt.instanceCount,te);Ce.renderInstances(Fe,qe,tp)}else Ce.render(Fe,qe)};function me(I,nt,lt){I.transparent===!0&&I.side===wi&&I.forceSinglePass===!1?(I.side=Dn,I.needsUpdate=!0,sc(I,nt,lt),I.side=xo,I.needsUpdate=!0,sc(I,nt,lt),I.side=wi):sc(I,nt,lt)}this.compile=function(I,nt,lt=null){lt===null&&(lt=I),p=dt.get(lt),p.init(),y.push(p),lt.traverseVisible(function(st){st.isLight&&st.layers.test(nt.layers)&&(p.pushLight(st),st.castShadow&&p.pushShadow(st))}),I!==lt&&I.traverseVisible(function(st){st.isLight&&st.layers.test(nt.layers)&&(p.pushLight(st),st.castShadow&&p.pushShadow(st))}),p.setupLights(_._useLegacyLights);const ht=new Set;return I.traverse(function(st){const Dt=st.material;if(Dt)if(Array.isArray(Dt))for(let Ut=0;Ut<Dt.length;Ut++){const Ht=Dt[Ut];me(Ht,lt,st),ht.add(Ht)}else me(Dt,lt,st),ht.add(Dt)}),y.pop(),p=null,ht},this.compileAsync=function(I,nt,lt=null){const ht=this.compile(I,nt,lt);return new Promise(st=>{function Dt(){if(ht.forEach(function(Ut){ct.get(Ut).currentProgram.isReady()&&ht.delete(Ut)}),ht.size===0){st(I);return}setTimeout(Dt,10)}C.get("KHR_parallel_shader_compile")!==null?Dt():setTimeout(Dt,10)})};let ve=null;function Ye(I){ve&&ve(I)}function bn(){Sn.stop()}function ge(){Sn.start()}const Sn=new zM;Sn.setAnimationLoop(Ye),typeof self<"u"&&Sn.setContext(self),this.setAnimationLoop=function(I){ve=I,Qt.setAnimationLoop(I),I===null?Sn.stop():Sn.start()},Qt.addEventListener("sessionstart",bn),Qt.addEventListener("sessionend",ge),this.render=function(I,nt){if(nt!==void 0&&nt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;I.matrixWorldAutoUpdate===!0&&I.updateMatrixWorld(),nt.parent===null&&nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),Qt.enabled===!0&&Qt.isPresenting===!0&&(Qt.cameraAutoUpdate===!0&&Qt.updateCamera(nt),nt=Qt.getCamera()),I.isScene===!0&&I.onBeforeRender(_,I,nt,x),p=dt.get(I,y.length),p.init(),y.push(p),W.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),J.setFromProjectionMatrix(W),vt=this.localClippingEnabled,it=Tt.init(this.clippingPlanes,vt),g=Z.get(I,v.length),g.init(),v.push(g),Lr(I,nt,0,_.sortObjects),g.finish(),_.sortObjects===!0&&g.sort(Q,rt),this.info.render.frame++,it===!0&&Tt.beginShadows();const lt=p.state.shadowsArray;if(ot.render(lt,I,nt),it===!0&&Tt.endShadows(),this.info.autoReset===!0&&this.info.reset(),wt.render(g,I),p.setupLights(_._useLegacyLights),nt.isArrayCamera){const ht=nt.cameras;for(let st=0,Dt=ht.length;st<Dt;st++){const Ut=ht[st];Py(g,I,Ut,Ut.viewport)}}else Py(g,I,nt);x!==null&&(M.updateMultisampleRenderTarget(x),M.updateRenderTargetMipmap(x)),I.isScene===!0&&I.onAfterRender(_,I,nt),Nt.resetDefaultState(),O=-1,b=null,y.pop(),y.length>0?p=y[y.length-1]:p=null,v.pop(),v.length>0?g=v[v.length-1]:g=null};function Lr(I,nt,lt,ht){if(I.visible===!1)return;if(I.layers.test(nt.layers)){if(I.isGroup)lt=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(nt);else if(I.isLight)p.pushLight(I),I.castShadow&&p.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||J.intersectsSprite(I)){ht&&at.setFromMatrixPosition(I.matrixWorld).applyMatrix4(W);const Ut=P.update(I),Ht=I.material;Ht.visible&&g.push(I,Ut,Ht,lt,at.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(!I.frustumCulled||J.intersectsObject(I))){const Ut=P.update(I),Ht=I.material;if(ht&&(I.boundingSphere!==void 0?(I.boundingSphere===null&&I.computeBoundingSphere(),at.copy(I.boundingSphere.center)):(Ut.boundingSphere===null&&Ut.computeBoundingSphere(),at.copy(Ut.boundingSphere.center)),at.applyMatrix4(I.matrixWorld).applyMatrix4(W)),Array.isArray(Ht)){const Vt=Ut.groups;for(let Jt=0,$t=Vt.length;Jt<$t;Jt++){const jt=Vt[Jt],Fe=Ht[jt.materialIndex];Fe&&Fe.visible&&g.push(I,Ut,Fe,lt,at.z,jt)}}else Ht.visible&&g.push(I,Ut,Ht,lt,at.z,null)}}const Dt=I.children;for(let Ut=0,Ht=Dt.length;Ut<Ht;Ut++)Lr(Dt[Ut],nt,lt,ht)}function Py(I,nt,lt,ht){const st=I.opaque,Dt=I.transmissive,Ut=I.transparent;p.setupLightsView(lt),it===!0&&Tt.setGlobalState(_.clippingPlanes,lt),Dt.length>0&&FC(st,Dt,nt,lt),ht&&Y.viewport(A.copy(ht)),st.length>0&&ac(st,nt,lt),Dt.length>0&&ac(Dt,nt,lt),Ut.length>0&&ac(Ut,nt,lt),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function FC(I,nt,lt,ht){if((lt.isScene===!0?lt.overrideMaterial:null)!==null)return;const Dt=z.isWebGL2;gt===null&&(gt=new Aa(1,1,{generateMipmaps:!0,type:C.has("EXT_color_buffer_half_float")?Mu:vo,minFilter:Au,samples:Dt?4:0})),_.getDrawingBufferSize(ft),Dt?gt.setSize(ft.x,ft.y):gt.setSize(Dg(ft.x),Dg(ft.y));const Ut=_.getRenderTarget();_.setRenderTarget(gt),_.getClearColor(et),L=_.getClearAlpha(),L<1&&_.setClearColor(16777215,.5),_.clear();const Ht=_.toneMapping;_.toneMapping=mo,ac(I,lt,ht),M.updateMultisampleRenderTarget(gt),M.updateRenderTargetMipmap(gt);let Vt=!1;for(let Jt=0,$t=nt.length;Jt<$t;Jt++){const jt=nt[Jt],Fe=jt.object,Fn=jt.geometry,qe=jt.material,ri=jt.group;if(qe.side===wi&&Fe.layers.test(ht.layers)){const Ce=qe.side;qe.side=Dn,qe.needsUpdate=!0,Iy(Fe,lt,ht,Fn,qe,ri),qe.side=Ce,qe.needsUpdate=!0,Vt=!0}}Vt===!0&&(M.updateMultisampleRenderTarget(gt),M.updateRenderTargetMipmap(gt)),_.setRenderTarget(Ut),_.setClearColor(et,L),_.toneMapping=Ht}function ac(I,nt,lt){const ht=nt.isScene===!0?nt.overrideMaterial:null;for(let st=0,Dt=I.length;st<Dt;st++){const Ut=I[st],Ht=Ut.object,Vt=Ut.geometry,Jt=ht===null?Ut.material:ht,$t=Ut.group;Ht.layers.test(lt.layers)&&Iy(Ht,nt,lt,Vt,Jt,$t)}}function Iy(I,nt,lt,ht,st,Dt){I.onBeforeRender(_,nt,lt,ht,st,Dt),I.modelViewMatrix.multiplyMatrices(lt.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),st.onBeforeRender(_,nt,lt,ht,I,Dt),st.transparent===!0&&st.side===wi&&st.forceSinglePass===!1?(st.side=Dn,st.needsUpdate=!0,_.renderBufferDirect(lt,nt,ht,st,I,Dt),st.side=xo,st.needsUpdate=!0,_.renderBufferDirect(lt,nt,ht,st,I,Dt),st.side=wi):_.renderBufferDirect(lt,nt,ht,st,I,Dt),I.onAfterRender(_,nt,lt,ht,st,Dt)}function sc(I,nt,lt){nt.isScene!==!0&&(nt=mt);const ht=ct.get(I),st=p.state.lights,Dt=p.state.shadowsArray,Ut=st.state.version,Ht=F.getParameters(I,st.state,Dt,nt,lt),Vt=F.getProgramCacheKey(Ht);let Jt=ht.programs;ht.environment=I.isMeshStandardMaterial?nt.environment:null,ht.fog=nt.fog,ht.envMap=(I.isMeshStandardMaterial?G:w).get(I.envMap||ht.environment),Jt===void 0&&(I.addEventListener("dispose",It),Jt=new Map,ht.programs=Jt);let $t=Jt.get(Vt);if($t!==void 0){if(ht.currentProgram===$t&&ht.lightsStateVersion===Ut)return Dy(I,Ht),$t}else Ht.uniforms=F.getUniforms(I),I.onBuild(lt,Ht,_),I.onBeforeCompile(Ht,_),$t=F.acquireProgram(Ht,Vt),Jt.set(Vt,$t),ht.uniforms=Ht.uniforms;const jt=ht.uniforms;return(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(jt.clippingPlanes=Tt.uniform),Dy(I,Ht),ht.needsLights=GC(I),ht.lightsStateVersion=Ut,ht.needsLights&&(jt.ambientLightColor.value=st.state.ambient,jt.lightProbe.value=st.state.probe,jt.directionalLights.value=st.state.directional,jt.directionalLightShadows.value=st.state.directionalShadow,jt.spotLights.value=st.state.spot,jt.spotLightShadows.value=st.state.spotShadow,jt.rectAreaLights.value=st.state.rectArea,jt.ltc_1.value=st.state.rectAreaLTC1,jt.ltc_2.value=st.state.rectAreaLTC2,jt.pointLights.value=st.state.point,jt.pointLightShadows.value=st.state.pointShadow,jt.hemisphereLights.value=st.state.hemi,jt.directionalShadowMap.value=st.state.directionalShadowMap,jt.directionalShadowMatrix.value=st.state.directionalShadowMatrix,jt.spotShadowMap.value=st.state.spotShadowMap,jt.spotLightMatrix.value=st.state.spotLightMatrix,jt.spotLightMap.value=st.state.spotLightMap,jt.pointShadowMap.value=st.state.pointShadowMap,jt.pointShadowMatrix.value=st.state.pointShadowMatrix),ht.currentProgram=$t,ht.uniformsList=null,$t}function Oy(I){if(I.uniformsList===null){const nt=I.currentProgram.getUniforms();I.uniformsList=$h.seqWithValue(nt.seq,I.uniforms)}return I.uniformsList}function Dy(I,nt){const lt=ct.get(I);lt.outputColorSpace=nt.outputColorSpace,lt.batching=nt.batching,lt.instancing=nt.instancing,lt.instancingColor=nt.instancingColor,lt.skinning=nt.skinning,lt.morphTargets=nt.morphTargets,lt.morphNormals=nt.morphNormals,lt.morphColors=nt.morphColors,lt.morphTargetsCount=nt.morphTargetsCount,lt.numClippingPlanes=nt.numClippingPlanes,lt.numIntersection=nt.numClipIntersection,lt.vertexAlphas=nt.vertexAlphas,lt.vertexTangents=nt.vertexTangents,lt.toneMapping=nt.toneMapping}function UC(I,nt,lt,ht,st){nt.isScene!==!0&&(nt=mt),M.resetTextureUnits();const Dt=nt.fog,Ut=ht.isMeshStandardMaterial?nt.environment:null,Ht=x===null?_.outputColorSpace:x.isXRRenderTarget===!0?x.texture.colorSpace:Li,Vt=(ht.isMeshStandardMaterial?G:w).get(ht.envMap||Ut),Jt=ht.vertexColors===!0&&!!lt.attributes.color&&lt.attributes.color.itemSize===4,$t=!!lt.attributes.tangent&&(!!ht.normalMap||ht.anisotropy>0),jt=!!lt.morphAttributes.position,Fe=!!lt.morphAttributes.normal,Fn=!!lt.morphAttributes.color;let qe=mo;ht.toneMapped&&(x===null||x.isXRRenderTarget===!0)&&(qe=_.toneMapping);const ri=lt.morphAttributes.position||lt.morphAttributes.normal||lt.morphAttributes.color,Ce=ri!==void 0?ri.length:0,te=ct.get(ht),tp=p.state.lights;if(it===!0&&(vt===!0||I!==b)){const Zn=I===b&&ht.id===O;Tt.setState(ht,I,Zn)}let De=!1;ht.version===te.__version?(te.needsLights&&te.lightsStateVersion!==tp.state.version||te.outputColorSpace!==Ht||st.isBatchedMesh&&te.batching===!1||!st.isBatchedMesh&&te.batching===!0||st.isInstancedMesh&&te.instancing===!1||!st.isInstancedMesh&&te.instancing===!0||st.isSkinnedMesh&&te.skinning===!1||!st.isSkinnedMesh&&te.skinning===!0||st.isInstancedMesh&&te.instancingColor===!0&&st.instanceColor===null||st.isInstancedMesh&&te.instancingColor===!1&&st.instanceColor!==null||te.envMap!==Vt||ht.fog===!0&&te.fog!==Dt||te.numClippingPlanes!==void 0&&(te.numClippingPlanes!==Tt.numPlanes||te.numIntersection!==Tt.numIntersection)||te.vertexAlphas!==Jt||te.vertexTangents!==$t||te.morphTargets!==jt||te.morphNormals!==Fe||te.morphColors!==Fn||te.toneMapping!==qe||z.isWebGL2===!0&&te.morphTargetsCount!==Ce)&&(De=!0):(De=!0,te.__version=ht.version);let To=te.currentProgram;De===!0&&(To=sc(ht,nt,st));let Ly=!1,cl=!1,ep=!1;const pn=To.getUniforms(),wo=te.uniforms;if(Y.useProgram(To.program)&&(Ly=!0,cl=!0,ep=!0),ht.id!==O&&(O=ht.id,cl=!0),Ly||b!==I){pn.setValue(X,"projectionMatrix",I.projectionMatrix),pn.setValue(X,"viewMatrix",I.matrixWorldInverse);const Zn=pn.map.cameraPosition;Zn!==void 0&&Zn.setValue(X,at.setFromMatrixPosition(I.matrixWorld)),z.logarithmicDepthBuffer&&pn.setValue(X,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),(ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshLambertMaterial||ht.isMeshBasicMaterial||ht.isMeshStandardMaterial||ht.isShaderMaterial)&&pn.setValue(X,"isOrthographic",I.isOrthographicCamera===!0),b!==I&&(b=I,cl=!0,ep=!0)}if(st.isSkinnedMesh){pn.setOptional(X,st,"bindMatrix"),pn.setOptional(X,st,"bindMatrixInverse");const Zn=st.skeleton;Zn&&(z.floatVertexTextures?(Zn.boneTexture===null&&Zn.computeBoneTexture(),pn.setValue(X,"boneTexture",Zn.boneTexture,M)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}st.isBatchedMesh&&(pn.setOptional(X,st,"batchingTexture"),pn.setValue(X,"batchingTexture",st._matricesTexture,M));const np=lt.morphAttributes;if((np.position!==void 0||np.normal!==void 0||np.color!==void 0&&z.isWebGL2===!0)&&yt.update(st,lt,To),(cl||te.receiveShadow!==st.receiveShadow)&&(te.receiveShadow=st.receiveShadow,pn.setValue(X,"receiveShadow",st.receiveShadow)),ht.isMeshGouraudMaterial&&ht.envMap!==null&&(wo.envMap.value=Vt,wo.flipEnvMap.value=Vt.isCubeTexture&&Vt.isRenderTargetTexture===!1?-1:1),cl&&(pn.setValue(X,"toneMappingExposure",_.toneMappingExposure),te.needsLights&&BC(wo,ep),Dt&&ht.fog===!0&&H.refreshFogUniforms(wo,Dt),H.refreshMaterialUniforms(wo,ht,q,B,gt),$h.upload(X,Oy(te),wo,M)),ht.isShaderMaterial&&ht.uniformsNeedUpdate===!0&&($h.upload(X,Oy(te),wo,M),ht.uniformsNeedUpdate=!1),ht.isSpriteMaterial&&pn.setValue(X,"center",st.center),pn.setValue(X,"modelViewMatrix",st.modelViewMatrix),pn.setValue(X,"normalMatrix",st.normalMatrix),pn.setValue(X,"modelMatrix",st.matrixWorld),ht.isShaderMaterial||ht.isRawShaderMaterial){const Zn=ht.uniformsGroups;for(let rp=0,kC=Zn.length;rp<kC;rp++)if(z.isWebGL2){const Ny=Zn[rp];Kt.update(Ny,To),Kt.bind(Ny,To)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return To}function BC(I,nt){I.ambientLightColor.needsUpdate=nt,I.lightProbe.needsUpdate=nt,I.directionalLights.needsUpdate=nt,I.directionalLightShadows.needsUpdate=nt,I.pointLights.needsUpdate=nt,I.pointLightShadows.needsUpdate=nt,I.spotLights.needsUpdate=nt,I.spotLightShadows.needsUpdate=nt,I.rectAreaLights.needsUpdate=nt,I.hemisphereLights.needsUpdate=nt}function GC(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(I,nt,lt){ct.get(I.texture).__webglTexture=nt,ct.get(I.depthTexture).__webglTexture=lt;const ht=ct.get(I);ht.__hasExternalTextures=!0,ht.__hasExternalTextures&&(ht.__autoAllocateDepthBuffer=lt===void 0,ht.__autoAllocateDepthBuffer||C.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ht.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(I,nt){const lt=ct.get(I);lt.__webglFramebuffer=nt,lt.__useDefaultFramebuffer=nt===void 0},this.setRenderTarget=function(I,nt=0,lt=0){x=I,E=nt,S=lt;let ht=!0,st=null,Dt=!1,Ut=!1;if(I){const Vt=ct.get(I);Vt.__useDefaultFramebuffer!==void 0?(Y.bindFramebuffer(X.FRAMEBUFFER,null),ht=!1):Vt.__webglFramebuffer===void 0?M.setupRenderTarget(I):Vt.__hasExternalTextures&&M.rebindTextures(I,ct.get(I.texture).__webglTexture,ct.get(I.depthTexture).__webglTexture);const Jt=I.texture;(Jt.isData3DTexture||Jt.isDataArrayTexture||Jt.isCompressedArrayTexture)&&(Ut=!0);const $t=ct.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(Array.isArray($t[nt])?st=$t[nt][lt]:st=$t[nt],Dt=!0):z.isWebGL2&&I.samples>0&&M.useMultisampledRTT(I)===!1?st=ct.get(I).__webglMultisampledFramebuffer:Array.isArray($t)?st=$t[lt]:st=$t,A.copy(I.viewport),N.copy(I.scissor),U=I.scissorTest}else A.copy($).multiplyScalar(q).floor(),N.copy(k).multiplyScalar(q).floor(),U=pt;if(Y.bindFramebuffer(X.FRAMEBUFFER,st)&&z.drawBuffers&&ht&&Y.drawBuffers(I,st),Y.viewport(A),Y.scissor(N),Y.setScissorTest(U),Dt){const Vt=ct.get(I.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+nt,Vt.__webglTexture,lt)}else if(Ut){const Vt=ct.get(I.texture),Jt=nt||0;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,Vt.__webglTexture,lt||0,Jt)}O=-1},this.readRenderTargetPixels=function(I,nt,lt,ht,st,Dt,Ut){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ht=ct.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&Ut!==void 0&&(Ht=Ht[Ut]),Ht){Y.bindFramebuffer(X.FRAMEBUFFER,Ht);try{const Vt=I.texture,Jt=Vt.format,$t=Vt.type;if(Jt!==Tr&&Rt.convert(Jt)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jt=$t===Mu&&(C.has("EXT_color_buffer_half_float")||z.isWebGL2&&C.has("EXT_color_buffer_float"));if($t!==vo&&Rt.convert($t)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_TYPE)&&!($t===lo&&(z.isWebGL2||C.has("OES_texture_float")||C.has("WEBGL_color_buffer_float")))&&!jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}nt>=0&&nt<=I.width-ht&&lt>=0&&lt<=I.height-st&&X.readPixels(nt,lt,ht,st,Rt.convert(Jt),Rt.convert($t),Dt)}finally{const Vt=x!==null?ct.get(x).__webglFramebuffer:null;Y.bindFramebuffer(X.FRAMEBUFFER,Vt)}}},this.copyFramebufferToTexture=function(I,nt,lt=0){const ht=Math.pow(2,-lt),st=Math.floor(nt.image.width*ht),Dt=Math.floor(nt.image.height*ht);M.setTexture2D(nt,0),X.copyTexSubImage2D(X.TEXTURE_2D,lt,0,0,I.x,I.y,st,Dt),Y.unbindTexture()},this.copyTextureToTexture=function(I,nt,lt,ht=0){const st=nt.image.width,Dt=nt.image.height,Ut=Rt.convert(lt.format),Ht=Rt.convert(lt.type);M.setTexture2D(lt,0),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,lt.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,lt.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,lt.unpackAlignment),nt.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,ht,I.x,I.y,st,Dt,Ut,Ht,nt.image.data):nt.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,ht,I.x,I.y,nt.mipmaps[0].width,nt.mipmaps[0].height,Ut,nt.mipmaps[0].data):X.texSubImage2D(X.TEXTURE_2D,ht,I.x,I.y,Ut,Ht,nt.image),ht===0&&lt.generateMipmaps&&X.generateMipmap(X.TEXTURE_2D),Y.unbindTexture()},this.copyTextureToTexture3D=function(I,nt,lt,ht,st=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Dt=I.max.x-I.min.x+1,Ut=I.max.y-I.min.y+1,Ht=I.max.z-I.min.z+1,Vt=Rt.convert(ht.format),Jt=Rt.convert(ht.type);let $t;if(ht.isData3DTexture)M.setTexture3D(ht,0),$t=X.TEXTURE_3D;else if(ht.isDataArrayTexture||ht.isCompressedArrayTexture)M.setTexture2DArray(ht,0),$t=X.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,ht.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ht.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,ht.unpackAlignment);const jt=X.getParameter(X.UNPACK_ROW_LENGTH),Fe=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Fn=X.getParameter(X.UNPACK_SKIP_PIXELS),qe=X.getParameter(X.UNPACK_SKIP_ROWS),ri=X.getParameter(X.UNPACK_SKIP_IMAGES),Ce=lt.isCompressedTexture?lt.mipmaps[st]:lt.image;X.pixelStorei(X.UNPACK_ROW_LENGTH,Ce.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Ce.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,I.min.x),X.pixelStorei(X.UNPACK_SKIP_ROWS,I.min.y),X.pixelStorei(X.UNPACK_SKIP_IMAGES,I.min.z),lt.isDataTexture||lt.isData3DTexture?X.texSubImage3D($t,st,nt.x,nt.y,nt.z,Dt,Ut,Ht,Vt,Jt,Ce.data):lt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D($t,st,nt.x,nt.y,nt.z,Dt,Ut,Ht,Vt,Ce.data)):X.texSubImage3D($t,st,nt.x,nt.y,nt.z,Dt,Ut,Ht,Vt,Jt,Ce),X.pixelStorei(X.UNPACK_ROW_LENGTH,jt),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Fe),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Fn),X.pixelStorei(X.UNPACK_SKIP_ROWS,qe),X.pixelStorei(X.UNPACK_SKIP_IMAGES,ri),st===0&&ht.generateMipmaps&&X.generateMipmap($t),Y.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?M.setTextureCube(I,0):I.isData3DTexture?M.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?M.setTexture2DArray(I,0):M.setTexture2D(I,0),Y.unbindTexture()},this.resetState=function(){E=0,S=0,x=null,Y.reset(),Nt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ai}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===iy?"display-p3":"srgb",e.unpackColorSpace=he.workingColorSpace===kd?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===sn?pa:CM}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===pa?sn:Li}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class HV extends qM{}HV.prototype.isWebGL1Renderer=!0;let zV=class extends qn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ny}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ny);class VV extends zV{constructor(){super()}}class WV extends ir{constructor(t){const{fov:e,aspect:r,near:i,far:o}=t;super(e,r,i,o)}}class XV extends qM{constructor(){super()}}function $V(){const n={scene:null,camera:null,renderer:null},t=o=>{console.log("params",o),n.scene=new VV,n.camera=new WV(o),n.renderer=new XV,n.renderer.setSize(o.width,o.height)},e=()=>{var l;const o=new nl(1,1,1),a=new ay({color:65280}),s=new Mi(o,a);(l=n.scene)==null||l.add(s)},r=()=>{var o;requestAnimationFrame(r),(o=n.renderer)==null||o.render(n.scene,n.camera)};return{sceneState:n,actions:{initScene:t,renderBox:e,animate:r}}}const jV="_container_17rnx_1",YV={container:jV},qV=Ae({name:"WebglContainer",setup(){const n=Be(),{sceneState:t,actions:{initScene:e,renderBox:r,animate:i}}=$V();return Ui(()=>{e({fov:75,width:n.value.clientWidth,height:n.value.clientHeight,aspect:n.value.clientWidth/n.value.clientHeight,near:.1,far:1e3}),t.renderer&&n.value.appendChild(t.renderer.domElement),r(),t.camera&&(t.camera.position.z=5),i()}),{webglContainer:n}},render(){return Et("div",{ref:"webglContainer",class:YV.container},null)}}),rE=Ae({name:"Webgl",setup(){return{}},render(){return Et(qV,null,null)}}),KV=Ae({name:"VideoUpload",setup(){const n=Be(""),t=Be(),e=Be(),r=s=>{const l=URL.createObjectURL(s.target.files[0]);n.value=l},i=()=>{e.value.getContext("2d").drawImage(t.value,0,0,400,300)},o=()=>{t.value.paused||(i(),setTimeout(o,40))};return Ui(()=>{t.value.addEventListener("play",o)}),{videoSrc:n,videoRef:t,canvasRef:e,handleChange:r}},render(){return Et("div",{class:"w-full"},[Et("input",{type:"file",onChange:this.handleChange},null),Et("video",{ref:"videoRef",src:this.videoSrc,type:"video/mp4",controls:!0},null),Et("canvas",{ref:"canvasRef"},null)])}}),ZV=Ae({name:"VideoUpload",setup(){return{}},render(){return Et(KV,null,null)}});var ar="named",KM="name",uy="unmanaged",ZM="optional",Wd="inject",Cu="multi_inject",JM="inversify:tagged",QM="inversify:tagged_props",Ng="inversify:paramtypes",JV="design:paramtypes",iE="post_construct",Fg="pre_destroy";function QV(){return[Wd,Cu,KM,uy,ar,ZM]}var oE=QV(),Ue={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Se={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Ju={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},tW=0;function Qu(){return tW++}var eW=function(){function n(t,e){this.id=Qu(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Se.Invalid,this.constraint=function(r){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return n.prototype.clone=function(){var t=new n(this.serviceIdentifier,this.scope);return t.activated=t.scope===Ue.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},n}(),nW="Cannot apply @injectable decorator multiple times.",t1="Metadata key was used more than once in a parameter:",Al="NULL argument",aE="Key Not Found",rW="Ambiguous match found for serviceIdentifier:",iW="Could not unbind serviceIdentifier:",oW="No matching bindings found for serviceIdentifier:",e1="Missing required @injectable annotation in:",aW="Missing required @inject or @multiInject annotation in:",sW=function(n){return"@inject called with undefined this could mean that the class "+n+" has a circular dependency problem. You can use a LazyServiceIdentifier to  overcome this limitation."},lW="Circular dependency found:",uW="Invalid binding type:",cW="No snapshot available to restore.",hW="Invalid return type in middleware. Middleware must return!",fW="Value provided to function binding must be a function!",dW=function(n){return"You are attempting to construct '"+n+`' in a synchronous way
 but it has asynchronous dependencies.`},pW="The toSelf function can only be applied when a constructor is used as service identifier",n1="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",mW=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return"The number of constructor arguments in the derived class "+(n[0]+" must be >= than the number of constructor arguments of its base class.")},vW="Invalid Container constructor argument. Container options must be an object.",gW='Invalid Container option. Default scope must be a string ("singleton" or "transient").',_W="Invalid Container option. Auto bind injectable must be a boolean",yW="Invalid Container option. Skip base check must be a boolean",xW="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)",bW=function(n,t){return"@postConstruct error in class "+n+": "+t},SW=function(n,t){return"@preDestroy error in class "+n+": "+t},Ug=function(n,t){return"onDeactivation() error in class "+n+": "+t},EW=function(n,t){return"It looks like there is a circular dependency in one of the '"+n+"' bindings. Please investigate bindings with "+("service identifier '"+t+"'.")},TW="Maximum call stack size exceeded",wW=function(){function n(){}return n.prototype.getConstructorMetadata=function(t){var e=Reflect.getMetadata(Ng,t),r=Reflect.getMetadata(JM,t);return{compilerGeneratedMetadata:e,userGeneratedMetadata:r||{}}},n.prototype.getPropertiesMetadata=function(t){var e=Reflect.getMetadata(QM,t)||[];return e},n}(),jh={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function r1(n){return n instanceof RangeError||n.message===TW}var AW=function(n,t){try{return n()}catch(e){throw r1(e)&&(e=t()),e}};function Ru(n){if(typeof n=="function"){var t=n;return t.name}else{if(typeof n=="symbol")return n.toString();var t=n;return t}}function sE(n,t,e){var r="",i=e(n,t);return i.length!==0&&(r=`
Registered bindings:`,i.forEach(function(o){var a="Object";o.implementationType!==null&&(a=Xd(o.implementationType)),r=r+`
 `+a,o.constraint.metaData&&(r=r+" - "+o.constraint.metaData)})),r}function i1(n,t){return n.parentRequest===null?!1:n.parentRequest.serviceIdentifier===t?!0:i1(n.parentRequest,t)}function MW(n){function t(r,i){i===void 0&&(i=[]);var o=Ru(r.serviceIdentifier);return i.push(o),r.parentRequest!==null?t(r.parentRequest,i):i}var e=t(n);return e.reverse().join(" --> ")}function o1(n){n.childRequests.forEach(function(t){if(i1(t,t.serviceIdentifier)){var e=MW(t);throw new Error(lW+" "+e)}else o1(t)})}function CW(n,t){if(t.isTagged()||t.isNamed()){var e="",r=t.getNamedTag(),i=t.getCustomTags();return r!==null&&(e+=r.toString()+`
`),i!==null&&i.forEach(function(o){e+=o.toString()+`
`})," "+n+`
 `+n+" - "+e}else return" "+n}function Xd(n){if(n.name)return n.name;var t=n.toString(),e=t.match(/^function\s*([^\s(]+)/);return e?e[1]:"Anonymous function: "+t}function RW(n){return n.toString().slice(7,-1)}var a1=function(){function n(t){this.id=Qu(),this.container=t}return n.prototype.addPlan=function(t){this.plan=t},n.prototype.setCurrentRequest=function(t){this.currentRequest=t},n}(),Ca=function(){function n(t,e){this.key=t,this.value=e}return n.prototype.toString=function(){return this.key===ar?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},n}(),PW=function(){function n(t,e){this.parentContext=t,this.rootRequest=e}return n}(),IW=function(){function n(t){this._cb=t}return n.prototype.unwrap=function(){return this._cb()},n}(),OW=function(){function n(t){this.str=t}return n.prototype.startsWith=function(t){return this.str.indexOf(t)===0},n.prototype.endsWith=function(t){var e="",r=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},r)},n.prototype.contains=function(t){return this.str.indexOf(t)!==-1},n.prototype.equals=function(t){return this.str===t},n.prototype.value=function(){return this.str},n}(),$d=function(){function n(t,e,r,i){this.id=Qu(),this.type=t,this.serviceIdentifier=r;var o=typeof e=="symbol"?RW(e):e;this.name=new OW(o||""),this.identifier=e,this.metadata=new Array;var a=null;typeof i=="string"?a=new Ca(ar,i):i instanceof Ca&&(a=i),a!==null&&this.metadata.push(a)}return n.prototype.hasTag=function(t){for(var e=0,r=this.metadata;e<r.length;e++){var i=r[e];if(i.key===t)return!0}return!1},n.prototype.isArray=function(){return this.hasTag(Cu)},n.prototype.matchesArray=function(t){return this.matchesTag(Cu)(t)},n.prototype.isNamed=function(){return this.hasTag(ar)},n.prototype.isTagged=function(){return this.metadata.some(function(t){return oE.every(function(e){return t.key!==e})})},n.prototype.isOptional=function(){return this.matchesTag(ZM)(!0)},n.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===ar})[0]:null},n.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return oE.every(function(e){return t.key!==e})}):null},n.prototype.matchesNamedTag=function(t){return this.matchesTag(ar)(t)},n.prototype.matchesTag=function(t){var e=this;return function(r){for(var i=0,o=e.metadata;i<o.length;i++){var a=o[i];if(a.key===t&&a.value===r)return!0}return!1}},n}(),nd=globalThis&&globalThis.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))};function DW(n,t){var e=Xd(t);return s1(n,e,t,!1)}function s1(n,t,e,r){var i=n.getConstructorMetadata(e),o=i.compilerGeneratedMetadata;if(o===void 0){var a=e1+" "+t+".";throw new Error(a)}var s=i.userGeneratedMetadata,l=Object.keys(s),u=e.length===0&&l.length>0,c=l.length>e.length,h=u||c?l.length:e.length,f=NW(r,t,o,s,h),d=l1(n,e,t),m=nd(nd([],f,!0),d,!0);return m}function LW(n,t,e,r,i){var o=i[n.toString()]||[],a=c1(o),s=a.unmanaged!==!0,l=r[n],u=a.inject||a.multiInject;if(l=u||l,l instanceof IW&&(l=l.unwrap()),s){var c=l===Object,h=l===Function,f=l===void 0,d=c||h||f;if(!t&&d){var m=aW+" argument "+n+" in class "+e+".";throw new Error(m)}var g=new $d(Ju.ConstructorArgument,a.targetName,l);return g.metadata=o,g}return null}function NW(n,t,e,r,i){for(var o=[],a=0;a<i;a++){var s=a,l=LW(s,n,t,e,r);l!==null&&o.push(l)}return o}function FW(n,t,e,r){var i=n||t;if(i===void 0){var o=e1+" for property "+String(e)+" in class "+r+".";throw new Error(o)}return i}function l1(n,t,e){for(var r=n.getPropertiesMetadata(t),i=[],o=Object.getOwnPropertySymbols(r),a=Object.keys(r),s=a.concat(o),l=0,u=s;l<u.length;l++){var c=u[l],h=r[c],f=c1(h),d=f.targetName||c,m=FW(f.inject,f.multiInject,c,e),g=new $d(Ju.ClassProperty,d,m);g.metadata=h,i.push(g)}var p=Object.getPrototypeOf(t.prototype).constructor;if(p!==Object){var v=l1(n,p,e);i=nd(nd([],i,!0),v,!0)}return i}function u1(n,t){var e=Object.getPrototypeOf(t.prototype).constructor;if(e!==Object){var r=Xd(e),i=s1(n,r,e,!0),o=i.map(function(l){return l.metadata.filter(function(u){return u.key===uy})}),a=[].concat.apply([],o).length,s=i.length-a;return s>0?s:u1(n,e)}else return 0}function c1(n){var t={};return n.forEach(function(e){t[e.key.toString()]=e.value}),{inject:t[Wd],multiInject:t[Cu],targetName:t[KM],unmanaged:t[uy]}}var cy=function(){function n(t,e,r,i,o){this.id=Qu(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=r,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=r===null?new Map:null}return n.prototype.addChildRequest=function(t,e,r){var i=new n(t,this.parentContext,this,e,r);return this.childRequests.push(i),i},n}();function rd(n){return n._bindingDictionary}function UW(n,t,e,r,i,o){var a=n?Cu:Wd,s=new Ca(a,e),l=new $d(t,r,e,s);if(i!==void 0){var u=new Ca(i,o);l.metadata.push(u)}return l}function lE(n,t,e,r,i){var o=Pu(e.container,i.serviceIdentifier),a=[];return o.length===jh.NoBindingsAvailable&&e.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&n.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(e.container.bind(i.serviceIdentifier).toSelf(),o=Pu(e.container,i.serviceIdentifier)),t?a=o:a=o.filter(function(s){var l=new cy(s.serviceIdentifier,e,r,s,i);return s.constraint(l)}),BW(i.serviceIdentifier,a,i,e.container),a}function BW(n,t,e,r){switch(t.length){case jh.NoBindingsAvailable:if(e.isOptional())return t;var i=Ru(n),o=oW;throw o+=CW(i,e),o+=sE(r,i,Pu),new Error(o);case jh.OnlyOneBindingAvailable:return t;case jh.MultipleBindingsAvailable:default:if(e.isArray())return t;var i=Ru(n),o=rW+" "+i;throw o+=sE(r,i,Pu),new Error(o)}}function h1(n,t,e,r,i,o){var a,s;if(i===null){a=lE(n,t,r,null,o),s=new cy(e,r,null,a,o);var l=new PW(r,s);r.addPlan(l)}else a=lE(n,t,r,i,o),s=i.addChildRequest(o.serviceIdentifier,a,o);a.forEach(function(u){var c=null;if(o.isArray())c=s.addChildRequest(u.serviceIdentifier,u,o);else{if(u.cache)return;c=s}if(u.type===Se.Instance&&u.implementationType!==null){var h=DW(n,u.implementationType);if(!r.container.options.skipBaseClassChecks){var f=u1(n,u.implementationType);if(h.length<f){var d=mW(Xd(u.implementationType));throw new Error(d)}}h.forEach(function(m){h1(n,!1,m.serviceIdentifier,r,c,m)})}})}function Pu(n,t){var e=[],r=rd(n);return r.hasKey(t)?e=r.get(t):n.parent!==null&&(e=Pu(n.parent,t)),e}function GW(n,t,e,r,i,o,a,s){s===void 0&&(s=!1);var l=new a1(t),u=UW(e,r,i,"",o,a);try{return h1(n,s,i,l,null,u),l}catch(c){throw r1(c)&&o1(l.plan.rootRequest),c}}function kW(n,t,e,r){var i=new $d(Ju.Variable,"",t,new Ca(e,r)),o=new a1(n),a=new cy(t,o,null,[],i);return a}function In(n){var t=typeof n=="object"&&n!==null||typeof n=="function";return t&&typeof n.then=="function"}function f1(n){return In(n)?!0:Array.isArray(n)&&n.some(In)}var HW=globalThis&&globalThis.__awaiter||function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(n,t||[])).next())})},zW=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},VW=function(n,t){return t.scope===Ue.Singleton&&t.activated?t.cache:t.scope===Ue.Request&&n.has(t.id)?n.get(t.id):null},WW=function(n,t,e){t.scope===Ue.Singleton&&$W(t,e),t.scope===Ue.Request&&XW(n,t,e)},XW=function(n,t,e){n.has(t.id)||n.set(t.id,e)},$W=function(n,t){n.cache=t,n.activated=!0,In(t)&&jW(n,t)},jW=function(n,t){return HW(void 0,void 0,void 0,function(){var e,r;return zW(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return e=i.sent(),n.cache=e,[3,3];case 2:throw r=i.sent(),n.cache=null,n.activated=!1,r;case 3:return[2]}})})},ru;(function(n){n.DynamicValue="toDynamicValue",n.Factory="toFactory",n.Provider="toProvider"})(ru||(ru={}));var YW=function(n){var t=null;switch(n.type){case Se.ConstantValue:case Se.Function:t=n.cache;break;case Se.Constructor:case Se.Instance:t=n.implementationType;break;case Se.DynamicValue:t=n.dynamicValue;break;case Se.Provider:t=n.provider;break;case Se.Factory:t=n.factory;break}if(t===null){var e=Ru(n.serviceIdentifier);throw new Error(uW+" "+e)}},qW=function(n){switch(n.type){case Se.Factory:return{factory:n.factory,factoryType:ru.Factory};case Se.Provider:return{factory:n.provider,factoryType:ru.Provider};case Se.DynamicValue:return{factory:n.dynamicValue,factoryType:ru.DynamicValue};default:throw new Error("Unexpected factory type "+n.type)}},$s=globalThis&&globalThis.__assign||function(){return $s=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$s.apply(this,arguments)},d1=globalThis&&globalThis.__awaiter||function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(n,t||[])).next())})},p1=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},KW=globalThis&&globalThis.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))};function ZW(n,t){return n.reduce(function(e,r){var i=t(r),o=r.target.type;return o===Ju.ConstructorArgument?e.constructorInjections.push(i):(e.propertyRequests.push(r),e.propertyInjections.push(i)),e.isAsync||(e.isAsync=f1(i)),e},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function JW(n,t,e){var r;if(t.length>0){var i=ZW(t,e),o=$s($s({},i),{constr:n});i.isAsync?r=QW(o):r=m1(o)}else r=new n;return r}function m1(n){var t,e=new((t=n.constr).bind.apply(t,KW([void 0],n.constructorInjections,!1)));return n.propertyRequests.forEach(function(r,i){var o=r.target.identifier,a=n.propertyInjections[i];(!r.target.isOptional()||a!==void 0)&&(e[o]=a)}),e}function QW(n){return d1(this,void 0,void 0,function(){var t,e;return p1(this,function(r){switch(r.label){case 0:return[4,uE(n.constructorInjections)];case 1:return t=r.sent(),[4,uE(n.propertyInjections)];case 2:return e=r.sent(),[2,m1($s($s({},n),{constructorInjections:t,propertyInjections:e}))]}})})}function uE(n){return d1(this,void 0,void 0,function(){var t,e,r,i;return p1(this,function(o){for(t=[],e=0,r=n;e<r.length;e++)i=r[e],Array.isArray(i)?t.push(Promise.all(i)):t.push(i);return[2,Promise.all(t)]})})}function cE(n,t){var e=tX(n,t);return In(e)?e.then(function(){return t}):t}function tX(n,t){var e,r;if(Reflect.hasMetadata(iE,n)){var i=Reflect.getMetadata(iE,n);try{return(r=(e=t)[i.value])===null||r===void 0?void 0:r.call(e)}catch(o){if(o instanceof Error)throw new Error(bW(n.name,o.message))}}}function eX(n,t){n.scope!==Ue.Singleton&&nX(n,t)}function nX(n,t){var e="Class cannot be instantiated in "+(n.scope===Ue.Request?"request":"transient")+" scope.";if(typeof n.onDeactivation=="function")throw new Error(Ug(t.name,e));if(Reflect.hasMetadata(Fg,t))throw new Error(SW(t.name,e))}function rX(n,t,e,r){eX(n,t);var i=JW(t,e,r);return In(i)?i.then(function(o){return cE(t,o)}):cE(t,i)}var iX=globalThis&&globalThis.__awaiter||function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(n,t||[])).next())})},oX=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hy=function(n){return function(t){t.parentContext.setCurrentRequest(t);var e=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),o=!t.parentRequest||!t.parentRequest.target||!t.target||!t.parentRequest.target.matchesArray(t.target.serviceIdentifier);if(i&&o)return r.map(function(s){var l=hy(n);return l(s)});if(t.target.isOptional()&&e.length===0)return;var a=e[0];return uX(n,t,a)}},aX=function(n,t){var e=qW(n);return AW(function(){return e.factory.bind(n)(t)},function(){return new Error(EW(e.factoryType,t.currentRequest.serviceIdentifier.toString()))})},sX=function(n,t,e){var r,i=t.childRequests;switch(YW(e),e.type){case Se.ConstantValue:case Se.Function:r=e.cache;break;case Se.Constructor:r=e.implementationType;break;case Se.Instance:r=rX(e,e.implementationType,i,hy(n));break;default:r=aX(e,t.parentContext)}return r},lX=function(n,t,e){var r=VW(n,t);return r!==null||(r=e(),WW(n,t,r)),r},uX=function(n,t,e){return lX(n,e,function(){var r=sX(n,t,e);return In(r)?r=r.then(function(i){return hE(t,e,i)}):r=hE(t,e,r),r})};function hE(n,t,e){var r=cX(n.parentContext,t,e),i=dX(n.parentContext.container),o,a=i.next();do{o=a.value;var s=n.parentContext,l=n.serviceIdentifier,u=fX(o,l);In(r)?r=v1(u,s,r):r=hX(u,s,r),a=i.next()}while(a.done!==!0&&!rd(o).hasKey(n.serviceIdentifier));return r}var cX=function(n,t,e){var r;return typeof t.onActivation=="function"?r=t.onActivation(n,e):r=e,r},hX=function(n,t,e){for(var r=n.next();!r.done;){if(e=r.value(t,e),In(e))return v1(n,t,e);r=n.next()}return e},v1=function(n,t,e){return iX(void 0,void 0,void 0,function(){var r,i;return oX(this,function(o){switch(o.label){case 0:return[4,e];case 1:r=o.sent(),i=n.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(t,r)];case 3:return r=o.sent(),i=n.next(),[3,2];case 4:return[2,r]}})})},fX=function(n,t){var e=n._activations;return e.hasKey(t)?e.get(t).values():[].values()},dX=function(n){for(var t=[n],e=n.parent;e!==null;)t.push(e),e=e.parent;var r=function(){var o=t.pop();return o!==void 0?{done:!1,value:o}:{done:!0,value:void 0}},i={next:r};return i};function pX(n){var t=hy(n.plan.rootRequest.requestScope);return t(n.plan.rootRequest)}var yi=function(n,t){var e=n.parentRequest;return e!==null?t(e)?!0:yi(e,t):!1},Hl=function(n){return function(t){var e=function(r){return r!==null&&r.target!==null&&r.target.matchesTag(n)(t)};return e.metaData=new Ca(n,t),e}},vh=Hl(ar),km=function(n){return function(t){var e=null;if(t!==null)if(e=t.bindings[0],typeof n=="string"){var r=e.serviceIdentifier;return r===n}else{var i=t.bindings[0].implementationType;return n===i}return!1}},id=function(){function n(t){this._binding=t}return n.prototype.when=function(t){return this._binding.constraint=t,new rn(this._binding)},n.prototype.whenTargetNamed=function(t){return this._binding.constraint=vh(t),new rn(this._binding)},n.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){if(t===null)return!1;var e=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return e},new rn(this._binding)},n.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=Hl(t)(e),new rn(this._binding)},n.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return e!==null&&km(t)(e.parentRequest)},new rn(this._binding)},n.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return e!==null&&vh(t)(e.parentRequest)},new rn(this._binding)},n.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(r){return r!==null&&Hl(t)(e)(r.parentRequest)},new rn(this._binding)},n.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return e!==null&&yi(e,km(t))},new rn(this._binding)},n.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return e!==null&&!yi(e,km(t))},new rn(this._binding)},n.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return e!==null&&yi(e,vh(t))},new rn(this._binding)},n.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return e!==null&&!yi(e,vh(t))},new rn(this._binding)},n.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(r){return r!==null&&yi(r,Hl(t)(e))},new rn(this._binding)},n.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(r){return r!==null&&!yi(r,Hl(t)(e))},new rn(this._binding)},n.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return e!==null&&yi(e,t)},new rn(this._binding)},n.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return e!==null&&!yi(e,t)},new rn(this._binding)},n}(),rn=function(){function n(t){this._binding=t}return n.prototype.onActivation=function(t){return this._binding.onActivation=t,new id(this._binding)},n.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new id(this._binding)},n}(),bi=function(){function n(t){this._binding=t,this._bindingWhenSyntax=new id(this._binding),this._bindingOnSyntax=new rn(this._binding)}return n.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},n.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},n.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},n.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},n.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},n.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},n.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},n.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},n.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},n.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},n.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},n.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},n.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},n.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},n.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},n.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},n.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},n}(),mX=function(){function n(t){this._binding=t}return n.prototype.inRequestScope=function(){return this._binding.scope=Ue.Request,new bi(this._binding)},n.prototype.inSingletonScope=function(){return this._binding.scope=Ue.Singleton,new bi(this._binding)},n.prototype.inTransientScope=function(){return this._binding.scope=Ue.Transient,new bi(this._binding)},n}(),fE=function(){function n(t){this._binding=t,this._bindingWhenSyntax=new id(this._binding),this._bindingOnSyntax=new rn(this._binding),this._bindingInSyntax=new mX(t)}return n.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},n.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},n.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},n.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},n.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},n.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},n.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},n.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},n.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},n.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},n.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},n.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},n.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},n.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},n.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},n.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},n.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},n.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},n.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},n.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},n}(),vX=function(){function n(t){this._binding=t}return n.prototype.to=function(t){return this._binding.type=Se.Instance,this._binding.implementationType=t,new fE(this._binding)},n.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+pW);var t=this._binding.serviceIdentifier;return this.to(t)},n.prototype.toConstantValue=function(t){return this._binding.type=Se.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Ue.Singleton,new bi(this._binding)},n.prototype.toDynamicValue=function(t){return this._binding.type=Se.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new fE(this._binding)},n.prototype.toConstructor=function(t){return this._binding.type=Se.Constructor,this._binding.implementationType=t,this._binding.scope=Ue.Singleton,new bi(this._binding)},n.prototype.toFactory=function(t){return this._binding.type=Se.Factory,this._binding.factory=t,this._binding.scope=Ue.Singleton,new bi(this._binding)},n.prototype.toFunction=function(t){if(typeof t!="function")throw new Error(fW);var e=this.toConstantValue(t);return this._binding.type=Se.Function,this._binding.scope=Ue.Singleton,e},n.prototype.toAutoFactory=function(t){return this._binding.type=Se.Factory,this._binding.factory=function(e){var r=function(){return e.container.get(t)};return r},this._binding.scope=Ue.Singleton,new bi(this._binding)},n.prototype.toAutoNamedFactory=function(t){return this._binding.type=Se.Factory,this._binding.factory=function(e){return function(r){return e.container.getNamed(t,r)}},new bi(this._binding)},n.prototype.toProvider=function(t){return this._binding.type=Se.Provider,this._binding.provider=t,this._binding.scope=Ue.Singleton,new bi(this._binding)},n.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},n}(),gX=function(){function n(){}return n.of=function(t,e,r,i,o){var a=new n;return a.bindings=t,a.middleware=e,a.deactivations=i,a.activations=r,a.moduleActivationStore=o,a},n}();function _X(n){return typeof n=="object"&&n!==null&&"clone"in n&&typeof n.clone=="function"}var Qo=function(){function n(){this._map=new Map}return n.prototype.getMap=function(){return this._map},n.prototype.add=function(t,e){if(t==null)throw new Error(Al);if(e==null)throw new Error(Al);var r=this._map.get(t);r!==void 0?r.push(e):this._map.set(t,[e])},n.prototype.get=function(t){if(t==null)throw new Error(Al);var e=this._map.get(t);if(e!==void 0)return e;throw new Error(aE)},n.prototype.remove=function(t){if(t==null)throw new Error(Al);if(!this._map.delete(t))throw new Error(aE)},n.prototype.removeIntersection=function(t){var e=this;this.traverse(function(r,i){var o=t.hasKey(r)?t.get(r):void 0;if(o!==void 0){var a=i.filter(function(s){return!o.some(function(l){return s===l})});e._setValue(r,a)}})},n.prototype.removeByCondition=function(t){var e=this,r=[];return this._map.forEach(function(i,o){for(var a=[],s=0,l=i;s<l.length;s++){var u=l[s],c=t(u);c?r.push(u):a.push(u)}e._setValue(o,a)}),r},n.prototype.hasKey=function(t){if(t==null)throw new Error(Al);return this._map.has(t)},n.prototype.clone=function(){var t=new n;return this._map.forEach(function(e,r){e.forEach(function(i){return t.add(r,_X(i)?i.clone():i)})}),t},n.prototype.traverse=function(t){this._map.forEach(function(e,r){t(r,e)})},n.prototype._setValue=function(t,e){e.length>0?this._map.set(t,e):this._map.delete(t)},n}(),yX=function(){function n(){this._map=new Map}return n.prototype.remove=function(t){if(this._map.has(t)){var e=this._map.get(t);return this._map.delete(t),e}return this._getEmptyHandlersStore()},n.prototype.addDeactivation=function(t,e,r){this._getModuleActivationHandlers(t).onDeactivations.add(e,r)},n.prototype.addActivation=function(t,e,r){this._getModuleActivationHandlers(t).onActivations.add(e,r)},n.prototype.clone=function(){var t=new n;return this._map.forEach(function(e,r){t._map.set(r,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})}),t},n.prototype._getModuleActivationHandlers=function(t){var e=this._map.get(t);return e===void 0&&(e=this._getEmptyHandlersStore(),this._map.set(t,e)),e},n.prototype._getEmptyHandlersStore=function(){var t={onActivations:new Qo,onDeactivations:new Qo};return t},n}(),od=globalThis&&globalThis.__assign||function(){return od=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},od.apply(this,arguments)},tr=globalThis&&globalThis.__awaiter||function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(n,t||[])).next())})},er=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},xX=globalThis&&globalThis.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))},bX=function(){function n(t){var e=t||{};if(typeof e!="object")throw new Error(""+vW);if(e.defaultScope===void 0)e.defaultScope=Ue.Transient;else if(e.defaultScope!==Ue.Singleton&&e.defaultScope!==Ue.Transient&&e.defaultScope!==Ue.Request)throw new Error(""+gW);if(e.autoBindInjectable===void 0)e.autoBindInjectable=!1;else if(typeof e.autoBindInjectable!="boolean")throw new Error(""+_W);if(e.skipBaseClassChecks===void 0)e.skipBaseClassChecks=!1;else if(typeof e.skipBaseClassChecks!="boolean")throw new Error(""+yW);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=Qu(),this._bindingDictionary=new Qo,this._snapshots=[],this._middleware=null,this._activations=new Qo,this._deactivations=new Qo,this.parent=null,this._metadataReader=new wW,this._moduleActivationStore=new yX}return n.merge=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=new n,a=xX([t,e],r,!0).map(function(u){return rd(u)}),s=rd(o);function l(u,c){u.traverse(function(h,f){f.forEach(function(d){c.add(d.serviceIdentifier,d.clone())})})}return a.forEach(function(u){l(u,s)}),o},n.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this._getContainerModuleHelpersFactory(),i=0,o=t;i<o.length;i++){var a=o[i],s=r(a.id);a.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},n.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return tr(this,void 0,void 0,function(){var r,i,o,a,s;return er(this,function(l){switch(l.label){case 0:r=this._getContainerModuleHelpersFactory(),i=0,o=t,l.label=1;case 1:return i<o.length?(a=o[i],s=r(a.id),[4,a.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},n.prototype.unload=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach(function(i){var o=t._removeModuleBindings(i.id);t._deactivateSingletons(o),t._removeModuleHandlers(i.id)})},n.prototype.unloadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return tr(this,void 0,void 0,function(){var r,i,o,a;return er(this,function(s){switch(s.label){case 0:r=0,i=t,s.label=1;case 1:return r<i.length?(o=i[r],a=this._removeModuleBindings(o.id),[4,this._deactivateSingletonsAsync(a)]):[3,4];case 2:s.sent(),this._removeModuleHandlers(o.id),s.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},n.prototype.bind=function(t){var e=this.options.defaultScope||Ue.Transient,r=new eW(t,e);return this._bindingDictionary.add(t,r),new vX(r)},n.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},n.prototype.rebindAsync=function(t){return tr(this,void 0,void 0,function(){return er(this,function(e){switch(e.label){case 0:return[4,this.unbindAsync(t)];case 1:return e.sent(),[2,this.bind(t)]}})})},n.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var e=this._bindingDictionary.get(t);this._deactivateSingletons(e)}this._removeServiceFromDictionary(t)},n.prototype.unbindAsync=function(t){return tr(this,void 0,void 0,function(){var e;return er(this,function(r){switch(r.label){case 0:return this._bindingDictionary.hasKey(t)?(e=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(e)]):[3,2];case 1:r.sent(),r.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}})})},n.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse(function(e,r){t._deactivateSingletons(r)}),this._bindingDictionary=new Qo},n.prototype.unbindAllAsync=function(){return tr(this,void 0,void 0,function(){var t,e=this;return er(this,function(r){switch(r.label){case 0:return t=[],this._bindingDictionary.traverse(function(i,o){t.push(e._deactivateSingletonsAsync(o))}),[4,Promise.all(t)];case 1:return r.sent(),this._bindingDictionary=new Qo,[2]}})})},n.prototype.onActivation=function(t,e){this._activations.add(t,e)},n.prototype.onDeactivation=function(t,e){this._deactivations.add(t,e)},n.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},n.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},n.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,ar,e)},n.prototype.isBoundTagged=function(t,e,r){var i=!1;if(this._bindingDictionary.hasKey(t)){var o=this._bindingDictionary.get(t),a=kW(this,t,e,r);i=o.some(function(s){return s.constraint(a)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,r)),i},n.prototype.snapshot=function(){this._snapshots.push(gX.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},n.prototype.restore=function(){var t=this._snapshots.pop();if(t===void 0)throw new Error(cW);this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},n.prototype.createChild=function(t){var e=new n(t||this.options);return e.parent=this,e},n.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(i,o){return o(i)},r)},n.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},n.prototype.get=function(t){var e=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(e)},n.prototype.getAsync=function(t){return tr(this,void 0,void 0,function(){var e;return er(this,function(r){return e=this._getNotAllArgs(t,!1),[2,this._get(e)]})})},n.prototype.getTagged=function(t,e,r){var i=this._getNotAllArgs(t,!1,e,r);return this._getButThrowIfAsync(i)},n.prototype.getTaggedAsync=function(t,e,r){return tr(this,void 0,void 0,function(){var i;return er(this,function(o){return i=this._getNotAllArgs(t,!1,e,r),[2,this._get(i)]})})},n.prototype.getNamed=function(t,e){return this.getTagged(t,ar,e)},n.prototype.getNamedAsync=function(t,e){return this.getTaggedAsync(t,ar,e)},n.prototype.getAll=function(t){var e=this._getAllArgs(t);return this._getButThrowIfAsync(e)},n.prototype.getAllAsync=function(t){var e=this._getAllArgs(t);return this._getAll(e)},n.prototype.getAllTagged=function(t,e,r){var i=this._getNotAllArgs(t,!0,e,r);return this._getButThrowIfAsync(i)},n.prototype.getAllTaggedAsync=function(t,e,r){var i=this._getNotAllArgs(t,!0,e,r);return this._getAll(i)},n.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,ar,e)},n.prototype.getAllNamedAsync=function(t,e){return this.getAllTaggedAsync(t,ar,e)},n.prototype.resolve=function(t){var e=this.isBound(t);e||this.bind(t).toSelf();var r=this.get(t);return e||this.unbind(t),r},n.prototype._preDestroy=function(t,e){var r,i;if(Reflect.hasMetadata(Fg,t)){var o=Reflect.getMetadata(Fg,t);return(i=(r=e)[o.value])===null||i===void 0?void 0:i.call(r)}},n.prototype._removeModuleHandlers=function(t){var e=this._moduleActivationStore.remove(t);this._activations.removeIntersection(e.onActivations),this._deactivations.removeIntersection(e.onDeactivations)},n.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition(function(e){return e.moduleId===t})},n.prototype._deactivate=function(t,e){var r=this,i=Object.getPrototypeOf(e).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var o=this._deactivateContainer(e,this._deactivations.get(t.serviceIdentifier).values());if(In(o))return this._handleDeactivationError(o.then(function(){return r._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,e,i)}),i)}var a=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,e,i);if(In(a))return this._handleDeactivationError(a,i)}catch(s){if(s instanceof Error)throw new Error(Ug(i.name,s.message))}},n.prototype._handleDeactivationError=function(t,e){return tr(this,void 0,void 0,function(){var r;return er(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return i.sent(),[3,3];case 2:if(r=i.sent(),r instanceof Error)throw new Error(Ug(e.name,r.message));return[3,3];case 3:return[2]}})})},n.prototype._deactivateContainer=function(t,e){for(var r=this,i=e.next();i.value;){var o=i.value(t);if(In(o))return o.then(function(){return r._deactivateContainerAsync(t,e)});i=e.next()}},n.prototype._deactivateContainerAsync=function(t,e){return tr(this,void 0,void 0,function(){var r;return er(this,function(i){switch(i.label){case 0:r=e.next(),i.label=1;case 1:return r.value?[4,r.value(t)]:[3,3];case 2:return i.sent(),r=e.next(),[3,1];case 3:return[2]}})})},n.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(c,h){c._binding.moduleId=h},r=function(c){return function(h){var f=t.bind(h);return e(f,c),f}},i=function(){return function(c){return t.unbind(c)}},o=function(){return function(c){return t.unbindAsync(c)}},a=function(){return function(c){return t.isBound(c)}},s=function(c){return function(h){var f=t.rebind(h);return e(f,c),f}},l=function(c){return function(h,f){t._moduleActivationStore.addActivation(c,h,f),t.onActivation(h,f)}},u=function(c){return function(h,f){t._moduleActivationStore.addDeactivation(c,h,f),t.onDeactivation(h,f)}};return function(c){return{bindFunction:r(c),isboundFunction:a(),onActivationFunction:l(c),onDeactivationFunction:u(c),rebindFunction:s(c),unbindFunction:i(),unbindAsyncFunction:o()}}},n.prototype._getAll=function(t){return Promise.all(this._get(t))},n.prototype._get=function(t){var e=od(od({},t),{contextInterceptor:function(i){return i},targetType:Ju.Variable});if(this._middleware){var r=this._middleware(e);if(r==null)throw new Error(hW);return r}return this._planAndResolve()(e)},n.prototype._getButThrowIfAsync=function(t){var e=this._get(t);if(f1(e))throw new Error(dW(t.serviceIdentifier));return e},n.prototype._getAllArgs=function(t){var e={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t};return e},n.prototype._getNotAllArgs=function(t,e,r,i){var o={avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:r,value:i};return o},n.prototype._planAndResolve=function(){var t=this;return function(e){var r=GW(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);r=e.contextInterceptor(r);var i=pX(r);return i}},n.prototype._deactivateIfSingleton=function(t){var e=this;if(t.activated)return In(t.cache)?t.cache.then(function(r){return e._deactivate(t,r)}):this._deactivate(t,t.cache)},n.prototype._deactivateSingletons=function(t){for(var e=0,r=t;e<r.length;e++){var i=r[e],o=this._deactivateIfSingleton(i);if(In(o))throw new Error(xW)}},n.prototype._deactivateSingletonsAsync=function(t){return tr(this,void 0,void 0,function(){var e=this;return er(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(i){return e._deactivateIfSingleton(i)}))];case 1:return r.sent(),[2]}})})},n.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,e,r){return this.parent?this._deactivate.bind(this.parent)(t,e):this._bindingDeactivationAndPreDestroy(t,e,r)},n.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,e,r){return tr(this,void 0,void 0,function(){return er(this,function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,e)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,e,r)];case 3:i.sent(),i.label=4;case 4:return[2]}})})},n.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch{throw new Error(iW+" "+Ru(t))}},n.prototype._bindingDeactivationAndPreDestroy=function(t,e,r){var i=this;if(typeof t.onDeactivation=="function"){var o=t.onDeactivation(e);if(In(o))return o.then(function(){return i._preDestroy(r,e)})}return this._preDestroy(r,e)},n.prototype._bindingDeactivationAndPreDestroyAsync=function(t,e,r){return tr(this,void 0,void 0,function(){return er(this,function(i){switch(i.label){case 0:return typeof t.onDeactivation!="function"?[3,2]:[4,t.onDeactivation(e)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(r,e)];case 3:return i.sent(),[2]}})})},n}();function SX(n){for(var t=new Set,e=0,r=n;e<r.length;e++){var i=r[e];if(t.has(i))return i;t.add(i)}}function EX(n){return n.prototype!==void 0}function TX(n){if(n!==void 0)throw new Error(n1)}function wX(n,t,e,r){TX(t),g1(JM,n,e.toString(),r)}function AX(n,t,e){if(EX(n))throw new Error(n1);g1(QM,n.constructor,t,e)}function MX(n){var t=[];if(Array.isArray(n)){t=n;var e=SX(t.map(function(r){return r.key}));if(e!==void 0)throw new Error(t1+" "+e.toString())}else t=[n];return t}function g1(n,t,e,r){var i=MX(r),o={};Reflect.hasOwnMetadata(n,t)&&(o=Reflect.getMetadata(n,t));var a=o[e];if(a===void 0)a=[];else for(var s=function(h){if(i.some(function(f){return f.key===h.key}))throw new Error(t1+" "+h.key.toString())},l=0,u=a;l<u.length;l++){var c=u[l];s(c)}a.push.apply(a,i),o[e]=a,Reflect.defineMetadata(n,o,t)}function CX(n){return function(t,e,r){typeof r=="number"?wX(t,e,r,n):AX(t,e,n)}}function tc(){return function(n){if(Reflect.hasOwnMetadata(Ng,n))throw new Error(nW);var t=Reflect.getMetadata(JV,n)||[];return Reflect.defineMetadata(Ng,t,n),n}}function RX(n){return function(t){return function(e,r,i){if(t===void 0){var o=typeof e=="function"?e.name:e.constructor.name;throw new Error(sW(o))}return CX(new Ca(n,t))(e,r,i)}}}var il=RX(Wd);const ur={Log:Symbol.for("Log"),Task:Symbol.for("Task"),ExecutorFactory:Symbol.for("ExecutorFactory"),PropertyExecutor:Symbol.for("PropertyExecutor"),StructureExecutor:Symbol.for("StructureExecutor")};var PX=Object.defineProperty,IX=Object.getOwnPropertyDescriptor,OX=(n,t,e,r)=>{for(var i=r>1?void 0:r?IX(t,e):t,o=n.length-1,a;o>=0;o--)(a=n[o])&&(i=(r?a(t,e,i):a(i))||i);return r&&i&&PX(t,e,i),i};let Bg=class{constructor(){}log(...n){console.log(...n)}error(...n){console.error(...n)}};Bg=OX([tc()],Bg);var DX=Object.defineProperty,LX=Object.getOwnPropertyDescriptor,_1=(n,t,e,r)=>{for(var i=r>1?void 0:r?LX(t,e):t,o=n.length-1,a;o>=0;o--)(a=n[o])&&(i=(r?a(t,e,i):a(i))||i);return r&&i&&DX(t,e,i),i};let ad=class{constructor(){ii(this,"logger")}generateParams(){var n;return(n=this.logger)==null||n.log("PropertyExecutor generateParams"),{type:"PropertyExecutor"}}};_1([il(ur.Log)],ad.prototype,"logger",2);ad=_1([tc()],ad);var NX=Object.defineProperty,FX=Object.getOwnPropertyDescriptor,fy=(n,t,e,r)=>{for(var i=r>1?void 0:r?FX(t,e):t,o=n.length-1,a;o>=0;o--)(a=n[o])&&(i=(r?a(t,e,i):a(i))||i);return r&&i&&NX(t,e,i),i};let Iu=class{constructor(){ii(this,"params");ii(this,"taskExecutor");ii(this,"logger");ii(this,"executorFactory")}initTask(n){var t;this.taskExecutor=(t=this.executorFactory)==null?void 0:t.getExecutor(n.type)}generateParams(){if(!this.taskExecutor)return{};this.params=this.taskExecutor.generateParams()}submit(){var n;(n=this.logger)==null||n.log(this.params)}};fy([il(ur.Log)],Iu.prototype,"logger",2);fy([il(ur.ExecutorFactory)],Iu.prototype,"executorFactory",2);Iu=fy([tc()],Iu);var UX=Object.defineProperty,BX=Object.getOwnPropertyDescriptor,y1=(n,t,e,r)=>{for(var i=r>1?void 0:r?BX(t,e):t,o=n.length-1,a;o>=0;o--)(a=n[o])&&(i=(r?a(t,e,i):a(i))||i);return r&&i&&UX(t,e,i),i};let sd=class{constructor(){ii(this,"logger")}generateParams(){var n;return(n=this.logger)==null||n.log("StructureExecutor generateParams"),{type:"StructureExecutor"}}};y1([il(ur.Log)],sd.prototype,"logger",2);sd=y1([tc()],sd);var GX=Object.defineProperty,kX=Object.getOwnPropertyDescriptor,dy=(n,t,e,r)=>{for(var i=r>1?void 0:r?kX(t,e):t,o=n.length-1,a;o>=0;o--)(a=n[o])&&(i=(r?a(t,e,i):a(i))||i);return r&&i&&GX(t,e,i),i};let Ou=class{constructor(){ii(this,"propertyExecutor");ii(this,"structureExecutor")}getExecutor(n){if(n==="property")return this.propertyExecutor;if(n==="structure")return this.structureExecutor}};dy([il(ur.PropertyExecutor)],Ou.prototype,"propertyExecutor",2);dy([il(ur.StructureExecutor)],Ou.prototype,"structureExecutor",2);Ou=dy([tc()],Ou);const ol=new bX;ol.bind(ur.Log).to(Bg);ol.bind(ur.Task).to(Iu);ol.bind(ur.ExecutorFactory).to(Ou);ol.bind(ur.PropertyExecutor).to(ad);ol.bind(ur.StructureExecutor).to(sd);function Du(n){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(n)}function HX(n,t){if(Du(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t||"default");if(Du(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function zX(n){var t=HX(n,"string");return Du(t)=="symbol"?t:t+""}function VX(n,t,e){return(t=zX(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function dE(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function ia(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(e),!0).forEach(function(r){VX(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):dE(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function xt(){return xt=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)({}).hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},xt.apply(null,arguments)}const WX=Array.isArray,XX=n=>typeof n=="string",$X=n=>n!==null&&typeof n=="object";function ec(){const n=[];for(let t=0;t<arguments.length;t++){const e=t<0||arguments.length<=t?void 0:arguments[t];if(e){if(XX(e))n.push(e);else if(WX(e))for(let r=0;r<e.length;r++){const i=ec(e[r]);i&&n.push(i)}else if($X(e))for(const r in e)e[r]&&n.push(r)}}return n.join(" ")}const jX=n=>n!=null&&n!=="",YX=jX,qX=(n,t)=>{const e=xt({},n);return Object.keys(t).forEach(r=>{const i=e[r];if(i)i.type||i.default?i.default=t[r]:i.def?i.def(t[r]):e[r]={type:i,default:t[r]};else throw new Error(`not have ${r} prop`)}),e},KX=qX,ZX=Symbol("skipFlatten"),Lu=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const e=Array.isArray(n)?n:[n],r=[];return e.forEach(i=>{Array.isArray(i)?r.push(...Lu(i,t)):i&&i.type===Wn?i.key===ZX?r.push(i):r.push(...Lu(i.children,t)):i&&af(i)?t&&!x1(i)?r.push(i):t||r.push(i):YX(i)&&r.push(i)}),r},Gg=n=>{var t;let e=((t=n==null?void 0:n.vnode)===null||t===void 0?void 0:t.el)||n&&(n.$el||n);for(;e&&!e.tagName;)e=e.nextSibling;return e};function x1(n){return n&&(n.type===Yr||n.type===Wn&&n.children.length===0||n.type===Js&&n.children.trim()==="")}function b1(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return n.forEach(e=>{Array.isArray(e)?t.push(...e):(e==null?void 0:e.type)===Wn?t.push(...b1(e.children)):t.push(e)}),t.filter(e=>!x1(e))}let S1=n=>setTimeout(n,16),E1=n=>clearTimeout(n);typeof window<"u"&&"requestAnimationFrame"in window&&(S1=n=>window.requestAnimationFrame(n),E1=n=>window.cancelAnimationFrame(n));let pE=0;const py=new Map;function T1(n){py.delete(n)}function kg(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;pE+=1;const e=pE;function r(i){if(i===0)T1(e),n();else{const o=S1(()=>{r(i-1)});py.set(e,o)}}return r(t),e}kg.cancel=n=>{const t=py.get(n);return T1(t),E1(t)};const ld=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return t},w1=n=>{const t=n;return t.install=function(e){e.component(t.displayName||t.name,n)},n};function mE(){return{type:[Function,Array]}}function my(n){return{type:Object,default:n}}function iu(n){return{type:Boolean,default:n}}function Hg(n,t){const e={validator:()=>!0,default:n};return e}function vE(n){return{type:Array,default:n}}function gE(n){return{type:String,default:n}}function JX(n,t){return n?{type:n,default:t}:Hg(t)}const QX="anticon",A1=Symbol("configProvider"),M1={getPrefixCls:(n,t)=>t||(n?`ant-${n}`:"ant"),iconPrefixCls:Lt(()=>QX),getPopupContainer:Lt(()=>()=>document.body),direction:Lt(()=>"ltr")},t$=()=>tn(A1,M1),e$=Symbol("DisabledContextKey"),C1=()=>tn(e$,Be(void 0)),n$={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},r$={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},i$=r$,o$={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},R1=o$,a$={lang:xt({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},i$),timePickerLocale:xt({},R1)},_E=a$,kn="${label} is not a valid ${type}",s$={locale:"en",Pagination:n$,DatePicker:_E,TimePicker:R1,Calendar:_E,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:kn,method:kn,array:kn,object:kn,number:kn,date:kn,boolean:kn,integer:kn,float:kn,regexp:kn,email:kn,url:kn,hex:kn},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"}},yE=s$,l$=Ae({compatConfig:{MODE:3},name:"LocaleReceiver",props:{componentName:String,defaultLocale:{type:[Object,Function]},children:{type:Function}},setup(n,t){let{slots:e}=t;const r=tn("localeData",{}),i=Lt(()=>{const{componentName:a="global",defaultLocale:s}=n,l=s||yE[a||"global"],{antLocale:u}=r,c=a&&u?u[a]:{};return xt(xt({},typeof l=="function"?l():l),c||{})}),o=Lt(()=>{const{antLocale:a}=r,s=a&&a.locale;return a&&a.exist&&!s?yE.locale:s});return()=>{const a=n.children||e.default,{antLocale:s}=r;return a==null?void 0:a(i.value,o.value,s)}}});function vy(n){for(var t=0,e,r=0,i=n.length;i>=4;++r,i-=4)e=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(n.charCodeAt(r+2)&255)<<16;case 2:t^=(n.charCodeAt(r+1)&255)<<8;case 1:t^=n.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}const xE="%";class u${constructor(t){this.cache=new Map,this.instanceId=t}get(t){return this.cache.get(Array.isArray(t)?t.join(xE):t)||null}update(t,e){const r=Array.isArray(t)?t.join(xE):t,i=this.cache.get(r),o=e(i);o===null?this.cache.delete(r):this.cache.set(r,o)}}const c$=u$,P1="data-token-hash",va="data-css-hash",bs="__cssinjs_instance__";function Nu(){const n=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){const t=document.body.querySelectorAll(`style[${va}]`)||[],{firstChild:e}=document.head;Array.from(t).forEach(i=>{i[bs]=i[bs]||n,i[bs]===n&&document.head.insertBefore(i,e)});const r={};Array.from(document.querySelectorAll(`style[${va}]`)).forEach(i=>{var o;const a=i.getAttribute(va);r[a]?i[bs]===n&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)):r[a]=!0})}return new c$(n)}const I1=Symbol("StyleContextKey"),h$=()=>{var n,t,e;const r=Ad();let i;if(r&&r.appContext){const o=(e=(t=(n=r.appContext)===null||n===void 0?void 0:n.config)===null||t===void 0?void 0:t.globalProperties)===null||e===void 0?void 0:e.__ANTDV_CSSINJS_CACHE__;o?i=o:(i=Nu(),r.appContext.config.globalProperties&&(r.appContext.config.globalProperties.__ANTDV_CSSINJS_CACHE__=i))}else i=Nu();return i},O1={cache:Nu(),defaultCache:!0,hashPriority:"low"},jd=()=>{const n=h$();return tn(I1,wr(xt(xt({},O1),{cache:n})))},f$=n=>{const t=jd(),e=wr(xt(xt({},O1),{cache:Nu()}));return Pi([()=>Ri(n),t],()=>{const r=xt({},t.value),i=Ri(n);Object.keys(i).forEach(a=>{const s=i[a];i[a]!==void 0&&(r[a]=s)});const{cache:o}=i;r.cache=r.cache||Nu(),r.defaultCache=!o&&t.value.defaultCache,e.value=r},{immediate:!0}),ws(I1,e),e},d$=()=>({autoClear:iu(),mock:gE(),cache:my(),defaultCache:iu(),hashPriority:gE(),container:JX(),ssrInline:iu(),transformers:vE(),linters:vE()});w1(Ae({name:"AStyleProvider",inheritAttrs:!1,props:d$(),setup(n,t){let{slots:e}=t;return f$(n),()=>{var r;return(r=e.default)===null||r===void 0?void 0:r.call(e)}}}));function D1(n,t,e,r){const i=jd(),o=wr(""),a=wr();E_(()=>{o.value=[n,...t.value].join("%")});const s=l=>{i.value.cache.update(l,u=>{const[c=0,h]=u||[];return c-1===0?(r==null||r(h,!1),null):[c-1,h]})};return Pi(o,(l,u)=>{u&&s(u),i.value.cache.update(l,c=>{const[h=0,f]=c||[],m=f||e();return[h+1,m]}),a.value=i.value.cache.get(o.value)[1]},{immediate:!0}),Da(()=>{s(o.value)}),a}function nc(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function p$(n,t){return n&&n.contains?n.contains(t):!1}const bE="data-vc-order",m$="vc-util-key",zg=new Map;function L1(){let{mark:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n?n.startsWith("data-")?n:`data-${n}`:m$}function Yd(n){return n.attachTo?n.attachTo:document.querySelector("head")||document.body}function v$(n){return n==="queue"?"prependQueue":n?"prepend":"append"}function N1(n){return Array.from((zg.get(n)||n).children).filter(t=>t.tagName==="STYLE")}function F1(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!nc())return null;const{csp:e,prepend:r}=t,i=document.createElement("style");i.setAttribute(bE,v$(r)),e!=null&&e.nonce&&(i.nonce=e==null?void 0:e.nonce),i.innerHTML=n;const o=Yd(t),{firstChild:a}=o;if(r){if(r==="queue"){const s=N1(o).filter(l=>["prepend","prependQueue"].includes(l.getAttribute(bE)));if(s.length)return o.insertBefore(i,s[s.length-1].nextSibling),i}o.insertBefore(i,a)}else o.appendChild(i);return i}function U1(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=Yd(t);return N1(e).find(r=>r.getAttribute(L1(t))===n)}function B1(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=U1(n,t);e&&Yd(t).removeChild(e)}function g$(n,t){const e=zg.get(n);if(!e||!p$(document,e)){const r=F1("",t),{parentNode:i}=r;zg.set(n,i),n.removeChild(r)}}function Vg(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r,i,o;const a=Yd(e);g$(a,e);const s=U1(t,e);if(s)return!((r=e.csp)===null||r===void 0)&&r.nonce&&s.nonce!==((i=e.csp)===null||i===void 0?void 0:i.nonce)&&(s.nonce=(o=e.csp)===null||o===void 0?void 0:o.nonce),s.innerHTML!==n&&(s.innerHTML=n),s;const l=F1(n,e);return l.setAttribute(L1(e),t),l}function _$(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}class js{constructor(){this.cache=new Map,this.keys=[],this.cacheCallTimes=0}size(){return this.keys.length}internalGet(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r={map:this.cache};return t.forEach(i=>{var o;r?r=(o=r==null?void 0:r.map)===null||o===void 0?void 0:o.get(i):r=void 0}),r!=null&&r.value&&e&&(r.value[1]=this.cacheCallTimes++),r==null?void 0:r.value}get(t){var e;return(e=this.internalGet(t,!0))===null||e===void 0?void 0:e[0]}has(t){return!!this.internalGet(t)}set(t,e){if(!this.has(t)){if(this.size()+1>js.MAX_CACHE_SIZE+js.MAX_CACHE_OFFSET){const[i]=this.keys.reduce((o,a)=>{const[,s]=o;return this.internalGet(a)[1]<s?[a,this.internalGet(a)[1]]:o},[this.keys[0],this.cacheCallTimes]);this.delete(i)}this.keys.push(t)}let r=this.cache;t.forEach((i,o)=>{if(o===t.length-1)r.set(i,{value:[e,this.cacheCallTimes++]});else{const a=r.get(i);a?a.map||(a.map=new Map):r.set(i,{map:new Map}),r=r.get(i).map}})}deleteByPath(t,e){var r;const i=t.get(e[0]);if(e.length===1)return i.map?t.set(e[0],{map:i.map}):t.delete(e[0]),(r=i.value)===null||r===void 0?void 0:r[0];const o=this.deleteByPath(i.map,e.slice(1));return(!i.map||i.map.size===0)&&!i.value&&t.delete(e[0]),o}delete(t){if(this.has(t))return this.keys=this.keys.filter(e=>!_$(e,t)),this.deleteByPath(this.cache,t)}}js.MAX_CACHE_SIZE=20;js.MAX_CACHE_OFFSET=5;let SE={};function y$(n,t){}function x$(n,t,e){!t&&!SE[e]&&(n(!1,e),SE[e]=!0)}function b$(n,t){x$(y$,n,t)}function S$(){}let E$=S$;const T$=E$;let EE=0;class G1{constructor(t){this.derivatives=Array.isArray(t)?t:[t],this.id=EE,t.length===0&&T$(t.length>0),EE+=1}getDerivativeToken(t){return this.derivatives.reduce((e,r)=>r(t,e),void 0)}}const Hm=new js;function w$(n){const t=Array.isArray(n)?n:[n];return Hm.has(t)||Hm.set(t,new G1(t)),Hm.get(t)}const TE=new WeakMap;function ud(n){let t=TE.get(n)||"";return t||(Object.keys(n).forEach(e=>{const r=n[e];t+=e,r instanceof G1?t+=r.id:r&&typeof r=="object"?t+=ud(r):t+=r}),TE.set(n,t)),t}function A$(n,t){return vy(`${t}_${ud(n)}`)}const ou=`random-${Date.now()}-${Math.random()}`.replace(/\./g,""),k1="_bAmBoO_";function M$(n,t,e){var r,i;if(nc()){Vg(n,ou);const o=document.createElement("div");o.style.position="fixed",o.style.left="0",o.style.top="0",t==null||t(o),document.body.appendChild(o);const a=e?e(o):(r=getComputedStyle(o).content)===null||r===void 0?void 0:r.includes(k1);return(i=o.parentNode)===null||i===void 0||i.removeChild(o),B1(ou),a}return!1}let zm;function C$(){return zm===void 0&&(zm=M$(`@layer ${ou} { .${ou} { content: "${k1}"!important; } }`,n=>{n.className=ou})),zm}const wE={},R$=!0,P$=!1,I$=!R$&&!P$?"css-dev-only-do-not-override":"css",ta=new Map;function O$(n){ta.set(n,(ta.get(n)||0)+1)}function D$(n,t){typeof document<"u"&&document.querySelectorAll(`style[${P1}="${n}"]`).forEach(r=>{var i;r[bs]===t&&((i=r.parentNode)===null||i===void 0||i.removeChild(r))})}const L$=0;function N$(n,t){ta.set(n,(ta.get(n)||0)-1);const e=Array.from(ta.keys()),r=e.filter(i=>(ta.get(i)||0)<=0);e.length-r.length>L$&&r.forEach(i=>{D$(i,t),ta.delete(i)})}const F$=(n,t,e,r)=>{const i=e.getDerivativeToken(n);let o=xt(xt({},i),t);return r&&(o=r(o)),o};function U$(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Be({});const r=jd(),i=Lt(()=>xt({},...t.value)),o=Lt(()=>ud(i.value)),a=Lt(()=>ud(e.value.override||wE));return D1("token",Lt(()=>[e.value.salt||"",n.value.id,o.value,a.value]),()=>{const{salt:l="",override:u=wE,formatToken:c,getComputedToken:h}=e.value,f=h?h(i.value,u,n.value):F$(i.value,u,n.value,c),d=A$(f,l);f._tokenKey=d,O$(d);const m=`${I$}-${vy(d)}`;return f._hashId=m,[f,m]},l=>{var u;N$(l[0]._tokenKey,(u=r.value)===null||u===void 0?void 0:u.cache.instanceId)})}var B$={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},H1="comm",z1="rule",V1="decl",G$="@import",k$="@keyframes",H$="@layer",W1=Math.abs,gy=String.fromCharCode;function X1(n){return n.trim()}function Yh(n,t,e){return n.replace(t,e)}function z$(n,t,e){return n.indexOf(t,e)}function Fu(n,t){return n.charCodeAt(t)|0}function Uu(n,t,e){return n.slice(t,e)}function Si(n){return n.length}function V$(n){return n.length}function gh(n,t){return t.push(n),n}var qd=1,Ys=1,$1=0,lr=0,ze=0,al="";function _y(n,t,e,r,i,o,a,s){return{value:n,root:t,parent:e,type:r,props:i,children:o,line:qd,column:Ys,length:a,return:"",siblings:s}}function W$(){return ze}function X$(){return ze=lr>0?Fu(al,--lr):0,Ys--,ze===10&&(Ys=1,qd--),ze}function Pr(){return ze=lr<$1?Fu(al,lr++):0,Ys++,ze===10&&(Ys=1,qd++),ze}function ga(){return Fu(al,lr)}function qh(){return lr}function Kd(n,t){return Uu(al,n,t)}function Wg(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $$(n){return qd=Ys=1,$1=Si(al=n),lr=0,[]}function j$(n){return al="",n}function Vm(n){return X1(Kd(lr-1,Xg(n===91?n+2:n===40?n+1:n)))}function Y$(n){for(;(ze=ga())&&ze<33;)Pr();return Wg(n)>2||Wg(ze)>3?"":" "}function q$(n,t){for(;--t&&Pr()&&!(ze<48||ze>102||ze>57&&ze<65||ze>70&&ze<97););return Kd(n,qh()+(t<6&&ga()==32&&Pr()==32))}function Xg(n){for(;Pr();)switch(ze){case n:return lr;case 34:case 39:n!==34&&n!==39&&Xg(ze);break;case 40:n===41&&Xg(n);break;case 92:Pr();break}return lr}function K$(n,t){for(;Pr()&&n+ze!==47+10;)if(n+ze===42+42&&ga()===47)break;return"/*"+Kd(t,lr-1)+"*"+gy(n===47?n:Pr())}function Z$(n){for(;!Wg(ga());)Pr();return Kd(n,lr)}function J$(n){return j$(Kh("",null,null,null,[""],n=$$(n),0,[0],n))}function Kh(n,t,e,r,i,o,a,s,l){for(var u=0,c=0,h=a,f=0,d=0,m=0,g=1,p=1,v=1,y=0,_="",T=i,E=o,S=r,x=_;p;)switch(m=y,y=Pr()){case 40:if(m!=108&&Fu(x,h-1)==58){z$(x+=Yh(Vm(y),"&","&\f"),"&\f",W1(u?s[u-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:x+=Vm(y);break;case 9:case 10:case 13:case 32:x+=Y$(m);break;case 92:x+=q$(qh()-1,7);continue;case 47:switch(ga()){case 42:case 47:gh(Q$(K$(Pr(),qh()),t,e,l),l);break;default:x+="/"}break;case 123*g:s[u++]=Si(x)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:p=0;case 59+c:v==-1&&(x=Yh(x,/\f/g,"")),d>0&&Si(x)-h&&gh(d>32?ME(x+";",r,e,h-1,l):ME(Yh(x," ","")+";",r,e,h-2,l),l);break;case 59:x+=";";default:if(gh(S=AE(x,t,e,u,c,i,s,_,T=[],E=[],h,o),o),y===123)if(c===0)Kh(x,t,S,S,T,o,h,s,E);else switch(f===99&&Fu(x,3)===110?100:f){case 100:case 108:case 109:case 115:Kh(n,S,S,r&&gh(AE(n,S,S,0,0,i,s,_,i,T=[],h,E),E),i,E,h,s,r?T:E);break;default:Kh(x,S,S,S,[""],E,0,s,E)}}u=c=d=0,g=v=1,_=x="",h=a;break;case 58:h=1+Si(x),d=m;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&X$()==125)continue}switch(x+=gy(y),y*g){case 38:v=c>0?1:(x+="\f",-1);break;case 44:s[u++]=(Si(x)-1)*v,v=1;break;case 64:ga()===45&&(x+=Vm(Pr())),f=ga(),c=h=Si(_=x+=Z$(qh())),y++;break;case 45:m===45&&Si(x)==2&&(g=0)}}return o}function AE(n,t,e,r,i,o,a,s,l,u,c,h){for(var f=i-1,d=i===0?o:[""],m=V$(d),g=0,p=0,v=0;g<r;++g)for(var y=0,_=Uu(n,f+1,f=W1(p=a[g])),T=n;y<m;++y)(T=X1(p>0?d[y]+" "+_:Yh(_,/&\f/g,d[y])))&&(l[v++]=T);return _y(n,t,e,i===0?z1:s,l,u,c,h)}function Q$(n,t,e,r){return _y(n,t,e,H1,gy(W$()),Uu(n,2,-2),0,r)}function ME(n,t,e,r,i){return _y(n,t,e,V1,Uu(n,0,r),Uu(n,r+1,-1),r,i)}function $g(n,t){for(var e="",r=0;r<n.length;r++)e+=t(n[r],r,n,t)||"";return e}function tj(n,t,e,r){switch(n.type){case H$:if(n.children.length)break;case G$:case V1:return n.return=n.return||n.value;case H1:return"";case k$:return n.return=n.value+"{"+$g(n.children,r)+"}";case z1:if(!Si(n.value=n.props.join(",")))return""}return Si(e=$g(n.children,r))?n.return=n.value+"{"+e+"}":""}const CE="data-ant-cssinjs-cache-path",ej="_FILE_STYLE__";let _a,j1=!0;function nj(){var n;if(!_a&&(_a={},nc())){const t=document.createElement("div");t.className=CE,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);let e=getComputedStyle(t).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(i=>{const[o,a]=i.split(":");_a[o]=a});const r=document.querySelector(`style[${CE}]`);r&&(j1=!1,(n=r.parentNode)===null||n===void 0||n.removeChild(r)),document.body.removeChild(t)}}function rj(n){return nj(),!!_a[n]}function ij(n){const t=_a[n];let e=null;if(t&&nc())if(j1)e=ej;else{const r=document.querySelector(`style[${va}="${_a[n]}"]`);r?e=r.innerHTML:delete _a[n]}return[e,t]}const RE=nc(),oj="_skip_check_",Y1="_multi_value_";function PE(n){return $g(J$(n),tj).replace(/\{%%%\:[^;];}/g,";")}function aj(n){return typeof n=="object"&&n&&(oj in n||Y1 in n)}function sj(n,t,e){if(!t)return n;const r=`.${t}`,i=e==="low"?`:where(${r})`:r;return n.split(",").map(a=>{var s;const l=a.trim().split(/\s+/);let u=l[0]||"";const c=((s=u.match(/^\w+/))===null||s===void 0?void 0:s[0])||"";return u=`${c}${i}${u.slice(c.length)}`,[u,...l.slice(1)].join(" ")}).join(",")}const IE=new Set,jg=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{root:e,injectHash:r,parentSelectors:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]};const{hashId:o,layer:a,path:s,hashPriority:l,transformers:u=[],linters:c=[]}=t;let h="",f={};function d(p){const v=p.getName(o);if(!f[v]){const[y]=jg(p.style,t,{root:!1,parentSelectors:i});f[v]=`@keyframes ${p.getName(o)}${y}`}}function m(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return p.forEach(y=>{Array.isArray(y)?m(y,v):y&&v.push(y)}),v}if(m(Array.isArray(n)?n:[n]).forEach(p=>{const v=typeof p=="string"&&!e?{}:p;if(typeof v=="string")h+=`${v}
`;else if(v._keyframe)d(v);else{const y=u.reduce((_,T)=>{var E;return((E=T==null?void 0:T.visit)===null||E===void 0?void 0:E.call(T,_))||_},v);Object.keys(y).forEach(_=>{var T;const E=y[_];if(typeof E=="object"&&E&&(_!=="animationName"||!E._keyframe)&&!aj(E)){let S=!1,x=_.trim(),O=!1;(e||r)&&o?x.startsWith("@")?S=!0:x=sj(_,o,l):e&&!o&&(x==="&"||x==="")&&(x="",O=!0);const[b,A]=jg(E,t,{root:O,injectHash:S,parentSelectors:[...i,x]});f=xt(xt({},f),A),h+=`${x}${b}`}else{let S=function(O,b){const A=O.replace(/[A-Z]/g,U=>`-${U.toLowerCase()}`);let N=b;!B$[O]&&typeof N=="number"&&N!==0&&(N=`${N}px`),O==="animationName"&&(b!=null&&b._keyframe)&&(d(b),N=b.getName(o)),h+=`${A}:${N};`};const x=(T=E==null?void 0:E.value)!==null&&T!==void 0?T:E;typeof E=="object"&&(E!=null&&E[Y1])&&Array.isArray(x)?x.forEach(O=>{S(_,O)}):S(_,x)}})}}),!e)h=`{${h}}`;else if(a&&C$()){const p=a.split(",");h=`@layer ${p[p.length-1].trim()} {${h}}`,p.length>1&&(h=`@layer ${a}{%%%:%}${h}`)}return[h,f]};function lj(n,t){return vy(`${n.join("%")}${t}`)}function OE(n,t){const e=jd(),r=Lt(()=>n.value.token._tokenKey),i=Lt(()=>[r.value,...n.value.path]);let o=RE;return D1("style",i,()=>{const{path:a,hashId:s,layer:l,nonce:u,clientOnly:c,order:h=0}=n.value,f=i.value.join("|");if(rj(f)){const[x,O]=ij(f);if(x)return[x,r.value,O,{},c,h]}const d=t(),{hashPriority:m,container:g,transformers:p,linters:v,cache:y}=e.value,[_,T]=jg(d,{hashId:s,hashPriority:m,layer:l,path:a.join("-"),transformers:p,linters:v}),E=PE(_),S=lj(i.value,E);if(o){const x={mark:va,prepend:"queue",attachTo:g,priority:h},O=typeof u=="function"?u():u;O&&(x.csp={nonce:O});const b=Vg(E,S,x);b[bs]=y.instanceId,b.setAttribute(P1,r.value),Object.keys(T).forEach(A=>{IE.has(A)||(IE.add(A),Vg(PE(T[A]),`_effect-${A}`,{mark:va,prepend:"queue",attachTo:g}))})}return[E,r.value,S,T,c,h]},(a,s)=>{let[,,l]=a;(s||e.value.autoClear)&&RE&&B1(l,{mark:va})}),a=>a}const uj="4.2.3";function fn(n,t){cj(n)&&(n="100%");var e=hj(n);return n=t===360?n:Math.min(t,Math.max(0,parseFloat(n))),e&&(n=parseInt(String(n*t),10)/100),Math.abs(n-t)<1e-6?1:(t===360?n=(n<0?n%t+t:n%t)/parseFloat(String(t)):n=n%t/parseFloat(String(t)),n)}function _h(n){return Math.min(1,Math.max(0,n))}function cj(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function hj(n){return typeof n=="string"&&n.indexOf("%")!==-1}function q1(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function yh(n){return n<=1?"".concat(Number(n)*100,"%"):n}function oa(n){return n.length===1?"0"+n:String(n)}function fj(n,t,e){return{r:fn(n,255)*255,g:fn(t,255)*255,b:fn(e,255)*255}}function DE(n,t,e){n=fn(n,255),t=fn(t,255),e=fn(e,255);var r=Math.max(n,t,e),i=Math.min(n,t,e),o=0,a=0,s=(r+i)/2;if(r===i)a=0,o=0;else{var l=r-i;switch(a=s>.5?l/(2-r-i):l/(r+i),r){case n:o=(t-e)/l+(t<e?6:0);break;case t:o=(e-n)/l+2;break;case e:o=(n-t)/l+4;break}o/=6}return{h:o,s:a,l:s}}function Wm(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*(6*e):e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function dj(n,t,e){var r,i,o;if(n=fn(n,360),t=fn(t,100),e=fn(e,100),t===0)i=e,o=e,r=e;else{var a=e<.5?e*(1+t):e+t-e*t,s=2*e-a;r=Wm(s,a,n+1/3),i=Wm(s,a,n),o=Wm(s,a,n-1/3)}return{r:r*255,g:i*255,b:o*255}}function Yg(n,t,e){n=fn(n,255),t=fn(t,255),e=fn(e,255);var r=Math.max(n,t,e),i=Math.min(n,t,e),o=0,a=r,s=r-i,l=r===0?0:s/r;if(r===i)o=0;else{switch(r){case n:o=(t-e)/s+(t<e?6:0);break;case t:o=(e-n)/s+2;break;case e:o=(n-t)/s+4;break}o/=6}return{h:o,s:l,v:a}}function pj(n,t,e){n=fn(n,360)*6,t=fn(t,100),e=fn(e,100);var r=Math.floor(n),i=n-r,o=e*(1-t),a=e*(1-i*t),s=e*(1-(1-i)*t),l=r%6,u=[e,a,o,o,s,e][l],c=[s,e,e,a,o,o][l],h=[o,o,s,e,e,a][l];return{r:u*255,g:c*255,b:h*255}}function qg(n,t,e,r){var i=[oa(Math.round(n).toString(16)),oa(Math.round(t).toString(16)),oa(Math.round(e).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function mj(n,t,e,r,i){var o=[oa(Math.round(n).toString(16)),oa(Math.round(t).toString(16)),oa(Math.round(e).toString(16)),oa(vj(r))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function vj(n){return Math.round(parseFloat(n)*255).toString(16)}function LE(n){return Hn(n)/255}function Hn(n){return parseInt(n,16)}function gj(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var Kg={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function fs(n){var t={r:0,g:0,b:0},e=1,r=null,i=null,o=null,a=!1,s=!1;return typeof n=="string"&&(n=xj(n)),typeof n=="object"&&(di(n.r)&&di(n.g)&&di(n.b)?(t=fj(n.r,n.g,n.b),a=!0,s=String(n.r).substr(-1)==="%"?"prgb":"rgb"):di(n.h)&&di(n.s)&&di(n.v)?(r=yh(n.s),i=yh(n.v),t=pj(n.h,r,i),a=!0,s="hsv"):di(n.h)&&di(n.s)&&di(n.l)&&(r=yh(n.s),o=yh(n.l),t=dj(n.h,r,o),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(e=n.a)),e=q1(e),{ok:a,format:n.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}var _j="[-\\+]?\\d+%?",yj="[-\\+]?\\d*\\.\\d+%?",uo="(?:".concat(yj,")|(?:").concat(_j,")"),Xm="[\\s|\\(]+(".concat(uo,")[,|\\s]+(").concat(uo,")[,|\\s]+(").concat(uo,")\\s*\\)?"),$m="[\\s|\\(]+(".concat(uo,")[,|\\s]+(").concat(uo,")[,|\\s]+(").concat(uo,")[,|\\s]+(").concat(uo,")\\s*\\)?"),_r={CSS_UNIT:new RegExp(uo),rgb:new RegExp("rgb"+Xm),rgba:new RegExp("rgba"+$m),hsl:new RegExp("hsl"+Xm),hsla:new RegExp("hsla"+$m),hsv:new RegExp("hsv"+Xm),hsva:new RegExp("hsva"+$m),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function xj(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var t=!1;if(Kg[n])n=Kg[n],t=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=_r.rgb.exec(n);return e?{r:e[1],g:e[2],b:e[3]}:(e=_r.rgba.exec(n),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=_r.hsl.exec(n),e?{h:e[1],s:e[2],l:e[3]}:(e=_r.hsla.exec(n),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=_r.hsv.exec(n),e?{h:e[1],s:e[2],v:e[3]}:(e=_r.hsva.exec(n),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=_r.hex8.exec(n),e?{r:Hn(e[1]),g:Hn(e[2]),b:Hn(e[3]),a:LE(e[4]),format:t?"name":"hex8"}:(e=_r.hex6.exec(n),e?{r:Hn(e[1]),g:Hn(e[2]),b:Hn(e[3]),format:t?"name":"hex"}:(e=_r.hex4.exec(n),e?{r:Hn(e[1]+e[1]),g:Hn(e[2]+e[2]),b:Hn(e[3]+e[3]),a:LE(e[4]+e[4]),format:t?"name":"hex8"}:(e=_r.hex3.exec(n),e?{r:Hn(e[1]+e[1]),g:Hn(e[2]+e[2]),b:Hn(e[3]+e[3]),format:t?"name":"hex"}:!1)))))))))}function di(n){return!!_r.CSS_UNIT.exec(String(n))}var On=function(){function n(t,e){t===void 0&&(t=""),e===void 0&&(e={});var r;if(t instanceof n)return t;typeof t=="number"&&(t=gj(t)),this.originalInput=t;var i=fs(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=e.format)!==null&&r!==void 0?r:i.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},n.prototype.getLuminance=function(){var t=this.toRgb(),e,r,i,o=t.r/255,a=t.g/255,s=t.b/255;return o<=.03928?e=o/12.92:e=Math.pow((o+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*e+.7152*r+.0722*i},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(t){return this.a=q1(t),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},n.prototype.toHsv=function(){var t=Yg(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},n.prototype.toHsvString=function(){var t=Yg(this.r,this.g,this.b),e=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?"hsv(".concat(e,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(e,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var t=DE(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},n.prototype.toHslString=function(){var t=DE(this.r,this.g,this.b),e=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?"hsl(".concat(e,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(e,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(t){return t===void 0&&(t=!1),qg(this.r,this.g,this.b,t)},n.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},n.prototype.toHex8=function(t){return t===void 0&&(t=!1),mj(this.r,this.g,this.b,this.a,t)},n.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},n.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(e,", ").concat(r,")"):"rgba(".concat(t,", ").concat(e,", ").concat(r,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var t=function(e){return"".concat(Math.round(fn(e,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var t=function(e){return Math.round(fn(e,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+qg(this.r,this.g,this.b,!1),e=0,r=Object.entries(Kg);e<r.length;e++){var i=r[e],o=i[0],a=i[1];if(t===a)return o}return!1},n.prototype.toString=function(t){var e=!!t;t=t??this.format;var r=!1,i=this.a<1&&this.a>=0,o=!e&&i&&(t.startsWith("hex")||t==="name");return o?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.l+=t/100,e.l=_h(e.l),new n(e)},n.prototype.brighten=function(t){t===void 0&&(t=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(t/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(t/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(t/100)))),new n(e)},n.prototype.darken=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.l-=t/100,e.l=_h(e.l),new n(e)},n.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},n.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},n.prototype.desaturate=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.s-=t/100,e.s=_h(e.s),new n(e)},n.prototype.saturate=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.s+=t/100,e.s=_h(e.s),new n(e)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(t){var e=this.toHsl(),r=(e.h+t)%360;return e.h=r<0?360+r:r,new n(e)},n.prototype.mix=function(t,e){e===void 0&&(e=50);var r=this.toRgb(),i=new n(t).toRgb(),o=e/100,a={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return new n(a)},n.prototype.analogous=function(t,e){t===void 0&&(t=6),e===void 0&&(e=30);var r=this.toHsl(),i=360/e,o=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(new n(r));return o},n.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new n(t)},n.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var e=this.toHsv(),r=e.h,i=e.s,o=e.v,a=[],s=1/t;t--;)a.push(new n({h:r,s:i,v:o})),o=(o+s)%1;return a},n.prototype.splitcomplement=function(){var t=this.toHsl(),e=t.h;return[this,new n({h:(e+72)%360,s:t.s,l:t.l}),new n({h:(e+216)%360,s:t.s,l:t.l})]},n.prototype.onBackground=function(t){var e=this.toRgb(),r=new n(t).toRgb(),i=e.a+r.a*(1-e.a);return new n({r:(e.r*e.a+r.r*r.a*(1-e.a))/i,g:(e.g*e.a+r.g*r.a*(1-e.a))/i,b:(e.b*e.a+r.b*r.a*(1-e.a))/i,a:i})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(t){for(var e=this.toHsl(),r=e.h,i=[this],o=360/t,a=1;a<t;a++)i.push(new n({h:(r+a*o)%360,s:e.s,l:e.l}));return i},n.prototype.equals=function(t){return this.toRgbString()===new n(t).toRgbString()},n}(),xh=2,NE=.16,bj=.05,Sj=.05,Ej=.15,K1=5,Z1=4,Tj=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function FE(n){var t=n.r,e=n.g,r=n.b,i=Yg(t,e,r);return{h:i.h*360,s:i.s,v:i.v}}function bh(n){var t=n.r,e=n.g,r=n.b;return"#".concat(qg(t,e,r,!1))}function wj(n,t,e){var r=e/100,i={r:(t.r-n.r)*r+n.r,g:(t.g-n.g)*r+n.g,b:(t.b-n.b)*r+n.b};return i}function UE(n,t,e){var r;return Math.round(n.h)>=60&&Math.round(n.h)<=240?r=e?Math.round(n.h)-xh*t:Math.round(n.h)+xh*t:r=e?Math.round(n.h)+xh*t:Math.round(n.h)-xh*t,r<0?r+=360:r>=360&&(r-=360),r}function BE(n,t,e){if(n.h===0&&n.s===0)return n.s;var r;return e?r=n.s-NE*t:t===Z1?r=n.s+NE:r=n.s+bj*t,r>1&&(r=1),e&&t===K1&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function GE(n,t,e){var r;return e?r=n.v+Sj*t:r=n.v-Ej*t,r>1&&(r=1),Number(r.toFixed(2))}function Bu(n){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[],r=fs(n),i=K1;i>0;i-=1){var o=FE(r),a=bh(fs({h:UE(o,i,!0),s:BE(o,i,!0),v:GE(o,i,!0)}));e.push(a)}e.push(bh(r));for(var s=1;s<=Z1;s+=1){var l=FE(r),u=bh(fs({h:UE(l,s),s:BE(l,s),v:GE(l,s)}));e.push(u)}return t.theme==="dark"?Tj.map(function(c){var h=c.index,f=c.opacity,d=bh(wj(fs(t.backgroundColor||"#141414"),fs(e[h]),f*100));return d}):e}var jm={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Zh={},Ym={};Object.keys(jm).forEach(function(n){Zh[n]=Bu(jm[n]),Zh[n].primary=Zh[n][5],Ym[n]=Bu(jm[n],{theme:"dark",backgroundColor:"#141414"}),Ym[n].primary=Ym[n][5]});var Aj=Zh.blue;const Mj=n=>{const{controlHeight:t}=n;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}},Cj=Mj;function Rj(n){const{sizeUnit:t,sizeStep:e}=n;return{sizeXXL:t*(e+8),sizeXL:t*(e+4),sizeLG:t*(e+2),sizeMD:t*(e+1),sizeMS:t*e,size:t*e,sizeSM:t*(e-1),sizeXS:t*(e-2),sizeXXS:t*(e-3)}}const J1={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Pj=xt(xt({},J1),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1}),yy=Pj;function Ij(n,t){let{generateColorPalettes:e,generateNeutralColorPalettes:r}=t;const{colorSuccess:i,colorWarning:o,colorError:a,colorInfo:s,colorPrimary:l,colorBgBase:u,colorTextBase:c}=n,h=e(l),f=e(i),d=e(o),m=e(a),g=e(s),p=r(u,c);return xt(xt({},p),{colorPrimaryBg:h[1],colorPrimaryBgHover:h[2],colorPrimaryBorder:h[3],colorPrimaryBorderHover:h[4],colorPrimaryHover:h[5],colorPrimary:h[6],colorPrimaryActive:h[7],colorPrimaryTextHover:h[8],colorPrimaryText:h[9],colorPrimaryTextActive:h[10],colorSuccessBg:f[1],colorSuccessBgHover:f[2],colorSuccessBorder:f[3],colorSuccessBorderHover:f[4],colorSuccessHover:f[4],colorSuccess:f[6],colorSuccessActive:f[7],colorSuccessTextHover:f[8],colorSuccessText:f[9],colorSuccessTextActive:f[10],colorErrorBg:m[1],colorErrorBgHover:m[2],colorErrorBorder:m[3],colorErrorBorderHover:m[4],colorErrorHover:m[5],colorError:m[6],colorErrorActive:m[7],colorErrorTextHover:m[8],colorErrorText:m[9],colorErrorTextActive:m[10],colorWarningBg:d[1],colorWarningBgHover:d[2],colorWarningBorder:d[3],colorWarningBorderHover:d[4],colorWarningHover:d[4],colorWarning:d[6],colorWarningActive:d[7],colorWarningTextHover:d[8],colorWarningText:d[9],colorWarningTextActive:d[10],colorInfoBg:g[1],colorInfoBgHover:g[2],colorInfoBorder:g[3],colorInfoBorderHover:g[4],colorInfoHover:g[4],colorInfo:g[6],colorInfoActive:g[7],colorInfoTextHover:g[8],colorInfoText:g[9],colorInfoTextActive:g[10],colorBgMask:new On("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const Oj=n=>{let t=n,e=n,r=n,i=n;return n<6&&n>=5?t=n+1:n<16&&n>=6?t=n+2:n>=16&&(t=16),n<7&&n>=5?e=4:n<8&&n>=7?e=5:n<14&&n>=8?e=6:n<16&&n>=14?e=7:n>=16&&(e=8),n<6&&n>=2?r=1:n>=6&&(r=2),n>4&&n<8?i=4:n>=8&&(i=6),{borderRadius:n>16?16:n,borderRadiusXS:r,borderRadiusSM:e,borderRadiusLG:t,borderRadiusOuter:i}},Dj=Oj;function Lj(n){const{motionUnit:t,motionBase:e,borderRadius:r,lineWidth:i}=n;return xt({motionDurationFast:`${(e+t).toFixed(1)}s`,motionDurationMid:`${(e+t*2).toFixed(1)}s`,motionDurationSlow:`${(e+t*3).toFixed(1)}s`,lineWidthBold:i+1},Dj(r))}const pi=(n,t)=>new On(n).setAlpha(t).toRgbString(),Ml=(n,t)=>new On(n).darken(t).toHexString(),Nj=n=>{const t=Bu(n);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},Fj=(n,t)=>{const e=n||"#fff",r=t||"#000";return{colorBgBase:e,colorTextBase:r,colorText:pi(r,.88),colorTextSecondary:pi(r,.65),colorTextTertiary:pi(r,.45),colorTextQuaternary:pi(r,.25),colorFill:pi(r,.15),colorFillSecondary:pi(r,.06),colorFillTertiary:pi(r,.04),colorFillQuaternary:pi(r,.02),colorBgLayout:Ml(e,4),colorBgContainer:Ml(e,0),colorBgElevated:Ml(e,0),colorBgSpotlight:pi(r,.85),colorBorder:Ml(e,15),colorBorderSecondary:Ml(e,6)}};function Uj(n){const t=new Array(10).fill(null).map((e,r)=>{const i=r-1,o=n*Math.pow(2.71828,i/5),a=r>1?Math.floor(o):Math.ceil(o);return Math.floor(a/2)*2});return t[1]=n,t.map(e=>{const r=e+8;return{size:e,lineHeight:r/e}})}const Bj=n=>{const t=Uj(n),e=t.map(i=>i.size),r=t.map(i=>i.lineHeight);return{fontSizeSM:e[0],fontSize:e[1],fontSizeLG:e[2],fontSizeXL:e[3],fontSizeHeading1:e[6],fontSizeHeading2:e[5],fontSizeHeading3:e[4],fontSizeHeading4:e[3],fontSizeHeading5:e[2],lineHeight:r[1],lineHeightLG:r[2],lineHeightSM:r[0],lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}},Gj=Bj;function kj(n){const t=Object.keys(J1).map(e=>{const r=Bu(n[e]);return new Array(10).fill(1).reduce((i,o,a)=>(i[`${e}-${a+1}`]=r[a],i),{})}).reduce((e,r)=>(e=xt(xt({},e),r),e),{});return xt(xt(xt(xt(xt(xt(xt({},n),t),Ij(n,{generateColorPalettes:Nj,generateNeutralColorPalettes:Fj})),Gj(n.fontSize)),Rj(n)),Cj(n)),Lj(n))}function qm(n){return n>=0&&n<=255}function Sh(n,t){const{r:e,g:r,b:i,a:o}=new On(n).toRgb();if(o<1)return n;const{r:a,g:s,b:l}=new On(t).toRgb();for(let u=.01;u<=1;u+=.01){const c=Math.round((e-a*(1-u))/u),h=Math.round((r-s*(1-u))/u),f=Math.round((i-l*(1-u))/u);if(qm(c)&&qm(h)&&qm(f))return new On({r:c,g:h,b:f,a:Math.round(u*100)/100}).toRgbString()}return new On({r:e,g:r,b:i,a:1}).toRgbString()}var Hj=globalThis&&globalThis.__rest||function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};function zj(n){const{override:t}=n,e=Hj(n,["override"]),r=xt({},t);Object.keys(yy).forEach(d=>{delete r[d]});const i=xt(xt({},e),r),o=480,a=576,s=768,l=992,u=1200,c=1600,h=2e3;return xt(xt(xt({},i),{colorLink:i.colorInfoText,colorLinkHover:i.colorInfoHover,colorLinkActive:i.colorInfoActive,colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Sh(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Sh(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Sh(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Sh(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:o,screenXSMin:o,screenXSMax:a-1,screenSM:a,screenSMMin:a,screenSMMax:s-1,screenMD:s,screenMDMin:s,screenMDMax:l-1,screenLG:l,screenLGMin:l,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:c-1,screenXXL:c,screenXXLMin:c,screenXXLMax:h-1,screenXXXL:h,screenXXXLMin:h,boxShadowPopoverArrow:"3px 3px 7px rgba(0, 0, 0, 0.1)",boxShadowCard:`
      0 1px 2px -2px ${new On("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new On("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new On("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}const Vj=n=>({a:{color:n.colorLink,textDecoration:n.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${n.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive},"&:active,\n  &:hover":{textDecoration:n.linkHoverDecoration,outline:0},"&:focus":{textDecoration:n.linkFocusDecoration,outline:0},"&[disabled]":{color:n.colorTextDisabled,cursor:"not-allowed"}}}),Wj=(n,t)=>{const{fontFamily:e,fontSize:r}=n,i=`[class^="${t}"], [class*=" ${t}"]`;return{[i]:{fontFamily:e,fontSize:r,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[i]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},Xj=n=>({outline:`${n.lineWidthBold}px solid ${n.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),$j=n=>({"&:focus-visible":xt({},Xj(n))});function Zd(n,t,e){return r=>{const i=Lt(()=>r==null?void 0:r.value),[o,a,s]=Jd(),{getPrefixCls:l,iconPrefixCls:u}=t$(),c=Lt(()=>l()),h=Lt(()=>({theme:o.value,token:a.value,hashId:s.value,path:["Shared",c.value]}));OE(h,()=>[{"&":Vj(a.value)}]);const f=Lt(()=>({theme:o.value,token:a.value,hashId:s.value,path:[n,i.value,u.value]}));return[OE(f,()=>{const{token:d,flush:m}=Yj(a.value),g=typeof e=="function"?e(d):e,p=xt(xt({},g),a.value[n]),v=`.${i.value}`,y=rc(d,{componentCls:v,prefixCls:i.value,iconCls:`.${u.value}`,antCls:`.${c.value}`},p),_=t(y,{hashId:s.value,prefixCls:i.value,rootPrefixCls:c.value,iconPrefixCls:u.value,overrideComponentToken:a.value[n]});return m(n,p),[Wj(a.value,i.value),_]}),s]}}const Q1=typeof CSSINJS_STATISTIC<"u";let Zg=!0;function rc(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];if(!Q1)return xt({},...t);Zg=!1;const r={};return t.forEach(i=>{Object.keys(i).forEach(a=>{Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:()=>i[a]})})}),Zg=!0,r}function jj(){}function Yj(n){let t,e=n,r=jj;return Q1&&(t=new Set,e=new Proxy(n,{get(i,o){return Zg&&t.add(o),i[o]}}),r=(i,o)=>{Array.from(t)}),{token:e,keys:t,flush:r}}const qj=w$(kj),Kj={token:yy,hashed:!0},Zj=Symbol("DesignTokenContext"),Jj=wr();function Jd(){const n=tn(Zj,Lt(()=>Jj.value||Kj)),t=Lt(()=>`${uj}-${n.value.hashed||""}`),e=Lt(()=>n.value.theme||qj),r=U$(e,Lt(()=>[yy,n.value.token]),Lt(()=>({salt:t.value,override:xt({override:n.value.token},n.value.components),formatToken:zj})));return[e,Lt(()=>r.value[0]),Lt(()=>n.value.hashed?r.value[1]:"")]}const tC=Ae({compatConfig:{MODE:3},setup(){const[,n]=Jd(),t=Lt(()=>new On(n.value.colorBgBase).toHsl().l<.5?{opacity:.65}:{});return()=>Et("svg",{style:t.value,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},[Et("g",{fill:"none","fill-rule":"evenodd"},[Et("g",{transform:"translate(24 31.67)"},[Et("ellipse",{"fill-opacity":".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},null),Et("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"},null),Et("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"},null),Et("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"},null),Et("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"},null)]),Et("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"},null),Et("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},[Et("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},null),Et("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},null)])])])}});tC.PRESENTED_IMAGE_DEFAULT=!0;const Qj=tC,eC=Ae({compatConfig:{MODE:3},setup(){const[,n]=Jd(),t=Lt(()=>{const{colorFill:e,colorFillTertiary:r,colorFillQuaternary:i,colorBgContainer:o}=n.value;return{borderColor:new On(e).onBackground(o).toHexString(),shadowColor:new On(r).onBackground(o).toHexString(),contentColor:new On(i).onBackground(o).toHexString()}});return()=>Et("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},[Et("g",{transform:"translate(0 1)",fill:"none","fill-rule":"evenodd"},[Et("ellipse",{fill:t.value.shadowColor,cx:"32",cy:"33",rx:"32",ry:"7"},null),Et("g",{"fill-rule":"nonzero",stroke:t.value.borderColor},[Et("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"},null),Et("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:t.value.contentColor},null)])])])}});eC.PRESENTED_IMAGE_SIMPLE=!0;const t9=eC,e9=n=>{const{componentCls:t,margin:e,marginXS:r,marginXL:i,fontSize:o,lineHeight:a}=n;return{[t]:{marginInline:r,fontSize:o,lineHeight:a,textAlign:"center",[`${t}-image`]:{height:n.emptyImgHeight,marginBottom:r,opacity:n.opacityImage,img:{height:"100%"},svg:{height:"100%",margin:"auto"}},[`${t}-footer`]:{marginTop:e},"&-normal":{marginBlock:i,color:n.colorTextDisabled,[`${t}-image`]:{height:n.emptyImgHeightMD}},"&-small":{marginBlock:r,color:n.colorTextDisabled,[`${t}-image`]:{height:n.emptyImgHeightSM}}}}},n9=Zd("Empty",n=>{const{componentCls:t,controlHeightLG:e}=n,r=rc(n,{emptyImgCls:`${t}-img`,emptyImgHeight:e*2.5,emptyImgHeightMD:e,emptyImgHeightSM:e*.875});return[e9(r)]});var r9=globalThis&&globalThis.__rest||function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const nC=Et(Qj,null,null),rC=Et(t9,null,null),i9=()=>({prefixCls:String,imageStyle:my(),image:Hg(),description:Hg()}),xy=Ae({name:"AEmpty",compatConfig:{MODE:3},inheritAttrs:!1,props:i9(),setup(n,t){let{slots:e={},attrs:r}=t;const{direction:i,prefixCls:o}=sl("empty",n),[a,s]=n9(o);return()=>{var l,u;const c=o.value,h=xt(xt({},n),r),{image:f=((l=e.image)===null||l===void 0?void 0:l.call(e))||nC,description:d=((u=e.description)===null||u===void 0?void 0:u.call(e))||void 0,imageStyle:m,class:g=""}=h,p=r9(h,["image","description","imageStyle","class"]);return a(Et(l$,{componentName:"Empty",children:v=>{const y=typeof d<"u"?d:v.description,_=typeof y=="string"?y:"empty";let T=null;return typeof f=="string"?T=Et("img",{alt:_,src:f},null):T=f,Et("div",ia({class:ec(c,g,s.value,{[`${c}-normal`]:f===rC,[`${c}-rtl`]:i.value==="rtl"})},p),[Et("div",{class:`${c}-image`,style:m},[T]),y&&Et("p",{class:`${c}-description`},[y]),e.default&&Et("div",{class:`${c}-footer`},[b1(e.default())])])}},null))}}});xy.PRESENTED_IMAGE_DEFAULT=nC;xy.PRESENTED_IMAGE_SIMPLE=rC;const Cl=w1(xy),o9=n=>{const{prefixCls:t}=sl("empty",n);return(r=>{switch(r){case"Table":case"List":return Et(Cl,{image:Cl.PRESENTED_IMAGE_SIMPLE},null);case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Et(Cl,{image:Cl.PRESENTED_IMAGE_SIMPLE,class:`${t.value}-small`},null);default:return Et(Cl,null,null)}})(n.componentName)},a9=Symbol("SizeContextKey"),s9=()=>tn(a9,Be(void 0)),sl=(n,t)=>{const e=s9(),r=C1(),i=tn(A1,xt(xt({},M1),{renderEmpty:x=>xa(o9,{componentName:x})})),o=Lt(()=>i.getPrefixCls(n,t.prefixCls)),a=Lt(()=>{var x,O;return(x=t.direction)!==null&&x!==void 0?x:(O=i.direction)===null||O===void 0?void 0:O.value}),s=Lt(()=>{var x;return(x=t.iconPrefixCls)!==null&&x!==void 0?x:i.iconPrefixCls.value}),l=Lt(()=>i.getPrefixCls()),u=Lt(()=>{var x;return(x=i.autoInsertSpaceInButton)===null||x===void 0?void 0:x.value}),c=i.renderEmpty,h=i.space,f=i.pageHeader,d=i.form,m=Lt(()=>{var x,O;return(x=t.getTargetContainer)!==null&&x!==void 0?x:(O=i.getTargetContainer)===null||O===void 0?void 0:O.value}),g=Lt(()=>{var x,O,b;return(O=(x=t.getContainer)!==null&&x!==void 0?x:t.getPopupContainer)!==null&&O!==void 0?O:(b=i.getPopupContainer)===null||b===void 0?void 0:b.value}),p=Lt(()=>{var x,O;return(x=t.dropdownMatchSelectWidth)!==null&&x!==void 0?x:(O=i.dropdownMatchSelectWidth)===null||O===void 0?void 0:O.value}),v=Lt(()=>{var x;return(t.virtual===void 0?((x=i.virtual)===null||x===void 0?void 0:x.value)!==!1:t.virtual!==!1)&&p.value!==!1}),y=Lt(()=>t.size||e.value),_=Lt(()=>{var x,O,b;return(x=t.autocomplete)!==null&&x!==void 0?x:(b=(O=i.input)===null||O===void 0?void 0:O.value)===null||b===void 0?void 0:b.autocomplete}),T=Lt(()=>{var x;return(x=t.disabled)!==null&&x!==void 0?x:r.value}),E=Lt(()=>{var x;return(x=t.csp)!==null&&x!==void 0?x:i.csp}),S=Lt(()=>{var x,O;return(x=t.wave)!==null&&x!==void 0?x:(O=i.wave)===null||O===void 0?void 0:O.value});return{configProvider:i,prefixCls:o,direction:a,size:y,getTargetContainer:m,getPopupContainer:g,space:h,pageHeader:f,form:d,autoInsertSpaceInButton:u,renderEmpty:c,virtual:v,dropdownMatchSelectWidth:p,rootPrefixCls:l,getPrefixCls:i.getPrefixCls,autocomplete:_,csp:E,iconPrefixCls:s,disabled:T,select:i.select,wave:S}};function kE(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function iC(n,t,e){return t&&kE(n.prototype,t),e&&kE(n,e),n}function Jh(){return(Jh=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}function oC(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}function aC(n,t){if(n==null)return{};var e,r,i={},o=Object.keys(n);for(r=0;r<o.length;r++)t.indexOf(e=o[r])>=0||(i[e]=n[e]);return i}function HE(n){return((t=n)!=null&&typeof t=="object"&&Array.isArray(t)===!1)==1&&Object.prototype.toString.call(n)==="[object Object]";var t}var sC=Object.prototype,lC=sC.toString,l9=sC.hasOwnProperty,uC=/^\s*function (\w+)/;function zE(n){var t,e=(t=n==null?void 0:n.type)!==null&&t!==void 0?t:n;if(e){var r=e.toString().match(uC);return r?r[1]:""}return""}var Ra=function(n){var t,e;return HE(n)!==!1&&typeof(t=n.constructor)=="function"&&HE(e=t.prototype)!==!1&&e.hasOwnProperty("isPrototypeOf")!==!1},u9=function(n){return n},An=u9,Gu=function(n,t){return l9.call(n,t)},c9=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n},qs=Array.isArray||function(n){return lC.call(n)==="[object Array]"},Ks=function(n){return lC.call(n)==="[object Function]"},cd=function(n){return Ra(n)&&Gu(n,"_vueTypes_name")},cC=function(n){return Ra(n)&&(Gu(n,"type")||["_vueTypes_name","validator","default","required"].some(function(t){return Gu(n,t)}))};function by(n,t){return Object.defineProperty(n.bind(t),"__original",{value:n})}function Ua(n,t,e){var r;e===void 0&&(e=!1);var i=!0,o="";r=Ra(n)?n:{type:n};var a=cd(r)?r._vueTypes_name+" - ":"";if(cC(r)&&r.type!==null){if(r.type===void 0||r.type===!0||!r.required&&t===void 0)return i;qs(r.type)?(i=r.type.some(function(h){return Ua(h,t,!0)===!0}),o=r.type.map(function(h){return zE(h)}).join(" or ")):i=(o=zE(r))==="Array"?qs(t):o==="Object"?Ra(t):o==="String"||o==="Number"||o==="Boolean"||o==="Function"?function(h){if(h==null)return"";var f=h.constructor.toString().match(uC);return f?f[1]:""}(t)===o:t instanceof r.type}if(!i){var s=a+'value "'+t+'" should be of type "'+o+'"';return e===!1?(An(s),!1):s}if(Gu(r,"validator")&&Ks(r.validator)){var l=An,u=[];if(An=function(h){u.push(h)},i=r.validator(t),An=l,!i){var c=(u.length>1?"* ":"")+u.join(`
* `);return u.length=0,e===!1?(An(c),i):c}}return i}function Kn(n,t){var e=Object.defineProperties(t,{_vueTypes_name:{value:n,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(i){return i!==void 0||this.default?Ks(i)||Ua(this,i,!0)===!0?(this.default=qs(i)?function(){return[].concat(i)}:Ra(i)?function(){return Object.assign({},i)}:i,this):(An(this._vueTypes_name+' - invalid default value: "'+i+'"'),this):this}}}),r=e.validator;return Ks(r)&&(e.validator=by(r,e)),e}function ei(n,t){var e=Kn(n,t);return Object.defineProperty(e,"validate",{value:function(r){return Ks(this.validator)&&An(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=by(r,this),this}})}function VE(n,t,e){var r,i,o=(r=t,i={},Object.getOwnPropertyNames(r).forEach(function(h){i[h]=Object.getOwnPropertyDescriptor(r,h)}),Object.defineProperties({},i));if(o._vueTypes_name=n,!Ra(e))return o;var a,s,l=e.validator,u=aC(e,["validator"]);if(Ks(l)){var c=o.validator;c&&(c=(s=(a=c).__original)!==null&&s!==void 0?s:a),o.validator=by(c?function(h){return c.call(this,h)&&l.call(this,h)}:l,o)}return Object.assign(o,u)}function Qd(n){return n.replace(/^(?!\s*$)/gm,"  ")}var h9=function(){return ei("any",{})},f9=function(){return ei("function",{type:Function})},d9=function(){return ei("boolean",{type:Boolean})},p9=function(){return ei("string",{type:String})},m9=function(){return ei("number",{type:Number})},v9=function(){return ei("array",{type:Array})},g9=function(){return ei("object",{type:Object})},_9=function(){return Kn("integer",{type:Number,validator:function(n){return c9(n)}})},y9=function(){return Kn("symbol",{validator:function(n){return typeof n=="symbol"}})};function x9(n,t){if(t===void 0&&(t="custom validation failed"),typeof n!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return Kn(n.name||"<<anonymous function>>",{validator:function(e){var r=n(e);return r||An(this._vueTypes_name+" - "+t),r}})}function b9(n){if(!qs(n))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var t='oneOf - value should be one of "'+n.join('", "')+'".',e=n.reduce(function(r,i){if(i!=null){var o=i.constructor;r.indexOf(o)===-1&&r.push(o)}return r},[]);return Kn("oneOf",{type:e.length>0?e:void 0,validator:function(r){var i=n.indexOf(r)!==-1;return i||An(t),i}})}function S9(n){if(!qs(n))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var t=!1,e=[],r=0;r<n.length;r+=1){var i=n[r];if(cC(i)){if(cd(i)&&i._vueTypes_name==="oneOf"){e=e.concat(i.type);continue}if(Ks(i.validator)&&(t=!0),i.type!==!0&&i.type){e=e.concat(i.type);continue}}e.push(i)}return e=e.filter(function(o,a){return e.indexOf(o)===a}),Kn("oneOfType",t?{type:e,validator:function(o){var a=[],s=n.some(function(l){var u=Ua(cd(l)&&l._vueTypes_name==="oneOf"?l.type||null:l,o,!0);return typeof u=="string"&&a.push(u),u===!0});return s||An("oneOfType - provided value does not match any of the "+a.length+` passed-in validators:
`+Qd(a.join(`
`))),s}}:{type:e})}function E9(n){return Kn("arrayOf",{type:Array,validator:function(t){var e,r=t.every(function(i){return(e=Ua(n,i,!0))===!0});return r||An(`arrayOf - value validation error:
`+Qd(e)),r}})}function T9(n){return Kn("instanceOf",{type:n})}function w9(n){return Kn("objectOf",{type:Object,validator:function(t){var e,r=Object.keys(t).every(function(i){return(e=Ua(n,t[i],!0))===!0});return r||An(`objectOf - value validation error:
`+Qd(e)),r}})}function A9(n){var t=Object.keys(n),e=t.filter(function(i){var o;return!!(!((o=n[i])===null||o===void 0)&&o.required)}),r=Kn("shape",{type:Object,validator:function(i){var o=this;if(!Ra(i))return!1;var a=Object.keys(i);if(e.length>0&&e.some(function(l){return a.indexOf(l)===-1})){var s=e.filter(function(l){return a.indexOf(l)===-1});return An(s.length===1?'shape - required property "'+s[0]+'" is not defined.':'shape - required properties "'+s.join('", "')+'" are not defined.'),!1}return a.every(function(l){if(t.indexOf(l)===-1)return o._vueTypes_isLoose===!0||(An('shape - shape definition does not include a "'+l+'" property. Allowed keys: "'+t.join('", "')+'".'),!1);var u=Ua(n[l],i[l],!0);return typeof u=="string"&&An('shape - "'+l+`" property validation error:
 `+Qd(u)),u===!0})}});return Object.defineProperty(r,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(r,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),r}var Br=function(){function n(){}return n.extend=function(t){var e=this;if(qs(t))return t.forEach(function(h){return e.extend(h)}),this;var r=t.name,i=t.validate,o=i!==void 0&&i,a=t.getter,s=a!==void 0&&a,l=aC(t,["name","validate","getter"]);if(Gu(this,r))throw new TypeError('[VueTypes error]: Type "'+r+'" already defined');var u,c=l.type;return cd(c)?(delete l.type,Object.defineProperty(this,r,s?{get:function(){return VE(r,c,l)}}:{value:function(){var h,f=VE(r,c,l);return f.validator&&(f.validator=(h=f.validator).bind.apply(h,[f].concat([].slice.call(arguments)))),f}})):(u=s?{get:function(){var h=Object.assign({},l);return o?ei(r,h):Kn(r,h)},enumerable:!0}:{value:function(){var h,f,d=Object.assign({},l);return h=o?ei(r,d):Kn(r,d),d.validator&&(h.validator=(f=d.validator).bind.apply(f,[h].concat([].slice.call(arguments)))),h},enumerable:!0},Object.defineProperty(this,r,u))},iC(n,null,[{key:"any",get:function(){return h9()}},{key:"func",get:function(){return f9().def(this.defaults.func)}},{key:"bool",get:function(){return d9().def(this.defaults.bool)}},{key:"string",get:function(){return p9().def(this.defaults.string)}},{key:"number",get:function(){return m9().def(this.defaults.number)}},{key:"array",get:function(){return v9().def(this.defaults.array)}},{key:"object",get:function(){return g9().def(this.defaults.object)}},{key:"integer",get:function(){return _9().def(this.defaults.integer)}},{key:"symbol",get:function(){return y9()}}]),n}();function hC(n){var t;return n===void 0&&(n={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(t=function(e){function r(){return e.apply(this,arguments)||this}return oC(r,e),iC(r,null,[{key:"sensibleDefaults",get:function(){return Jh({},this.defaults)},set:function(i){this.defaults=i!==!1?Jh({},i!==!0?i:n):{}}}]),r}(Br)).defaults=Jh({},n),t}Br.defaults={},Br.custom=x9,Br.oneOf=b9,Br.instanceOf=T9,Br.oneOfType=S9,Br.arrayOf=E9,Br.objectOf=w9,Br.shape=A9,Br.utils={validate:function(n,t){return Ua(t,n,!0)===!0},toType:function(n,t,e){return e===void 0&&(e=!1),e?ei(n,t):Kn(n,t)}};(function(n){function t(){return n.apply(this,arguments)||this}return oC(t,n),t})(hC());const fC=hC({func:void 0,bool:void 0,string:void 0,number:void 0,array:void 0,object:void 0,integer:void 0});fC.extend([{name:"looseBool",getter:!0,type:Boolean,default:void 0},{name:"style",getter:!0,type:[String,Object],default:void 0},{name:"VueNode",getter:!0,type:null}]);const hd=fC,dC=(n,t,e)=>{b$(n,`[ant-design-vue: ${t}] ${e}`)},M9=n=>{if(!n)return!1;if(n.offsetParent)return!0;if(n.getBBox){const t=n.getBBox();if(t.width||t.height)return!0}if(n.getBoundingClientRect){const t=n.getBoundingClientRect();if(t.width||t.height)return!0}return!1};var C9=typeof global=="object"&&global&&global.Object===Object&&global;const pC=C9;var R9=typeof self=="object"&&self&&self.Object===Object&&self,P9=pC||R9||Function("return this")();const Eo=P9;var I9=Eo.Symbol;const fd=I9;var mC=Object.prototype,O9=mC.hasOwnProperty,D9=mC.toString,Rl=fd?fd.toStringTag:void 0;function L9(n){var t=O9.call(n,Rl),e=n[Rl];try{n[Rl]=void 0;var r=!0}catch{}var i=D9.call(n);return r&&(t?n[Rl]=e:delete n[Rl]),i}var N9=Object.prototype,F9=N9.toString;function U9(n){return F9.call(n)}var B9="[object Null]",G9="[object Undefined]",WE=fd?fd.toStringTag:void 0;function ic(n){return n==null?n===void 0?G9:B9:WE&&WE in Object(n)?L9(n):U9(n)}function vC(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var k9="[object AsyncFunction]",H9="[object Function]",z9="[object GeneratorFunction]",V9="[object Proxy]";function gC(n){if(!vC(n))return!1;var t=ic(n);return t==H9||t==z9||t==k9||t==V9}var W9=Eo["__core-js_shared__"];const Km=W9;var XE=function(){var n=/[^.]+$/.exec(Km&&Km.keys&&Km.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function X9(n){return!!XE&&XE in n}var $9=Function.prototype,j9=$9.toString;function Ba(n){if(n!=null){try{return j9.call(n)}catch{}try{return n+""}catch{}}return""}var Y9=/[\\^$.*+?()[\]{}|]/g,q9=/^\[object .+?Constructor\]$/,K9=Function.prototype,Z9=Object.prototype,J9=K9.toString,Q9=Z9.hasOwnProperty,t7=RegExp("^"+J9.call(Q9).replace(Y9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function e7(n){if(!vC(n)||X9(n))return!1;var t=gC(n)?t7:q9;return t.test(Ba(n))}function n7(n,t){return n==null?void 0:n[t]}function oc(n,t){var e=n7(n,t);return e7(e)?e:void 0}var r7=oc(Eo,"Map");const Jg=r7;var i7=Array.isArray;const o7=i7;function Sy(n){return n!=null&&typeof n=="object"}var a7="[object Arguments]";function $E(n){return Sy(n)&&ic(n)==a7}var _C=Object.prototype,s7=_C.hasOwnProperty,l7=_C.propertyIsEnumerable,u7=$E(function(){return arguments}())?$E:function(n){return Sy(n)&&s7.call(n,"callee")&&!l7.call(n,"callee")};const c7=u7;function h7(){return!1}var yC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jE=yC&&typeof module=="object"&&module&&!module.nodeType&&module,f7=jE&&jE.exports===yC,YE=f7?Eo.Buffer:void 0,d7=YE?YE.isBuffer:void 0,p7=d7||h7;const m7=p7;var v7=9007199254740991;function xC(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=v7}var g7="[object Arguments]",_7="[object Array]",y7="[object Boolean]",x7="[object Date]",b7="[object Error]",S7="[object Function]",E7="[object Map]",T7="[object Number]",w7="[object Object]",A7="[object RegExp]",M7="[object Set]",C7="[object String]",R7="[object WeakMap]",P7="[object ArrayBuffer]",I7="[object DataView]",O7="[object Float32Array]",D7="[object Float64Array]",L7="[object Int8Array]",N7="[object Int16Array]",F7="[object Int32Array]",U7="[object Uint8Array]",B7="[object Uint8ClampedArray]",G7="[object Uint16Array]",k7="[object Uint32Array]",be={};be[O7]=be[D7]=be[L7]=be[N7]=be[F7]=be[U7]=be[B7]=be[G7]=be[k7]=!0;be[g7]=be[_7]=be[P7]=be[y7]=be[I7]=be[x7]=be[b7]=be[S7]=be[E7]=be[T7]=be[w7]=be[A7]=be[M7]=be[C7]=be[R7]=!1;function H7(n){return Sy(n)&&xC(n.length)&&!!be[ic(n)]}function z7(n){return function(t){return n(t)}}var bC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,au=bC&&typeof module=="object"&&module&&!module.nodeType&&module,V7=au&&au.exports===bC,Zm=V7&&pC.process,W7=function(){try{var n=au&&au.require&&au.require("util").types;return n||Zm&&Zm.binding&&Zm.binding("util")}catch{}}();const qE=W7;var KE=qE&&qE.isTypedArray,X7=KE?z7(KE):H7;const $7=X7;var j7=Object.prototype;function SC(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||j7;return n===e}function Y7(n,t){return function(e){return n(t(e))}}var q7=Y7(Object.keys,Object);const K7=q7;var Z7=Object.prototype,J7=Z7.hasOwnProperty;function Q7(n){if(!SC(n))return K7(n);var t=[];for(var e in Object(n))J7.call(n,e)&&e!="constructor"&&t.push(e);return t}function tY(n){return n!=null&&xC(n.length)&&!gC(n)}var eY=oc(Eo,"DataView");const Qg=eY;var nY=oc(Eo,"Promise");const t_=nY;var rY=oc(Eo,"Set");const e_=rY;var iY=oc(Eo,"WeakMap");const n_=iY;var ZE="[object Map]",oY="[object Object]",JE="[object Promise]",QE="[object Set]",tT="[object WeakMap]",eT="[object DataView]",aY=Ba(Qg),sY=Ba(Jg),lY=Ba(t_),uY=Ba(e_),cY=Ba(n_),$o=ic;(Qg&&$o(new Qg(new ArrayBuffer(1)))!=eT||Jg&&$o(new Jg)!=ZE||t_&&$o(t_.resolve())!=JE||e_&&$o(new e_)!=QE||n_&&$o(new n_)!=tT)&&($o=function(n){var t=ic(n),e=t==oY?n.constructor:void 0,r=e?Ba(e):"";if(r)switch(r){case aY:return eT;case sY:return ZE;case lY:return JE;case uY:return QE;case cY:return tT}return t});const hY=$o;ld("bottomLeft","bottomRight","topLeft","topRight");function Go(n){const t=typeof n=="function"?n():n,e=Be(t);function r(i){e.value=i}return[e,r]}var fY=Symbol("iconContext"),EC=function(){return tn(fY,{prefixCls:Be("anticon"),rootClassName:Be(""),csp:Be()})};function Ey(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function dY(n,t){return n&&n.contains?n.contains(t):!1}var nT="data-vc-order",pY="vc-icon-key",r_=new Map;function TC(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=n.mark;return t?t.startsWith("data-")?t:"data-".concat(t):pY}function Ty(n){if(n.attachTo)return n.attachTo;var t=document.querySelector("head");return t||document.body}function mY(n){return n==="queue"?"prependQueue":n?"prepend":"append"}function wC(n){return Array.from((r_.get(n)||n).children).filter(function(t){return t.tagName==="STYLE"})}function AC(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ey())return null;var e=t.csp,r=t.prepend,i=document.createElement("style");i.setAttribute(nT,mY(r)),e&&e.nonce&&(i.nonce=e.nonce),i.innerHTML=n;var o=Ty(t),a=o.firstChild;if(r){if(r==="queue"){var s=wC(o).filter(function(l){return["prepend","prependQueue"].includes(l.getAttribute(nT))});if(s.length)return o.insertBefore(i,s[s.length-1].nextSibling),i}o.insertBefore(i,a)}else o.appendChild(i);return i}function vY(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=Ty(t);return wC(e).find(function(r){return r.getAttribute(TC(t))===n})}function gY(n,t){var e=r_.get(n);if(!e||!dY(document,e)){var r=AC("",t),i=r.parentNode;r_.set(n,i),n.removeChild(r)}}function _Y(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Ty(e);gY(r,e);var i=vY(t,e);if(i)return e.csp&&e.csp.nonce&&i.nonce!==e.csp.nonce&&(i.nonce=e.csp.nonce),i.innerHTML!==n&&(i.innerHTML=n),i;var o=AC(n,e);return o.setAttribute(TC(e),t),o}function rT(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),r.forEach(function(i){yY(n,i,e[i])})}return n}function yY(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function iT(n){return typeof n=="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(typeof n.icon=="object"||typeof n.icon=="function")}function i_(n,t,e){return e?xa(n.tag,rT({key:t},e,n.attrs),(n.children||[]).map(function(r,i){return i_(r,"".concat(t,"-").concat(n.tag,"-").concat(i))})):xa(n.tag,rT({key:t},n.attrs),(n.children||[]).map(function(r,i){return i_(r,"".concat(t,"-").concat(n.tag,"-").concat(i))}))}function MC(n){return Bu(n)[0]}function CC(n){return n?Array.isArray(n)?n:[n]:[]}var xY=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;function RC(n){return n&&n.getRootNode&&n.getRootNode()}function bY(n){return Ey()?RC(n)instanceof ShadowRoot:!1}function SY(n){return bY(n)?RC(n):null}var EY=function(){var t=EC(),e=t.prefixCls,r=t.csp,i=Ad(),o=xY;e&&(o=o.replace(/anticon/g,e.value)),ku(function(){if(Ey()){var a=i.vnode.el,s=SY(a);_Y(o,"@ant-design-vue-icons",{prepend:!0,csp:r.value,attachTo:s})}})},TY=["icon","primaryColor","secondaryColor"];function wY(n,t){if(n==null)return{};var e=AY(n,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(e[r]=n[r])}return e}function AY(n,t){if(n==null)return{};var e={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(e[i]=n[i]);return e}function Qh(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),r.forEach(function(i){MY(n,i,e[i])})}return n}function MY(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var su=Oa({primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1});function CY(n){var t=n.primaryColor,e=n.secondaryColor;su.primaryColor=t,su.secondaryColor=e||MC(t),su.calculated=!!e}function RY(){return Qh({},su)}var ll=function(t,e){var r=Qh({},t,e.attrs),i=r.icon,o=r.primaryColor,a=r.secondaryColor,s=wY(r,TY),l=su;if(o&&(l={primaryColor:o,secondaryColor:a||MC(o)}),iT(i),!iT(i))return null;var u=i;return u&&typeof u.icon=="function"&&(u=Qh({},u,{icon:u.icon(l.primaryColor,l.secondaryColor)})),i_(u.icon,"svg-".concat(u.name),Qh({},s,{"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};ll.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String};ll.inheritAttrs=!1;ll.displayName="IconBase";ll.getTwoToneColors=RY;ll.setTwoToneColors=CY;const wy=ll;function PY(n,t){return LY(n)||DY(n,t)||OY(n,t)||IY()}function IY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OY(n,t){if(n){if(typeof n=="string")return oT(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oT(n,t)}}function oT(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function DY(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var r=[],i=!0,o=!1,a,s;try{for(e=e.call(n);!(i=(a=e.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}return r}}function LY(n){if(Array.isArray(n))return n}function PC(n){var t=CC(n),e=PY(t,2),r=e[0],i=e[1];return wy.setTwoToneColors({primaryColor:r,secondaryColor:i})}function NY(){var n=wy.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var FY=Ae({name:"InsertStyles",setup:function(){return EY(),function(){return null}}}),UY=["class","icon","spin","rotate","tabindex","twoToneColor","onClick"];function BY(n,t){return zY(n)||HY(n,t)||kY(n,t)||GY()}function GY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kY(n,t){if(n){if(typeof n=="string")return aT(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return aT(n,t)}}function aT(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function HY(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var r=[],i=!0,o=!1,a,s;try{for(e=e.call(n);!(i=(a=e.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}return r}}function zY(n){if(Array.isArray(n))return n}function sT(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),r.forEach(function(i){zl(n,i,e[i])})}return n}function zl(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function VY(n,t){if(n==null)return{};var e=WY(n,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(e[r]=n[r])}return e}function WY(n,t){if(n==null)return{};var e={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(e[i]=n[i]);return e}PC(Aj.primary);var ul=function(t,e){var r,i=sT({},t,e.attrs),o=i.class,a=i.icon,s=i.spin,l=i.rotate,u=i.tabindex,c=i.twoToneColor,h=i.onClick,f=VY(i,UY),d=EC(),m=d.prefixCls,g=d.rootClassName,p=(r={},zl(r,g.value,!!g.value),zl(r,m.value,!0),zl(r,"".concat(m.value,"-").concat(a.name),!!a.name),zl(r,"".concat(m.value,"-spin"),!!s||a.name==="loading"),r),v=u;v===void 0&&h&&(v=-1);var y=l?{msTransform:"rotate(".concat(l,"deg)"),transform:"rotate(".concat(l,"deg)")}:void 0,_=CC(c),T=BY(_,2),E=T[0],S=T[1];return Et("span",sT({role:"img","aria-label":a.name},f,{onClick:h,class:[p,o],tabindex:v}),[Et(wy,{icon:a,primaryColor:E,secondaryColor:S,style:y},null),Et(FY,null,null)])};ul.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:[String,Array]};ul.displayName="AntdIcon";ul.inheritAttrs=!1;ul.getTwoToneColor=NY;ul.setTwoToneColor=PC;const XY=ul;var $Y={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const jY=$Y;function lT(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),r.forEach(function(i){YY(n,i,e[i])})}return n}function YY(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Ay=function(t,e){var r=lT({},t,e.attrs);return Et(XY,lT({},r,{icon:jY}),null)};Ay.displayName="LoadingOutlined";Ay.inheritAttrs=!1;const uT=Ay;function IC(n){const t=Symbol("contextKey");return{useProvide:(i,o)=>{const a=Oa({});return ws(t,a),E_(()=>{xt(a,i,o||{})}),a},useInject:()=>tn(t,n)||{}}}const qY=n=>{const{componentCls:t}=n;return{[t]:{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},KY=qY,ZY=n=>{const{componentCls:t}=n;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item`]:{"&:empty":{display:"none"}}}}},JY=Zd("Space",n=>[ZY(n),KY(n)]);var QY="[object Map]",tq="[object Set]",eq=Object.prototype,nq=eq.hasOwnProperty;function OC(n){if(n==null)return!0;if(tY(n)&&(o7(n)||typeof n=="string"||typeof n.splice=="function"||m7(n)||$7(n)||c7(n)))return!n.length;var t=hY(n);if(t==QY||t==tq)return!n.size;if(SC(n))return!Q7(n).length;for(var e in n)if(nq.call(n,e))return!1;return!0}const rq=()=>({compactSize:String,compactDirection:hd.oneOf(ld("horizontal","vertical")).def("horizontal"),isFirstItem:iu(),isLastItem:iu()}),My=IC(null),iq=(n,t)=>{const e=My.useInject(),r=Lt(()=>{if(!e||OC(e))return"";const{compactDirection:i,isFirstItem:o,isLastItem:a}=e,s=i==="vertical"?"-vertical-":"-";return ec({[`${n.value}-compact${s}item`]:!0,[`${n.value}-compact${s}first-item`]:o,[`${n.value}-compact${s}last-item`]:a,[`${n.value}-compact${s}item-rtl`]:t.value==="rtl"})});return{compactSize:Lt(()=>e==null?void 0:e.compactSize),compactDirection:Lt(()=>e==null?void 0:e.compactDirection),compactItemClassnames:r}},oq=()=>({prefixCls:String,size:{type:String},direction:hd.oneOf(ld("horizontal","vertical")).def("horizontal"),align:hd.oneOf(ld("start","end","center","baseline")),block:{type:Boolean,default:void 0}}),aq=Ae({name:"CompactItem",props:rq(),setup(n,t){let{slots:e}=t;return My.useProvide(n),()=>{var r;return(r=e.default)===null||r===void 0?void 0:r.call(e)}}});oq();function sq(n,t,e){const{focusElCls:r,focus:i,borderElCls:o}=e,a=o?"> *":"",s=["hover",i?"focus":null,"active"].filter(Boolean).map(l=>`&:${l} ${a}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:-n.lineWidth},"&-item":xt(xt({[s]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function lq(n,t,e){const{borderElCls:r}=e,i=r?`> ${r}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${i}, &${n}-sm ${i}, &${n}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${i}, &${n}-sm ${i}, &${n}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function uq(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:e}=n,r=`${e}-compact`;return{[r]:xt(xt({},sq(n,r,t)),lq(e,r,t))}}const cq=n=>{const{componentCls:t,colorPrimary:e}=n;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${e})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${n.motionEaseOutCirc}`,`opacity 2s ${n.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},hq=Zd("Wave",n=>[cq(n)]);function fq(n){const t=(n||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function Jm(n){return n&&n!=="#fff"&&n!=="#ffffff"&&n!=="rgb(255, 255, 255)"&&n!=="rgba(255, 255, 255, 1)"&&fq(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&n!=="transparent"}function dq(n){const{borderTopColor:t,borderColor:e,backgroundColor:r}=getComputedStyle(n);return Jm(t)?t:Jm(e)?e:Jm(r)?r:null}function Qm(n){return Number.isNaN(n)?0:n}const pq=Ae({props:{target:my(),className:String},setup(n){const t=wr(null),[e,r]=Go(null),[i,o]=Go([]),[a,s]=Go(0),[l,u]=Go(0),[c,h]=Go(0),[f,d]=Go(0),[m,g]=Go(!1);function p(){const{target:x}=n,O=getComputedStyle(x);r(dq(x));const b=O.position==="static",{borderLeftWidth:A,borderTopWidth:N}=O;s(b?x.offsetLeft:Qm(-parseFloat(A))),u(b?x.offsetTop:Qm(-parseFloat(N))),h(x.offsetWidth),d(x.offsetHeight);const{borderTopLeftRadius:U,borderTopRightRadius:et,borderBottomLeftRadius:L,borderBottomRightRadius:D}=O;o([U,et,D,L].map(B=>Qm(parseFloat(B))))}let v,y,_;const T=()=>{clearTimeout(_),kg.cancel(y),v==null||v.disconnect()},E=()=>{var x;const O=(x=t.value)===null||x===void 0?void 0:x.parentElement;O&&(pw(null,O),O.parentElement&&O.parentElement.removeChild(O))};Ui(()=>{T(),_=setTimeout(()=>{E()},5e3);const{target:x}=n;x&&(y=kg(()=>{p(),g(!0)}),typeof ResizeObserver<"u"&&(v=new ResizeObserver(p),v.observe(x)))}),Da(()=>{T()});const S=x=>{x.propertyName==="opacity"&&E()};return()=>{if(!m.value)return null;const x={left:`${a.value}px`,top:`${l.value}px`,width:`${c.value}px`,height:`${f.value}px`,borderRadius:i.value.map(O=>`${O}px`).join(" ")};return e&&(x["--wave-color"]=e.value),Et(Rd,{appear:!0,name:"wave-motion",appearFromClass:"wave-motion-appear",appearActiveClass:"wave-motion-appear",appearToClass:"wave-motion-appear wave-motion-appear-active"},{default:()=>[Et("div",{ref:t,class:n.className,style:x,onTransitionend:S},null)]})}}});function mq(n,t){const e=document.createElement("div");e.style.position="absolute",e.style.left="0px",e.style.top="0px",n==null||n.insertBefore(e,n==null?void 0:n.firstChild),pw(Et(pq,{target:n,className:t},null),e)}function vq(n,t,e){function r(){var i;const o=Gg(n);!((i=e==null?void 0:e.value)===null||i===void 0)&&i.disabled||!o||mq(o,t.value)}return r}const gq=Ae({compatConfig:{MODE:3},name:"Wave",props:{disabled:Boolean},setup(n,t){let{slots:e}=t;const r=Ad(),{prefixCls:i,wave:o}=sl("wave",n),[,a]=hq(i),s=vq(r,Lt(()=>ec(i.value,a.value)),o);let l;const u=()=>{Gg(r).removeEventListener("click",l,!0)};return Ui(()=>{Pi(()=>n.disabled,()=>{u(),ku(()=>{const c=Gg(r);c==null||c.removeEventListener("click",l,!0),!(!c||c.nodeType!==1||n.disabled)&&(l=h=>{h.target.tagName==="INPUT"||!M9(h.target)||!c.getAttribute||c.getAttribute("disabled")||c.disabled||c.className.includes("disabled")||c.className.includes("-leave")||s()},c.addEventListener("click",l,!0))})},{immediate:!0,flush:"post"})}),Da(()=>{u()}),()=>{var c;return(c=e.default)===null||c===void 0?void 0:c.call(e)[0]}}}),_q=()=>({prefixCls:String,type:String,htmlType:{type:String,default:"button"},shape:{type:String},size:{type:String},loading:{type:[Boolean,Object],default:()=>!1},disabled:{type:Boolean,default:void 0},ghost:{type:Boolean,default:void 0},block:{type:Boolean,default:void 0},danger:{type:Boolean,default:void 0},icon:hd.any,href:String,target:String,title:String,onClick:mE(),onMousedown:mE()}),yq=_q,cT=n=>{n&&(n.style.width="0px",n.style.opacity="0",n.style.transform="scale(0)")},hT=n=>{ku(()=>{n&&(n.style.width=`${n.scrollWidth}px`,n.style.opacity="1",n.style.transform="scale(1)")})},fT=n=>{n&&n.style&&(n.style.width=null,n.style.opacity=null,n.style.transform=null)},xq=Ae({compatConfig:{MODE:3},name:"LoadingIcon",props:{prefixCls:String,loading:[Boolean,Object],existIcon:Boolean},setup(n){return()=>{const{existIcon:t,prefixCls:e,loading:r}=n;if(t)return Et("span",{class:`${e}-loading-icon`},[Et(uT,null,null)]);const i=!!r;return Et(Rd,{name:`${e}-loading-icon-motion`,onBeforeEnter:cT,onEnter:hT,onAfterEnter:fT,onBeforeLeave:hT,onLeave:o=>{setTimeout(()=>{cT(o)})},onAfterLeave:fT},{default:()=>[i?Et("span",{class:`${e}-loading-icon`},[Et(uT,null,null)]):null]})}}}),dT=(n,t)=>({[`> span, > ${n}`]:{"&:not(:last-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),bq=n=>{const{componentCls:t,fontSize:e,lineWidth:r,colorPrimaryHover:i,colorErrorHover:o}=n;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-r,[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:e}},dT(`${t}-primary`,i),dT(`${t}-danger`,o)]}},Sq=bq;function Eq(n,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:-n.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function Tq(n,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function wq(n){const t=`${n.componentCls}-compact-vertical`;return{[t]:xt(xt({},Eq(n,t)),Tq(n.componentCls,t))}}const Aq=n=>{const{componentCls:t,iconCls:e}=n;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:400,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${n.lineWidth}px ${n.lineType} transparent`,cursor:"pointer",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:n.lineHeight,color:n.colorText,"> span":{display:"inline-block"},[`> ${e} + span, > span + ${e}`]:{marginInlineStart:n.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":xt({},$j(n)),[`&-icon-only${t}-compact-item`]:{flex:"none"},[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-n.lineWidth,insetInlineStart:-n.lineWidth,display:"inline-block",width:n.lineWidth,height:`calc(100% + ${n.lineWidth*2}px)`,backgroundColor:n.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-n.lineWidth,insetInlineStart:-n.lineWidth,display:"inline-block",width:`calc(100% + ${n.lineWidth*2}px)`,height:n.lineWidth,backgroundColor:n.colorPrimaryHover,content:'""'}}}}}}},Ni=(n,t)=>({"&:not(:disabled)":{"&:hover":n,"&:active":t}}),Mq=n=>({minWidth:n.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Cq=n=>({borderRadius:n.controlHeight,paddingInlineStart:n.controlHeight/2,paddingInlineEnd:n.controlHeight/2}),o_=n=>({cursor:"not-allowed",borderColor:n.colorBorder,color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,boxShadow:"none"}),dd=(n,t,e,r,i,o,a)=>({[`&${n}-background-ghost`]:xt(xt({color:t||void 0,backgroundColor:"transparent",borderColor:e||void 0,boxShadow:"none"},Ni(xt({backgroundColor:"transparent"},o),xt({backgroundColor:"transparent"},a))),{"&:disabled":{cursor:"not-allowed",color:r||void 0,borderColor:i||void 0}})}),Cy=n=>({"&:disabled":xt({},o_(n))}),DC=n=>xt({},Cy(n)),pd=n=>({"&:disabled":{cursor:"not-allowed",color:n.colorTextDisabled}}),LC=n=>xt(xt(xt(xt(xt({},DC(n)),{backgroundColor:n.colorBgContainer,borderColor:n.colorBorder,boxShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlTmpOutline}`}),Ni({color:n.colorPrimaryHover,borderColor:n.colorPrimaryHover},{color:n.colorPrimaryActive,borderColor:n.colorPrimaryActive})),dd(n.componentCls,n.colorBgContainer,n.colorBgContainer,n.colorTextDisabled,n.colorBorder)),{[`&${n.componentCls}-dangerous`]:xt(xt(xt({color:n.colorError,borderColor:n.colorError},Ni({color:n.colorErrorHover,borderColor:n.colorErrorBorderHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),dd(n.componentCls,n.colorError,n.colorError,n.colorTextDisabled,n.colorBorder)),Cy(n))}),Rq=n=>xt(xt(xt(xt(xt({},DC(n)),{color:n.colorTextLightSolid,backgroundColor:n.colorPrimary,boxShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlOutline}`}),Ni({color:n.colorTextLightSolid,backgroundColor:n.colorPrimaryHover},{color:n.colorTextLightSolid,backgroundColor:n.colorPrimaryActive})),dd(n.componentCls,n.colorPrimary,n.colorPrimary,n.colorTextDisabled,n.colorBorder,{color:n.colorPrimaryHover,borderColor:n.colorPrimaryHover},{color:n.colorPrimaryActive,borderColor:n.colorPrimaryActive})),{[`&${n.componentCls}-dangerous`]:xt(xt(xt({backgroundColor:n.colorError,boxShadow:`0 ${n.controlOutlineWidth}px 0 ${n.colorErrorOutline}`},Ni({backgroundColor:n.colorErrorHover},{backgroundColor:n.colorErrorActive})),dd(n.componentCls,n.colorError,n.colorError,n.colorTextDisabled,n.colorBorder,{color:n.colorErrorHover,borderColor:n.colorErrorHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),Cy(n))}),Pq=n=>xt(xt({},LC(n)),{borderStyle:"dashed"}),Iq=n=>xt(xt(xt({color:n.colorLink},Ni({color:n.colorLinkHover},{color:n.colorLinkActive})),pd(n)),{[`&${n.componentCls}-dangerous`]:xt(xt({color:n.colorError},Ni({color:n.colorErrorHover},{color:n.colorErrorActive})),pd(n))}),Oq=n=>xt(xt(xt({},Ni({color:n.colorText,backgroundColor:n.colorBgTextHover},{color:n.colorText,backgroundColor:n.colorBgTextActive})),pd(n)),{[`&${n.componentCls}-dangerous`]:xt(xt({color:n.colorError},pd(n)),Ni({color:n.colorErrorHover,backgroundColor:n.colorErrorBg},{color:n.colorErrorHover,backgroundColor:n.colorErrorBg}))}),Dq=n=>xt(xt({},o_(n)),{[`&${n.componentCls}:hover`]:xt({},o_(n))}),Lq=n=>{const{componentCls:t}=n;return{[`${t}-default`]:LC(n),[`${t}-primary`]:Rq(n),[`${t}-dashed`]:Pq(n),[`${t}-link`]:Iq(n),[`${t}-text`]:Oq(n),[`${t}-disabled`]:Dq(n)}},Ry=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:e,iconCls:r,controlHeight:i,fontSize:o,lineHeight:a,lineWidth:s,borderRadius:l,buttonPaddingHorizontal:u}=n,c=Math.max(0,(i-o*a)/2-s),h=u-s,f=`${e}-icon-only`;return[{[`${e}${t}`]:{fontSize:o,height:i,padding:`${c}px ${h}px`,borderRadius:l,[`&${f}`]:{width:i,paddingInlineStart:0,paddingInlineEnd:0,[`&${e}-round`]:{width:"auto"},"> span":{transform:"scale(1.143)"}},[`&${e}-loading`]:{opacity:n.opacityLoading,cursor:"default"},[`${e}-loading-icon`]:{transition:`width ${n.motionDurationSlow} ${n.motionEaseInOut}, opacity ${n.motionDurationSlow} ${n.motionEaseInOut}`},[`&:not(${f}) ${e}-loading-icon > ${r}`]:{marginInlineEnd:n.marginXS}}},{[`${e}${e}-circle${t}`]:Mq(n)},{[`${e}${e}-round${t}`]:Cq(n)}]},Nq=n=>Ry(n),Fq=n=>{const t=rc(n,{controlHeight:n.controlHeightSM,padding:n.paddingXS,buttonPaddingHorizontal:8,borderRadius:n.borderRadiusSM});return Ry(t,`${n.componentCls}-sm`)},Uq=n=>{const t=rc(n,{controlHeight:n.controlHeightLG,fontSize:n.fontSizeLG,borderRadius:n.borderRadiusLG});return Ry(t,`${n.componentCls}-lg`)},Bq=n=>{const{componentCls:t}=n;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},Gq=Zd("Button",n=>{const{controlTmpOutline:t,paddingContentHorizontal:e}=n,r=rc(n,{colorOutlineDefault:t,buttonPaddingHorizontal:e});return[Aq(r),Fq(r),Nq(r),Uq(r),Bq(r),Lq(r),Sq(r),uq(n,{focus:!1}),wq(n)]}),kq=()=>({prefixCls:String,size:{type:String}}),NC=IC(),a_=Ae({compatConfig:{MODE:3},name:"AButtonGroup",props:kq(),setup(n,t){let{slots:e}=t;const{prefixCls:r,direction:i}=sl("btn-group",n),[,,o]=Jd();NC.useProvide(Oa({size:Lt(()=>n.size)}));const a=Lt(()=>{const{size:s}=n;let l="";switch(s){case"large":l="lg";break;case"small":l="sm";break;case"middle":case void 0:break;default:dC(!s,"Button.Group","Invalid prop `size`.")}return{[`${r.value}`]:!0,[`${r.value}-${l}`]:l,[`${r.value}-rtl`]:i.value==="rtl",[o.value]:!0}});return()=>{var s;return Et("div",{class:a.value},[Lu((s=e.default)===null||s===void 0?void 0:s.call(e))])}}}),pT=/^[\u4e00-\u9fa5]{2}$/,mT=pT.test.bind(pT);function Eh(n){return n==="text"||n==="link"}const ya=Ae({compatConfig:{MODE:3},name:"AButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:KX(yq(),{type:"default"}),slots:Object,setup(n,t){let{slots:e,attrs:r,emit:i,expose:o}=t;const{prefixCls:a,autoInsertSpaceInButton:s,direction:l,size:u}=sl("btn",n),[c,h]=Gq(a),f=NC.useInject(),d=C1(),m=Lt(()=>{var D;return(D=n.disabled)!==null&&D!==void 0?D:d.value}),g=wr(null),p=wr(void 0);let v=!1;const y=wr(!1),_=wr(!1),T=Lt(()=>s.value!==!1),{compactSize:E,compactItemClassnames:S}=iq(a,l),x=Lt(()=>typeof n.loading=="object"&&n.loading.delay?n.loading.delay||!0:!!n.loading);Pi(x,D=>{clearTimeout(p.value),typeof x.value=="number"?p.value=setTimeout(()=>{y.value=D},x.value):y.value=D},{immediate:!0});const O=Lt(()=>{const{type:D,shape:B="default",ghost:q,block:Q,danger:rt}=n,$=a.value,k={large:"lg",small:"sm",middle:void 0},pt=E.value||(f==null?void 0:f.size)||u.value,J=pt&&k[pt]||"";return[S.value,{[h.value]:!0,[`${$}`]:!0,[`${$}-${B}`]:B!=="default"&&B,[`${$}-${D}`]:D,[`${$}-${J}`]:J,[`${$}-loading`]:y.value,[`${$}-background-ghost`]:q&&!Eh(D),[`${$}-two-chinese-chars`]:_.value&&T.value,[`${$}-block`]:Q,[`${$}-dangerous`]:!!rt,[`${$}-rtl`]:l.value==="rtl"}]}),b=()=>{const D=g.value;if(!D||s.value===!1)return;const B=D.textContent;v&&mT(B)?_.value||(_.value=!0):_.value&&(_.value=!1)},A=D=>{if(y.value||m.value){D.preventDefault();return}i("click",D)},N=D=>{i("mousedown",D)},U=(D,B)=>{const q=B?" ":"";if(D.type===Js){let Q=D.children.trim();return mT(Q)&&(Q=Q.split("").join(q)),Et("span",null,[Q])}return D};return E_(()=>{dC(!(n.ghost&&Eh(n.type)),"Button","`link` or `text` button can't be a `ghost` button.")}),Ui(b),JT(b),Da(()=>{p.value&&clearTimeout(p.value)}),o({focus:()=>{var D;(D=g.value)===null||D===void 0||D.focus()},blur:()=>{var D;(D=g.value)===null||D===void 0||D.blur()}}),()=>{var D,B;const{icon:q=(D=e.icon)===null||D===void 0?void 0:D.call(e)}=n,Q=Lu((B=e.default)===null||B===void 0?void 0:B.call(e));v=Q.length===1&&!q&&!Eh(n.type);const{type:rt,htmlType:$,href:k,title:pt,target:J}=n,it=y.value?"loading":q,vt=xt(xt({},r),{title:pt,disabled:m.value,class:[O.value,r.class,{[`${a.value}-icon-only`]:Q.length===0&&!!it}],onClick:A,onMousedown:N});m.value||delete vt.disabled;const gt=q&&!y.value?q:Et(xq,{existIcon:!!q,prefixCls:a.value,loading:!!y.value},null),W=Q.map(at=>U(at,v&&T.value));if(k!==void 0)return c(Et("a",ia(ia({},vt),{},{href:k,target:J,ref:g}),[gt,W]));let ft=Et("button",ia(ia({},vt),{},{ref:g,type:$}),[gt,W]);if(!Eh(rt)){const at=function(){return ft}();ft=Et(gq,{ref:"wave",disabled:!!y.value},{default:()=>[at]})}return c(ft)}}});ya.Group=a_;ya.install=function(n){return n.component(ya.name,ya),n.component(a_.name,a_),n};const tv={}.VITE_MARVIN_URI,Hq=Ae({name:"Inversify",setup(){const n=ol.get(ur.Task),t=Be(),e=Be(""),r=c=>{const h={id:"123",type:c};n.initTask(h),n.generateParams(),n.submit()},i=()=>{const c={method:"exportStructure",args:["mrv"]};t.value.contentWindow.postMessage(JSON.stringify(c),tv)},o=()=>{window.addEventListener("message",s)},a=()=>{window.removeEventListener("message",s)},s=c=>{if(c.origin===tv){const h=JSON.parse(c.data),{params:f}=h;f.method==="exportStructure"&&(e.value=h.result)}},l=()=>{o()},u=()=>{a()};return Ui(l),Da(u),{marvinRef:t,mrv:e,createTask:r,getMarvinData:i}},methods:{renderMarvin(){return Et("div",null,[Et("iframe",{ref:"marvinRef",class:"w-[600px] h-[400px]",src:`${tv}/marvin_latest/editor.html`},null)])}},render(){return Et("div",null,[this.renderMarvin(),Et("div",null,[this.mrv]),Et(ya,pv({type:"default"},{onClick:()=>this.createTask("property")}),{default:()=>[$l("Property Task")]}),Et(ya,pv({type:"primary"},{onClick:()=>this.createTask("structure")}),{default:()=>[$l("Structure Task")]}),Et(ya,{onClick:this.getMarvinData},{default:()=>[$l("marvinmrv")]})])}});var Ji=(n=>(n.HOME="HOME",n.LIST="LIST",n.TALK="TALK",n.PIXI="PIXI",n.WEBGL="WEBGL",n.VIDEO_UPLOAD="VIDEO_UPLOAD",n.INVERSIFY="INVERSIFY",n))(Ji||{});const zq=[{path:"/",name:Ji.HOME,component:rE},{path:"/list",name:Ji.LIST,component:()=>vI(()=>import("./List-a1330b99.js"),[],import.meta.url)},{path:"/talk",name:Ji.TALK,component:Y2},{path:"/pixi",name:Ji.PIXI,component:Ok},{path:"/webgl",name:Ji.WEBGL,component:rE},{path:"/video-upload",name:Ji.VIDEO_UPLOAD,component:ZV},{path:"/inversify",name:Ji.INVERSIFY,component:Hq}],Vq=_2({history:LI("./"),routes:zq});const Wq=Ae({name:"App",render(){return Et(HR("router-view"),null,null)}});mw(Wq).use(Vq).mount("#app");export{$l as a,Et as c,Ae as d};
